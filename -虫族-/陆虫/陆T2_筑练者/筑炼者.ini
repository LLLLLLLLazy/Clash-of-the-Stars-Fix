
[core]
name: 两栖蝇
altNames: 筑炼者
displayText: 筑练者
displayDescription: -建造虫族高级建筑 \n -建造T1建筑会退还50%自身价格 \n -可在水面行动
class: CustomUnitMetadata
price: 900
maxHp: 250
mass: 2000

techLevel: 2
buildSpeed: 0.005
#availableInDemo: true

radius: 8
displayRadius: 10
isBio: true
isBug: true
tags: units, 虫族, 小型虫, 两栖蝇, 一次性建造

selfRegenRate:0.1

softCollisionOnAll: 12

dieOnConstruct: true
nanoRange: 12

#showActionsWithMixedSelectionIfOtherUnitsHaveTag: 虫筑系T2

@memory 扩散建造锁定:unit


[canBuild_1]
name: 大虫巢, 终焉虫巢, 虫族资源抽取器T2
pos:  1

[canBuild_2]
name: 虫巢T2, 飞虫地巢T2, 水巢T2
pos:  2

[canBuild_3-1]
name: bugTurret
pos:  3
addResources: 450

[canBuild_3-2]
name: 虫塔T2
pos:  3.1
isVisible: if not self.globalTeamTags(includes='AI系统') or not (${HalfCorrosion} ${HalfCorrosionLimit})

[canBuild_3-3]
name: 虫高塔T2, 地震塔, 冲射虫塔, 管道虫
pos:  3.2

[canBuild_3-4]
name: 水虫塔
pos:  3.3
addResources: 450

[canBuild_3-5]
name: 眼球塔, 治愈池, 融合之卵
pos:  3.4
addResources: 450

[canBuild_3-6]
name: 永生之物
pos:  3.5

[canBuild_恐虐传送门]
name: 亚空间水晶
pos: 100
price: 混沌元素=1
addResources: 450
isVisible: if self.hasResources(混沌元素=1)


[canBuild_1+]
name: 虫族资源抽取器T2[建造指意]
pos:  1
isVisible: false

[action_腐蚀之意-扩散]
isVisible: if self.globalTeamTags(includes='腐蚀之意')
isActive: if not self.tags(includes="腐蚀之意-扩散建造虫")
price: 2600
text: 腐蚀之意 - 扩散
description: -自动寻找地图中非己方的资源池建造虫族资源抽取器T2 \n -每个建造虫会前往不同的资源池
buildSpeed: 0s
pos: 15
unitShownInUI: 虫族资源抽取器T2
iconExtraImage: 六边形.png
iconExtraColor: #AAFFFFFF
temporarilyAddTags: 腐蚀之意-扩散建造虫
isGuiBlinking: if self.tags(includes="腐蚀之意-扩散建造虫")
highPriorityQueue: true
allowMultipleInQueue: false
takeResources_includeUnitsWithinRange: 9999
takeResources_excludeUnitsWithoutTags: 资源池
takeResources_includeUnitsWithinRange_team: neutral
takeResources_triggerActionForEach: 虫族抽取器-扩散建造
takeResources_searchOnly: true
clearAllWaypoints: true
alsoQueueAction: 扩散建造锁定

[hiddenAction_虫族抽取器-扩散建造]
requireConditional: if thisActionTarget.getAsMarker.numberOfUnitsInTeam(withTag='资源提取器', withinRange=20, incompleteBuildings=true) + thisActionTarget.getAsMarker.self.numberOfUnitsInAllyNotOwnTeam(withTag='资源提取器', withinRange=20, incompleteBuildings=true)<1
addWaypoint_type: build
addWaypoint_unitType: 虫族资源抽取器T2
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_fromReference: thisActionTarget
takeResources_includeUnitsWithinRange: 9999
takeResources_excludeUnitsWithoutTags: 腐蚀之意-扩散建造虫
takeResources_includeUnitsWithinRange_team: own
takeResources_triggerActionForEach: 一次性建造优化
takeResources_searchOnly: true

[hiddenAction_扩散建造锁定]
id: 扩散建造锁定
buildSpeed: 0.01s
highPriorityQueue: true
setUnitMemory: 扩散建造锁定=activeWaypointTarget.getAsMarker
alsoTriggerAction: 扩散建造归一

[hiddenAction_扩散建造归一]
addWaypoint_type: build
addWaypoint_unitType: 虫族资源抽取器T2[建造指意]
addWaypoint_prepend: true
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_fromReference: memory.扩散建造锁定
clearAllWaypoints: true

[hiddenAction_扩散建造取消]
autoTriggerOnEvent: newWaypointGivenByPlayer, destroyed
autoTrigger: if self.tags(includes="腐蚀之意-扩散建造虫") and not self.hasActiveWaypoint(type='build')
requireConditional: if self.tags(includes="腐蚀之意-扩散建造虫") and self.numberOfQueuedWaypoints(type='build')<2
temporarilyRemoveTags: 腐蚀之意-扩散建造虫
setUnitMemory: 扩散建造锁定=null
addResources: 2600


[hiddenAction_一次性建造优化检测]
@copyFromSection: template_一次性建造优化检测

[hiddenAction_一次性建造优化]
@copyFromSection: template_一次性建造优化


[hiddenAction_水下出厂]
@copyFromSection: template_水下出厂

[graphics]
total_frames: 1
image:        new.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

[attack]
isMelee: true

canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 12
shootDelay: 30

[movement]
movementType: HOVER
moveSpeed: 1.2
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.12


maxTurnSpeed: 6.5
turnAcceleration: 0.4

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181

reverseSpeedPercentage:0





[ai]
useAsBuilder: true

[global_resource_混沌元素]
hidden: false
displayName: 混沌元素
displayColor: #FF1A00
priority: 1

[global_resource_玩家总数]
displayName: 玩家总数


[canBuild_AI3-2]
name: AI虫塔T2
pos:  3.1
isVisible: if self.globalTeamTags(includes='AI系统') and ${HalfCorrosion} ${HalfCorrosionLimit}

[hiddenAction_AI-FinalBuild]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.hasResources(30000) and not self.hasActiveWaypoint(type='build') and not self.hasActiveWaypoint(type='move') and not numberOfUnitsInTeam(withTag='终焉虫巢', greaterThan=0, incompleteBuildings=true)
addWaypoint_type: build
addWaypoint_unitType: 终焉虫巢
addWaypoint_prepend: true
addWaypoint_target_mapMustBeReachable: true
addWaypoint_position_fromAction: true
alsoTriggerAction: AIrandomMove

[hiddenAction_AIrandomMove]
addWaypoint_type: move
addWaypoint_prepend: false
addWaypoint_target_mapMustBeReachable: false
addWaypoint_position_randomOffsetFromSelf: 200,200