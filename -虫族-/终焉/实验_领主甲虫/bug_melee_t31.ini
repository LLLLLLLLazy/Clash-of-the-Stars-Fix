
[core]
name: bugMeleeT31
altNames: 领主甲虫
displayText: 领主甲虫
displayDescription: -攻击地面单位 \n -全副武装甲壳 \n -速度快

price: 21000
maxHp: 7200
mass: 30000

techLevel: 1
buildSpeed: 0.00025
selfBuildRate:0.00025
#availableInDemo: true
transportSlotsNeeded: 5
radius: 23
displayRadius: 23

experimental: true

selfRegenRate:0.2

softCollisionOnAll: 5

isBio: true
isBug: true
tags: units, 虫族, 大型虫, 大型虫-, 领主甲虫

overrideAndReplace:bugMeleeT31

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU: true

[action_Upgrade]
convertTo:君王
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:腐蚀=4500
text:腐蚀 - 镰刃
displayType:upgrade
buildSpeed:83.3s
pos:1
description:-抛弃沉重的外壳\n-死神双镰,破军如入无人之境
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
tags=腐蚀
setUnitMemory: 属性[24]=0

[hiddenAction_腐蚀中]
autoTrigger: if self.queueSize(withActionTag="腐蚀")>0 and not self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=-${movement.moveSpeed}*0.6
alsoTriggerAction: 属性变化
temporarilyAddTags: 腐蚀中

[hiddenAction_腐蚀停止]
autoTrigger: if self.queueSize(withActionTag="腐蚀")<1 and self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 腐蚀中

[hiddenAction_自动腐蚀]
autoTrigger: if (self.hasUnitInTeam(withTag="腐蚀-君王") and self.hasUnitInTeam(withTag="腐蚀之意")) and self.hasResources(${action_Upgrade.price}) and self.queueSize(empty=true) and not self.isAttacking
alsoQueueAction: Upgrade
addResourcesWithLogic: ${action_Upgrade.price}*-1


[hiddenAction_无延迟追击B]
@copyFromSection: template_无延迟追击B
[hiddenAction_无延迟追击B2]
@copyFromSection: template_无延迟追击B2

[graphics]
drawLayer: experimentals
imageScale: 0.94
total_frames: 6
image:        bug_meleet31.png
image_wreak:  bug_meleet31_dead.png
image_turret: NONE

image_shadow: AUTO_ANIMATED
shadowOffsetX:2
shadowOffsetY:2
splastEffect: true

animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 6

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 60
animation_idle_scale_start:1
animation_idle_scale_end:1.02
animation_idle_pingPong: true

animation_attack_start: 2
animation_attack_end: 5
animation_attack_speed: 4

lock_body_rotation_with_main_turret: true

[attack]
isMelee: true
meleeEngangementDistance: 150

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

#isFixedFiring: true

turretSize: 35
turretTurnSpeed: 4

maxAttackRange: 15
shootDelay: 30

[turret_1]
x: 0
y: 0
shoot_sound:large_gun_fire2
shoot_sound_vol:0.2
recoilOffset: 12
recoilOutTime: 6
recoilReturnTime: 18
shoot_light:#afafaf

[projectile_1]
tags= T-projectile
life: 50
instant: true
directDamage:170
areaDamage: 100
areaRadius: 80

[leg_1]
x: -20
y: 20
attach_x: 0
attach_y: 6
moveSpeed: 3.4
resetAngle:5
heightSpeed: 0.8
dust_effect: true
holdDisMin: 11
holdDisMax: 13
hardLimit: 22
image_leg:  leg4.png

[leg_2]
x: 20
y: 20
attach_x: 0
attach_y: 6
copyFrom: 1
[leg_3]
x: -20
y: -20
attach_x: 0
attach_y: 6
copyFrom: 1

[leg_4]
x: 20
y: -20
attach_x: 0
attach_y: 6
copyFrom: 1


[movement]
movementType: OVER_CLIFF
moveSpeed: 1.2
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.08
joinsGroupFormations: true

maxTurnSpeed: 3.1
turnAcceleration: 0.3
targetHeight: 3
targetHeightDrift: 0
moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45
slowDeathFall: true


reverseSpeedPercentage:0



[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.isControlledByAI() and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.isControlledByAI() and (self.hp(lessThan=2000))
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.isControlledByAI() and (self.hp(full=true))
addResources: unsetFlag=1

