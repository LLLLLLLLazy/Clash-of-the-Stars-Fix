
[core]
name: 提灯暗光
displayText: 提灯暗光
displayDescription: -全副武装 \n -高速猎杀地面目标 \n -检索最近目标 \n -需指挥其攻击 \n -自我修复
class: CustomUnitMetadata
price: 7000
maxHp: 1200
mass: 10000

fogOfWarSightRange: 15

tags: units, 空军
techLevel: 2

buildSpeed: 41.7s

radius: 23
softCollisionOnAll: 10

selfRegenRate: 0.06

energyMax: 20
energyRegen: 0.035
energyRegenWhenRecharging: 0.085
energyNeedsToRechargeToFull: true

transportSlotsNeeded: 2

autoTriggerCooldownTime: 0.1s

[action_睼雾黯光]
isVisible: true
text: 睼雾黯光
description: -飞行时获取550范围内一个敌方单位的视野 \n -击杀后获得目标区域的视野 \n -显示目标射程与路径 \n -点击可刷新锁定目标
pos: 1
displayType: infoOnly
buildSpeed: 0s
takeResources: setFlag=1
takeResources_includeReference: attachment
takeResources_discardCollected: true

[attachment_睼雾黯光]
x: 0
y: 0
onCreateSpawnUnitOf: 睼雾黯光

[hiddenAction_提灯暗光]
autoTriggerOnEvent: killedAnyUnit
fireTurretXAtGround: fake
fireTurretXAtGround_withProjectile: 暗光
fireTurretXAtGround_withTarget: eventSource


[hiddenAction_energyRegen]
addResources: energy=0.3
autoTrigger: if not self.isAttacking and not self.isEnergyFull and not self.isEnergyRecharging

[decal_1]
layer: beforeUI
image: 圆.png
color: #4C0099
alpha: 0.8
onlyTeam: ally
alwaysStartHeightAtZero: true
basePosition: attachment.attacking
imageScale: attachment.attacking.readUnitMemory("属性", type='float', index=4)/150

[decal_2]
layer: beforeUI
image: SHARED:blank.png
color: #4C0099
alpha: 0.8
onlyTeam: ally
basePosition: attachment.attacking
drawLineTo: attachment.attacking.activeWaypointTarget

[graphics]
total_frames: 1

image:        提灯暗光.png
image_wreak: 提灯暗光残骸.png
image_turret: NONE

image_shadow:AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:projectileTrail2
movementEffectRate: 4

[effect_projectileTrail2]
createWhenZoomedOut: false
stripIndex: effects
frameIndex: 0
priority:verylow

life: 24
fadeOut: true
attachedToUnit: false
color: #000000
fadeInTime:3
scaleFrom: 1.8
scaleTo: 1.4
alpha: 0.8
drawUnderUnits: true
ySpeedRelative:-0.8
atmospheric: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:  if self.flying
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 20

maxAttackRange: 340
shootDelay: 8

aimOffsetSpread: 0

attackMovement:bomber

[turret_fake]
x:0
y:0
canShoot:false

[turret_1]
x: -8
y: 5
idleDir: 0

turnSpeed: 8.0
turnSpeedAcceleration: 2.0

shoot_sound:gun_fire
shoot_sound_vol:0.2

energyUsage: 1

recoilOffset: 0
attachedTo:fake
slave:true

[turret_2]
x: 8
y: 5
copyFrom: 1

[projectile_1]
areaDamage: 35
areaRadius: 35
areaDamageNoFalloff: true
targetGround: true
targetGroundSpread: 35
targetGround_includeTargetHeight: true
life: 200
speed: 10
targetSpeed: 17
frame: 5
drawSize: 0.8

color: #C8000000
lightColor: #000000
lightSize: 0.3

trailEffect: CUSTOM:尾光
trailEffectRate:0.5

explodeEffect: CUSTOM:projectilePassThough, CUSTOM:shockwave, CUSTOM:hitLightFlash

effectOnCreate: CUSTOM:projectileLight
spawnProjectilesOnExplode:爆炸效果

[projectile_暗光]
life: 5
instant: true
invisible: true

explodeEffect: 暗圈, 暗圈2, 暗圈3, 暗圈4, 暗圈
explodeEffectOnShield: 暗圈, 暗圈2, 暗圈3, 暗圈4, 暗圈

areaDamage: 0
areaRadius: 0
spawnUnit: 视野(addResources=setFlag:1)

[effect_尾光]
createWhenZoomedOut: false
priority:low
image: 紫光.png
life: 14
fadeOut: true
attachedToUnit: false
fadeInTime: 1
scaleFrom: 0.6
scaleTo: 0.4
alpha: 0.6
color:#0F0F0F
drawUnderUnits: true
ySpeedRelative:-0.2
atmospheric: true

[effect_projectileLight]
priority:low

image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: true
color: #000000
fadeInTime:2
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.5
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:low

image: SHARED:light_50.png
life: 19
fadeOut: true
attachedToUnit: false
color: #000000

scaleFrom: 1.3
scaleTo: 1.3
alpha: 0.6
drawUnderUnits:false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0.8
scaleTo: 0.5
alpha: 0.9
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1.2
color: #0F0F0F
dirSpeedRandom: 5

[projectile_爆炸效果]
directDamage:0
largeHitEffect: true
life:10
invisible:true
instant:true
explodeEffectOnShield:NONE


[effect_暗圈]
priority: low
stripIndex: shockwave_large
attachedToUnit: false
showInFog: true
life: 15
scaleFrom: 1
scaleTo: 1.04
color: #000000
alpha: 0.4
dirSpeed: 5

[effect_暗圈2]
@copyFromSection: effect_暗圈
delayedStartTimer: 2
scaleFrom: 2.04
scaleTo: 2.08

[effect_暗圈3]
@copyFromSection: effect_暗圈
delayedStartTimer: 4
scaleFrom: 3.08
scaleTo: 3.12

[effect_暗圈4]
@copyFromSection: effect_暗圈
delayedStartTimer: 6
scaleFrom: 4.12
scaleTo: 4.16

[effect_暗圈5]
@copyFromSection: effect_暗圈
delayedStartTimer: 8
scaleFrom: 5.16
scaleTo: 5.2


[movement]
movementType: AIR
moveSpeed: 4.0
moveAccelerationSpeed: 0.06
moveDecelerationSpeed: 0.045
slowDeathFall: true
landOnGround: onlyIdle
targetHeight: 20
joinsGroupFormations: false

maxTurnSpeed: 2.7
turnAcceleration: 0.09

moveSlidingMode :true
moveIgnoringBody:false