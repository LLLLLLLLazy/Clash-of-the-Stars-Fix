
[core]


name:未来高斯战车

displayText: 高斯战车
displayDescription:-贯穿性激光\n-只对地\n-造成弱击退\n-对建筑稍强\n(原:量子激光坦克)
#showInEditor:false

class: CustomUnitMetadata
price: 7500, 量子碳=200
maxHp: 1800
mass: 25000
tags: units
transportSlotsNeeded:2
techLevel: 2
buildSpeed: 16.7s
#availableInDemo: true
#tags:量子防空车
radius: 27
displayRadius: 28
shieldRenderRadius: 29
energyMax:100
isBio: false

maxShield:1600
shieldRegen:0.3
@memory targetX:float
@memory targetY:float
@memory targetY2:float
@memory targetX2:float
@memory 光束起始点:unit
@memory 距离:float
fogOfWarSightRange:18

[resource_触发]
hidden:true

[hiddenAction_1]
autoTriggerOnEvent: newMessage(withTag='攻击标记')
@define target: getOffsetRelative(y=15, dirOffset=directionBetween(self, eventData(name='攻击', type='unit'))-self.dir)
setUnitMemory:targetY=${target}.y, targetX=${target}.x, targetY2=${target}.y, targetX2=${target}.x, 光束起始点=self.getAsMarker, 距离=distanceBetween(self, ${target})
#alsoQueueAction:2

addResources:ammo=30
#[hiddenAction_2]
#buildSpeed:0.1s
#whenBuilding_rotateTo_waitTillRotated:true
#whenBuilding_rotateTo_aimAtActionTarget:createMarker(memory.targetX,memory.targetY)

alsoQueueAction:3


[hiddenAction_3]
buildSpeed:0.04s

setUnitMemory:targetY=(memory.targetY)+((memory.targetY2-memory.光束起始点.y)/(memory.距离)*15), targetX=(memory.targetX)+((memory.targetX2-memory.光束起始点.x)/(memory.距离)*15)

fireTurretXAtGround:2
fireTurretXAtGround_withTarget:createMarker(x=memory.targetX,y=memory.targetY)

addResources:ammo=-1

alsoQueueAction:3

alsoTriggerOrQueueActionConditional:if self.ammo>0

[graphics]
total_frames: 4

image:        身体.png
image_wreak:  死.png
image_turret: 激光炮.png


imageScale:0.9
turretImageScale:1

image_shadow: auto
shadowOffsetX:4
shadowOffsetY:4


splastEffect:true

animation_moving_start: 0
animation_moving_end: 3
animation_moving_speed: 2
dustEffect: true

showQueueBar:false
[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false


#turrrtTurnSpeed:1.2

maxAttackRange: 285
shootDelay: 140
aimOffsetSpread:0

[turret_1]
#
x: 0
y: 0

projectile: 1

turnSpeed: 2.1
turnSpeedAcceleration: 0.3

canShoot: true


shoot_sound:big_laserFire.wav


#chargeEffectImage: SHARED:lighting_charge.png
#warmup:30
#onShoot_triggerActions:1

invisible:true

size:12
[turret_2]
x:0
y:0
attachedTo:1
slave:true
linkDelayWithTurret:1

projectile: 2
size:12

shoot_sound:laser.wav
shoot_sound_vol:0.1
#shoot_flame:
shoot_light:#00F8FF


#onShoot_triggerActions:转换

canShoot:false

#onShoot_freezeBodyMovementFor:0.2s
turnSpeed:2

[projectile_1]
tags= T-projectile
areaIgnoreUnitsCloserThan: 1
areaDamage: 135
areaRadius: 0
invisible: true
life: 100
speed: 999
targetGround: true
explodeEffect: NONE
explodeEffectOnShield: NONE
buildingDamageMultiplier: 1.25
leadTargetingSpeedCalculation: 4.8
spawnUnit: 攻击点(addResources=setFlag:0)

[projectile_2]
tags= T-projectile
life:5
areaDamage:135
areaRadius:40

buildingDamageMultiplier: 1.25

pushVelocity: 1

beamImage:      激光.png
beamImageEnd:   充能.png
beamImageStart: 蓝激光点.png

instant:true

explodeEffect:custom:charg,custom:1,custom:2,custom:亮



[effect_3]
life:10
image:SHARED:light_50.png
color:#00F8FF
attachedToUnit:false
alpha:2
scaleFrom:1
scaleTo:0.1

[effect_charg]
life:18
image:小爆炸.png

scaleFrom:0.6
scaleTo:2
alpha:0.7

dirOffsetRandom:361
drawUnderUnits: true
[effect_1]
life:40
image:SHARED:light_50.png
scaleFrom:1
scaleTo:0.2
alpha:0.7

color:#00F8FF


[effect_2]
life:10
image:SHARED:light_50.png
scaleFrom:1.5
scaleTo:2.1
alpha:0.7

color:#00F8FF
[effect_亮]

life:8
image:炸.png

fadeOut:true

alpha:0.3
xOffsetRelativeRandom:1
yOffsetRelativeRandom:1
alwayStartDirAtZero:true
scaleFrom:0.12
scaleTo:0.12

priority:critical


[effect_charge1]
life:30
image:能量.png

scaleFrom:0.8
scaleTo:0
fadeOut:false
dirOffsetRandom:361

delayedStartTimerRandom:30

[movement]
movementType:LAND
moveSpeed:0.55
moveAccelerationSpeed:0.05
moveDecelerationSpeed:0.1

reverseSpeedPercentage:1

maxTurnSpeed:1
turnAcceleration:0.1

moveSlidingMode:false
moveIgnoringBody:false



[global_resource_量子碳]
hidden: false
displayName: 量子碳
displayColor: #00F8FF