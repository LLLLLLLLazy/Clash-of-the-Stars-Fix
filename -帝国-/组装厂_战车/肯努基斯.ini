
[core]
name: 肯努基斯
displayDescription: -全副武装\n-主炮造成范围伤害\n-帝国撕裂弹:对护盾三倍伤害\n-配备防空机枪\n-帝国的钢铁洪流\n-对地范围: ${turret_1.limitingRange}

price: 3500
maxHp: 2400
mass: 13000

armour: 7
armourMinDamageToKeep: 7

radius: 20
displayRadius: 22
buildSpeed: 18.5s

energyMax: 1
energyRegen: 0

tags: units, 坦克


[action_能量攻击]
isVisible: if self.energy >= 1
text: 能量倾泻 - 攻击
description: -3s内攻速变为三倍 \n -仅能使用任意一次技能 \n -技能结束后血量上限减少25%
buildSpeed: 0.1s
price: energy=1
displayType: action
setUnitMemory: 属性[2]=memory.属性[2]+3
alsoTriggerAction: 属性变化
addResources: setFlag=2
#temporarilyAddTags: 能量倾泻-攻击

resetCustomTimer: true
allowMultipleInQueue: false
highPriorityQueue: true
playSoundAtUnit: large_gun_fire3.ogg
spawnEffects: CUSTOM:hitLightFlash, CUSTOM:能量波, CUSTOM:微能光, CUSTOM:红光散*4

[action_能量防御]
@copyFromSection: action_能量攻击
text: 能量倾泻 - 防御
description: -3s内血盾变为四倍 \n -仅能使用任意一次技能 \n -技能结束后血量上限减少25%
setUnitMemory: 属性[27]=memory.属性[27]+4, 属性[28]=memory.属性[28]+4
alsoTriggerAction: 属性变化
addResources: setFlag=3
#temporarilyAddTags: 能量倾泻-防御


[action_upgrade?]
isVisible: if self.kills(greaterThan=0) and not self.hasFlag(id=1)
addResources: setFlag=1
price:  700
text: 准备 - 阿尔法改装
description: -完成改装工作 \n -但不会立刻转变 \n -使用多功能射束攻击 \n -对护盾单位伤害减半 \n -装甲减轻替换为防护盾 \n -获得自我修复能力 \n -视野提升
descriptionAddUnitStats: 肯努基斯[光束炮]
unitShownInUI: 肯努基斯[光束炮]
displayType: upgrade
buildSpeed: 18.5s
allowMultipleInQueue: false
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

[action_upgrade!]
isVisible: if self.hasFlag(id=1)
isGuiBlinking: true
convertTo: 肯努基斯[光束炮]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
text: 阿尔法改装
description: -正常完成改装会回复能量倾泻造成的碎甲状态 \n -在能量倾泻持续时间中完成改装会使α进入能量倾泻状态 \n -并重置能量倾泻的持续时间 \n 
descriptionAddFromUnit: 肯努基斯[光束炮]
descriptionAddUnitStats: ${section.convertTo}
displayType: upgrade
buildSpeed: 2.9s
addResources: energy=12, unsetFlag=1
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

spawnEffects: CUSTOM:light
alsoTriggerAction: 碎甲回复, 能量倾泻状态
resetCustomTimer: true

[hiddenAction_碎甲回复]
requireConditional: if self.tags(includes='碎甲')
setUnitMemory: 属性[27]=memory.属性[27] + 0.25

[hiddenAction_能量倾泻状态]
requireConditional: if self.customTimer<=3
spawnEffects: CUSTOM:hitLightFlash, CUSTOM:能量波, CUSTOM:微能光, CUSTOM:红光散*4

[effect_light]
priority:high

image: SHARED:light_50.png
life: 50
fadeOut: true
attachedToUnit: true
color: #ff0000

scaleFrom: 2.5
scaleTo: 0.5
alpha: 1.0
drawUnderUnits:false

[hiddenAction_能量倾泻-攻击结束]
autoTrigger: if self.customTimer(laterThanSeconds=3) and self.hasFlag(id=2)
setUnitMemory: 属性[27]=memory.属性[27] - 0.25, 属性[2]=memory.属性[2] - 3
alsoTriggerAction: 属性变化
addResources: unsetFlag=2
temporarilyAddTags: 碎甲
spawnEffects: CUSTOM:sparks2*8, CUSTOM:hitLightFlash, CUSTOM:shockwave2

[hiddenAction_能量倾泻-防御结束]
autoTrigger: if self.customTimer(laterThanSeconds=3) and self.hasFlag(id=3)
setUnitMemory: 属性[27]=memory.属性[27] - 4.25, 属性[28]=memory.属性[28] - 4
alsoTriggerAction: 属性变化
addResources: unsetFlag=3
temporarilyAddTags: 碎甲
spawnEffects: CUSTOM:sparks2*8, CUSTOM:hitLightFlash, CUSTOM:shockwave2

[decal_碎甲]
layer: afterBody
order: 0.2
image: 肯努基斯碎甲.png
isVisible: if self.tags(includes='碎甲')
alwayStartDirAtZero: false
onlyWhileAlive: true
imageScale: 1.0
teamColors: true

[graphics]
image: 肯努基斯.png
image_wreak: 肯努基斯_死亡.png
image_turret: 风油精1.png

#scaleImagesTo: 40
#scaleTurretImagesTo: 20

total_frames: 3
animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 3

teamColorsOnTurret: true

dustEffect: true

image_shadow: AUTO
shadowOffsetX: 2
shadowOffsetY: 2

[attack]
canAttack: true
canAttackLandUnits: true
canAttackFlyingUnits: true
canAttackUnderwaterUnits: false

maxAttackRange: 240
turretTurnSpeed: 3

turretMultiTargeting: true
aimOffsetSpread: 0.6

[turret_1]
#coil
x: 0
y: 5
barrelX: 0
barrelY: 15
attachedTo: 2
slave: true

projectile: 3

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound: large_gun_fire1
shoot_sound_vol: 0.5
shoot_flame: large,CUSTOM:sparks*3
shoot_light: #A10000

canShoot: true

canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false

delay: 85

limitingRange: 190

image: 风油精2.png

recoilOffset: -3
recoilOutTime: 5
recoilReturnTime: 40


[turret_2]
#turret
x: 0
y: 0

canShoot: false
canAttackFlyingUnits: false
limitingRange: 190

turnSpeed: 2.5
turnSpeedAcceleration: 0.18
turnSpeedDeceleration: 0.35

recoilOffset: -0.75
recoilOutTime: 3
recoilReturnTime: 17

[projectile_3]
tags= T-projectile
areaDamage: 200
areaRadius: 30
#areaDamageNoFalloff: true
areaRadiusFromEdge: true
speed: 5.5
life: 60
frame: 11
drawSize: 1
largeHitEffect: true
trailEffect: CUSTOM:projectileTrail2
trailEffectRate: 0.5
lightColor: #FFD9D9
lightSize: 0.4
shieldDamageMultiplier: 3
explodeEffect: CUSTOM:lightningShock,CUSTOM:shockwave,CUSTOM:sparks*3
explodeEffectOnShield: CUSTOM:lightningShock,CUSTOM:shockwave,CUSTOM:hitLightFlash
spawnProjectilesOnExplode: 爆炸效果

[effect_projectileTrail2]
createWhenZoomedOut: false
priority: low
image: SHARED:light_50.png
life: 24
fadeOut: true
attachedToUnit: false
color: #A10000
fadeInTime: 0
scaleFrom: 0.55
scaleTo: 0.2
alpha: 0.24
atmospheric: true

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #90003C
dirSpeed: 5

[projectile_爆炸效果]
tags= T-projectile
directDamage: 0
largeHitEffect: true
life: 0
explodeOnEndOfLife: true
explodeEffectOnShield: NONE

[turret_3]
x: -3
y: 0
invisible: false
attachedTo: 2
projectile: 2
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: false
image: null.png
turnSpeed: 4
shouldResetTurret: true
delay: 0.2s
shoot_flame: CUSTOM:verySmallFlame
shoot_sound: tank_firing
shoot_sound_vol: 0.2
#barrelX: 2
barrelY: 0
#barrelOffsetX_onOddShots: -2

[projectile_2]
tags= T-projectile
directDamage: 20
trailEffect: true
trailEffectRate: 10
life: 150
speed: 7
frame: 5
drawSize: 0.6

[movement]
movementType: LAND
moveSpeed: 0.6
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.06

reverseSpeedPercentage: 1.0

maxTurnSpeed: 1.4
turnAcceleration: 0.15

moveSlidingMode : false
moveIgnoringBody: false

[effect_hitLightFlash]
priority: high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #A10000

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits: false

[effect_lightningShock]
life: 60

xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom: 180

fadeInTime: 0
fadeOut: false

attachedToUnit: false

color: #A10000
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2

alpha: 0.6

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #A10000


[effect_sparks2]
attachedToUnit: false
life: 150
lifeRandom: 25
physics: true
xSpeedRelativeRandom: 0.9
ySpeedRelativeRandom: 0.9
hSpeed: 1.6
hSpeedRandom: 0.2
physicsGravity: 0.8

scaleFrom: 2
scaleTo: 2

image: SHARED:spark.png
priority: verylow
color: #A10000

xOffsetRelativeRandom: 18
yOffsetRelativeRandom: 18
delayedStartTimerRandom: 10

[effect_lightSlowFade]

image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8

scaleFrom: 0.3
scaleTo: 0.2

alpha: 1.7


[effect_能量波]
stripIndex: shockwave
life: 180
fadeInTime: 8
scaleFrom: 0.3
scaleTo: 1.5
alpha: 0.6
color: #A10057
dirSpeed: 5

[effect_微能光]
stripIndex: light_50
life: 180
scaleFrom: 1.5
scaleTo: 1.5
alpha: 0.25
fadeOut: false
color: #A10057
dirSpeed: 5

[effect_红光散]
stripIndex: light_50
life: 80
fadeOut: true
attachedToUnit: false
color: #FF0000
fadeInTime: 15
scaleFrom: 0.5
scaleTo: 0.8
alpha: 0.5
hSpeed: 0.3
dirOffsetRandom: 180
xSpeedRelativeRandom: 0.8
ySpeedRelativeRandom: 0.5
xOffsetRelativeRandom: 18
yOffsetRelativeRandom: 18
atmospheric: true

[effect_shockwave2]
stripIndex: shockwave
life: 20
scaleFrom: 0
scaleTo: 1.2
color: #90003C
dirSpeed: 5


[effect_verySmallFlame]
life: 20

attachedToUnit: true
atmospheric: true

stripIndex: 3

animateFrameStart: 0
animateFrameEnd: 3
animateFrameSpeed: 0.5


alpha:1
scaleFrom: 0.6
scaleTo: 0.6
