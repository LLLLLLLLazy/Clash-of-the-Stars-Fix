
[core]
name: 能源炮
displayDescription: -远程攻击地面单位 \n -充能防护盾 \n -缓慢自我修复 \n -只能建造在资源池上 \n -建造完成需要一段时间部署攻击 \n -每1能源供应增长10攻击范围，5护盾恢复，0.08能量恢复/每秒 \n -攻击范围上限:320 \n -6能源供应后可对空攻击
mass: 9000

price: 700
maxHp: 900

maxShield: 500
shieldRegen: 0.05
startShieldAtZero: true

selfRegenRate: 0.03

generation_credits: 9
generation_delay: 40

#footprint used for collisions with units (left, up, right, down)
footprint: 0,0,0,0

#used for placement, and placement of other buildings
constructionFootprint: 0,0,0,0

buildingSelectionOffset:4

tags: units, 资源提取器, 能源炮

techLevel: 1
buildSpeed: 0.0010

radius: 18
displayRadius:20

isBuilding: true

placeOnlyOnResPool: true

numBitsOnDeath: 16
hideScorchMark: true

effectOnDeath: resourcePoolSmoke
explodeTypeOnDeath: buildingNoShockwaveOrSmoke


energyMax: 1
energyRegen: 0.02
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 6

[hiddenAction_创建]
autoTriggerOnEvent: created
alsoQueueAction: 起始构建

[hiddenAction_构建特效]
autoTrigger: if self.customTimer>0.5 and self.queueSize(withActionTag='构建中')>0
spawnEffects: 苍方源
resetCustomTimer: true

[action_起始构建]
isVisible: if not self.hasFlag(id=1)
isActive: false
id: 构建中
tags=${section.id}
text: ${section.id}
displayType: action
buildSpeed: 20s
pos: 0
convertTo: 能源炮
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
canPlayerCancel: false
isAlsoViewableByAllies: true
addResources: setFlag=1


[hiddenAction_能源供应]
autoTrigger: if not self.isEnergyFull or not self.shield(full=true)
addResourcesWithLogic: energy=self.resource.能源供应 * 0.008, shield=self.resource.能源供应 * 0.5


[hiddenAction_供应加成]
autoTrigger: if self.resource(type="能源供应", greaterThan=0) and memory.属性[20]!=min(self.resource.能源供应*10, 60)
setUnitMemory: 属性[20]=min(self.resource.能源供应*10, 60)
alsoTriggerAction: 属性变化

[hiddenAction_失去供应]
autoTrigger: if self.resource(type="能源供应", lessThan=1) and memory.属性[20]!=0
setUnitMemory: 属性[20]=0
alsoTriggerAction: 属性变化


[global_resource_能源供应]
hidden: false
displayName: 能源供应
displayColor: #33FFF1
priority: 0.9


[effect_苍方源]
@copyFromSection: effect_苍方形2
@define value: 1
hOffset: -5

[effect_苍方形2]
@define value: 2
priority: high
image: 方形.png
life: 15
fadeOut: false
scaleFrom: ${(0.25*(value-1))}
scaleTo: ${(0.25*value)}
alpha: 0.8
hSpeed: 0.2
alsoEmitEffectsOnDeath: 苍方形${value+1}, 苍方降${value+1}

[effect_苍方形3]
@copyFromSection: effect_苍方形2
@define value: 3
alsoEmitEffectsOnDeath: 苍方降${value+1}

[effect_苍方形4]
@copyFromSection: effect_苍方形2
@define value: 4
fadeOut: true
alsoEmitEffectsOnDeath: NONE

[effect_苍方降2]
@define value: 2
priority: high
image: 方形.png
life: 30
scaleFrom: ${(0.25*(value-1))}
scaleTo: ${(0.25*(value-1))}
alpha: 0.8
hSpeed: 0.2

[effect_苍方降3]
@copyFromSection: effect_苍方降2
@define value: 3

[effect_苍方降4]
@copyFromSection: effect_苍方降2
@define value: 4


[arm_4]
x: 0
y: 0
spinRate: 1

[arm_5]
x: 0
y: 0
spinRate: -1

[decal_苍圆]
onlyWhileAlive: true
order: 0.5
layer: afterBody
imageScale: 1.2
image: 罩.png
color: #48EFFF
alpha: 0.2
yOffsetAbsolute: 2
basePositionFromLegEnd: arm_4

[decal_苍圆2]
@copyFromSection: decal_苍圆
layer: shadow
imageScale: 0.95
color: #2BCEFF
basePositionFromLegEnd: arm_5


[graphics]
total_frames: 1
image:        能源炮底座.png
image_back:  苍蓝底座.png
image_wreak: extractor_dead.png
image_back_always_use_full_image: true

[decal_炮台]
onlyOnNonPreview: true
onlyWhileAlive: true
order: 0.1
layer: afterBody
image: 能源炮炮台.png
alpha: select( self.hasFlag(id=1), 1, min(self.timeAlive/20, 1) )
basePositionFromTurret: 1

[decal_炮台预览]
onlyInPreview: true
order: 0.2
layer: afterBody
image: 能源炮炮台.png
basePositionFromTurret: 1


[attack]
canAttack: true
canAttackFlyingUnits: if self.resource.能源供应 >= 6 and self.hasFlag(id=1)
canAttackLandUnits:   if self.hasFlag(id=1)
canAttackUnderwaterUnits: false

turretSize: 25
turretTurnSpeed: 5

maxAttackRange: 260
shootDelay: 1

aimOffsetSpread: 0.1

[turret_1]
x: 0
y: 12

#shoot_sound:firing3
#shoot_sound_vol:0.3
shoot_flame:CUSTOM:lightSlowFade
shoot_light:#ffffff

#idleSpin: 0.8

shouldResetTurret: false

idleSweepAngle:20
idleSweepDelay:210
idleSweepSpeed:0.2


recoilOffset: -2
recoilOutTime: 6
recoilReturnTime: 12

warmup: 7
warmupStartEffect: CUSTOM:shockwave*1

chargeEffectImage: SHARED:lighting_charge.png

energyUsage: 1

[projectile_1]
tags= T-projectile
directDamage: 50
life: 80
speed: 0
targetSpeed: 16
targetSpeedAcceleration: 0.7

drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2

lightColor: #63e6e8
initialUnguidedSpeedHeight: 0.8
gravity: 0.1
lightCastOnGround: true

explodeEffect: CUSTOM:projectilePassThough, CUSTOM:explodeSmall, CUSTOM:hitLightFlash, 能量散*3

explodeEffectOnShield: CUSTOM:hitLightFlash, 能量散*3

effectOnCreate: CUSTOM:projectileLight



[effect_warmup]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.3
scaleTo: 0.1
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:3.9

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 50
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true


[effect_projectileTrail]
stripIndex: effects
frameIndex: 0

life: 32
fadeOut: true
#attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.5
scaleTo: 0.3
alpha: 0.6
drawUnderUnits:true
ySpeedRelative:-2

[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 0.3
scaleTo: 0.8
alpha: 0.8
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_explodeSmall]
life: 25
attachedToUnit: true
image: ROOT:/素材/白爆.png
scaleFrom: 0.9
scaleTo: 0.9
alpha: 0.8
color: #63e6e8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 1
scaleTo: 0.5
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_能量散]
priority: verylow
stripIndex: effects
frameIndex: 0
life: 25
lifeRandom: 5
attachedToUnit: false
color: #63e6e8
fadeInTime: 5
scaleFrom: 0.5
scaleTo: 0.2
alpha: 0.6
xOffsetRelativeRandom: 3
yOffsetRelativeRandom: 3
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2


[effect_shockwave]
stripIndex: shockwave
life: 8
scaleFrom: 1.0
scaleTo: 0
color: #63e6e8

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
#ai adds extra rules for placeOnlyOnResPool type units

buildPriority: 0.4

recommendedInEachBasePriorityIfUnmet:0.55
recommendedInEachBaseNum: 2

noneInBaseExtraPriority: 0.43

#noneGlobalExtraPriority: 0.3



maxEachBase: 99

#for the other extractors copying this
upgradedFrom: extractorT1






