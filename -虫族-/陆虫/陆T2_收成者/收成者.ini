
[core]
name: 收成者
displayDescription: -快速回收己方单位与资源 \n-分泌修复液治疗己方单位 \n-生产资源 \n-可升级为邪恶之卵
class: CustomUnitMetadata
price: 6000
maxHp: 1600
mass: 15000

techLevel: 2
buildSpeed: 21.7s

radius: 20
displayRadius: 20
isBio: true
isBug: true
isBuilder: true
tags: units, 虫族, 中型虫, 修复点, 固定射击

energyMax: 10
energyRegen: 0.016

selfRegenRate:0.1

generation_credits: 4
generation_delay: 40

softCollisionOnAll: 12

transportSlotsNeeded: 2

autoRepair: true
canRepairBuildings: true
canRepairUnits : true

nanoRange: 150
nanoBuildSpeed: 0.5
nanoRepairSpeed: 0.3
nanoReclaimSpeed: 8
resourceReclaimMultiplier: 8

canReclaimResources: true

[action_Upgrade]
convertTo: 邪恶之卵
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:30000
text:腐蚀 - 恶意
displayType:upgrade
buildSpeed:166.6s
pos:-1
description:-占天时而无地利?\n-邪恶的聚合体,无息的腐蚀者\n-协助腐蚀的扩张\n(转换后被视为腐蚀单位)
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 270
whenBuilding_rotateTo_waitTillRotated: true

alsoTriggerAction: 脱离眠梦枕
alsoTriggerOrQueueActionConditional: if self.hasParent(withTag="眠梦枕")

[hiddenAction_脱离眠梦枕]
disconnectFromParent: true

[action_1]
isActive: false
displayType: infoOnly
text: 治疗
description: -范围治疗附近己方单位 \n -对大体型虫族效果更佳 \n 治疗: 300 | 范围: 100 | 随距离衰减 | 边缘计算
autoTrigger: if self.isEnergyFull()
addResources: energy=-10
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 1
buildSpeed: 0
pos: 0

[canBuild_1]
name: reclaim
pos:  1

[graphics]
imageScale: 1
total_frames: 1
image:        bug_generator.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9
#AUTO
image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 60
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 30
turretTurnSpeed: 1

maxAttackRange: 150
shootDelay: 30

[turret_1]
#nano turret (nano must be slot 1)
x: 0
y: 0
invisible: true
warmup:30

canShoot: true
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
isMainNanoTurret: true
projectile: null

turnSpeedAcceleration: 0.08

[turret_2]
x: 0
y: 0
invisible: true
delay: 300
limitingRange: 100
interceptProjectiles_withTags: 范围显示
interceptProjectiles_andTargetingGroundUnderDistance: ${section.limitingRange}

[projectile_1]
tags= T-projectile
areaDamage:-300
areaRadius:100
areaRadiusFromEdge: true
areaHitAirAndLandAtSameTime:true
life:50
instant: true
targetGround:true
friendlyFire:only-ignoreEnemy
explodeEffect: CUSTOM:shockwave
mutatorX_ifUnitWithTags: 大型虫
mutatorX_areaDamageMultiplier: 1.5
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

[projectile_null]
tags= T-projectile
areaDamage: 0
areaRadius: 0
invisible: true
life: 0
speed: 0
deflectionPower: -1
explodeEffect: NONE

[effect_shockwave]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 2
color: #DEBE5BFF
drawUnderUnits: true

[leg_1]
x: -8
y: 22
attach_x: 0
attach_y: 16
moveSpeed: 1.3
rotateSpeed: 6
resetAngle:5
heightSpeed: 0.8
dust_effect: false
holdDisMin: 1
holdDisMax: 1
image_leg:  leg.png

[leg_2]
x: 8
y: 22
attach_x: 0
attach_y: 16
copyFrom: 1

[leg_3]
x: -12
y: 15
attach_x: 0
attach_y: 16
copyFrom: 1

[leg_4]
x: 12
y: 15
attach_x: 0
attach_y: 16
copyFrom: 1

[leg_5]
x: -12
y: 8
attach_x: 0
attach_y: 16
copyFrom: 1

[leg_6]
x: 12
y: 8
attach_x: 0
attach_y: 16
copyFrom: 1

[movement]
movementType: LAND
moveSpeed: 0.3
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.12

maxTurnSpeed: 2.0
turnAcceleration: 0.02

moveSlidingMode :false
moveIgnoringBody:false
moveSlidingDir:  181

reverseSpeedPercentage:0

[ai]
useAsBuilder: true

[hiddenAction_AI-LarvaRecycle]
autoTrigger: if self.globalTeamTags(includes='AI系统') and numberOfUnitsInTeam(withTag='群虫幼体', greaterThan=0) and not self.hasActiveWaypoint(type='reclaim') and self.globalTeamTags(includes='战隙{I}')
addWaypoint_type: reclaim
addWaypoint_prepend: true
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_nearestUnit_tagged: 群虫幼体
addWaypoint_target_nearestUnit_team: any

[hiddenAction_AIupgrade]
autoTrigger:if self.globalTeamTags(includes='AI系统') and self.hasResources(60000) and self.queueSize(empty=true) and self.globalTeamTags(includes='战隙{I}')
alsoQueueAction: Upgrade
addResources: credits=-40000