
[core]
name: 耀斑
displayDescription: "以光明之矛将敌人四分五裂"
price: 50000
maxHp: 3250
mass: 99999
armour: 204
armourMinDamageToKeep: 102
maxShield:870
shieldRegen:3
shieldRenderRadius:22
tags: units, 星空舰载机
borrowResourcesWhileAlive: 星空舰载机=1
selfRegenRate:1

techLevel: 1
buildSpeed: 0.001

fogOfWarSightRange:33

canNotBeGivenOrdersByPlayer: true
transportSlotsNeeded: 99

radius: 18
softCollisionOnAll: 30

energyMax: 5
energyRegen: 0.05

autoTriggerCooldownTime: 0.11s

effectOnDeath: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:sparks*5, CUSTOM:sparks2*5
numBitsOnDeath: 0

[hiddenAction_$运输]
@copyFrom_skipThisSection:true

[hiddenAction_move]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 1.5s
addWaypoint_target_nearestUnit_tagged: 星空
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 3000
autoTrigger: if not self.hasActiveWaypoint(type='guard') and (not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=300) or numberOfUnitsInTeam(lessThan=1, withTag='星空', withinRange=900) and numberOfUnitsInTeam(greaterThan=0, withTag='星空'))

[hiddenAction_wander]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInTeam(lessThan=1, withTag='星空')
resetCustomTimer:true
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:200,200
addWaypoint_target_mapMustBeReachable:true
addWaypoint_maxTime: 3s

[hiddenAction_circle]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInEnemyTeam(greaterThan=0,withinRange=100)
resetCustomTimer:true
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:250,250
addWaypoint_target_mapMustBeReachable:true
addWaypoint_maxTime: 1s
[hiddenAction_encounter]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInEnemyTeam(greaterThan=0,withinRange=400) and not numberOfUnitsInEnemyTeam(greaterThan=0,withinRange=100)
resetCustomTimer:true

[hiddenAction_曜之刃]
isActive: false
autoTriggerOnEvent: killedAnyUnit
requireConditional: if not eventSource.self.tags(includes="召唤物")
description: -击杀目标恢复血量与护盾
pos: 0
displayType: infoOnlyStockpile
buildSpeed: 0s
addResources: hp=325, shield=325

[effect_白闪星]
createWhenZoomedOut: false
priority:low
image:白闪星.png
life: 60
fadeOut: true
attachedToUnit: false
color: #FFA600
fadeInTime:5
scaleFrom:1.5
scaleTo:0.5
alpha: 2
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_速白闪星]
@copyFromSection:effect_白闪星
life: 30

[hiddenAction_脱离卡死]
autoTrigger: if not self.isInMap
fireTurretXAtGround: 1
fireTurretXAtGround_withTarget: nearestUnit(withTag="星空", relation="own")
fireTurretXAtGround_withProjectile: 闪移

[projectile_闪移]
areaDamage:	100
areaRadius:	44
life: 5
speed: 10
teleportSource: true
explodeOnEndOfLife: true
explodeEffect: CUSTOM:光波, CUSTOM:大hitLightFlash
areaHitAirAndLandAtSameTime: true

[hiddenAction_消散]
autoTrigger: if self.timeAlive(laterThanSeconds=179)
spawnEffects: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:白幕
deleteSelf: true
[effect_白幕]
priority: veryhigh
fadeOut: false
image: 罩.png
life: 10
scaleFrom: 20
scaleTo: 0
alpha: 0.75
dirSpeed: -1
color: #FFA600
[effect_外光]
priority: veryhigh
image: SHARED:light_50.png
life: 85
fadeOut: true
attachedToUnit: false
color: #FFA600
scaleFrom: 2.4
scaleTo: 2.4
alpha: 0.6
drawUnderUnits:false
[effect_中光]
priority: veryhigh
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: true
color: #FFA600
scaleFrom: 0.5
scaleTo: 0.1
alpha: 2
[effect_光波]
priority: veryhigh
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2
color: #FFA600
fadeInTime: 3
alpha: 2

[graphics]
total_frames: 1
scaleImagesTo: 41
image:        b耀斑.png
image_wreak:  NONE
image_turret: NONE
image_shield: 日耀shield.png
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:白闪星
movementEffectRate: 4


[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

isFixedFiring: true
meleeEngangementDistance: 900

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 500
shootDelay: 6
aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
projectile:1
#shoot_sound:plasma_fire
#shoot_sound_vol:0.05
shoot_flame: CUSTOM:白闪星
#shoot_light: #ffffff
[turret_2]
x: 0
y: 0
projectile:2
delay:2s
limitingRange:75
shoot_flame:CUSTOM:日刃斩, CUSTOM:大hitLightFlash
[turret_3A]
x:0
y:0
delay:0.3s
idleDir:-90
turnSpeed:0
energyUsage:1
projectile:3.0
shoot_sound:missile_fire
shoot_sound_vol:0.1
[turret_3B]
x:0
y:0
copyFrom:3A
idleDir:90

[projectile_1]
#missile
directDamage: 15
areaDamage: 25
areaRadius: 80
areaRadiusFromEdge:true
life: 600
speed: 0.3
targetSpeed: 3.5
largeHitEffect: true
frame: 4
autoTargetingOnDeadTarget: true
wobbleAmplitude: 0.4
wobbleFrequency: 0.8s
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2
deflectionPower: -1
explodeEffect: CUSTOM:projectilePassThough, smallExplosion, shockwave, CUSTOM:hitLightFlash
explodeEffectOnShield: CUSTOM:projectilePassThough, shockwave, CUSTOM:hitLightFlash
effectOnCreate: CUSTOM:projectileLight, CUSTOM:阳炎

[projectile_2]
areaDamage:2000
areaRadius:128
life:0
speed:0
invisible:true
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
deflectionPower:-1
#explodeEffect: CUSTOM:大hitLightFlash
#explodeEffectOnShield: CUSTOM:大hitLightFlash
#spawnProjectilesOnExplode: 1(recursionLimit=40), 2(recursionLimit=30)

[projectile_3.0]
life:30
speed:0
targetSpeed:10
spawnProjectilesOnEndOfLife:3
areaDamage:375
areaRadius:60
areaRadiusFromEdge:true
turnSpeed:0
image:导弹.png
drawSize:0.3
deflectionPower: -1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2
effectOnCreate: CUSTOM:projectileLight

[projectile_3]
life:9999
spawnProjectilesOnEndOfLife:NONE
areaDamage:375
areaRadius:60
areaRadiusFromEdge:true
speed:3.5
targetSpeed:7
directDamage:125
turnSpeed:9
image:导弹.png
drawSize:0.6
largeHitEffect:true
deflectionPower: -1
autoTargetingOnDeadTarget:true
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2
effectOnCreate: CUSTOM:projectileLight

[effect_日刃斩]
priority:critical
image: 亮旋.png
life: 20
fadeOut: true
attachedToUnit: true
scaleFrom: 1
scaleTo: 2
alpha: 2
drawUnderUnits:false
atmospheric:true
dirSpeed:15
color: #FFA600

[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #FD3602
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.5
alpha: 0.8
atmospheric:true
ySpeedRelative: 1

[effect_projectileLight]
priority:high
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FD3602
fadeInTime:2
scaleFrom: 1
scaleTo: 1
alpha: 0.6
dirSpeedRandom:3
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_阳炎]
priority:veryhigh
image: 日shield.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FD3602
fadeInTime:2
scaleFrom: 1
scaleTo: 1
alpha: 0.6
dirSpeedRandom:3
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #FD3602

scaleFrom: 1.8
scaleTo: 1.2
alpha: 0.6
drawUnderUnits:false
[effect_大hitLightFlash]
@copyFromSection:effect_hitLightFlash
scaleTo: 1.8

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FD3602
scaleFrom: 0.3
scaleTo: 0.8
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #FFA600
scaleFrom: 1.5
scaleTo: 1.5

[effect_sparks2]
@copyFromSection:effect_sparks
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
ySpeedRelative:2
color: #FD3602

[movement]
movementType: AIR
moveSpeed: 4
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.0

maxTurnSpeed: 5
turnAcceleration: 0.06

targetHeight: 25

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0


[global_resource_星空舰载机]
hidden: true
displayName: 星空舰载机
displayColor: #ffffff
priority: 1