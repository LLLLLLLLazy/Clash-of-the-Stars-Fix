
[core]
name: 贝露佩欧鲁
displayText: 贝露佩欧鲁
displayDescription: [至高神性] \n -大自然将发动其伟力 \n -从古至今都无力改变 \n -此即天灾的聚集体 世人所熟知的苍蓝之王
class: CustomUnitMetadat
price: 500000, 苍蓝能量=20
maxHp: 40000
mass: 1000000
radius: 50
buildSpeed: 200s
hideScorchMark: true
#showInEditor: false
selfRegenRate: 1.05
generation_resources: 苍蓝能量=0.02
tags: units, 贝露佩欧鲁, 虚无
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 贝露佩欧鲁
@memory 神躯化界: float
@memory 透明度: float
@memory 混沌化身: float
@memory 已损失血量: float
@memory 当前血量: float
@memory 闪避概率: float
@memory 乌云密布: float
@memory 明视野: float
autoTriggerCooldownTime: 0.25s
autoTriggerCooldownTime_allowDangerousHighCPU: true
soundOnNewSelection: 龙吟1.ogg:0.15,龙吟2.ogg:0.15,龙吟3.ogg:0.15,龙吟2.ogg:0.15,龙吟1.ogg:0.15,龙吟3.ogg:0.15
soundOnAttackOrder: 龙啸1.ogg:0.15,龙啸2.ogg:0.15,龙啸3.ogg:0.15,龙啸2.ogg:0.15,龙啸1.ogg:0.15,龙啸3.ogg:0.15
soundOnMoveOrder: 龙吼1.ogg:0.15,龙吼2.ogg:0.15,龙吼3.ogg:0.15,龙吼2.ogg:0.15,龙吼1.ogg:0.15,龙吼3.ogg:0.15
explodeOnDeath: false
disableDeathOnZeroHp: true
fogOfWarSightRange: 50
transportSlotsNeeded: 50

[hiddenAction_魔力恢复]
autoTrigger: if numberOfUnitsInTeam(withTag='魔力蔓延', greaterThan=0)
addResourcesWithLogic: hp=numberOfUnitsInTeam(withTag='魔力蔓延')*5

[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语

[resource_起始基地]
displayName: 起始基地

[graphics]
total_frames: 1
image: SHARED:blank.png
image_wreak:  NONE
image_turret: NONE
image_shadow: NONE
imageScale:  1.0
lock_body_rotation_with_main_turret: true
lock_leg_rotation_with_main_turret: true
showShotDelayBar: false

[decal_天灾阵]
onlyInPreview: true
layer: onTop
@define timer_5s: ((self.timeAlive() % 5) / 5)
alpha: 0.4 + cos( ${timer_5s} * 360) * 0.15
image: 召唤阵.png
imageScale: 0.25
color: #AEFF00
basePosition: getOffsetRelative(x=0, y=0, dirOffset=self.timeAlive*5)


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange: 600
aimOffsetSpread: 0.6
isFixedFiring: true

[turret_1]
x: 0
y: 0
image: SHARED:blank.png
turnSpeed: 2.5
canShoot: false
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

[turret_magic]
x: 0
y: 0
attachedTo: 1
slave: true
canShoot: false
limitingRange: 750

[turret_2]
x: 0
y: 28
image: 贝露头.png
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 地裂
canShoot: true
canAttackFlyingUnits: false
canAttackLandUnits: if self.hasFlag(id=1)
canAttackUnderwaterUnits: false
shoot_sound: 吐石.ogg
shoot_sound_vol: 0.8
shoot_flame: CUSTOM:阵法1
idleSweepAngle: 20
idleSweepSpeed: 0.35
idleSweepDelay: 240
idleSweepAddRandomDelay: 25
idleSweepCondition: if not self.isMoving()
recoilOffset: -5
recoilOutTime: 3
recoilReturnTime: 12
attachedTo: 1
slave: true
delay: 100
size: 46
invisible: if not self.hasFlag(id=1)

[turret_3]
x: 0
y: 28
image: 贝露头.png
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 闪电1
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=2)
canAttackLandUnits: if self.hasFlag(id=2)
canAttackUnderwaterUnits: false
shoot_sound: 电击.ogg,电击2.ogg
shoot_sound_vol: 0.4
shoot_flame: CUSTOM:阵法2,CUSTOM:电爆
idleSweepAngle: 20
idleSweepSpeed: 0.35
idleSweepDelay: 240
idleSweepAddRandomDelay: 25
idleSweepCondition: if not self.isMoving()
resourceUsage: ammo-1=-1
recoilOffset: -5
recoilOutTime: 3
recoilReturnTime: 12
attachedTo: 1
slave: true
delay: 120
size: 46
aimOffsetSpread: 0
invisible: if not self.hasFlag(id=2)

[turret_3-1]
x: 0
y: 28
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 闪电2
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=2)
canAttackLandUnits: if self.hasFlag(id=2)
canAttackUnderwaterUnits: false
shoot_flame: NONE
resourceUsage: ammo-2=-1,ammo-1=1
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 20
warmup: 0.04s
size: 46
aimOffsetSpread: 0
invisible: true

[turret_3-2]
x: 0
y: 28
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 闪电3
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=2)
canAttackLandUnits: if self.hasFlag(id=2)
canAttackUnderwaterUnits: false
shoot_flame: NONE
resourceUsage: ammo-3=-1,ammo-2=1
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 20
warmup: 0.04s
size: 46
aimOffsetSpread: 0
invisible: true

[turret_3-3]
x: 0
y: 28
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 闪电4
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=2)
canAttackLandUnits: if self.hasFlag(id=2)
canAttackUnderwaterUnits: false
shoot_flame: NONE
resourceUsage: ammo-3=1
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 20
warmup: 0.04s
size: 46
aimOffsetSpread: 0
invisible: true

[resource_ammo-1]
hidden: true

[resource_ammo-2]
hidden: true

[resource_ammo-3]
hidden: true

[hiddenAction_kill]
autoTriggerOnEvent: killedAnyUnit
setResourcesWithLogic: ammo-1=0
alsoTriggerAction: set2

[hiddenAction_set2]
setResourcesWithLogic: ammo-2=0
alsoTriggerAction: set3

[hiddenAction_set3]
setResourcesWithLogic: ammo-3=0

[turret_4]
x: 0
y: 28
image: 贝露头.png
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: fog
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=3)
canAttackLandUnits: if self.hasFlag(id=3)
canAttackUnderwaterUnits: false
shoot_flame: CUSTOM:阵法3,CUSTOM:fog,onlySound
idleSweepAngle: 20
idleSweepSpeed: 0.35
idleSweepDelay: 240
idleSweepAddRandomDelay: 25
idleSweepCondition: if not self.isMoving()
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 0.02s
size: 46
invisible: if not self.hasFlag(id=3)

[turret_5]
x: 0
y: 28
image: 贝露头.png
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 风弹
shoot_sound: 风弹.ogg
shoot_sound_vol: 0.3
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=4)
canAttackLandUnits: if self.hasFlag(id=4)
canAttackUnderwaterUnits: false
shoot_flame: CUSTOM:阵法4
idleSweepAngle: 20
idleSweepSpeed: 0.35
idleSweepDelay: 240
idleSweepAddRandomDelay: 25
idleSweepCondition: if not self.isMoving()
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 1.5s
size: 46
invisible: if not self.hasFlag(id=4)
altProjectile: 风弹2
altProjectileCondition: if self.readUnitMemory('乌云密布',type='float')>0 or numberOfUnitsInAllTeams(withTag="沉渊之海")>0

[turret_6]
x: 0
y: 28
image: 贝露头.png
turnSpeed: 1.0
turnSpeedAcceleration: 0.05
projectile: 雨云
shoot_sound: 召云.ogg
shoot_sound_vol: 0.3
canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=5)
canAttackLandUnits: if self.hasFlag(id=5)
canAttackUnderwaterUnits: false
shoot_flame: CUSTOM:阵法5
idleSweepAngle: 20
idleSweepSpeed: 0.35
idleSweepDelay: 240
idleSweepAddRandomDelay: 25
idleSweepCondition: if not self.isMoving()
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0
attachedTo: 1
slave: true
delay: 7s
size: 46
invisible: if not self.hasFlag(id=5)

[projectile_地裂]
tags= T-projectile
areaDamage: 1500
areaRadius: 70
life: 120
speed: 35
drawSize: 0.65
image: stone.png
buildingDamageMultiplier: 2.0
areaDamageNoFalloff: true
areaRadiusFromEdge: true
targetGround: true
targetGroundSpread: 16
spawnUnit: scorch(offsetRandomDir=180),explosion*5(offsetRandomXY=35)
deflectionPower: -1
trailEffect: CUSTOM:ripple*2,CUSTOM:tail
trailEffectRate: 0.8
explodeEffect: CUSTOM:ripple2,CUSTOM:dust*5,CUSTOM:what,CUSTOM:explosion
explodeEffectOnShield: CUSTOM:ripple2,CUSTOM:dust*5,CUSTOM:what,CUSTOM:explosion

[projectile_地壳颤动]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 1
instant: true
speed: 0
drawSize: 0.65
image: SHARED:blank.png
spawnUnit: 地壳颤动
deflectionPower: -1
explodeEffect: NONE

[projectile_岩壁上升]
tags= T-projectile
directDamage: 0
life: 0
speed: 0
explodeOnEndOfLife: true
areaDamage: 0
areaRadius: 0
targetGround: true
explodeEffect: NONE
targetGroundSpread: 0
deflectionPower: -1
spawnProjectilesOnEndOfLife: 山1*3(offsetRandomDir=85,offsetRandomX=0.5),山2*6(offsetRandomDir=85,offsetRandomX=0.5)

[projectile_山1]
life: 30
tags= bullet
drawSize: 0
areaDamage: 5000
areaRadius: 70
buildingDamageMultiplier: 2.0
areaRadiusFromEdge: true
areaHitUnderwaterAlways: true
speedSpread: 6
image: SHARED:blank.png
autoTargetingOnDeadTarget: false
speed: 15
turnSpeed: 0
spawnUnit: 山
explodeEffect: NONE
deflectionPower: -1
explodeOnEndOfLife: true

[projectile_山2]
life: 30
tags= bullet
drawSize: 0
areaDamage: 2500
areaRadius: 70
buildingDamageMultiplier: 2.0
areaRadiusFromEdge: true
areaHitUnderwaterAlways: true
speedSpread: 6
image: SHARED:blank.png
autoTargetingOnDeadTarget: false
speed: 15
turnSpeed: 0
spawnUnit: 山2
explodeEffect: NONE
deflectionPower: -1
explodeOnEndOfLife: true

[projectile_闪电1]
tags= T-projectile
life: 3
directDamage: 400
instant: true
instantReuseLast: true
moveWithParent: true
beamImage: 雷暴/闪电1.png
shieldDamageMultiplier: 1.5
explodeEffect: CUSTOM:电击
explodeEffectOnShield: CUSTOM:电击
shieldDefectionMultiplier: -1
spawnUnit: 贝露闪电1

[projectile_闪电2]
tags= T-projectile
life: 3
directDamage: 400
instant: true
instantReuseLast: true
moveWithParent: true
beamImage: 雷暴/闪电2.png
shieldDamageMultiplier: 1.5
shieldDefectionMultiplier: -1
explodeEffect: CUSTOM:电击
explodeEffectOnShield: CUSTOM:电击

[projectile_闪电3]
tags= T-projectile
life: 3
directDamage: 400
instant: true
instantReuseLast: true
moveWithParent: true
beamImage: 雷暴/闪电3.png
shieldDamageMultiplier: 1.5
shieldDefectionMultiplier: -1
explodeEffect: CUSTOM:电击
explodeEffectOnShield: CUSTOM:电击

[projectile_闪电4]
tags= T-projectile
life: 3
directDamage: 400
instant: true
instantReuseLast: true
moveWithParent: true
beamImage: 雷暴/闪电4.png
shieldDamageMultiplier: 1.5
shieldDefectionMultiplier: -1
explodeEffect: CUSTOM:电击
explodeEffectOnShield: CUSTOM:电击

[projectile_落雷强击]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 1
instant: true
speed: 0
drawSize: 0.65
image: SHARED:blank.png
spawnUnit: 贝露落雷
deflectionPower: -1
explodeEffect: NONE

[projectile_电流领域]
tags= T-projectile
areaDamage: 175
areaRadius: 260
life: 0
speed: 0
drawSize: 0
areaExpandTime: 5
areaDamageNoFalloff: true
areaRadiusFromEdge: true
image: SHARED:blank.png
shieldDamageMultiplier: 1.5
shieldDefectionMultiplier: 0
deflectionPower: -1
explodeEffect: CUSTOM:电流领域
explodeEffectOnShield: CUSTOM:电流领域
explodeOnEndOfLife: true
areaHitAirAndLandAtSameTime: true

[projectile_fog]
tags= T-projectile
life: 200
speed: 14
targetSpeed: 8.5
targetSpeedAcceleration: 0.3
speedSpread: 1
image: SHARED:blank.png
drawSize: 0
hitSound: false
deflectionPower: -1
areaDamage: 40
areaRadius: 120
areaRadiusFromEdge: true
explodeOnEndOfLife: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:fog2
explodeEffectOnShield: CUSTOM:fog2
spawnUnit: 雾霾

[projectile_无光禁区]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 1
instant: true
speed: 0
drawSize: 0.65
image: SHARED:blank.png
spawnUnit: 无光禁区
deflectionPower: -1
explodeEffect: NONE

[projectile_风弹]
tags= T-projectile
areaDamage: 1500
areaRadius: 120
areaRadiusFromEdge: true
life: 120
speed: 35
drawSize: 0.55
image: 风弹.png
deflectionPower: -1
explodeEffect: CUSTOM:wave2,CUSTOM:风爆,CUSTOM:风卷*5,CUSTOM:wave3
explodeEffectOnShield: CUSTOM:wave2,CUSTOM:风爆,CUSTOM:风卷*5,CUSTOM:wave3
pushVelocity: 5.5
pushForce: 5.5
trailEffect: CUSTOM:风卷2
trailEffectRate: 0.3

[projectile_风弹2]
tags= T-projectile
areaDamage: 1500
areaRadius: 120
areaRadiusFromEdge: true
life: 120
speed: 35
drawSize: 0.55
image: 风弹.png
deflectionPower: -1
explodeEffect: CUSTOM:wave2+,CUSTOM:风爆+,CUSTOM:风卷+*5,CUSTOM:wave3+
explodeEffectOnShield: CUSTOM:wave2+,CUSTOM:风爆+,CUSTOM:风卷+*5,CUSTOM:wave3+
pushVelocity: 5.5
pushForce: 5.5
trailEffect: CUSTOM:风卷2+
trailEffectRate: 0.3
spawnUnit: 水溅射

[projectile_飓风使徒]
tags= T-projectile
directDamage: 0
life: 0
speed: 0
explodeOnEndOfLife: true
areaDamage: 0
areaRadius: 0
explodeEffect: NONE
deflectionPower: -1
spawnUnit: 飓风使徒

[projectile_雨云]
tags= T-projectile
areaDamage: 0
life: 0
speed: 35
drawSize: 0
image: SHARED:blank.png
deflectionPower: -1
explodeEffect: NONE
explodeEffectOnShield: NONE
instant: true
spawnUnit: 雨云(offsetHeight=200)

[projectile_强积雨云]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 1
instant: true
speed: 0
drawSize: 0.65
image: SHARED:blank.png
spawnUnit: 强积雨云
deflectionPower: -1
explodeEffect: NONE

[arm_1]
x: -20
y: 26
image_end: 左翼.png
drawLegWhenZoomedOut: true
drawFootWhenZoomedOut: true
drawOverBody: true

[arm_2]
x: 20
@copyFromSection: arm_1
image_end: 右翼.png

[animation_idle]
onActions: move, idle
blendIn: 2.5s
blendOut: 2.5s
arm1_0s: {dir: 32}
arm1_0.5s: {dir: 24}
arm1_0.8s: {dir: 12}
arm1_1.1s: {dir: -12}
arm1_1.6s: {dir: -34}
arm1_2.5s: {dir: -42}
arm2_0s: {dir: -32}
arm2_0.5s: {dir: -24}
arm2_0.8s: {dir: -12}
arm2_1.1s: {dir: 12}
arm2_1.6s: {dir: 34}
arm2_2.5s: {dir: 42}
KeyframeTimeScale: 0.25
pingPong: true

[arm_3]
x: 0
y: 0
image_end: 贝露身.png
drawOverBody: false

[arm_4]
x: -12
y: -55
image_end: 细尾巴.png
drawOverBody: false
drawDirOffset: 6

[arm_5]
x: 12
y: -55
image_end: 细尾巴.png
drawOverBody: false
drawDirOffset: -6

[arm_6]
x: 0
y: -50
image_end: 粗尾巴.png
drawOverBody: false

[movement]
moveSpeed: 2.2
movementType: AIR
moveAccelerationSpeed: 0.1
moveDecelerationSpeed: 0.025
targetHeight: 80
targetHeightDrift: 2
reverseSpeedPercentage: 0
maxTurnSpeed: 2.5
turnAcceleration: 0.6
moveSlidingMode: true
moveIgnoringBody: false

[decal_body]
layer: onTop
order: 0.2
image: 贝露身.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_3

[decal_body_地震]
layer: onTop
order: 0.2
image: 天灾配色/贝露身_地震.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_3

[decal_body_雷暴]
layer: onTop
order: 0.2
image: 天灾配色/贝露身_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_3

[decal_body_大雾]
layer: onTop
order: 0.2
image: 天灾配色/贝露身_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_3

[decal_body_狂风]
layer: onTop
order: 0.2
image: 天灾配色/贝露身_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_3

[decal_body_骤雨]
layer: onTop
order: 0.2
image: 天灾配色/贝露身_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_3

[decal_body_shadow]
layer: shadow
order: 0.1
image: 贝露身黑.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_3
hOffset: -80

[decal_head1]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromTurret: 2

[decal_head2]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromTurret: 3

[decal_head3]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromTurret: 4

[decal_head4]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromTurret: 5

[decal_head5]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromTurret: 6

[decal_head]
layer: onTop
order: 0.2
image: 贝露头.png
alpha: 1.0
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if not self.hasFlag(id=1) and not self.hasFlag(id=2) and not self.hasFlag(id=3) and  not self.hasFlag(id=4) and not self.hasFlag(id=5)
basePositionFromTurret: 2

[decal_head_地震]
layer: onTop
order: 0.2
image: 天灾配色/贝露头_地震.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromTurret: 2

[decal_head_雷暴]
layer: onTop
order: 0.2
image: 天灾配色/贝露头_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromTurret: 3

[decal_head_大雾]
layer: onTop
order: 0.2
image: 天灾配色/贝露头_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromTurret: 4

[decal_head_狂风]
layer: onTop
order: 0.2
image: 天灾配色/贝露头_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromTurret: 5

[decal_head_骤雨]
layer: onTop
order: 0.2
image: 天灾配色/贝露头_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromTurret: 6

[decal_head1_shadow]
layer: shadow
order: 0.1
image: 贝露头_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromTurret: 2
isVisible: if self.hasFlag(id=1)
hOffset: -80

[decal_head2_shadow]
layer: shadow
order: 0.1
image: 贝露头_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromTurret: 3
isVisible: if self.hasFlag(id=2)
hOffset: -80

[decal_head3_shadow]
layer: shadow
order: 0.1
image: 贝露头_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromTurret: 4
isVisible: if self.hasFlag(id=3)
hOffset: -80

[decal_head4_shadow]
layer: shadow
order: 0.1
image: 贝露头_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromTurret: 5
isVisible: if self.hasFlag(id=4)
hOffset: -80

[decal_head5_shadow]
layer: shadow
order: 0.1
image: 贝露头_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromTurret: 6
isVisible: if self.hasFlag(id=5)
hOffset: -80

[decal_left_shadow]
layer: shadow
order: 0.1
image: 左翼_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_1
hOffset: -80

[decal_right_shadow]
layer: shadow
order: 0.1
image: 右翼_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_2
hOffset: -80

[decal_left]
layer: onTop
order: 0.2
image: 左翼.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_1

[decal_left_地震]
layer: onTop
order: 0.2
image: 天灾配色/左翼_地震.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_1

[decal_left_雷暴]
layer: onTop
order: 0.2
image: 天灾配色/左翼_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_1

[decal_left_大雾]
layer: onTop
order: 0.2
image: 天灾配色/左翼_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_1

[decal_left_狂风]
layer: onTop
order: 0.2
image: 天灾配色/左翼_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_1

[decal_left_骤雨]
layer: onTop
order: 0.2
image: 天灾配色/左翼_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_1

[decal_right]
layer: onTop
order: 0.2
image: 右翼.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_2

[decal_right_地震]
layer: onTop
order: 0.2
image: 天灾配色/右翼_地震.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_2

[decal_right_雷暴]
layer: onTop
order: 0.2
image: 天灾配色/右翼_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_2

[decal_right_大雾]
layer: onTop
order: 0.2
image: 天灾配色/右翼_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_2

[decal_right_狂风]
layer: onTop
order: 0.2
image: 天灾配色/右翼_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_2

[decal_right_骤雨]
layer: onTop
order: 0.2
image: 天灾配色/右翼_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_2

[decal_tail1]
layer: afterBody
order: 0.1
image: 粗尾巴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail1_地震]
layer: afterBody
order: 0.1
image: 天灾配色/粗尾巴_地震.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail1_雷暴]
layer: afterBody
order: 0.1
image: 天灾配色/粗尾巴_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail1_大雾]
layer: afterBody
order: 0.1
image: 天灾配色/粗尾巴_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail1_狂风]
layer: afterBody
order: 0.1
image: 天灾配色/粗尾巴_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail1_骤雨]
layer: afterBody
order: 0.1
image: 天灾配色/粗尾巴_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_6
xOffsetRelative: -0.5

[decal_tail2]
layer: afterBody
order: 0.1
image: 细尾巴.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail2_地震]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_地震.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail2_雷暴]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail2_大雾]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail2_狂风]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail2_骤雨]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_4
xOffsetRelative: -0.5

[decal_tail3]
layer: afterBody
order: 0.1
image: 细尾巴.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail3_地震]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_地震.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=1)
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail3_雷暴]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_雷暴.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=2)
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail3_大雾]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_大雾.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=3)
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail3_狂风]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_狂风.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=4)
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail3_骤雨]
layer: afterBody
order: 0.1
image: 天灾配色/细尾巴_骤雨.png
alpha: self.readUnitMemory('透明度',type='float')
alwayStartDirAtZero: false
imageScale: 1.0
isVisible: if self.hasFlag(id=5)
basePositionFromLegEnd: arm_5
xOffsetRelative: -0.5

[decal_tail1_shadow]
layer: shadow
order: 0.1
image: 粗尾巴_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_6
hOffset: -80

[decal_tail2_shadow]
layer: shadow
order: 0.1
image: 细尾巴_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_4
hOffset: -80

[decal_tail3_shadow]
layer: shadow
order: 0.1
image: 细尾巴_阴影.png
alpha: self.readUnitMemory('透明度',type='float')*0.6
alwayStartDirAtZero: false
imageScale: 1.0
basePositionFromLegEnd: arm_5
hOffset: -80

#=======================天灾列表=======================#
[action_天灾阵列]
pos: 0
id: 天灾阵列
text: -点击关闭/打开列表-
description: -列表打开状态可以选择主持的天灾类型
isGuiBlinking: if self.resource(type='rest',greaterThan=0)
buildSpeed: 0s
highPriorityQueue: true
addResources: rest=1
iconImage: 天灾.png
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
alwaysSinglePress: true

[hiddenAction_rest]
autoTrigger: if self.resource.rest>1
resourceAmount: rest
resourceAmount_setValue: 0

[resource_rest]
hidden: true

[action_地震]
pos: 1
id: ${section.text}
text: -天灾：地震-
description: -主持天灾：地震\n-所有的攻击只对地面单位生效\n-普通攻击替换：地裂\n对地面单位造成小范围的地裂攻击，对建筑能造成更强的伤害\n-天灾技艺：神躯化界\n每移动一段时间会在下方生成一个“山”\n-天灾技艺：地壳颤动\n在指定位置制造范围巨大的震动，对建筑造成更强的伤害\n-天灾技艺：岩壁上升\n指定一个方向，指定方向的区域将出现多次震动并出现“山”\n-天灾造物：“山”\n阻挡单位的移动，能被攻击
isGuiBlinking: if self.hasFlag(id=1)
isVisible: if self.resource.rest>0
buildSpeed: 2.5s
isActive: if not self.hasFlag(id=1)
iconImage: 地震.png
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addResources: setFlag=1,unsetFlag=2-5
spawnEffects: CUSTOM:阵法-地震

[action_地壳颤动]
id: ${section.text}
text: -地壳颤动-
description: -在指定位置制造范围巨大的震动，对建筑造成更强的伤害
isGuiBlinking: if self.hasFlag(id=1)
isVisible: if self.hasFlag(id=1)
buildSpeed: 0s
iconImage: 地壳颤动.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 30s
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 地壳颤动
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:地震能量

[action_岩壁上升]
id: ${section.text}
text: -岩壁上升-
description: -指定一个方向，指定方向的区域将出现多次震动并出现“山”
isGuiBlinking: if self.hasFlag(id=1)
isVisible: if self.hasFlag(id=1)
buildSpeed: 0s
iconImage: 岩壁上升.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 25s
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 岩壁上升
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:地震能量

[hiddenAction_移动]
autoTrigger: if self.isMoving and self.hasFlag(id=1)
setUnitMemory: 神躯化界=memory.神躯化界+1.0

[hiddenAction_待命]
autoTrigger: if not self.isMoving
setUnitMemory: 神躯化界=0

[hiddenAction_神躯化界]
autoTrigger: if self.readUnitMemory('神躯化界',type='float')>20
spawnUnits: 山2(offsetHeight=-80)
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:地震能量
setUnitMemory: 神躯化界=0

[action_雷暴]
pos: 1
id: ${section.text}
text: -天灾：雷暴-
description: -主持天灾：雷暴\n-普通攻击替换：雷击\n吐出闪电链,可连锁3个单位，能穿透护盾并对本体造成更多伤害\n-天灾技艺：落雷强击\n在指定位置落下大闪电\n-天灾技艺：球状闪电\n在自身附近随机生成多个球状闪电,球状闪电会不规则移动,碰撞到敌人时爆炸\n-天灾技艺：电流领域\n自身附近会出现电流,对自身附近的所有敌人持续造成伤害
isGuiBlinking: if self.hasFlag(id=2)
isVisible: if self.resource.rest>0
buildSpeed: 2.5s
isActive: if not self.hasFlag(id=2)
iconImage: 雷暴.png
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addResources: setFlag=2,unsetFlag=1,unsetFlag=3-5
spawnEffects: CUSTOM:阵法-雷暴

[action_落雷强击]
id: ${section.text}
text: -落雷强击-
description: -在指定位置落下大闪电
isGuiBlinking: if self.hasFlag(id=2)
isVisible: if self.hasFlag(id=2)
buildSpeed: 0s
iconImage: 落雷强击.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 5s
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 落雷强击
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:雷暴能量

[action_球状闪电]
id: ${section.text}
text: -球状闪电-
description: -在自身附近随机生成多个球状闪电,球状闪电会不规则移动,碰撞到敌人时爆炸
isGuiBlinking: if self.hasFlag(id=2)
isVisible: if self.hasFlag(id=2)
buildSpeed: 0s
iconImage: 球状闪电.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
alwaysSinglePress: true
allowMultipleInQueue: false
addActionCooldownFor: 15s
spawnUnits: 球状闪电*8(offsetRandomXY=160,offsetHeight=180)
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:雷暴能量

[hiddenAction_电流领域]
autoTrigger: if self.hasFlag(id=2)
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 电流领域

[action_大雾]
pos: 1
id: ${section.text}
text: -天灾：大雾-
description: -主持天灾：大雾\n-普通攻击替换：雾霾\n使被攻击目标被雾霾包裹,其攻速与移速降低50%且持续受到伤害\n-天灾技艺：无光禁区\n极大范围起雾,雾中己方单位+25%攻速与移速,敌方-25%攻速与移速\n贝露佩欧鲁处于无光禁区内会自动进入“混沌化身”状态\n-天灾技艺：混沌化身\n自身化作一团雾,快速移动并无法被攻击同时也无法攻击\n-天灾技艺：迷雾蒙蒙\n自身被雾气所覆盖,(随机/间隔)躲避伤害
isGuiBlinking: if self.hasFlag(id=3)
isVisible: if self.resource.rest>0
buildSpeed: 2.5s
isActive: if not self.hasFlag(id=3)
iconImage: 大雾.png
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addResources: setFlag=3,unsetFlag=1-2,unsetFlag=4-5
spawnEffects: CUSTOM:阵法-大雾

[action_无光禁区]
id: ${section.text}
text: -无光禁区-
description: -极大范围起雾,雾中己方单位+25%攻速与移速,敌方-25%攻速与移速\n贝露佩欧鲁处于无光禁区内会自动进入“混沌化身”状态
isGuiBlinking: if self.hasFlag(id=3)
isVisible: if self.hasFlag(id=3)
buildSpeed: 0s
iconImage: 无光禁区.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 40s
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 无光禁区
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:大雾能量

[action_混沌化身]
id: ${section.text}
text: -混沌化身-
description: -自身化作一团雾,快速移动并无法被攻击同时也无法攻击
isGuiBlinking: if self.hasFlag(id=3)
isVisible: if self.hasFlag(id=3)
buildSpeed: 0s
iconImage: 混沌化身.png
highPriorityQueue: true
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addActionCooldownFor: 20s
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:大雾能量
setUnitMemory: 混沌化身=40
alsoTriggerAction: 变身

[hiddenAction_变身]
convertTo: 贝露佩欧鲁-混沌化身
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setUnitMemory: 透明度=0.35
playSoundAtUnit: 混沌.ogg:0.6
setResourcesWithLogic: 免疫渊海=1

[hiddenAction_变身2]
autoTrigger: if self.numberOfUnitsInTeam(withinRange=400,greaterThan=0,withTag='无光禁区')
convertTo: 贝露佩欧鲁-混沌化身2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setUnitMemory: 透明度=0.35
setResourcesWithLogic: 免疫渊海=1

[hiddenAction_消散]
autoTrigger: if self.readUnitMemory('混沌化身',type='float')>0
setUnitMemory: 混沌化身=memory.混沌化身-1

[hiddenAction_迷雾]
autoTrigger: if self.hasFlag(id=3)
spawnEffects: CUSTOM:fog3*3
addResources: 血量刷新=1

[resource_血量刷新]
hidden: true

[hiddenAction_遇袭]
autoTriggerOnEvent: tookDamage
requireConditional: if self.hasFlag(id=3)
setUnitMemory: 已损失血量=memory.当前血量-self.hp,闪避概率=rnd(0,1)

[hiddenAction_闪避]
autoTrigger: if self.readUnitMemory('闪避概率',type='float')>0.8 and self.readUnitMemory('乌云密布',type='float')<1
addResourcesWithLogic: hp=self.readUnitMemory('已损失血量',type='float')
spawnEffects: CUSTOM:miss
alsoTriggerAction: 归零

[hiddenAction_闪避2]
autoTrigger: if self.readUnitMemory('闪避概率',type='float')>0.5 and self.readUnitMemory('乌云密布',type='float')>0
addResourcesWithLogic: hp=self.readUnitMemory('已损失血量',type='float')
spawnEffects: CUSTOM:miss
alsoTriggerAction: 归零

[hiddenAction_刷新]
autoTrigger: if self.resource.血量刷新>0
setUnitMemory: 当前血量=self.hp
setResourcesWithLogic: 血量刷新=0

[hiddenAction_归零]
setUnitMemory: 已损失血量=0,闪避概率=0

[hiddenAction_闪避失败]
autoTrigger: if self.readUnitMemory('闪避概率',type='float')<0.5 and self.readUnitMemory('闪避概率',type='float')>0
setUnitMemory: 已损失血量=0,闪避概率=0,当前血量=self.hp

[action_狂风]
pos: 1
id: ${section.text}
text: -天灾：狂风-
description: -主持天灾：狂风\n-普通攻击替换：风团\n吐出风团击退小范围敌人并造成伤害\n-天灾技艺：飓风使徒\n在指定位置生成飓风,飓风会将附加敌人拉扯至中心,玩家可控制飓风移动,飓风最多存在15s\n-天灾技艺：气流对冲\n自身附近随机发动强气流,大范围震飞敌人\n-天灾技艺：御风而行\n移动速度加快
isGuiBlinking: if self.hasFlag(id=4)
isVisible: if self.resource.rest>0
buildSpeed: 2.5s
isActive: if not self.hasFlag(id=4)
iconImage: 狂风.png
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addResources: setFlag=4, unsetFlag=1-3, unsetFlag=5
setResourcesWithLogic: 狂风形态=1
setUnitMemory: 属性[35]=memory.属性[35]+0.5
alsoTriggerAction: 属性变化
spawnEffects: CUSTOM:阵法-狂风

[hiddenAction_狂风结束]
autoTrigger: if not self.hasFlag(id=4) and self.resource.狂风形态==1
setResourcesWithLogic: 狂风形态=0
setUnitMemory: 属性[35]=memory.属性[35]-0.5
temporarilyRemoveTags: 狂风
alsoTriggerAction: 属性变化

[resource_狂风形态]
hidden: true

[action_飓风使徒]
id: ${section.text}
text: -飓风使徒-
description: -在指定位置生成飓风,飓风会将附加敌人拉扯至中心,玩家可控制飓风移动,飓风最多存在15s
isGuiBlinking: if self.hasFlag(id=4)
isVisible: if self.hasFlag(id=4)
buildSpeed: 0s
iconImage: 风.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 15s
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 飓风使徒
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:狂风能量

[action_气流对冲]
id: ${section.text}
text: -气流对冲-
description: -自身附近随机发动强气流,大范围震飞敌人
isGuiBlinking: if self.hasFlag(id=4)
isVisible: if self.hasFlag(id=4)
buildSpeed: 0s
iconImage: 气流对冲.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
alwaysSinglePress: true
allowMultipleInQueue: false
addActionCooldownFor: 15s
spawnUnits: 气流对冲*5(offsetRandomDir=180)
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:狂风能量

[action_骤雨]
pos: 1
id: ${section.text}
text: -天灾：骤雨-
description: -主持天灾：骤雨\n-普通攻击替换：雨云\n在敌人头上召唤乌云降下雨滴,造成范围伤害\n-天灾技艺：强积雨云\n在指定位置持续降下大雨\n若降雨位置有"无光禁区",延长其持续时间\n若降雨位置有"球状闪电",则强化其为自动索敌\n若降雨位置发生"落雷强击",则其会造成更大范围的伤害\n若降雨位置有"飓风使徒",强化飓风移动时溅射出水弹造成范围伤害\n若降雨位置有"山",触发泥石流,降低目标90%移速并持续伤害\n-天灾技艺：乌云密布\n环绕持续50s的乌云\n乌云持续期间\n若主持地震，地壳颤动在水里将变为海啸\n若主持雷暴，每使用一次落雷都会使地图短暂变亮，自己短暂获得全图视野\n若主持大雾，则闪避概率提升\n若主持狂风，普攻将附带水溅射\n-天灾技艺：春风化雨\n有更快的回复速度
isGuiBlinking: if self.hasFlag(id=5)
isVisible: if self.resource.rest>0
buildSpeed: 2.5s
isActive: if not self.hasFlag(id=5)
iconImage: 骤雨.png
displayType: rally
alwaysSinglePress: true
allowMultipleInQueue: false
addResources: setFlag=5,unsetFlag=1-4
spawnEffects: CUSTOM:阵法-骤雨

[hiddenAction_春风化雨]
autoTrigger: if self.hasFlag(id=5)
addResourcesWithLogic: hp=${core.maxHp*0.0008}
spawnEffects: CUSTOM:水粒子*3

[action_强积雨云]
id: ${section.text}
text: -强积雨云-
description: -在指定位置持续降下大雨\n若降雨位置有"无光禁区",延长其持续时间\n若降雨位置有"球状闪电",则强化其为自动索敌\n若降雨位置发生"落雷强击",则其会造成更大范围的伤害并可打击水下\n若降雨位置有"飓风使徒",强化飓风移动时溅射出水弹造成范围伤害\n若降雨位置有"山",触发泥石流,降低目标90%移速并持续伤害
isGuiBlinking: if self.hasFlag(id=5)
isVisible: if self.hasFlag(id=5)
buildSpeed: 0s
iconImage: 大雨云.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
allowMultipleInQueue: false
addActionCooldownFor: 40s
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 强积雨云
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:骤雨能量

[action_乌云密布]
id: ${section.text}
text: -乌云密布-
description: -环绕持续50s的乌云\n乌云持续期间\n若主持地震，地壳颤动在水里将变为海啸\n若主持雷暴，每使用一次落雷都会使地图短暂变亮，自己短暂获得全图视野\n若主持大雾，则闪避概率提升\n若主持狂风，普攻将附带水溅射
isGuiBlinking: if self.hasFlag(id=5)
isVisible: if self.hasFlag(id=5)
buildSpeed: 0s
iconImage: 乌云.png
highPriorityQueue: true
displayType: rally
canPlayerCancel: false
alwaysSinglePress: true
allowMultipleInQueue: false
addActionCooldownFor: 120s
setUnitMemory: 乌云密布=200
playSoundAtUnit: 龙轰.ogg:0.45
spawnEffects: CUSTOM:骤雨能量

[hiddenAction_乌云环绕]
autoTrigger: if self.readUnitMemory('乌云密布',type='float')>0
spawnEffects: CUSTOM:fog5,CUSTOM:乌云
setUnitMemory: 乌云密布=memory.乌云密布-1
temporarilyAddTags: 乌云密布

[hiddenAction_乌云消失]
autoTrigger: if self.readUnitMemory('乌云密布',type='float')<1
temporarilyRemoveTags: 乌云密布

[hiddenAction_明亮]
autoTrigger: if self.readUnitMemory('乌云密布',type='float')>0 and self.numberOfUnitsInTeam(withTag='落雷',greaterThan=0)
setUnitMemory: 明视野=memory.明视野+20

[hiddenAction_明视野]
autoTrigger: if self.readUnitMemory('明视野',type='float')>0
setUnitMemory: 明视野=memory.明视野-1, 属性[25]=1000
alsoTriggerAction: 属性变化

[hiddenAction_恢复]
autoTrigger: if self.readUnitMemory('明视野',type='float')<1
setUnitMemory: 属性[25]=0
alsoTriggerAction: 属性变化


[action_深渊之息]
description: -每秒损失50+最大血量1% \n -"无光禁区", "球状闪电", "飓风使徒"会直接获得强化 \n -乌云持续期间，地壳颤动在任何地方都将变为海啸 \n -若主持狂风，普攻附带水溅射

[resource_免疫渊海]
displayName: 免疫渊海

#=====================================================#

#========================effect========================#
[effect_tail]
priority: high
image: tail.png
life: 60
drawUnderUnits: true
attachedToUnit: false
scaleFrom: 0.65
scaleTo: 0.65
alpha: 0.9

[effect_阵法1]
priority: high
image: 阵法1.png
life: 60
drawUnderUnits: false
attachedToUnit: true
scaleFrom: 0.15
scaleTo: 0.35
alpha: 1.0
fadeOut: true

[effect_阵法2]
priority: high
image: 阵法2.png
life: 60
drawUnderUnits: false
attachedToUnit: true
scaleFrom: 0.15
scaleTo: 0.35
alpha: 1.0
fadeOut: true

[effect_阵法3]
priority: high
image: 阵法3.png
life: 2.5
drawUnderUnits: false
attachedToUnit: true
scaleFrom: 0.15
scaleTo: 0.35
alpha: 1.0
fadeOut: true

[effect_阵法4]
priority: high
image: 阵法4.png
life: 60
drawUnderUnits: false
attachedToUnit: true
scaleFrom: 0.15
scaleTo: 0.35
alpha: 1.0
fadeOut: true

[effect_阵法5]
priority: high
image: 阵法5.png
life: 60
drawUnderUnits: false
attachedToUnit: true
scaleFrom: 0.15
scaleTo: 0.35
alpha: 1.0
fadeOut: true

[effect_ripple]
priority: veryhigh
drawType: displacement
image: SHARED:ripple.png
life: 60
drawUnderUnits: true
attachedToUnit: false
scaleFrom: 0.8
scaleTo: 1.3
alpha: 0.9

[effect_ripple2]
priority: veryhigh
drawType: displacement
image: ripple.png
life: 30
drawUnderUnits: true
attachedToUnit: false
scaleFrom: 0.5
scaleTo: 0.8
alpha: 0.9
dirSpeed: 5.0
alsoPlaySound: 地裂.ogg

[effect_dust]
priority: high
life: 90
lifeRandom: 25
image: dust.png
scaleFrom: 0.5
scaleTo: 1.2
alpha: 0.8
hSpeed: 0.5
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom: 40
yOffsetRelativeRandom: 40
createWhenOverLand: true
createWhenOverLiquid: false
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect: CUSTOM:dust2
trailEffectRate: 2.0

[effect_dust2]
priority: high
life: 90
lifeRandom: 25
image: dust.png
scaleFrom: 0.5
scaleTo: 1.2
physics: true
physicsGravity: 0.4
alpha: 0.8
createWhenOverLand: true
createWhenOverLiquid: false
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
spawnChance: 0.3

[effect_what]
drawType: displacement
image: what.png
life: 20
fadeOut: true
attachedToUnit: true
scaleFrom: 100
scaleTo: 100
alpha: 0.05
drawUnderUnits: false
alwayStartDirAtZero: true
total_frames: 2
animateFrameStart: 0
animateFrameEnd: 1
animateFrameSpeed: 0.4
animateFrameLooping: true

[effect_explosion]
priority: veryhigh
life: 60
hOffset: 0
dirOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: false
attachedToUnit: false
drawUnderUnits: false
image: explosion.png
scaleFrom: 1.1
scaleTo: 1.5
total_frames: 9
animateFrameStart: 0
animateFrameEnd: 8
animateFramePingPong: false
animateFrameSpeed: 0.35
alpha: 1.0

[effect_地震能量]
priority: veryhigh
life: 60
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 地震能量.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 22
animateFrameStart: 0
animateFrameEnd: 21
animateFramePingPong: false
animateFrameSpeed: 0.4
alpha: 1.0
yOffsetRelative: 90

[effect_雷暴能量]
priority: veryhigh
life: 60
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 雷暴能量.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 22
animateFrameStart: 0
animateFrameEnd: 21
animateFramePingPong: false
animateFrameSpeed: 0.4
alpha: 1.0
yOffsetRelative: 90

[effect_大雾能量]
priority: veryhigh
life: 60
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 大雾能量.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 22
animateFrameStart: 0
animateFrameEnd: 21
animateFramePingPong: false
animateFrameSpeed: 0.4
alpha: 1.0
yOffsetRelative: 90

[effect_狂风能量]
priority: veryhigh
life: 60
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 狂风能量.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 22
animateFrameStart: 0
animateFrameEnd: 21
animateFramePingPong: false
animateFrameSpeed: 0.4
alpha: 1.0
yOffsetRelative: 90

[effect_骤雨能量]
priority: veryhigh
life: 60
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 骤雨能量.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 22
animateFrameStart: 0
animateFrameEnd: 21
animateFramePingPong: false
animateFrameSpeed: 0.4
alpha: 1.0
yOffsetRelative: 90

[effect_电击]
priority: veryhigh
life: 120
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit: false
drawUnderUnits: false
image: 雷暴/电击.png
scaleFrom: 0.4
scaleTo: 0.4
total_frames: 20
animateFrameStart: 0
animateFrameEnd: 19
animateFramePingPong: false
animateFrameSpeed: 1.15
alpha: 1.0
dirOffsetRandom: 180
liveAfterAttachedDies: true

[effect_电爆]
priority: veryhigh
life: 120
hOffset: 0
alwayStartDirAtZero: false
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 雷暴/电爆.png
scaleFrom: 0.25
scaleTo: 0.25
total_frames: 8
animateFrameStart: 0
animateFrameEnd: 7
animateFramePingPong: false
animateFrameSpeed: 0.55
alpha: 0.8
dirOffsetRandom: 180

[effect_电流领域]
priority: veryhigh
life: 240
alwayStartDirAtZero: false
fadeInTime: 0
fadeOut: true
attachedToUnit: true
drawUnderUnits: false
image: 电流领域.png
scaleFrom: 3.0
scaleTo: 3.0
total_frames: 4
animateFrameStart: 0
animateFrameEnd: 3
animateFramePingPong: false
animateFrameSpeed: 0.45
alpha: 0.35
dirOffsetRandom: 180
spawnChance: 0.4
alsoPlaySound: 电流领域.ogg:0.1

[effect_fog]
attachedToUnit: false
life: 110
alpha: 0.4
image: fog.png
atmospheric: true
fadeOut: true
fadeInTime: 5
scaleFrom: 0.15
scaleTo: 0.9
priority: low
createWhenZoomedOut: false
createWhenOffscreen: false
showInFog: false
xSpeedRelativeRandom: 0.7
ySpeedRelative: 4.5
dirOffsetRandom: 0.8
hSpeedRandom: 0.65
yOffsetRelativeRandom: 5

[effect_onlySound]
attachedToUnit: false
life: 0
alpha: 0
image: SHARED:blank.png
fadeOut: true
scaleFrom: 0
scaleTo: 0
priority: low
showInFog: false
spawnChance: 0.4
alsoPlaySound: 喷雾.ogg:0.1

[effect_fog2]
priority: high
life: 60
lifeRandom: 25
image: fog2.png
scaleFrom: 2.2
scaleTo: 2.6
alpha: 0.1
fadeInTime: 10
hSpeed: 0.5
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom: 60
yOffsetRelativeRandom: 60
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect: CUSTOM:fog2-2
trailEffectRate: 7.0
spawnChance: 0.8

[effect_fog2-2]
priority: high
life: 40
lifeRandom: 25
image: fog2.png
scaleFrom: 2.2
scaleTo: 2.6
fadeInTime: 10
physics: true
physicsGravity: 0.4
alpha: 0.1
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
spawnChance: 0.3

[effect_fog3]
priority: high
life: 150
fadeOut: true
attachedToUnit: true
scaleTo: 0.4
scaleFrom: 0.3
alpha: 0.3
fadeInTime: 10
image: fog3.png
liveAfterAttachedDies: true
drawUnderUnits: false
hSpeedRandom: 0.15
xOffsetRelativeRandom: 25
yOffsetRelativeRandom: 30
ySpeedRelativeRandom: 0.5
xSpeedRelativeRandom: 0.45
atmospheric: true
dirOffsetRandom: 180
spawnChance: 0.6

[effect_fog5]
priority: high
life: 160
fadeOut: true
attachedToUnit: true
scaleTo: 1.7
scaleFrom: 1.5
alpha: 0.2
fadeInTime: 10
image: fog5.png
liveAfterAttachedDies: true
drawUnderUnits: false
hSpeedRandom: 0.15
xOffsetRelativeRandom: 55
yOffsetRelativeRandom: 50
ySpeedRelativeRandom: 0.15
xSpeedRelativeRandom: 0.25
atmospheric: true
dirOffsetRandom: 180
spawnChance: 0.65

[effect_乌云]
priority: high
life: 160
fadeOut: true
attachedToUnit: true
scaleTo: 0.8
scaleFrom: 0.6
alpha: 0.8
fadeInTime: 10
image: 乌云.png
liveAfterAttachedDies: true
drawUnderUnits: false
hSpeedRandom: 0.15
xOffsetRelativeRandom: 55
yOffsetRelativeRandom: 60
ySpeedRelativeRandom: 0.5
xSpeedRelativeRandom: 0.45
atmospheric: true
dirOffsetRandom: 180

[effect_miss]
priority: veryhigh
life: 120
fadeOut: true
attachedToUnit: true
scaleTo: 0.5
scaleFrom: 0.5
alpha: 1.0
image: miss.png
liveAfterAttachedDies: true
drawUnderUnits: false
hSpeed: 0.15
xOffsetRelativeRandom: 35
yOffsetRelativeRandom: 35
alwayStartDirAtZero: true

[effect_wave2]
priority: high
life: 90
image: wave2.png
scaleFrom: 0.55
scaleTo: 1.0
alpha: 0.25
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[effect_wave2+]
priority: high
life: 90
image: wave2.png
scaleFrom: 0.55
scaleTo: 1.0
alpha: 0.25
color: #33ffb2
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[effect_风卷]
priority: high
life: 35
image: 风卷.png
scaleFrom: 0.1
scaleTo: 0.55
alpha: 0.8
dirSpeed: 15.5
hSpeed: 0.15
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30
ySpeedRelativeRandom: 0.5
xSpeedRelativeRandom: 0.45
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[effect_风卷+]
priority: high
life: 35
image: 风卷_触水.png
scaleFrom: 0.1
scaleTo: 0.55
alpha: 0.8
dirSpeed: 15.5
hSpeed: 0.15
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30
ySpeedRelativeRandom: 0.5
xSpeedRelativeRandom: 0.45
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[effect_风卷2]
priority: high
life: 15
image: 风卷2.png
scaleFrom: 0.25
scaleTo: 0.025
alpha: 0.6
attachedToUnit: false
drawUnderUnits: false

[effect_风卷2+]
priority: high
life: 15
image: 风卷2_触水.png
scaleFrom: 0.25
scaleTo: 0.025
alpha: 0.6
attachedToUnit: false
drawUnderUnits: false

[effect_风爆]
priority: veryhigh
life: 240
alwayStartDirAtZero: false
fadeInTime: 0
fadeOut: true
attachedToUnit: false
drawUnderUnits: false
image: 风爆.png
scaleFrom: 1.7
scaleTo: 1.7
total_frames: 12
animateFrameStart: 0
animateFrameEnd: 11
animateFramePingPong: false
animateFrameSpeed: 0.35
alpha: 1.0
dirOffsetRandom: 180
alsoPlaySound: 风爆.ogg:0.5

[effect_风爆+]
priority: veryhigh
life: 240
alwayStartDirAtZero: false
fadeInTime: 0
fadeOut: true
attachedToUnit: false
drawUnderUnits: false
image: 风爆_触水.png
scaleFrom: 1.7
scaleTo: 1.7
total_frames: 12
animateFrameStart: 0
animateFrameEnd: 11
animateFramePingPong: false
animateFrameSpeed: 0.35
alpha: 1.0
dirOffsetRandom: 180
alsoPlaySound: 风爆.ogg:0.5

[effect_wave3]
priority: veryhigh
drawType: displacement
image: wave3.png
life: 50
drawUnderUnits: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 1.5
alpha: 0.9
dirSpeedRandom: 10.0

[effect_wave3+]
priority: veryhigh
drawType: displacement
image: wave3.png
life: 50
drawUnderUnits: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 1.5
alpha: 0.9
dirSpeedRandom: 10.0
color: #33ffb2

[effect_水粒子]
priority: high
life: 80
image: 水粒子.png
scaleFrom: 0.2
scaleTo: 0.1
alpha: 0.8
dirSpeed: 15.5
hSpeed: 0.05
xOffsetRelativeRandom: 80
yOffsetRelativeRandom: 80
ySpeedRelativeRandom: 0.25
xSpeedRelativeRandom: 0.25
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[effect_阵法-地震]
priority: veryhigh
life: 180
image: 阵法-地震.png
scaleFrom: 1.6
scaleTo: 1.6
alpha: 1.0
fadeInTime: 20
fadeOut: true
attachedToUnit: false
drawUnderUnits: true
hOffset: -80
alsoPlaySound: 阵法.ogg:0.7

[effect_阵法-雷暴]
priority: veryhigh
life: 180
image: 阵法-雷暴.png
scaleFrom: 1.6
scaleTo: 1.6
alpha: 1.0
fadeInTime: 20
fadeOut: true
attachedToUnit: false
drawUnderUnits: true
hOffset: -80
alsoPlaySound: 阵法.ogg:0.7

[effect_阵法-大雾]
priority: veryhigh
life: 180
image: 阵法-大雾.png
scaleFrom: 1.6
scaleTo: 1.6
alpha: 1.0
fadeInTime: 20
fadeOut: true
attachedToUnit: false
drawUnderUnits: true
hOffset: -80
alsoPlaySound: 阵法.ogg:0.7

[effect_阵法-狂风]
priority: veryhigh
life: 180
image: 阵法-狂风.png
scaleFrom: 1.6
scaleTo: 1.6
alpha: 1.0
fadeInTime: 20
fadeOut: true
attachedToUnit: false
drawUnderUnits: true
hOffset: -80
alsoPlaySound: 阵法.ogg:0.7

[effect_阵法-骤雨]
priority: veryhigh
life: 180
image: 阵法-骤雨.png
scaleFrom: 1.6
scaleTo: 1.6
alpha: 1.0
fadeInTime: 20
fadeOut: true
attachedToUnit: false
drawUnderUnits: true
hOffset: -80
alsoPlaySound: 阵法.ogg:0.7
#=====================================================#

[hiddenAction_create]
autoTrigger: if not self.hasFlag(id=0)
showMessageToAllPlayers: 天灾降临 终末已至
spawnUnits: 召唤阵
deleteSelf: true

[hiddenAction_start]
autoTriggerOnEvent: completeAndActive
addResources: setFlag=5
setUnitMemory: 透明度=1.0,当前血量=${core.maxHp}

[hiddenAction_die]
autoTrigger: if self.hp < (50+numberOfUnitsInTeam(withTag='魔力蔓延')*5)
convertTo: 贝露佩欧鲁-死
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}


