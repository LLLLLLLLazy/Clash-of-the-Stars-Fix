
[core]
name: 帝国机枪塔
displayText: 帝国机枪塔
displayDescription: -攻击地面与空中 \n -充能连射 \n -浮动装甲

class: CustomUnitMetadata
price: 6300
maxHp: 2600
mass: 9000
tags: units

armour: 10
armourMinDamageToKeep: 10

footprint: 0,0,1,1
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

techLevel: 1
buildSpeed: 30s

radius: 19
#displayRadius: 25

isBio: false
isBuilding: true

energyMax: 50
energyRegen: -0.1
energyStartingPercentage: 0

autoTriggerCooldownTime: 0.1s

[action_浮动装甲]
isVisible: true
isActive: false
id: ${section.text}
text: 浮动装甲
description: -根据受到的单次伤害与每秒伤害进行减伤\n -受到伤害越高，减伤越高\n -无法减伤超过当前血量的单次伤害
pos: 0
iconImage: 浮甲icon.png
displayType: infoOnlyStockpile
buildSpeed: 0s

[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_浮动装甲减伤]
@copyFromSection: template_浮动装甲减伤

[hiddenAction_浮动装甲复损]
autoTrigger: if self.resource.受损量>0
addResourcesWithLogic: 受损量=-select(self.resource.受损量>1, self.resource.受损量/2, self.resource.受损量)

[resource_受击前血量]
hidden: true

[resource_受到伤害]
hidden: true

[resource_受损量]
displayName: 受损量

[graphics]
total_frames: 1

image:        帝国炮塔底座.png
image_wreak:  帝国炮塔残骸.png
image_turret: 帝国炮塔.png

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 33
turretTurnSpeed: 4

maxAttackRange: 250
shootDelay: 4

[turret_1]
x: 0
y: 0
attachedTo: 2
slave: true

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:gun_fire
shoot_sound_vol:0.3
shoot_flame:CUSTOM:开火

image: 帝国炮管.png

energyUsage: 1

recoilOffset: -3
recoilOutTime: 2
recoilReturnTime: 5

[turret_2]
x: 0
y: 6

projectile: 2

turnSpeed: 4.0
turnSpeedAcceleration: 0.3
turnSpeedDeceleration: 0.5

shouldResetTurret: false

delay: 250

warmup: 35
warmupStartEffect: CUSTOM:上膛

resourceUsage: energy=-50

recoilOffset: -0.5
recoilOutTime: 2
recoilReturnTime: 5

idleSweepAngle: 30
idleSweepDelay: 250
idleSweepSpeed: 0.1

[projectile_1]
tags= T-projectile
directDamage: 25
life: 100
speed: 14

image: 玛瑙.png
drawSize: 0.6

lightColor: #000000
lightSize: 0.4

deflectionPower: 1

explodeEffect:CUSTOM:大爆炸,CUSTOM:冲击波,CUSTOM:光
explodeEffectOnShield:CUSTOM:光*2,CUSTOM:冲击波

[projectile_2]
tags= T-projectile
directDamage: 0
life: 0
invisible: true
targetGround: true
explodeEffect: NONE

[effect_上膛]
priority:veryhigh
image: SHARED:light_50.png
life: 35
fadeOut: true
attachedToUnit: true
color: #9214DC
scaleFrom: 0.2
scaleTo: 0.3
alpha: 0.8
drawUnderUnits:false
yOffsetRelative:-15
ySpeedRelative:2.5
alsoPlaySound:message.ogg:1.0

[effect_开火]
stripIndex: effects
frameIndex: 0
priority:low

life: 15
fadeOut: true
attachedToUnit: false
color: #000000
fadeInTime:5
hSpeed: 0.2
scaleFrom: 0.5
scaleTo: 2.0
alpha: 0.3
drawUnderUnits:false
xOffsetRelativeRandom:4
xSpeedRelativeRandom:0.4
ySpeedRelative:2
ySpeedRelativeRandom:0.5

shadow: true
atmospheric: true

[effect_大爆炸]
priority: veryhigh
life: 30
attachedToUnit: true
image: explode.png
scaleFrom: 1.0
scaleTo: 1.0
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_冲击波]
stripIndex: shockwave
life: 30
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0
scaleTo: 1.0
alpha: 0.9
alsoPlaySound:小爆炸.ogg:0.2

[effect_光]
priority:high

image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #000000

scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.5
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 帝国炮塔