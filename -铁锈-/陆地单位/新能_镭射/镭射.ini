
[core]
name: 镭射
displayText: 镭射
displayDescription: -攻击地面与空中 \n -破坏死光 \n -极高的爆发足以瞬间摧毁大部分实验级 \n -在攻击期间受到的伤害减半 \n -间歇性激光拦截 \n -自我修复

class: CustomUnitMetadata
price: 25000, 新能魔素=10
maxHp: 4500
mass: 90000
tags: units

techLevel: 1
buildSpeed: 0.00018

armour: 50
armourMinDamageToKeep: 50

selfRegenRate: 0.1

radius: 25
displayRadius: 28

transportSlotsNeeded: 5

energyMax: 1
energyRegen: 0.02

builtFrom_1_name: experimentalLandfactory
builtFrom_1_pos:  4.2

[hiddenAction_1]
alsoQueueAction: A
setResourcesWithLogic: 受击前血量=self.hp
[hiddenAction_A]
whenBuilding_cannotMove: true
addResources: unsetFlag=1
buildSpeed: 2s


[hiddenAction_伤害减免50%]
autoTriggerOnEvent: tookDamage
requireConditional: if self.resource.受击前血量>self.hp and self.hasFlag(id=1)
setResourcesWithLogic: hp=self.hp+( (self.resource.受击前血量-self.hp) * 0.5), 受击前血量=self.hp

[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp and self.hasFlag(id=1)
setResourcesWithLogic: 受击前血量=self.hp

[resource_受击前血量]
hidden: true

[graphics]
total_frames: 1
image:       镭射.png
image_wreak: 镭射残骸.png
image_turret: NONE

teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 25
turretTurnSpeed: 3

maxAttackRange: 260
shootDelay: 800

turretRotateWithBody: false

[turret_base]
#主体
invisible: true
canShoot: false
x: 0
y: 0
idleDir: 0
turnSpeed: 2.9
turnSpeedAcceleration: 0.3

[turret_barrel]
#barrel
x: 0
y: 0
attachedTo: base
slave: true

projectile: null
resourceUsage: setFlag=1
onShoot_triggerActions: 1

invisible: true

turnSpeed: 0
turnSpeedAcceleration: 1.0

laserDefenceEnergyUse: 1.1

shoot_sound:plasma_fire
shoot_sound_vol:0.8
shoot_flame:small
#shoot_light:#FFff0000

canShoot: true

recoilOffset: -2.5
recoilOutTime: 2
recoilReturnTime: 18

#energyUsage: 1

warmup:200
chargeEffectImage: laser_tank_charge.png

[turret_b1]
x: 0
y: 0
attachedTo: base
slave: true

projectile: laser
invisible: true

turnSpeed: 0
turnSpeedAcceleration: 1.0

shoot_sound:plasma_fire
shoot_sound_vol:0.2
#shoot_flame:small
shoot_light:#FFff0000
canAttackCondition: if self.hasFlag(id=1)

warmup: 0
delay: 10

[turret_b2]
@copyFromSection: turret_b1
warmup: 2
delay: 8

[turret_b3]
@copyFromSection: turret_b1
warmup: 4
delay: 6

[turret_b4]
@copyFromSection: turret_b1
warmup: 6
delay: 4

[turret_b5]
@copyFromSection: turret_b1
warmup: 8
delay: 2

[turret_b6]
@copyFromSection: turret_b1
warmup: 12
delay: 10
warmupNoReset: true
warmupCallDownRate: 1
chargeEffectImage: NONE

[projectile_laser]
tags= T-projectile
areaDamage: 150
areaRadius: 30
areaDamageNoFalloff: true
armourIgnoreAmount: 150
life: 15

largeHitEffect: true

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
instantReuseLast_keepAreaDamageList: false

sweepOffset: 100
sweepSpeed: 5

laserEffect:true

color:#6fff0000
spawnUnit: A_连锁激光, A_爆炸效果

explodeEffect: CUSTOM:lightSlowFade, CUSTOM:红雾
explodeEffectOnShield: CUSTOM:lightSlowFade, CUSTOM:红雾

[projectile_null]
tags= T-projectile
directDamage:0
invisible: true
life: 0
explodeEffect: NONE

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FF0000
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true

[effect_红雾]
priority: low
attachedToUnit: false
life: 90
alpha: 0.9
scaleFrom: 1.5
scaleTo: 2.5
hSpeed: 0.2
color: #ff0000
stripIndex: effects
drawUnderUnits:false
atmospheric:true
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

reverseSpeedPercentage: 1.0

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false

[leg_1]
x: -23
y: 24
attach_x: 0
attach_y: 0
moveSpeed: 2.4
moveWarmUp:0.05s

rotateSpeed: 7

heightSpeed: 0.5
resetAngle:25

image_leg:  镭射腿.png
image_foot: NONE

#draw_foot_on_top: true
#dust_effect: false

holdDisMin: 22
holdDisMax: 52

endDirOffset:45

[leg_2]
x: 23
y: 24
attach_x: 0
attach_y: 0
copyFrom: 1

endDirOffset:-45

[leg_3]
x: -23
y: -24
attach_x: 0
attach_y: 0
copyFrom: 1

endDirOffset:-45

[leg_4]
x: 23
y: -24
attach_x: 0
attach_y: 0
copyFrom: 1


endDirOffset:45
