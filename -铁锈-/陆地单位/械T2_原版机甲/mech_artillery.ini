
[core]
name: mechArtillery
class: CustomUnitMetadata

copyFrom: mech_med_common.ini

overrideAndReplace: mechArtillery

price: 1400
maxHp: 530
mass: 6000

tags: units, 转向攻击

techLevel: 1
buildSpeed: 0.0007
#availableInDemo: true


fogOfWarSightRange: 17


radius: 21
#displayRadius: 11
isBio: false
softCollisionOnAll: 0


#energyMax: 3
#energyRegen: 0.010
#energyNeedsToRechargeToFull: true



builtFrom_1_name: mechFactory
builtFrom_1_pos: 7

builtFrom_2_name: mechFactoryT2
builtFrom_2_pos: 7

transportSlotsNeeded: 2

[graphics]
total_frames: 1

image:        topArtillery.png
image_wreak:  NONE
image_turret: NONE

image_shadow: SHADOW:topArtillery.png
shadowOffsetX:2
shadowOffsetY:2


#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6


#lock_shadow_rotation_with_main_turret: true
lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 18
turretTurnSpeed: 3

maxAttackRange: 290
shootDelay: 140

turretRotateWithBody: false

aimOffsetSpread: 0.2

[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 2.9
turnSpeedAcceleration: 0.3

canShoot: false


recoilOffset: -5
recoilOutTime: 7
recoilReturnTime: 14



[turret_2]
#
x: -2
y: 31
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:large
shoot_light:#FFEECCCC

canShoot: true

size: 0


#energyUsage: 1




[projectile_1]
tags= T-projectile
directDamage: 65
life: 150
speed: 6
largeHitEffect: true
frame: 2
#targetGround: true
areaDamage: 65
areaRadius: 50

trailEffect: true

lightColor: #ffe92b
lightSize: 0.6

#targetGroundSpread: 30
initialUnguidedSpeedHeight: 1.2
gravity:0.18
#lightCastOnGround: true





[movement]

moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


reverseSpeedPercentage:1


[hiddenAction_AI走位]
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_mapMustBeReachable: true
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true