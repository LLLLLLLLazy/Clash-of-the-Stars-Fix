
[core]
name: 先知
displayDescription: -奇异甲虫 \n -发射追踪尖刺攻击空中单位并揭开迷雾
class: CustomUnitMetadata
price: 9500
maxHp: 2000
mass: 15000

techLevel: 2
buildSpeed: 41.7s

fogOfWarSightRange: 20

radius: 20
displayRadius: 24

isBio: true
isBug: true
tags: units, 虫族, 中型虫+, 固定射击

selfRegenRate:0.1

softCollisionOnAll: 5

transportSlotsNeeded: 2


[attachment_1]
onCreateSpawnUnitOf:附属_尖刺发射
x:0
y:0
canAttack:true
rotateWithParent:true
keepAliveWhenParentDies:false
canBeAttackedAndDamaged:false
setDrawLayerOnBottom:true
idleDir:0
alwaysAllowedToAttackParentsMainTarget:false

[hiddenAction_属性变化]
@copyFromSection: template_属性变化-附属


[graphics]
total_frames: 1

image:       防空虫.png
image_wreak:  NONE
image_turret: NONE

imageScale: 1.2

#AUTO
image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 30
turretTurnSpeed: 2.5

maxAttackRange: 390
shootDelay: 110

aimOffsetSpread: 0

isFixedFiring:true

[turret_1]
x:0
y:0

[turret_2]
x:0
y:0

[turret_3]
x:0
y:0

[turret_4]
x:0
y:0

[turret_5]
x:0
y:0

[turret_6]
x:0
y:0

[projectile_1]
directDamage:100
life:0
speed:0
explodeEffect:NONE

[leg_1]
x: -20
y: -5
attach_x: 0
attach_y: 0
moveSpeed: 3
resetAngle:20

heightSpeed: 0.8

image_leg:  leg2.png
image_foot: NONE

drawLegWhenZoomedOut: true

dust_effect: false

holdDisMin: 15
holdDisMax: 30

[leg_2]
x: 20
y: -5
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -15
y: 8
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_4]
x: 15
y: 8
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_5]
x: -15
y: -17
attach_x: 0
attach_y: -2
copyFrom: 1

[leg_6]
x: 15
y: -17
attach_x: 0
attach_y: -2
copyFrom: 1

[movement]
movementType: OVER_CLIFF

moveSpeed: 0.7
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.12

maxTurnSpeed: 2.5
turnAcceleration: 0.1

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181


[hiddenAction_AI走位]
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
alsoTriggerAction: AI随机侧移
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true

[hiddenAction_AI随机侧移]
requireConditional: if not attachment.getOffsetRelative(y=-40).isOverPassableTile(type='${movement.movementType}')
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 2s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=30, x=rnd(-200, 200))

[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(lessThan=600))
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(full=true))
addResources: unsetFlag=1

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')
