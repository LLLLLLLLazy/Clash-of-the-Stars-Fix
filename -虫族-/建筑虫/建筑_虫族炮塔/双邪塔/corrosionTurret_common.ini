
[core]

dont_load:true

class: CustomUnitMetadata

price: ${price}, 腐蚀=${corrode}
mass: 9000

reclaimPrice: 0

tags: units, 虫族, 虫建筑, 炮塔

techLevel: 1
selfBuildRate: 0.001

radius: 16
softCollisionOnAll: 3

isBio: true
isBug: true
isBuilding: true

unitsSpawnedOnDeath: 滞留毒雾(addResources=setFlag:2), 资源返还(addResources=ammo:${price*0.25}|energy:${corrode*0.25})

[hiddenAction_腐蚀价格]
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}


[action_reclaim]
requireConditional: if self.hp>0
id: 回归根系
text: 回归根系
description: """ -自我回收 \n -
%{select(self.resource.野性<1, str( "退还"+int( (0.25+0.5 * (self.hp/self.maxHp))*100 )+"%资源($"+int( ${price * 0.25}+${price * 0.5} * (self.hp/self.maxHp) )+"+腐蚀"+int( ${corrode * 0.25}+${corrode * 0.5} * (self.hp/self.maxHp) )+")" ),
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), "[野性]: 退还25%资源($${price * 0.25}+腐蚀${corrode * 0.25})", "[野性]: 不退还资源" ))}
 \n -退还资源量会随当前血量的降低减少%{select(self.globalTeamTags(includes="狂猎"), "", "(缺少狂猎: 实际退还-25%)")}
 """
pos: -1
ai_isDisabled: true
allowMultipleInQueue: false
buildSpeed: 5s
iconImage: icon_sell_top.png
addResourcesWithLogic: """ credits=
select(self.resource.野性<1, ${price * (0.75 - 0.25)},
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), ${price * (0.25 - 0.25)}, 0 ))
* (self.hp/self.maxHp),
腐蚀=
select(self.resource.野性<1, ${corrode * (0.75 - 0.25)},
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), ${corrode * (0.25 - 0.25)}, 0 ))
* (self.hp/self.maxHp),
hp=-999999
"""
autoTrigger: if not self.isOverPassableTile(type="AIR")
isLockedAlt: if self.globalTeamTags(includes="虫塔自我回收限制[半腐]") and numberOfUnitsInTeam(withTag='母巢T2')<1
isLockedAltMessage: 地图限制:需求母巢T2

[global_resource_玩家总数]
displayName: 玩家总数


[resource_野性]
displayName: 野性


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2


[hiddenAction_毒蚀地]
autoTrigger: true
spawnEffects: CUSTOM:trace*2

[effect_trace]
delayedStartTimerRandom: 45
priority: verylow
attachedToUnit: false
life: 300
image: SHARED:spark.png
color: #176917
scaleFrom: 2
scaleTo: 2
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
drawUnderUnits: true
atmospheric: true
hSpeed: -0.8
hSpeedRandom: -0.2
dirSpeedRandom: 1.5


[graphics]
image_wreak: NONE

image_shadow: NONE
shadowOffsetX: 1
shadowOffsetY: 1

animation_idle_blendIn: 1s
animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 75
animation_idle_scale_start: 1
animation_idle_scale_end: 1.02
animation_idle_pingPong: true

animation_attack_start: 0
animation_attack_end: 0
animation_attack_speed: 10
animation_attack_scale_start: 1
animation_attack_scale_end: 1.02
animation_attack_pingPong: true

[animation_build]
onActions: underConstructionWithLinkedBuiltTime
blendOut: 2s
body_0: {scale:0}
body_1: {scale:1.2}


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 2
turretTurnSpeed: 6



[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 虫塔

buildPriority: 0.22
noneInBaseExtraPriority: 0.17

maxEachBase: 3

ai_upgradePriority: 0.24

