[core]
name: 皎红裂隙
class:CustomUnitMetadata
price:0
maxHp:9999
mass:99999999
radius:8
displayRadius:8

tags: magic, 皎红母虫

isBuilding:true
isBuilder:true

energyMax:300
energyRegen:-1

exit_x:0
exit_y:-1

#隐藏单位本身
showInEditor: false
fogOfWarSightRange: 0
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

[resource_倒计时]
hidden:true

[action_1]
autoTrigger:if true

addResources:ammo=1
text:%{self.timeAlive-self.resource.倒计时}
isVisible:false

[hiddenAction_产生建造虫]
autoTrigger:if self.ammo==3
produceUnits:皎红建造虫*1
spawnEffects:弯曲2

[hiddenAction_侦察虫]
autoTrigger:if self.ammo==4
produceUnits:皎红噬咬虫*1
spawnEffects:弯曲2

[hiddenAction_产生建造虫5]
autoTrigger:if self.ammo==5
produceUnits:皎红母虫
spawnEffects:弯曲2

[hiddenAction_消失]
autoTrigger:if self.ammo==7
deleteSelf:true

spawnEffects:弯曲大

[hiddenAction_计时]
autoTrigger:if self.ammo==6
setResourcesWithLogic:倒计时=self.timeAlive

[hiddenAction_特效]
alsoQueueAction:特效
buildSpeed:0.1s
autoTrigger:if not self.hasFlag(id=1)
addResources:setFlag=1
spawnEffects:弯曲,激光闪,1

[decal_3]
image:黑洞.png
onlyWhileActive: true
onlyWhileAlive: true
onlyOnNonPreview: true
@define timer_2s: ((self.timeAlive() % 2) / 2)
imageScale:(select(self.ammo<6,select((self.timeAlive-self.resource.倒计时)<=1,self.timeAlive-self.resource.倒计时,1),1-(self.timeAlive-self.resource.倒计时)))*0.37

[effect_激光闪]
life:20
image:SHARED:light_50.png
color:#ff0000
attachedToUnit:false
alpha:0.2
scaleFrom:5
scaleTo:5

[effect_弯曲]

drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 60
fadeOut: true
fadeInTime: 10

attachedToUnit: true
color: #FFFFFF
scaleFrom: 0
scaleTo: 6
alpha: 0.05
drawUnderUnits:false

#dirOffsetRandom: 180
#dirSpeed: 1
#delayedStartTimer: 0
alwayStartDirAtZero: true
priority:critical

[effect_弯曲2]
@copyFromSection:effect_弯曲
scaleFrom: 1
scaleTo: 2
alpha: 0.1

[effect_弯曲大]
@copyFromSection:effect_弯曲

scaleFrom: 0
scaleTo: 3
alpha: 0.1

[effect_弯曲大2]
@copyFromSection:effect_弯曲

scaleFrom: 0
scaleTo: 3
alpha: 0.1
yOffsetRelative:-100

[graphics]
total_frames:1
image:SHARED:blank.png
image_wreak:NONE
image_turret:NONE

showEnergyBar:false
showQueueBar:false

[attack]
canAttack:false
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false

maxAttackRange:10

[turret_1]
x:0
y:0
size:0
canShoot:false

[projectile_1]
life:300
areaDamage:0
trailEffect:custom:1
speed:0
drawSize:0

[effect_1]
life:180
image:SHARED:light_25.png
color:#ff0000
xSpeedAbsoluteRandom:0.6
ySpeedAbsoluteRandom:0.6
xOffsetAbsoluteRandom:20
yOffsetAbsoluteRandom:20
attachedToUnit:false
scaleFrom:0.5
scaleTo:0.1

fadeInTime:60
[movement]
movementType:NONE
moveSpeed:0
moveAccelerationSpeed:0
moveDecelerationSpeed:1




maxTurnSpeed:0
turnAcceleration:0

moveSlidingMode:true
moveIgnoringBody:true
moveSlidingDir:181