
[core]
name: 岩礁虫
displayDescription: -在水上时攻击水上 \n -在水下时攻击水下 \n “它们在礁石下等待过往的船只”
class: CustomUnitMetadata
price: 300
maxHp: 250
mass: 3000

techLevel: 1

buildSpeed: 0.005
availableInDemo: true

radius: 9
displayRadius: 11

selfRegenRate:0.06

softCollisionOnAll: 8

isBio: true
isBug: true
tags: units, 虫族, 小型虫

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU: true

[action_floatAndSink]
convertTo: 岩礁虫[潜]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
id: ${section.text}
text: ↓下沉↓
description: -沉入水下
buildSpeed: 0.3s
pos:1
highPriorityQueue: true
alwaysSinglePress: true
spawnEffects: CUSTOM:shockwave2, CUSTOM:displacement

[effect_shockwave]
priority:low
stripIndex: shockwave_large
life: 15
attachedToUnit: true
scaleFrom: 0
scaleTo: 0
alpha: 0
alsoEmitEffectsOnDeath: CUSTOM:shockwave2, CUSTOM:displacement

[effect_shockwave2]
priority:low
stripIndex: shockwave_large
life: 45
fadeOut: true
fadeInTime: 3
attachedToUnit: false
color: #66B6E4
scaleFrom: 0
scaleTo: 0.5
alpha: 0.5
drawUnderUnits:true

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 60
fadeOut: true
fadeInTime: 5
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.1
scaleTo: 0.7
alpha: 0.03
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeed: 1


[hiddenAction_无延迟追击B]
@copyFromSection: template_无延迟追击B
[hiddenAction_无延迟追击B2]
@copyFromSection: template_无延迟追击B2


[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点


[hiddenAction_水下出厂]
@copyFromSection: template_水下出厂

[graphics]

total_frames: 1
image:        岩礁虫.png
image_wreak:  NONE
image_turret: NONE

#AUTO
image_shadow: NONE
shadowOffsetX:0
shadowOffsetY:0

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 100
animation_idle_scale_start: 1
animation_idle_scale_end: 1.02
animation_idle_pingPong: true

lock_body_rotation_with_main_turret: true

movementEffect: CUSTOM:splash
movementEffectRate: 8

[effect_splash]
priority:verylow
stripIndex: effects
frameIndex: 13

life: 60
fadeOut: true
fadeInTime: 3
attachedToUnit: false

scaleFrom: 0.7
scaleTo: 1.0
alpha: 0.4
atmospheric:true

dirOffsetRandom:180

ySpeedRelative:-0.2
yOffsetRelative:-11
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1

drawUnderUnits:true

[attack]
isMelee: true
meleeEngangementDistance: 150

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   if self.isAtGroundHeight
canAttackUnderwaterUnits: if self.isUnderwater
canAttackNotTouchingWaterUnits: if self.isAtGroundHeight

turretSize: 20
turretTurnSpeed: 6

maxAttackRange: 9
shootDelay: 50

[turret_1]
x: 0
y: 0

recoilOffset: 6
recoilOutTime: 7
recoilReturnTime: 14

[projectile_1]
tags= T-projectile
directDamage: 32
life: 50
instant: true

explodeEffect: CUSTOM:explodeSmall, 撞波

[effect_explodeSmall]
life: 17
fadeOut: false
attachedToUnit: true

image: explode_big2.png
scaleFrom: 0.6
scaleTo: 0.6

total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5

[effect_撞波]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 0.6
alpha: 0.8

[movement]
movementType: WATER

reverseSpeedPercentage: 0.8

moveSpeed: 1.7
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.06

targetHeight: -0.7
targetHeightDrift: 0.3

maxTurnSpeed: 4.1
turnAcceleration: 0.5

moveSlidingMode :true
moveIgnoringBody:false
moveSlidingDir:  181





