
[core]
name: 幻光投影
displayText: 幻光投影塔
displayDescription: -受到任意攻击后立刻消散 \n -但完全继承了本体的伤害 \n -在投影时消散会退还80%资源 \n -最多存在60s
price: 400
maxHp: 700
mass: 9000
showInEditor:false
tags: units, 幻, 幻塔

buildSpeed: 0.1s
techLevel: 1

#footprint used for collisions with units (left, up, right, down)
footprint: 0,0,1,1
#used for placement, and placement of other buildings
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

radius: 20

isBio: false
isBuilding: true

softCollisionOnAll: 0

numBitsOnDeath: 0
explodeOnDeath: false
hideScorchMark: false

effectOnDeath: CUSTOM:投影消散

[placementRule_1]
#anyRuleInGroup:place
searchTags: 幻塔
searchTeam: own
searchDistance: 284
excludeIncompleteBuildings: true
excludeNonBuildings: true
minCount: 1
maxCount: 99999
blocksPlacement: true
cannotPlaceMessage: [不能在此部署]
checkEachTile: true


[hiddenAction_投影过程]
autoTriggerOnEvent: created
setResourcesWithLogic: hp=1

[hiddenAction_投影完成]
autoTriggerOnEvent: completeAndActive
addResources: hp=700, setFlag=1
spawnEffects: CUSTOM:幻光投影

[hiddenAction_投影中断]
autoTriggerOnEvent: destroyed
requireConditional: if not self.hasFlag(id=1)
addResources: ${core.price * 0.8}

[hiddenAction_kill]
autoTrigger: if self.hasTakenDamage(withinSeconds=2) or self.timeAlive(laterThanSeconds=60)
addResources: hp=-1000

[arm_1]
x: 0
y: 0
image_end: 幻光投影.png
drawOverBody: true
hidden: if self.completed

[graphics]
total_frames:1
image: 幻光投影塔.png
image_wreak: NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1

showHealthBar: false
disableLowHpFire: true
disableLowHpSmoke: true

[effect_幻光投影]
image: 幻光投影.png
life: 50
fadeOut: true
scaleFrom: 1
scaleTo: 1.2
alpha: 0.8

[effect_投影消散]
image: 幻光投影塔.png
life: 25
fadeOut: true
scaleFrom: 1
scaleTo: 1
alpha: 0.8

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

turretTurnSpeed: 20

maxAttackRange: 270
shootDelay: 0.01

[turret_1]
x: 0
y: 13

chargeEffectImage:hit.png
warmup: 95

shoot_flame: CUSTOM:lightSlowFade, CUSTOM:建造hit

size:0

projectile: 1

[projectile_1]
tags= T-projectile
directDamage: 200
life: 80
speed: 0
targetSpeed: 16
targetSpeedAcceleration: 0.7

drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2

explodeEffect: CUSTOM:projectilePassThough, smallExplosion, CUSTOM:hitLightFlash
effectOnCreate: CUSTOM:projectileLight*3

[effect_建造hit]
image: hit.png
life: 40
fadeOut: true
scaleFrom: 0
scaleTo: 1.5
alpha: 1

[effect_warmup]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.1
scaleTo: 0.1
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:3.9

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.6
drawUnderUnits:true


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 1
scaleTo: 0.5
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[movement]
movementType: OVER_CLIFF
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

