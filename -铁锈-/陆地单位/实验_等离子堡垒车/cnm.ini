[core]


name:等离子堡垒车
displayText:等离子堡垒车
displayDescription:-带有防护盾\n-强大的对地攻击\n-一门重型等离子炮&两门轻型等离子炮\n-但不具备防空能力\n-移动无需转向\n-可消耗资源储蓄护盾

class:CustomUnitMetadata
price:36000
maxHp:5000
mass:90000
maxShield:3000
shieldRegen:0.4

fogOfWarSightRange:18

tags: units, 车辆, 丹尼斯堡垒车

techLevel:1
buildSpeed:83.3s
experimental: true
availableInDemo: true

energyMax: 3000
energyRegen: 0

radius:40
displayRadius:40
shieldRenderRadius:38

isBio:false
softCollisionOnAll:0
explodeTypeOnDeath: largeUnit

builtFrom_1_name:experimentalLandfactory
builtFrom_1_pos: 4.2

transportSlotsNeeded:6

[action_储能护盾]
isActive: if not self.energy(full=true)
pos: 1
id: 储能护盾
text: Energy storage shield
text_zh: 储能护盾 %{select(self.energy>0, str('('+self.energy+')'), '')}
description: -Available when shield is full \n -Consumable resources to recover full energy \n -Quickly consume energy to recover shield when shield ≤ 75 \n -Excess resources consumed will be refunded
description_zh: -护盾为满时可用 \n -可消耗资源回满能量 \n -当护盾≤75时快速消耗能量回复护盾 \n -消耗的多余资源会退还
iconImage: shield.png
price: 1000
buildSpeed: 11.1s
displayType: action
isLocked: if not self.shield(full=true)
isLockedMessage: 需要护盾为满
allowMultipleInQueue: false
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true
addResourcesWithLogic: credits=1000 * (self.energy/self.maxEnergy), energy=3000

[hiddenAction_盾能转换]
autoTrigger: if self.shield <= self.maxShield * 0.75 and self.energy>0
addResourcesWithLogic: shield=min(150, self.energy), energy=-150
spawnEffects: CUSTOM:白粒收*8,盾收,盾展

[graphics]
total_frames:1
teamColorsOnTurret:true
image: 等离子堡垒车.png
image_wreak: 等离子堡垒车_死亡.png
image_shield: shield.png

image_turret: 等离子炮.png

image_shadow:AUTO
shadowOffsetX:1
shadowOffsetY:1

showEnergyBar: false

lock_body_rotation_with_main_turret:false

[decal_能量条框]
isVisible: if not self.energy(full=true)
image: 白色条框.png
color: #00E4E8
alpha: 0.8

layer: beforeUI
alwaysStartDirAtZero: true
yOffsetAbsolute: ${core.radius + 15}
xOffsetAbsolute: 0.5

imageScaleX: ${core.radius - 0.5}
lineWidth: ${core.radius}

onlyWhileAlive: true

[decal_能量条-左边框]
@copyFromSection: decal_能量条框
image: 白色条左边框.png

xOffsetAbsolute: -${core.radius - 0.5}
imageScaleX: 1

[decal_能量条-右边框]
@copyFromSection: decal_能量条-左边框
image: 白色条右边框.png

xOffsetAbsolute: ${core.radius + 0.5}

[decal_能量条]
@copyFromSection: decal_能量条框
image: 白色条.png

xOffsetAbsolute: -${core.radius}
imageScaleX: ${core.radius} * (${core.radius/20}/self.maxEnergy) * self.energy

[attack]
canAttack:true
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false

turretSize:18
turretTurnSpeed:4

maxAttackRange:275
shootDelay:18

turretMultiTargeting:true

[turret_2]
x: 14
y: 18
barrelY:18
projectile:1

turnSpeed:4.0
turnSpeedAcceleration:0.7

#shoot_sound:firing4
#shoot_sound_vol:0.8
shoot_sound:plasma_fire
shoot_sound_vol:0.07
shoot_flame:CUSTOM:lightSlowFade
shoot_light:#ffffff
canShoot:true

recoilOffset:-2
recoilOutTime:4
recoilReturnTime:20


#warmupStartEffect: CUSTOM:warmup
warmup:7

chargeEffectImage:SHARED:lighting_charge.png

[turret_3]
x: -14
y: 18
copyFrom: 2

[turret_1]
#
x:0
y:-15
barrelY:55

projectile:2

turnSpeed:2.5
turnSpeedAcceleration:0.5

#shoot_sound:firing4
shoot_sound_vol:0.8
shoot_flame:CUSTOM:lightSlowFade,开火三角*5
shoot_light:#ffffff
delay:2.0s
canShoot:true

recoilOffset:-8
recoilOutTime:5
recoilReturnTime:45

#warmupStartEffect: CUSTOM:warmup
warmup:0.5s

chargeEffectImage:SHARED:lighting_charge.png

image: 等离子主炮.png

[projectile_1]
tags= T-projectile
directDamage: 100
life: 80
speed: 0
targetSpeed: 16
targetSpeedAcceleration: 0.7
color:#63e6e8
lightColor:#63e6e8
drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2

#trailEffectRate: true

#lightColor:#ffffff

explodeEffect: CUSTOM:projectilePassThough, explodeSmall,CUSTOM:hitLightFlash
#explodeEffectOnShield: CUSTOM:hitLightFlash

effectOnCreate: CUSTOM:projectileLight


[projectile_2]
tags= T-projectile
directDamage: 350

life: 80
speed: 0
targetSpeed: 20
targetSpeedAcceleration: 0.7

drawType:2
image:直弹.png
drawSize: 1.1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:1

deflectionPower: 4

#trailEffectRate: true

color:#63e6e8
lightColor:#63e6e8

explodeEffect: CUSTOM:projectilePassThough, explodeSmall,triangle,光点

#explodeEffectOnShield: CUSTOM:hitLightFlash

effectOnCreate: CUSTOM:projectileLight,三角拖尾

spawnProjectilesOnExplode: 3*5(offsetRandomDir=360, offsetRandomXY=30, spawnChance=0.6), 3

[projectile_3]
tags= T-projectile
areaDamage:	3
areaRadius:	45
areaRadiusFromEdge: true

life: 1
speed: 1
#targetSpeed: 20
#targetSpeedAcceleration: 0.7
turnSpeed: 1.5

drawType:2
frame:4
drawSize: 0.5
#trailEffect: CUSTOM:projectileTrail
#trailEffectRate:2

trailEffect: true
color:#63e6e8
lightColor:#63e6e8

explodeEffect: CUSTOM:triangle,光点

explodeEffectOnShield: CUSTOM:triangle,光点

effectOnCreate: CUSTOM:projectileLight

explodeOnEndOfLife: true
spawnProjectilesOnExplode: 3(recursionLimit=30)

[effect_warmup]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.1
scaleTo: 0.1
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:3.9

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 1
scaleTo: 0.5
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true


[effect_白粒收]
priority:high
image:远端白粒.png
life:60
fadeInTime:15
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom:4
scaleTo:0
alpha: 0.8
drawUnderUnits:false
dirOffsetRandom:360
delayedStartTimerRandom: 60

[effect_盾收]
priority:high
image:shield.png
life: 90
fadeInTime: 15
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom:1.5
scaleTo:0
alpha: 0.5
drawUnderUnits:false

[effect_盾展]
priority:high
image:shield.png
life:60
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom:0
scaleTo:1.5
alpha: 0.5
drawUnderUnits:false

[effect_explodeSmall]
priority: low
color:#63e6e8
life: 20
attachedToUnit: true
image: 白爆.png
scaleFrom:0.8
scaleTo:0.8
alpha: 0.8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.6
fadeOut: false

[effect_triangle]
life:60
attachedToUnit: false
atmospheric: true
image:effect_triangle.png
priority:verylow
createWhenZoomedOut:false
createWhenOffscreen:false
showInFog:false
dirSpeedRandom:3
xOffsetRelativeRandom:3
yOffsetRelativeRandom:3
xSpeedRelativeRandom:1
ySpeedRelativeRandom:1
hSpeed:1
scaleFrom:0.3
scaleTo:0
color:#63e6e8
alpha:0.8
spawnChance:0.3

[effect_光点]
image:光点.png
life:15
color:#63e6e8
alpha:3
scaleFrom:0.8
scaleTo:0

[effect_三角拖尾]
priority: low
image: effect_triangle.png
life:30
fadeInTime:15
fadeOut: true
attachedToUnit: false
scaleFrom:0.3
scaleTo:0
alpha: 0.6
color: #63e6e8
ySpeedRelative: -0.1
atmospheric: true
yOffsetRelative:2
xOffsetRelativeRandom:5
yOffsetRelativeRandom: 2.5
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1
dirSpeedRandom:2
dirOffsetRandom:180

[effect_开火三角]
priority: verylow
attachedToUnit: false
life:90
fadeInTime: 10
scaleFrom:0.3
scaleTo:0
alpha: 0.6
color: #63e6e8
xSpeedRelativeRandom:0.5
ySpeedRelative:1
ySpeedRelativeRandom:0.5
image:effect_triangle.png
lifeRandom:40
dirSpeedRandom:3
dirSpeed:6
atmospheric:true


[movement]
movementType:LAND
moveSpeed:0.3
moveAccelerationSpeed:0.01
moveDecelerationSpeed:0.01

reverseSpeedPercentage:0.8

targetHeight: 1.5
targetHeightDrift: 0.5

maxTurnSpeed:1
turnAcceleration:0.03

moveSlidingMode: false
moveIgnoringBody: true
