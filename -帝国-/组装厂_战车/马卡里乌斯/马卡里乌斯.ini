
[core]
name: 马卡里乌斯
displayText: 马卡里乌斯

displayDescription: -非常全副武装\n-攻击地面与空中\n-强大火力散弹主炮\n-配置两门副炮发射撕裂弹\n-自我修复
class: CustomUnitMetadata
price: 22000
maxHp: 6500
mass: 60000
tags: units, 马卡里乌斯

armour: 30
armourMinDamageToKeep: 30

fogOfWarSightRange: 18

techLevel: 2
buildSpeed: 0.00024
#availableInDemo: true

numBitsOnDeath: 15
explodeTypeOnDeath: large
effectOnDeath: CUSTOM:shockwave_large

selfRegenRate: 0.15

radius: 40
displayRadius: 44

transportSlotsNeeded: 5

energyMax: 5
energyRegen: 0.004
energyRegenWhenRecharging: 0.008
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 0.1s

[hiddenAction_能量变动]
requireConditional: if not self.isEnergyRecharging
addResources: setFlag=2

[hiddenAction_已开火]
resetCustomTimer: true

[hiddenAction_对空转换]
autoTrigger: if self.customTimer>=${attack.shootDelay/60} and attacking.flying and not self.hasFlag(id=3)
addResources: setFlag=3

[hiddenAction_对地转换]
autoTrigger: if self.customTimer>=${attack.shootDelay/60} and not attacking.flying and self.hasFlag(id=3)
addResources: unsetFlag=3

[graphics]
total_frames: 3

image:        马卡里乌斯车体.png
image_wreak: 马卡里乌斯残骸.png
image_turret: 马卡里乌斯副炮台.png
teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX: 3
shadowOffsetY: 3

animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 1

dustEffect: true
dustEffectReverse: false

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 23
turretTurnSpeed: 3

maxAttackRange: 310
shootDelay: 55

turretMultiTargeting: true

[turret_1]
x: 13
y: 13

idleDir:10
idleDirReversing: 170

shoot_sound:large_gun_fire2
shoot_sound_vol:0.15
shoot_flame:CUSTOM:sparks*5
shoot_light:#7900A1

projectile: 1

limitingRange: 220

turnSpeedAcceleration: 0.2
turnSpeed: 4

recoilOffset: -1
recoilOutTime: 3
recoilReturnTime: 4

[turret_2]
x: -13
y: 13

idleDir:-10
idleDirReversing: 190

copyFrom: 1
linkDelayWithTurret:1
warmup:22

[turret_3]
x: 6
y: 28
attachedTo: 5
slave: true

size: 17

shoot_sound: large_gun_fire1
shoot_sound_vol: 0.5
shoot_flame: large

canShoot:true
canAttackFlyingUnits: false
canAttackLandUnits: if not self.hasFlag(id=3)
canAttackUnderwaterUnits: false

image: 马卡里乌斯主炮管.png
invisible: if self.hasFlag(id=3)

recoilOffset: -4
recoilOutTime: 10
recoilReturnTime: 18

aimOffsetSpread: 0

projectile: 2
altProjectile: 3
altProjectileCondition: if self.isEnergyRecharging
onShoot_triggerActions: 能量变动, 已开火

delay: 120

[turret_4]
x: -6
y: 28
copyFrom: 3
linkDelayWithTurret:3
warmup: 55

onShoot_triggerActions: 能量变动, 已开火

[turret_3Air]
@copyFromSection: turret_3
canAttackFlyingUnits: if self.hasFlag(id=3)
canAttackLandUnits: false

invisible: if not self.hasFlag(id=3)

projectile: 4
altProjectile: 5
altProjectileCondition: if self.isEnergyRecharging

[turret_4Air]
@copyFromSection: turret_3Air
x: -6
y: 28
linkDelayWithTurret: 3Air
warmup: 55


[turret_3-E]
x: 0
y: 0
invisible: true

canShoot: true
canAttackFlyingUnits: if self.hasFlag(id=3)
canAttackLandUnits: if not self.hasFlag(id=3)

projectile: null
energyUsage: 1
resourceUsage: hasFlag=2, unsetFlag=2
delay: 0



[turret_5]
x: 0
y: -15
canShoot: false

image: 马卡里乌斯主炮台.png

turnSpeed: 2.2
turnSpeedAcceleration: 0.15
turnSpeedDeceleration: 0.38

recoilOffset: -1
recoilOutTime: 4
recoilReturnTime: 8

[turret_主范围]
#用于锁定目标
x: 0
y: 0
invisible: true
projectile: null
energyUsage: 99


[projectile_1]
tags= T-projectile
areaDamage:110
areaRadius:30
#areaDamageNoFalloff:true
areaRadiusFromEdge:true
life: 100
speed: 7
frame:11
drawSize:1
largeHitEffect: true
trailEffect:CUSTOM:projectileTrail2
trailEffectRate:0.5
lightColor:#FFEDED
lightSize:0.4
shieldDamageMultiplier:3
explodeEffect:CUSTOM:lightningShock,CUSTOM:shockwave,CUSTOM:sparks*5,CUSTOM:hitLightFlash
explodeEffectOnShield:CUSTOM:lightningShock,CUSTOM:shockwave,CUSTOM:hitLightFlash*2
spawnProjectilesOnExplode:爆炸效果

[projectile_爆炸效果]
tags= T-projectile
directDamage:0
largeHitEffect: true
life:0
explodeOnEndOfLife:true
explodeEffectOnShield:NONE

[projectile_2]
tags= T-projectile
areaDamage: 300
areaRadius: 55

life: 7
speed: 4
targetSpeed: 5
targetSpeedAcceleration: 0.03

frame: 9
drawSize: 1.0

largeHitEffect:true

deflectionPower: 27

trailEffect: CUSTOM:projectileTrail
trailEffectRate: 4

#lightColor: #FF2B00
#lightSize: 0.6

targetGround: true

targetGroundSpread: 20
initialUnguidedSpeedHeight: 2
gravity: 1

lightCastOnGround: true

explodeEffect:CUSTOM:hitLightFlash2, 爆炸冲击波
explodeEffectOnShield:CUSTOM:hitLightFlash2, 爆炸冲击波

spawnProjectilesOnEndOfLife:2A*3

[projectile_2A]
@copyFromSection:projectile_2
areaDamage: 120
drawSize: 0.9
deflectionPower: 9
spawnProjectilesOnEndOfLife:2B*3

[projectile_2B]
@copyFromSection:projectile_2
areaDamage: 40
drawSize: 0.8
deflectionPower: 3
spawnProjectilesOnEndOfLife:2C*3

[projectile_2C]
@copyFromSection:projectile_2
areaDamage: 15
life: 200
drawSize: 0.7
deflectionPower: 1
spawnProjectilesOnEndOfLife:NONE

[projectile_3]
tags= T-projectile
areaDamage: 300
areaRadius: 55

life: 400
speed: 4
targetSpeed: 6
targetSpeedAcceleration: 0.03

frame: 9
drawSize: 1

deflectionPower: 2

trailEffect: CUSTOM:projectileTrail3
trailEffectRate: 1

lightColor: #FF2B00
lightSize: 0.6

targetGround: true

targetGroundSpread: 10
initialUnguidedSpeedHeight: 2
gravity: 1

lightCastOnGround: true

explodeEffect:CUSTOM:hitLightFlash3, explodeCore, 爆炸冲击波2
explodeEffectOnShield:CUSTOM:hitLightFlash3, explodeCore, 爆炸冲击波2

[template_抛射体对空]
targetGround_includeTargetHeight: true
speed: 5
turnSpeed: 0
turnSpeedWhenNear: 25
targetGroundSpread: 9999
retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 25
initialUnguidedSpeedHeight: 1
gravity: 0.1

[projectile_4]
@copyFromSection: projectile_2, template_抛射体对空
spawnProjectilesOnEndOfLife: 4A(offsetDir=8), 4A(offsetRandomDir=8), 4A(offsetDir=-8)
life: 6
turnSpeed: 99
targetGroundSpread: 0

[projectile_4A]
@copyFromSection: projectile_2A, template_抛射体对空
spawnProjectilesOnEndOfLife: 4B(offsetDir=8), 4B(offsetRandomDir=8), 4B(offsetDir=-8)
life: 6

[projectile_4B]
@copyFromSection: projectile_2B, template_抛射体对空
spawnProjectilesOnEndOfLife: 4C(offsetDir=8), 4C(offsetRandomDir=8), 4C(offsetDir=-8)
life: 6

[projectile_4C]
@copyFromSection: projectile_2C, template_抛射体对空
explodeOnEndOfLife: true
life: 35

[projectile_5]
@copyFromSection: projectile_3
speed: 5
targetSpeed: 7
targetGround: false
targetGroundSpread: IGNORE
initialUnguidedSpeedHeight: 1
gravity: 0.1


[projectile_null]
tags= T-projectile
areaDamage: 0
life: 0
speed: 0
invisible: true


[effect_projectileTrail]
createWhenZoomedOut:false
priority:verylow
image:SHARED:light_50.png
life:25
fadeOut:true
attachedToUnit:false
color:#FF0000
fadeInTime:0
scaleFrom:0.4
scaleTo:0.3
alpha:0.4
yOffsetRelative:2
drawUnderUnits:false
atmospheric:true

[effect_projectileTrail2]
createWhenZoomedOut:false
priority:low
image:SHARED:light_50.png
life:25
fadeOut:true
attachedToUnit:false
color:#7900A1
fadeInTime:0
scaleFrom:0.4
scaleTo:0.15
alpha:0.4
drawUnderUnits:true
atmospheric:true

[effect_projectileTrail3]
@copyFromSection: effect_projectileTrail
life:35
scaleFrom:0.6
scaleTo:0.3
alpha:0.5
yOffsetRelative:3

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #90003C
dirSpeed: 5

[effect_hitLightFlash]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #7900A1
scaleFrom: 1.5
scaleTo: 1.2
alpha: 0.7
drawUnderUnits:false

[effect_hitLightFlash2]
priority: low
image: SHARED:light_50.png
life: 35
fadeOut: true
attachedToUnit: false
color: #FF0000
scaleFrom: 1.2
scaleTo: 1.0
alpha: 0.6
drawUnderUnits:false

[effect_hitLightFlash3]
@copyFromSection: effect_hitLightFlash2
priority: high
life: 25
scaleFrom: 2.2
scaleTo: 1.8
alpha: 1

[effect_explodeCore]
priority: veryhigh
life: 30
attachedToUnit: true
stripIndex: explode_big2
scaleFrom: 1.3
scaleTo: 1.3
alpha: 0.8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

alsoPlaySound: missile_hit

[effect_爆炸冲击波]
priority: verylow
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2.2
color: #FFE6D9
alpha: 0.7
drawUnderUnits: true

[effect_爆炸冲击波2]
@copyFromSection: effect_爆炸冲击波
priority: high
alpha: 0.8


[effect_lightningShock]
life: 60
xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom:180
fadeInTime: 0
fadeOut: false
attachedToUnit: false
color: #7900A1
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2
alpha:0.6

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #7900A1

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.3
scaleTo: 0.2
alpha: 1.7


[effect_shockwave_large]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 2
life: 45
color: #C2AFCC

[movement]
movementType: LAND
moveSpeed: 0.45
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.05

maxTurnSpeed: 0.8
turnAcceleration: 0.05

reverseSpeedPercentage: 0.8

moveSlidingMode :false
moveIgnoringBody:false





