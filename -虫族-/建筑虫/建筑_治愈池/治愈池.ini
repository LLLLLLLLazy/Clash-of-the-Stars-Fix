
[core]
name: 治愈池
class: CustomUnitMetadata
price: 1500
maxHp: 1000
mass: 4000
displayText: 治愈池
displayDescription: -高效维修单位 \n -辅助建造效率低 \n -随时间补充修复虫 \n -最多拥有四个修复虫 \n -投掷修复虫产生范围治疗


#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint:-2,-1,2,1

techLevel: 1
buildSpeed: 0.001

radius: 30
isBio: true
isBug: true
isBuilding: true
tags: units, 虫族, 虫建筑, 虫筑系T1

selfRegenRate: 0.1
selfBuildRate: 0.001

softCollisionOnAll: 3


autoRepair: true
canRepairBuildings: true
canRepairUnits: true

nanoRange: 200
nanoBuildSpeed: 0
nanoRepairSpeed: 0
resourceReclaimMultiplier: 0

canReclaimResources: true


maxTransportingUnits: 4
transportUnitsRequireTag: 修复虫
transportUnitsKeepBuiltUnits: true
transportUnitsAddUnloadOption: false

@memory 指定坐标:unit

[canBuild_0]
name: repair, reclaim
pos:  -1

[action_范围回收]
@copyFromSection: template_范围回收

[hiddenAction_回收路径]
@copyFromSection: template_回收路径

[decal_回收范围]
@copyFromSection: template_回收范围


[action_投掷]
isVisible: if self.transportingCount == ${section.pos}
text: 治愈投弹
description: -在目标地点产生范围治疗
displayType: queueUnit
buildSpeed: 0s
pos: 1
highPriorityQueue: true
deleteNumUnitsFromTransport: 1
fireTurretXAtGround: ${section.pos}
fireTurretXAtGround_withProjectile: 1
isLocked: if self.transportingCount < 1
isLockedMessage: 缺少修复虫

[action_投掷2]
@copyFromSection: action_投掷
pos: 2

[action_投掷3]
@copyFromSection: action_投掷
pos: 3

[action_投掷4]
@copyFromSection: action_投掷
pos: 4


[hiddenAction_修复虫补充]
autoTrigger: if self.transportingCount < 4 and self.queueSize < 1
alsoQueueAction: 修复虫产生

[hiddenAction_修复虫产生]
autoTriggerOnEvent: completeAndActive
buildSpeed: 20s
addUnitsIntoTransport: 修复虫


[attachment_1]
x: -6
y: -5
idleDir: 210
lockRotation: true
canAttack: true
addTransportedUnits: true
keepAliveWhenParentDies: true
canBeAttackedAndDamaged: true
prioritizeParentsMainTarget: true

isUnselectable: true
isUnselectableAsTarget: false
smoothlyBlendPositionWhenExistingUnitAdded: true

[attachment_2]
@copyFromSection: attachment_1
x: -19
y: 14
idleDir: 290

[attachment_3]
@copyFromSection: attachment_1
x: 3
y: 19
idleDir: 15

[attachment_4]
@copyFromSection: attachment_1
x: 19
y: 5
idleDir: 90


[graphics]
total_frames: 1

image:        治愈池.png
image_wreak:  NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

repairEffect: NONE
reclaimEffect: NONE


animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 150
animation_idle_scale_start:1
animation_idle_scale_end:1.05
animation_idle_pingPong: true


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 0


maxAttackRange: 200
shootDelay: 80

[turret_1]
x: -5
y: -5

[turret_2]
x: -15
y: 9

[turret_3]
x: 6
y: 18

[turret_4]
x: 20
y: 3

[projectile_1]
tags= T-projectile
areaDamage: -200
areaRadius: 85
areaRadiusFromEdge: true
areaHitAirAndLandAtSameTime: true
friendlyFire: only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

life: 120
speed: 1
targetSpeed: 4
targetSpeedAcceleration: 0.07
explodeOnEndOfLife: true
deflectionPower: -1

image: 修复虫.png
shadowImage: SHADOW:修复虫.png
lightColor: #3BFF00
lightSize: 0.6

targetGroundSpread: 5
initialUnguidedSpeedHeight: 1.2
gravity: 0.1

effectOnCreate: 毒雾1*3, CUSTOM:shockwave

trailEffect: projectileTrail
trailEffectRate: 3

explodeEffect: 愈波, 愈光, 愈中光, 碎愈光*3

[effect_projectileTrail]
priority: verylow
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #3BFF00
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.5
drawUnderUnits:true
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1


[effect_shockwave]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 1
alpha: 0.8
color: #AEFF00
attachedToUnit: false

[effect_愈波]
image: bubble.png
life: 30
scaleFrom: 0
scaleTo: 3.5
alpha: 1
color: #3BFF00

[effect_愈光]
stripIndex: light_50
life: 25
scaleFrom: 0
scaleTo: 3.5
alpha: 0.6
color: #3BFF00

[effect_愈中光]
stripIndex: light_50
life: 40
fadeInTime: 5
scaleFrom: 0.8
scaleTo: 0.6
alpha: 0.8
color: #3BFF00

[effect_碎愈光]
stripIndex: light_50
priority: low
life: 40
lifeRandom: 20
fadeOut: true
attachedToUnit: false
color: #3BFF00
hSpeed: 0.01
scaleFrom: 0.5
scaleTo: 0.3
alpha: 0.5
xSpeedRelativeRandom: 1
ySpeedRelativeRandom: 1


[effect_毒雾1]
stripIndex: effects
frameIndex: 0
priority: low

life: 100
fadeOut: true
attachedToUnit: false
color: #3BFF00
fadeInTime: 8
hSpeed: 0.01
scaleFrom: 0.8
scaleTo: 1.5
alpha: 0.6
drawUnderUnits: false
xSpeedRelativeRandom: 0.6
ySpeedRelativeRandom: 0.6
atmospheric: true



[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1





[animation_build]

onActions: underConstructionWithLinkedBuiltTime

blendOut: 1s

body_0: {scale:0}
body_1: {scale:1.05}




[ai]
useAsBuilder: true
buildPriority: 0.055
noneInBaseExtraPriority: 0.02
maxEachBase: 2


