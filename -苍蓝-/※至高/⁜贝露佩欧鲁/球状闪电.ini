
[core]
name:球状闪电
price: 0
maxHp:0
mass: 3000
displayDescription:
isUnrepairableUnit:true
techLevel: 1
buildSpeed: 0.0016
selfBuildRate: 0.0016
radius:0
displayRadius:0
isBio: true
showOnMinimap: false
hideScorchMark: true
showInEditor:false
explodeOnDeathGroundCollision: false
canNotBeGivenOrdersByPlayer: true
disableDeathOnZeroHp:true
canOnlyBeAttackedByUnitsWithTags:NO

[hiddenAction_move]
autoTrigger: if not self.isMoving and not self.hasFlag(id=1)
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:400,400
addWaypoint_target_mapMustBeReachable: true
addWaypoint_maxTime: 5s

[hiddenAction_start]
autoTriggerOnEvent:completeAndActive
spawnEffects:CUSTOM:电
playSoundAtUnit:球电出现.ogg
convertTo:球状闪电
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[graphics]
drawLayer:air
total_frames:5
imageScale:0.7
image:ball_lightning.png
image_wreak:NONE
image_turret: NONE
image_shadow: NONE
shadowOffsetX: 0
shadowOffsetY: 0
animation_idle_start: 0
animation_idle_end: 4
animation_idle_speed: 2.5
animation_idle_scale_end:1.2
animation_moving_start: 0
animation_moving_end: 4
animation_moving_speed: 2.5
animation_moving_scale_end:1.2
icon_zoomed_out:SHARED:blank.png

[attack]
canAttack:true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange:250
aimOffsetSpread: 0.6
shootDelay:0.5s
removeOnAttack:true

[turret_1]
x:0
y:0
image:SHARED:blank.png
projectile:球电
size:0
turnSpeed:25
canShoot:true
canAttackFlyingUnits:true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

[projectile_球电]
areaDamage: 2500
areaRadius:100
areaRadiusFromEdge:true
life:120
speed:12
drawSize:0
image:SHARED:blank.png
buildingDamageMultiplier:1.0
deflectionPower: -1
explodeEffect:CUSTOM:wave,CUSTOM:球状闪电2,CUSTOM:球电爆炸
explodeEffectOnShield:CUSTOM:wave,CUSTOM:球状闪电2,CUSTOM:球电爆炸
effectOnCreate:球状闪电
shieldDamageMultiplier:1.5
shieldDefectionMultiplier:-1

[effect_球状闪电]
priority:veryhigh
life: 888
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: false
attachedToUnit:true
drawUnderUnits:false
image:ball_lightning.png
scaleFrom:0.7
scaleTo: 0.7
total_frames: 5
animateFrameStart: 0
animateFrameEnd:4
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameLooping:true
alpha:1.0
liveAfterAttachedDies:false

[effect_球状闪电2]
priority:veryhigh
life: 60
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut: true
attachedToUnit:false
drawUnderUnits:false
image:ball_lightning.png
scaleFrom:0.7
scaleTo: 0
total_frames: 5
animateFrameStart: 0
animateFrameEnd:4
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameLooping:true
alpha:1.0

[movement]
movementType: air
moveSpeed: 3.5
targetHeight: 80
targetHeightDrift: 2.0
maxTurnSpeed: 5.0
moveSlidingMode: true
moveIgnoringBody: true
moveSlidingDir:  80

[effect_电]
priority:veryhigh
life: 120
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut:true
attachedToUnit: false
drawUnderUnits:false
image:electric.png
scaleFrom:3.0
scaleTo: 3.0
total_frames: 8
animateFrameStart: 0
animateFrameEnd: 7
animateFramePingPong: false
animateFrameSpeed:0.5
alpha:1.0
dirOffsetRandom:180
liveAfterAttachedDies:true

[effect_球电爆炸]
priority:veryhigh
life: 120
hOffset: 0
alwayStartDirAtZero: true
fadeInTime: 0
fadeOut:true
attachedToUnit: false
drawUnderUnits:false
image:球电爆炸.png
scaleFrom:1.3
scaleTo: 1.0
total_frames: 6
animateFrameStart: 0
animateFrameEnd: 5
animateFramePingPong: false
animateFrameSpeed: 0.35
alpha:1.0
dirOffsetRandom:180
liveAfterAttachedDies:true
alsoPlaySound:球电爆炸.ogg

[effect_wave]
priority: high
life: 90
image:wave.png
scaleFrom: 0.55
scaleTo: 0.9
alpha:0.3
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits:false

[hiddenAction_I]
autoTrigger:if self.timeAlive(laterThanSeconds=15)
deleteSelf:true
spawnEffects:CUSTOM:电

[hiddenAction_II]
autoTrigger:if self.numberOfUnitsInTeam(withTag='强积雨云',greaterThan=0,withinRange=400) or numberOfUnitsInAllTeams(withTag="沉渊之海")>0
addResources:setFlag=1

[hiddenAction_II2]
autoTrigger:if self.numberOfUnitsInTeam(withTag='强积雨云',lessThan=1,withinRange=600) and self.hasFlag(id=1) and numberOfUnitsInAllTeams(withTag="沉渊之海")<1
addResources:unsetFlag=1

[hiddenAction_III]
autoTrigger:if self.hasFlag(id=1)
spawnEffects:CUSTOM:电流领域
addWaypoint_type:attackMove
addWaypoint_target_fromReference:self.nearestUnit(withinRange=1000,relation='enemy',withTag='units')
addWaypoint_target_nearestUnit_team:enemy
addWaypoint_maxTime: 5s

[hiddenAction_move2]
autoTrigger: if not self.isMoving and self.hasFlag(id=1) and self.numberOfUnitsInEnemyTeam(lessThan=1,withinRange=1000)
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:400,400
addWaypoint_target_mapMustBeReachable: true
addWaypoint_maxTime: 5s

[effect_电流领域]
priority:veryhigh
life: 240
alwayStartDirAtZero:false
fadeInTime: 0
fadeOut:true
attachedToUnit:true
drawUnderUnits:false
image:电流领域.png
scaleFrom:1.0
scaleTo: 1.0
total_frames: 4
animateFrameStart: 0
animateFrameEnd: 3
animateFramePingPong: false
animateFrameSpeed: 0.45
alpha:0.6
dirOffsetRandom:180





