[core]


name: 肉虫
maxHp: 10000
mass: 60000
price: 45000
radius: 40
softCollisionOnAll: 20
isBug: true
isBio: true
tags: units, 虫族, 大型虫, 大肉虫
selfRegenRate: 0.6

experimental: true

fogOfWarSightRange: 18
buildSpeed: 0.00019
transportSlotsNeeded: 5
displayDescription: -仅对地\n-战斗时会展现出超凡的速度\n-每段冲撞都会回复自身生命\n-高速自愈\n-能越过水与山崖\n-大地在颤抖,空军在狂笑

autoTriggerCooldownTime: 10

[action_血肉膨胀]
requireConditional: if not eventSource.self.tags(includes="召唤物")
autoTriggerOnEvent: killedAnyUnit
isActive: false
text: 血肉膨胀
description: -每一段冲撞都会使自身回复0.5%血量 \n -击杀目标获得其所有血量的血肉值并提升临时生命上限 \n -血肉值会逐渐减少并恢复等量生命 \n -膨胀程度越高血肉值减少越快
pos: 0
displayType: infoOnly
buildSpeed: 0s
isGuiBlinking: if self.resource.血肉>0
addResourcesWithLogic: 血肉=eventSource.maxHp
setUnitMemory: 属性[14]=self.resource.血肉+eventSource.maxHp
setResourcesWithLogic: 膨胀前血量=self.hp
alsoTriggerAction: 属性变化, 膨胀血量
playAnimation: 膨胀

[hiddenAction_膨胀血量]
setUnitStats: hp=self.resource.膨胀前血量

[hiddenAction_血肉恢复]
autoTrigger: if self.resource.血肉>0
@define blood: min(15 * max(self.maxHp/10000, 1), self.resource.血肉)
addResourcesWithLogic: hp=${blood}, 血肉=-${blood}
alsoTriggerAction: 血肉生命更新

[hiddenAction_血肉生命更新]
setUnitMemory: 属性[14]=self.resource.血肉
alsoTriggerAction: 属性变化

[hiddenAction_冲撞膨胀]
autoTrigger: if self.resource.冲撞膨胀>0
addResourcesWithLogic: hp=self.maxHp*0.005, 冲撞膨胀=-max(1, self.resource.冲撞膨胀-1)

[resource_血肉]
displayName: 血肉

[resource_冲撞膨胀]
hidden: true

[resource_膨胀前血量]
hidden: true

[graphics]
image: 大胖耶.png
scaleImagesTo: 47

teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX: 5
shadowOffsetY: 5
lock_body_rotation_with_main_turret: true

[animation_1]
onActions: idle, attack, move
pingPong: true
scale_start: 1
scale_end: 1.02
speed: 70

[animation_膨胀]
pingPong: true
scale_start: 1
scale_end: 1.1
speed: 10

[decal_临时血量上限条框]
isVisible: if not self.hp(full=true) and self.resource.血肉>0
image: 白色进度条框.png
color: #FF0000
alpha: 1

layer: beforeUI
alwaysStartDirAtZero: true
yOffsetAbsolute: ${core.radius + 6.5}
xOffsetAbsolute: ${core.radius}

imageScaleX: ${core.radius} * (2/self.maxHp) * (self.maxHp-${core.maxHp})

onlyWhileAlive: true

[decal_临时血量上限条-右边框]
@copyFromSection: decal_临时血量上限条框
image: 白色条右边框.png
imageScaleX: 1

xOffsetAbsolute: ${core.radius + 0.5}

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 300
shootDelay: 130
isFixedFiring: true

[turret_1]
x: 0
y: 0
invisible: true
shoot_sound: large_gun_fire2
shoot_sound_vol: 0.4
projectile: 1
altProjectile: 2
altProjectileCondition: if distanceBetween(self, attacking)<30
turnSpeedAcceleration: 1.0
shoot_flame: CUSTOM:scoutTrail*4
recoilOffset: 5
recoilOutTime: 2
recoilReturnTime: 10

[projectile_1]
tags= T-projectile
areaDamage: 700
areaRadius: 75
largeHitEffect: true
explodeOnEndOfLife: true
life: 0
speed: 0
invisible: true
targetGround: true
deflectionPower: -1
spawnProjectilesOnCreate: 2(recursionLimit=8), 3(recursionLimit=99)

[projectile_2]
@copyFromSection: projectile_1
spawnProjectilesOnCreate: NONE
spawnProjectilesOnEndOfLife: 2(recursionLimit=8), 3(recursionLimit=99)
life: 15
speed: 5
teleportSource: true

[projectile_3]
tags= T-projectile
areaDamage: 0
areaRadius: 10
#areaRadiusFromEdge: true
#areaHitAirAndLandAtSameTime: true
explodeOnEndOfLife: true
life: 0
speed: 0
deflectionPower: -1
targetGround: true
friendlyFire: only-ignoreEnemy
explodeEffect: CUSTOM:scoutTrail*3
explodeEffectOnShield: CUSTOM:scoutTrail*3

mutator1_ifUnitWithTags: 大肉虫
mutator1_areaDamageMultiplier: 0
mutator1_addResourcesAreaHit: 冲撞膨胀=1

[effect_scoutTrail]
life: 60
fadeOut: true
attachedToUnit: false
color: #FFFFFF
fadeInTime: 3
scaleFrom: 5.0
scaleTo: 7.0
alpha: 0.8
drawUnderUnits: false
xOffsetRelativeRandom: 5
yOffsetRelativeRandom: 10
ySpeedRelative: -0.1
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.4

atmospheric: true

stripIndex: dust

[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.45
moveAccelerationSpeed: 0.08
moveDecelerationSpeed: 0.08
maxTurnSpeed: 3
turnAcceleration: 0.15

[leg_1]
x: 20
y: 30
moveSpeed: 2
moveWarmUp: 15
attach_x: 18
attach_y: 28
rotateSpeed: 30
heightSpeed: 0.5
resetAngle: 0.00000001
image_foot: 大胖的脚耶.png
image_leg: 我要大盘，我要大盘.png
dust_effect: true
holdDisMin: 14
holdDisMax: 14
estimatingPositionMultiplier: 1
image_end_teamColors: true

[leg_2]
x: -20
y: 30
attach_x: -18
attach_y: 28
copyFrom: 1
[leg_3]
x: 20
y: -20
attach_x: 18
attach_y: -20
copyFrom: 1
[leg_4]
x: -20
y: -20
attach_x: -18
attach_y: -20
copyFrom: 1

[ai]
disableUse: true