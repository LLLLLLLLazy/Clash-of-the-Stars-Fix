
[core]
name: 喷射王
maxHp: 15500
mass: 120000
price: 178000
radius: 45
softCollisionOnAll: 22
buildSpeed: 0.00015
selfRegenRate: 0.35
fogOfWarSightRange: 28
experimental: true
isBug: true
isBio: true
tags: units, 虫族, 大型虫, 喷射王
transportSlotsNeeded: 7
displayDescription: -攻击地面与空中\n-广阔视野\n-庞大的毒囊\n-距离越近喷射越精准\n-能越过水与山崖

[graphics]
image: 黑寡妇完全体.png
image_turret: NONE
image_shadow: AUTO
shadowOffsetY: 4
shadowOffsetX: 4
scaleImagesTo: 50
lock_body_rotation_with_main_turret: true

[animation_1]
onActions: idle, move
pingPong: true
scale_start: 1
scale_end: 1.01
speed: 60

[animation_2]
onActions: attack
pingPong: true
scale_start: 1
scale_end: 0.97
speed: 15
[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

turretSize: 50

maxAttackRange: 360
shootDelay: 22
aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
invisible: true
canShoot: false
turnSpeed: 2.1
recoilOffset: -2
recoilOutTime: 6
recoilReturnTime: 12

[turret_2]
slave: true
attachedTo: 1
x: 0
y: 0
invisible: true
shoot_flame: shockwave, CUSTOM:毒液*5
shoot_sound: large_gun_fire2:3
projectile: 1

[projectile_1]
life: 55
areaDamage: 125
areaRadius: 55
areaRadiusFromEdge: true
#explodeOnEndOfLife: true
trailEffect: CUSTOM:毒雾, CUSTOM:尾气雾

speed: 6
turnSpeed: 0
turnSpeedWhenNear: 35
image: 未命名_1111.png
largeHitEffect: true

lightColor: #FF3BFF00
lightSize: 0.6

#targetGround: true
#targetGroundSpread: 20
#targetGround_includeTargetHeight: true

areaHitAirAndLandAtSameTime: true

spawnProjectilesOnCreate: 1(offsetRandomDir=15, recursionLimit=4)
spawnProjectilesOnExplode:爆炸效果

retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 35

[projectile_爆炸效果]
directDamage:0
largeHitEffect: true
life:0
explodeOnEndOfLife:true
explodeEffect:CUSTOM:毒液*5
explodeEffectOnShield:CUSTOM:毒液*5

[effect_毒雾]
priority: high
#attachedToUnit: true
life: 60
alpha: 0.8
scaleFrom: 1.0
scaleTo: 1.5
image: 毒雾.png
drawUnderUnits: false
atmospheric: true
attachedToUnit: false
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2

[effect_尾气雾]
stripIndex: effects
frameIndex: 0
priority: high

life: 30
fadeOut: true
attachedToUnit: false
color: #FF3BFF00
hSpeed: 0.3
scaleFrom: 1
scaleTo: 0.1
alpha: 0.6
drawUnderUnits: false
yOffsetRelative: -1
xOffsetRelativeRandom: 3
xSpeedRelativeRandom: 0.1
atmospheric: true

[effect_毒液]
attachedToUnit: false
life: 70
physics: true
color: #FF3BFF00
scaleFrom: 2.0
scaleTo: 2.0
xSpeedRelativeRandom: 1
ySpeedRelativeRandom: 1
hSpeed: 3
image: SHARED:spark.png
priority: verylow

[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.45
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.05

maxTurnSpeed: 2.1
turnAcceleration: 0.03

reverseSpeedPercentage: 1

[leg_1]
x: -30
y: 40
moveSpeed: 3
moveWarmUp: 2
rotateSpeed: 25
heightSpeed: 0.7
resetAngle: 0.00000001
image_leg: 蜘蛛小腿1.png
dust_effect: false
holdDisMin: 5
holdDisMax: 10
estimatingPositionMultiplier: 1

[leg_2]
x: 30
y: 40
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -50
y: 0
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_4]
x: 50
y: 0
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_5]
x: -30
y: -40
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_6]
x: 30
y: -40
attach_x: 0
attach_y: 0
copyFrom: 1

[hiddenAction_AIattackMiddle]
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.isAttacking and not self.hasActiveWaypoint(type='attack') and not self.hasActiveWaypoint(type='guard') and self.customTimer(laterThanSeconds=3) and not self.globalTeamTags(includes='中刻{I}')
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_nearestUnit_tagged: 中点定位
addWaypoint_target_nearestUnit_team: any
resetCustomTimer: true

[hiddenAction_AImoveattack]
clearAllWaypoints: true
addWaypoint_type: follow
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.isAttacking() and self.globalTeamTags(includes='中刻{I}') and not self.hasActiveWaypoint(type='follow')

[hiddenAction_AIattack]
autoTrigger: if self.globalTeamTags(includes='AI系统') and numberOfUnitsInEnemyTeam(withinRange=400, greaterThan=0) and (self.hasActiveWaypoint(type='follow') or self.hasActiveWaypoint(type='attack')) and self.customTimer(laterThanSeconds=3)
clearAllWaypoints: true
addWaypoint_type: attackMove
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: true
resetCustomTimer: true

[hiddenAction_AIattack侦测]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.customTimer(laterThanSeconds=0.5, withinSeconds=1.5) and not self.isAttacking()
alsoTriggerAction: AImoveattack

[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(lessThan=5000))
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(full=true))
addResources: unsetFlag=1