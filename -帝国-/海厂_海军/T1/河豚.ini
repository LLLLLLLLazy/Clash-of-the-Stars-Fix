
[core]
name: 河豚
displayText: 河豚
displayDescription: -攻击水面单位 \n -发射高爆鱼雷 \n -血量剩余不过半则准备自爆
class: CustomUnitMetadata
price: 700
maxHp: 160
mass: 2000
tags: units

armour: 10
armourMinDamageToKeep: 10

techLevel: 1
buildSpeed: 0.0017
availableInDemo: true

radius: 13
displayRadius: 14
isBio: false
#softCollisionOnAll: 3

energyMax: 1
energyRegen: 0.0143

[hiddenAction_explodeArea]
autoTrigger: if self.hp(LessThan=50) and not self.hasFlag(id=1)
addEnergy: -1
addResources: setFlag=1
spawnEffects: CUSTOM:explodeArea

[hiddenAction_explodeAreaTtue]
autoTrigger: if self.isEnergyFull() and self.hasFlag(id=1)
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: explodeArea
deleteSelf: true

[graphics]
total_frames: 1

image:        河豚.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1
#splastEffect: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits:false

turretSize: 20
turretTurnSpeed: 1.5

maxAttackRange:150
shootDelay: 110

[turret_1]
#torpedo
invisible: true
x: 0
y: 0
idleDir:0
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits: false

projectile: torpedo
size: 1.1
#turnSpeed: 15

turnSpeed: 0
canAttackMaxAngle: 181

[turret_2]
#显示额外伤害数据
x: 0
y: 0
invisible: true
canAttackCondition:	false
copyFrom: 1
delay: 70

limitingRange: 60
showRangeUIGuide: true

projectile: explodeArea

[projectile_torpedo]
tags= T-projectile
#torpedo
areaDamage: 80
areaRadius: 40
life: 300
speed: 1.2
targetSpeed: 5.0
targetSpeedAcceleration: 0.05

drawSize: 1
color: #1E1E96
trailEffect: true
largeHitEffect: true

deflectionPower: -1

wobbleAmplitude: 0.4
wobbleFrequency: 0.8s

lightSize:0.2

[projectile_explodeArea]
tags= T-projectile
areaDamage: 350
areaRadius: 60
areaRadiusFromEdge: true
areaHitUnderwaterAlways: true

largeHitEffect: true

life: 50
instant: true

[effect_explodeArea]
priority:veryhigh
liveAfterAttachedDies: false
image: 河豚白光.png
life: 70
fadeOut: false
fadeInTime: 70
alpha: 0.7
attachedToUnit: true
drawUnderUnits:false

[movement]
movementType: WATER
moveSpeed: 1.3
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.03

targetHeight: -8
targetHeightDrift: 0.4

maxTurnSpeed: 3.0
turnAcceleration: 0.1






