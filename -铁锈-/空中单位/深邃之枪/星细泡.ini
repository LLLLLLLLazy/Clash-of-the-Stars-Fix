
[core]
name: 星细泡
tags: 星细泡, 可承伤单位
maxHp: 50
price: 0
mass: 1000
selfRegenRate: 0.01
isUnrepairableUnit: true

#隐藏单位本身
showInEditor: false
radius: 5
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
canNotBeGivenOrdersByPlayer: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

showOnMinimap: true

energyMax: 1
energyRegen: 0
dieOnZeroEnergy: true

disableDeathOnZeroHp: true
autoTriggerCooldownTime: 0.1s

[hiddenAction_$运输]
@copyFrom_skipThisSection:true

[hiddenAction_destroy]
autoTrigger: if self.hp(lessThan=1)
deleteSelf: true

[hiddenAction_复裂]
autoTriggerOnEvent: destroyed
spawnUnits: 小星细泡(offsetRandomDir=360), 小星细泡*3(offsetRandomDir=360, spawnChance=0.5)
requireConditional: if not self.hasFlag(id=0) and numberOfUnitsInTeam(withTag='星细泡', lessThan=100, withinRange=800)

[hiddenAction_概率分裂]
autoTrigger: if self.timeAlive(laterThanSeconds=2)
fireTurretXAtGround: magic
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 分裂

[hiddenAction_复裂突击]
#autoTriggerOnEvent: destroyed
spawnUnits: 星细泡4
#requireConditional: if not self.hasFlag(id=0) and numberOfUnitsInTeam(withTag='星细泡', greaterThan=99, withinRange=800)
autoTrigger: if numberOfUnitsInTeam(withTag='星细泡', greaterThan=99, withinRange=800)
setResourcesWithLogic: hp=-50

[hiddenAction_浮灵清理]
autoTrigger: if self.timeAlive(laterThanSeconds=5.1) and not self.isAttacking and not self.hasActiveWaypoint(type='attack')
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_nearestUnit_tagged: 漂浮灵
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_maxRange: 800

[hiddenAction_泡]
autoTriggerOnEvent: completeAndActive
requireConditional: if not self.hasFlag(id=1)
#spawnEffects:CUSTOM:泡
addWaypoint_type: move
addWaypoint_maxTime: 1s
addWaypoint_position_relativeOffsetFromSelf: 0,200

[effect_泡]
fadeInTime: 0
alpha: 1
attachedToUnit: true
liveAfterAttachedDies: false
life: 10000
scaleFrom: 0.8
scaleTo: 0.8
image: hit.png
#color: #FFffff
priority: high
drawUnderUnits: false
dirSpeedRandom: 1

[hiddenAction_清除]
autoTrigger: if numberOfUnitsInEnemyTeam(lessThan=1, withinRange=800, withTag='units')
deleteSelf: true

[graphics]
imageScale: 0.8
image:        hit.png
image_wreak: NONE
image_turret:NONE
disableLowHpSmoke: true
icon_zoomed_out_neverShow: true

[attack]
canAttack: true
canAttackFlyingUnits: if self.timeAlive(laterThanSeconds=5)
canAttackLandUnits: if self.timeAlive(laterThanSeconds=5)
canAttackUnderwaterUnits: if self.timeAlive(laterThanSeconds=5)
turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 800
shootDelay: 100
showRangeUIGuide:false

[projectile_分裂]
invisible: true
spawnProjectilesOnCreate: 裂(spawnChance=0.05)
areaDamage:0
life:0
explodeOnEndOfLife:true
explodeEffect: NONE
explodeEffectOnShield: NONE
[projectile_裂]
invisible: true
areaDamage:50
areaRadius:1
areaDamageNoFalloff:true
areaRadiusFromEdge:true
areaHitAirAndLandAtSameTime:true
life:0
explodeOnEndOfLife:true
friendlyFire: true
explodeEffect: NONE
explodeEffectOnShield: NONE
#mutatorX_ifUnitWithTags:星细泡
#mutatorX_areaDamageMultiplier:50
[turret_magic]
x: 0
y: 0
canShoot:false

[turret_1]
x: 0
y: 0
canAttackCondition: if self.hasFlag(id=2)
projectile: 1
shoot_sound:lighting_burst
shoot_sound_vol:0.1
shoot_flame:CUSTOM:sparks2*3, CUSTOM:lightSlowFade, CUSTOM:波
shoot_light:#80DFFF
warmup:35
chargeEffectImage: SHARED:lighting_charge2.png
warmupCallDownRate: 0.3
resourceUsage: setFlag=0, energy=1

[projectile_1]
directDamage: 120
areaDamage: 30
areaRadius: 25
life: 25
instant: true
lightingEffect: true
largeHitEffect: true
shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0.1
buildingDamageMultiplier: 0.5
explodeEffect:CUSTOM:lightningShock*1, CUSTOM:sparks*6
explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash
spawnProjectilesOnCreate:1(recursionLimit=2)

[effect_hitLightFlash]
priority:high
image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #80DFFF
scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightningShock]
life: 60
xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom:180
fadeInTime: 0
fadeOut: false
attachedToUnit: false
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2
alpha:0.6
color: #36C9FF

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #1DC3FE
[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow
color: #1DC3FE

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #80DFFF
scaleFrom: 0.3
scaleTo: 0.2
alpha: 1.7

[effect_波]
#priority: low
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #1DC3FE
fadeInTime: 3
alpha: 2

[movement]
movementType: AIR
moveSpeed: 1
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.003

maxTurnSpeed: 3
turnAcceleration: 0.1

targetHeight: 30
targetHeightDrift: 1
startingHeightOffset: 30

moveIgnoringBody: true
moveSlidingMode: true


