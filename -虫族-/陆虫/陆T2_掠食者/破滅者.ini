
[core]
name: 破滅者
displayDescription: -发动重力波 \n -攻击地面单位 \n -对建筑伤害稍强 \n -对护盾伤害稍弱
class: CustomUnitMetadata
price: credits=6500, 腐蚀=${corrode}
maxHp: 1650
mass: 12000

techLevel: 3
buildSpeed: 33.3s

fogOfWarSightRange:18

#generation_credits: 1
#generation_delay: 40

radius: 17
displayRadius: 17

isBio: true
isBug: true
tags: units, 虫族, 中型虫+, 固定射击

selfRegenRate:0.2

softCollisionOnAll: 12

energyMax: 1
energyRegen: 0.0025
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 0.1s

unitsSpawnedOnDeath: 资源返还(addResources=ammo:1625|energy:200)

[hiddenAction_腐蚀价格]
@global corrode: 800
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 破滅者[亡灵]


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2


[hiddenAction_池虫能量]
autoTrigger: if self.hasParent(withTag="池虫")
addResources: energy=0.025

[graphics]
total_frames: 1

image:        破滅者.png
image_wreak:  NONE
image_turret: NONE

#AUTO
image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true

animation_moving_start: 0
animation_moving_end: 0
animation_moving_speed: 3

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 80
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true


animation_attack_start: 0
animation_attack_end: 0
animation_attack_speed: 15
animation_attack_scale_start:1
animation_attack_scale_end:0.97
animation_attack_pingPong: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 25
turretTurnSpeed: 9

maxAttackRange: 300
shootDelay: 5.33s

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0

shoot_sound:large_gun_fire2
shoot_sound_vol: 0.5
shoot_flame:shockwave,CUSTOM:shockwave
shoot_light: #000000

recoilOffset: -4
recoilOutTime: 8
recoilReturnTime: 24

warmup: 3s
warmupCallDownRate: 0.5
chargeEffectImage: laser_tank_charge.png

energyUsage: 1

[projectile_1]
tags= T-projectile
areaDamage: 350
areaRadius: 100
life: 50
instant:true

largeHitEffect: true

shieldDamageMultiplier: 0.75
buildingDamageMultiplier:1.25

pushForce: 15
pushVelocity: 10

explodeEffect: CUSTOM:explodeCore, CUSTOM:shockwave
explodeEffectOnShield: CUSTOM:shockwave

spawnProjectilesOnExplode:爆核

[projectile_爆核]
tags= T-projectile
areaDamage: 350
areaRadius: 50
areaExpandTime:500
life: 50
instant:true

shieldDamageMultiplier: 0.75
buildingDamageMultiplier:1.25

explodeEffect: CUSTOM:爆核, CUSTOM:爆核光波
explodeEffectOnShield: CUSTOM:爆核, CUSTOM:爆核光波

[leg_1]
x: -25
y: -5
attach_x: 0
attach_y: 0
moveSpeed: 4.1
resetAngle:20


heightSpeed: 0.8

image_leg:  leg.png
image_foot: NONE

drawLegWhenZoomedOut: true

dust_effect: false

holdDisMin: 18
holdDisMax: 26

[leg_2]
x: 25
y: -5
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -20
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_4]
x: 20
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_5]
x: -20
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1

[leg_6]
x: 20
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1

[effect_explodeCore]
priority: veryhigh
life: 25
attachedToUnit: false
stripIndex: explode_big2
scaleFrom: 1.5
scaleTo: 1.5
alpha: 1
color: #FF0000
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
alsoPlaySound: missile_hit

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 3.5

[effect_爆核]
drawUnderUnits:false	
attachedToUnit:false
image:laser_tank_charge.png
life: 500
scaleFrom: 1.0
scaleTo: 4
alpha: 1.5

[effect_爆核光波]
life: 500
image: 赤光波圈.png
attachedToUnit: false
scaleFrom: 0.1
scaleTo: 0.38
alpha: 0.3
color: #FF0000
drawUnderUnits: true

[movement]
movementType: OVER_CLIFF

moveSpeed: 1.0
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.06

maxTurnSpeed: 2.5
turnAcceleration: 0.5

targetHeight: 0
targetHeightDrift: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181

[ai]
upgradedFrom: 掠食者

[hiddenAction_AI走位]
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
alsoTriggerAction: AI随机侧移
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true

[hiddenAction_AI随机侧移]
requireConditional: if not attachment.getOffsetRelative(y=-40).isOverPassableTile(type='${movement.movementType}')
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 2s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=30, x=rnd(-200, 200))

[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(lessThan=400))
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(full=true))
addResources: unsetFlag=1

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')