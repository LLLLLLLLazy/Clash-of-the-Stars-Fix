
[core]
name: A_nukeLauncherC
altNames: A_nukeLaucher
class: CustomUnitMetadata


#typo in original
displayLocaleKey: NukeLaucher

#overrideAndReplace: NukeLaucher



price: 100000
maxHp: 5000
mass: 9000000
tags: units

armour: 75
armourMinDamageToKeep: 25

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1

#used for placement, and placement of other buildings
constructionFootprint: -2,-1,2,2


techLevel: 3
buildSpeed: 0.0002
#availableInDemo: true

radius: 35
#displayRadius: 25
isBio: false
isBuilding: true




exit_x:0
exit_y:-1

[action_buildNuke]
price:  73150
id: 建造核弹
text: i:gui.actions.buildNuke
description:i:gui.actions.buildNuke.description
displayType: NONE
buildSpeed: 0.0002
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=4)
addResources: ammo=1

iconImage: SHARED:icon_build.png

aiUse: launchAmmo



[decal_targetGuide]
alwaysStartDirAtZero: true
layer: inactive

image: SHARED:area_guide.png
teamColors: false

@define area_guide_size: 100
@define area_guide_radius: 50

@define lowDamageBorder: 30

imageScale: ${ projectile_nukeExplode.areaRadius - lowDamageBorder }/${area_guide_radius}

alpha: 0.4
color: #960d06



[action_launchNuke]
fireTurretXAtGround: siloTop
fireTurretXAtGround_showGuideDecals: targetGuide
price:  ammo=1

text: i:gui.actions.launchNuke
description:i:gui.actions.launchNuke.description
displayType: action
buildSpeed: 3.5s
pos: 0.1
whenBuilding_playAnimation: fireNuke
displayRemainingStockpile: true
highPriorityQueue: true
onlyOneUnitAtATime: true


#isAlsoViewableByEnemies: true
iconImage: SHARED:icon_attack_point.png

aiUse: launch

[action_convert]
convertTo: A_nukeLauncherC2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 0
id: ${section.text}
text: 降下
description: -将发射井藏入地下\n-无法发射核导弹但可缓慢建造
displayType: action
buildSpeed: 10s
highPriorityQueue: true

[action_Self-explosion]
isVisible: if self.ammo(greaterThan=0) and not self.tags(includes='即将启动自爆')
price: 0
id: ${section.text}
text: 自爆
description: -立即引爆存库中的核弹
displayType: infoOnly
buildSpeed: 0s
highPriorityQueue: true
allowMultipleInQueue: false
temporarilyAddTags: 即将启动自爆
resetCustomTimer: true
[action_Self-explosion确认]
@copyFromSection: action_Self-explosion
isVisible: if self.ammo(greaterThan=0) and self.tags(includes='即将启动自爆')
description: -立即引爆存库中的核弹\n ===再次点击确认===
id: 自爆确认
displayType: action
isGuiBlinking: true
alsoTriggerAction: Self-explosion1, Self-explosion2, Self-explosion3, Self-explosion4
[hiddenAction_Self-explosion取消]
autoTrigger: if self.customTimer(laterThanSeconds=8) and self.tags(includes='即将启动自爆')
temporarilyRemoveTags: 即将启动自爆

[hiddenAction_Self-explosion1]
requireConditional: if self.ammo(greaterThan=0, lessThan=2)
fireTurretXAtGround: s
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: nukeProjectile
fireTurretXAtGround_count: 1
addResources: hp=-10000
[hiddenAction_Self-explosion2]
@copyFromSection: hiddenAction_Self-explosion1
requireConditional: if self.ammo(greaterThan=1, lessThan=3)
fireTurretXAtGround_count: 2
[hiddenAction_Self-explosion3]
@copyFromSection: hiddenAction_Self-explosion1
requireConditional: if self.ammo(greaterThan=2, lessThan=4)
fireTurretXAtGround_count: 3
[hiddenAction_Self-explosion4]
@copyFromSection: hiddenAction_Self-explosion1
requireConditional: if self.ammo(greaterThan=3, lessThan=5)
fireTurretXAtGround_count: 4

[graphics]
total_frames: 1

image:        nuke_launcher_front.png
image_back:   nuke_launcher_back.png
image_wreak:  nuke_launcher_dead.png

drawLayer: bottom

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
maxAttackRange: 9999


[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1




[turret_siloTop]
#nuke turret
canShoot: false

x: 0
y: -5
idleDir:0

invisible: true

shoot_sound:nuke_launch
shoot_sound_vol:0.27
shoot_light:#FFEECCCC

projectile: nukeProjectile
size: 1

turnSpeed: 40


#shoot_flame:shockwave
shoot_flame:custom:nukeLaunch_wave, custom:nukeLaunch_light
#custom:nukeLaunch_smoke*6


limitingMinRange: 600

[turret_s]
canShoot: false
x: 0
y: -5
idleDir:0
invisible: true

[projectile_nukeIntercept]
tags= nuke
directDamage: 123
life: 99999
speed: 0.12
targetSpeed: 5.4
targetSpeedAcceleration:0.01
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
deflectionPower:-1
image: yellow_shield.png
color: #20EEEE00
drawSize: 0.9
alwaysVisibleInFog: true

[projectile_nukeProjectile]
#nuke
tags= nuke

directDamage: 123

life: 99999
speed: 0.1
targetSpeed: 5.4
targetSpeedAcceleration:0.01


largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 0
shadowFrame:1

drawType:1
drawSize: 1.25

targetGround: true
areaDamage: 13500
spawnProjectilesOnCreate: nukeIntercept*11(offsetHeight=3)
spawnProjectilesOnExplode: nukeExplode, nukeExplode2, nukeExplode3
spawnProjectilesOnEndOfLife: nukeExplode, nukeExplode2, nukeExplode3

#hullDamageMultiplier:0 for EMP version
#hullDamageMultiplier: 0

areaHitAirAndLandAtSameTime: true
alwaysVisibleInFog: true

areaRadius: 300

areaExpandTime:75

deflectionPower:-1


shouldRevealFog:true
nukeWeapon:true

lightColor: #FFEEEE00
lightSize: 4

friendlyFire: true

#trailEffect: true
trailEffect: CUSTOM:projectileTrail
trailEffectRate:4

[projectile_nukeExplode]
tags= T-projectile
life: 0
explodeOnEndOfLife: true

targetGround: true

areaDamage: 3250
areaRadius: 650

areaExpandTime: 200

deflectionPower: -1

shouldRevealFog:true
nukeWeapon:true
largeHitEffect:	true

invisible: true
lightColor: #FFEEEE00
lightSize: 4

friendlyFire: true

[projectile_nukeExplode2]
@copyFromSection: projectile_nukeExplode
areaDamage: 5400
areaRadius: 400

areaExpandTime: 125

[projectile_nukeExplode3]
@copyFromSection: projectile_nukeExplode
areaDamage: 1000
areaRadius: 275

areaExpandTime: 0
spawnUnit: 放射性污染

explodeEffect: nukeDisplacement, nukeDisplacementWave, nukeShockwave, nukeShockwave2, CUSTOM:projectileGroundSmoke*7, CUSTOM:projectileGroundDust*2, CUSTOM:projectileFlash

[effect_projectileTrail]

stripIndex: effects
frameIndex: 0


life: 120
fadeOut: true
attachedToUnit: false
color: #FFFFFF
fadeInTime:5
scaleFrom: 0.5
scaleTo: 4
alpha: 0.6
drawUnderUnits:false
#ySpeedRelative:-1
atmospheric:true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2


[effect_nukeLaunch_wave]
priority:high

stripIndex:shockwave
life: 50
scaleFrom: 0.5
scaleTo: 3

[effect_nukeLaunch_smoke]
priority:high

xOffsetAbsoluteRandom: 10
yOffsetAbsoluteRandom: 10

frameIndex: 0
stripIndex: smoke_black

spawnChance: 0.3

life: 90
fadeOut: true
attachedToUnit: false
#color: #fdc14d
color: #FFEEEE00

fadeInTime:5
scaleFrom: 0.3
scaleTo: 1
alpha: 0.9
drawUnderUnits:false
liveAfterAttachedDies: false
hSpeed:0.4
xSpeedAbsoluteRandom:0.9
ySpeedAbsoluteRandom:0.9
dirOffsetRandom:180
atmospheric: true


[effect_nukeLaunch_light]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 2
scaleTo: 2
alpha: 0.7
drawUnderUnits:false



[effect_projectileGroundSmoke]
priority:critical

stripIndex: effects
frameIndex: 0

life: 480
fadeOut: true
attachedToUnit: false
color: #98AA72
fadeInTime:5
scaleFrom: 10
scaleTo: 16
alpha: 1.5
drawUnderUnits:false
hSpeed:0.2
hOffsetRandom:0.25

dirOffsetRandom:180

shadow:true
xOffsetRelativeRandom: 128
yOffsetRelativeRandom: 128
xSpeedAbsoluteRandom:1
ySpeedAbsoluteRandom:1
atmospheric: true

[effect_projectileGroundDust]
priority:veryhigh

image: rotorwash.png
life: 90
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 3
scaleTo: 8
alpha: 1.5
color: #FFEEEE00
drawUnderUnits:false
hOffset: -1
dirOffsetRandom: 180
dirSpeedRandom: 0.2
atmospheric: true
xOffsetRelativeRandom: 32
yOffsetRelativeRandom: 32
xSpeedAbsoluteRandom:0.5
ySpeedAbsoluteRandom:0.5

[effect_projectileFlash]
priority:critical
showInFog: true

image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: false
color: #FFC66B
fadeInTime:2
scaleFrom: 20
scaleTo: 10
alpha: 1
drawUnderUnits:false
atmospheric: false
hOffset: 5
yOffsetAbsolute: -10

[effect_nukeShockwave]
priority:critical

stripIndex: shockwave_large
life: 60
scaleFrom: 0.5
scaleTo: 6

[effect_nukeShockwave2]
priority:critical

stripIndex: shockwave_large
life: 200
scaleFrom: 0.5
scaleTo: 13
alpha: 0.6

[effect_nukeDisplacement]
drawType: displacement
priority: critical

image: SHARED:cone_inverted_normal_128.png
life: 100
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 10
scaleTo: 10
alpha: 0.3
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1

[effect_nukeDisplacementWave]
drawType: displacement
priority: critical

image: SHARED:shockwave_normal_128.png
life: 200
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 12
alpha: 1
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1


[projectile_randomTankNuke]
tags= T-projectile
#tank nuke :p

directDamage: 123

spawnUnit: tank

life: 99999
speed: 0.1
targetSpeed: 2.7
targetSpeedAcceleration:0.02

trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110
frame: 0
shadowFrame:1

drawType:1

targetGround: true

deflectionPower:-1

lightColor: #FFEEEE00
lightSize: 1



[arm_1]
x:3
y:-1
image_end:nuke_launcher_door_r.png


#x:13
#y:-9

[arm_2]
x:-5
y:9
image_end:nuke_launcher_door_l.png

#x:-14
#y:14

[animation_fireNuke]

blendIn: 2s
blendOut: 2.5s

arm1_0: {x:10, y:-8}
arm2_0: {x:-9, y:5}

#arm1_0s: {x:0, y:0}
#arm2_0s: {x:0, y:0} 

#arm1_1.400s: {x:10, y:-8}
#arm2_1.400s: {x:-9, y:5}





[ai]

buildPriority: 0.01

noneInBaseExtraPriority: 0.04

noneGlobalExtraPriority: 0.1


maxEachBase: 0

ai_upgradePriority: 0.2

#aiTags: nukeLauncher, launcher



