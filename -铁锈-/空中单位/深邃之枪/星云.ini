
[core]
name: 星云
displayDescription: "从猎户座到你的手心"
price: 50000
maxHp: 2500
mass: 99999
armour: 40
armourMinDamageToKeep: 40
tags: units, 星空舰载机
borrowResourcesWhileAlive: 星空舰载机=1
selfRegenRate:0.3

techLevel: 1
buildSpeed: 0.001

fogOfWarSightRange:33

canNotBeGivenOrdersByPlayer: true
transportSlotsNeeded: 99

radius: 18
softCollisionOnAll: 20

energyMax: 10
energyRegen: 10

autoTriggerCooldownTime: 0.11s

effectOnDeath: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:sparks*5, CUSTOM:sparks2*5
numBitsOnDeath: 0

[hiddenAction_$运输]
@copyFrom_skipThisSection:true

[hiddenAction_move]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 9999s
addWaypoint_target_nearestUnit_tagged: 星空
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 3000
autoTrigger: if not self.hasActiveWaypoint(type='guard')

[hiddenAction_wander]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInTeam(withinRange=1000, lessThan=1, withTag='星空')
resetCustomTimer:true
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:200,200
addWaypoint_target_mapMustBeReachable:true
addWaypoint_maxTime: 3s

[effect_白闪星]
createWhenZoomedOut: false
priority:low
image:白闪星.png
life: 60
fadeOut: true
attachedToUnit: false
color: #FF26AC
fadeInTime:5
scaleFrom:1.5
scaleTo:0.5
alpha: 2
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_速白闪星]
@copyFromSection:effect_白闪星
life: 30

[effect_白闪星A]
@copyFromSection:effect_白闪星
xOffsetRelative:13
yOffsetRelative:13
xSpeedRelativeRandom:2
image:强白闪星.png
[effect_白闪星B]
@copyFromSection:effect_白闪星A
xOffsetRelative:-13
yOffsetRelative:13
[effect_白闪星C]
@copyFromSection:effect_白闪星A
xOffsetRelative:-13
yOffsetRelative:-13
[effect_白闪星D]
@copyFromSection:effect_白闪星A
xOffsetRelative:13
yOffsetRelative:-13

[effect_旋闪星]
image:强白闪星.png
life: 160
fadeOut: true
attachedToUnit: true
color: #FF26AC
fadeInTime:5
scaleFrom:8
scaleTo:8
alpha: 10
dirSpeed: 3
drawUnderUnits:true
#atmospheric: true

[hiddenAction_脱离卡死]
autoTrigger: if not self.isInMap
fireTurretXAtGround: 2
fireTurretXAtGround_withTarget: nearestUnit(withTag="星空", relation="own")
fireTurretXAtGround_withProjectile: 闪移

[projectile_闪移]
areaDamage:	100
areaRadius:	44
life: 5
speed: 10
teleportSource: true
explodeOnEndOfLife: true
explodeEffect: CUSTOM:光波, CUSTOM:大hitLightFlash
areaHitAirAndLandAtSameTime: true

[hiddenAction_消散]
autoTrigger: if self.timeAlive(laterThanSeconds=179)
spawnEffects: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:白幕
deleteSelf: true
[effect_白幕]
priority: veryhigh
fadeOut: false
image: 罩.png
life: 10
scaleFrom: 20
scaleTo: 0
alpha: 0.75
dirSpeed: -1
color: #FF26AC
[effect_外光]
priority: veryhigh
image: SHARED:light_50.png
life: 85
fadeOut: true
attachedToUnit: false
color: #FF26AC
scaleFrom: 2.4
scaleTo: 2.4
alpha: 0.6
drawUnderUnits:false
[effect_中光]
priority: veryhigh
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: true
color: #FF26AC
scaleFrom: 0.5
scaleTo: 0.1
alpha: 2
[effect_光波]
priority: veryhigh
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2
color: #FF26AC
fadeInTime: 3
alpha: 2

[graphics]
total_frames: 1
scaleImagesTo: 47
image:        b星云.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:白闪星A, CUSTOM:白闪星B, CUSTOM:白闪星C, CUSTOM:白闪星D
movementEffectRate: 4


[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

#isFixedFiring: true
meleeEngangementDistance: 700

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 500
shootDelay: 140
aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
projectile: 1
shoot_sound: large_gun_fire2
shoot_sound_vol: 0.2
shoot_flame: CUSTOM:大hitLightFlash
#shoot_light: #ffffff
[turret_2]
x: 0
y: 0
projectile:2
delay:32s

[projectile_1]
areaDamage:120
areaRadius:65
areaHitAirAndLandAtSameTime:true
explodeOnEndOfLife:true
life:500
speed: 6
image: 星云团.png
color: #FF40B6
drawSize: 0.9
deflectionPower: 3
shieldDamageMultiplier: 4
targetGround:true
targetGround_includeTargetHeight:true
targetGroundSpread:160
retargetingInFlight: true
retargetingInFlightSearchRange: 30
explodeEffect:CUSTOM:星云*2,CUSTOM:hitLightFlash
explodeEffectOnShield:CUSTOM:星云*2,CUSTOM:hitLightFlash
effectOnCreate: CUSTOM:projectileLight
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2
spawnProjectilesOnCreate: 1*5(spawnChance=0.8,recursionLimit=1)
spawnProjectilesOnExplode: 星雾

[projectile_星雾]
areaDamage:50
areaRadius:50
areaRadiusFromEdge:true
armourIgnoreAmount:99
life:10
speed:0
targetGround:true
targetGround_includeTargetHeight:true
targetGroundSpread:100
invisible:true
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
deflectionPower:-1
spawnProjectilesOnExplode: 星雾(recursionLimit=100,offsetRandomXY=1)
explodeEffect:CUSTOM:星云*1,CUSTOM:hitLightFlash
explodeEffectOnShield:CUSTOM:星云*1,CUSTOM:hitLightFlash
[effect_星云]
priority:low
#attachedToUnit:true
life:50
alpha:0.5
scaleFrom:0.8
scaleTo:1.2
image:星云尘.png
drawUnderUnits:false
atmospheric:true
xSpeedRelativeRandom:0.5
ySpeedRelativeRandom:0.5
#color: #FF40B6

[projectile_2]
areaDamage:80
areaRadius:10
#areaDamageNoFalloff:true
areaRadiusFromEdge:true
life:600
speed:5
frame:6
drawSize:1
lightColor: #FF26AC
lightSize: 0.5
instant:false
targetGround:true
targetGroundSpread:120
deflectionPower: -1
spawnProjectilesOnExplode:2(spawnChance=0.95,recursionLimit=999)
spawnUnit: 增星(maxSpawnLimit=1,spawnChance=0.15,addResources=setFlag:1), 增星(maxSpawnLimit=1,spawnChance=0.15,addResources=setFlag:2), 增星(maxSpawnLimit=1,spawnChance=0.15,addResources=setFlag:3)
explodeEffect: CUSTOM:hitLightFlash, CUSTOM:速白闪星
trailEffect: CUSTOM:紫光
trailEffectRate: 2
[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #B700FFFF
dirSpeed: 5
[effect_紫光]
color: #FF26AC
createWhenZoomedOut: false
priority:low
image: 白光.png
life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #FF40B6
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true

[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FF40B6
fadeInTime:2
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.6
dirSpeedRandom:3
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority: verylow

image: SHARED:light_50.png
life: 14
fadeInTime: 2
fadeOut: true
attachedToUnit: false
color: #FF40B6

scaleFrom: 4
scaleTo: 3
alpha: 0.6
drawUnderUnits:false
[effect_大hitLightFlash]
@copyFromSection:effect_hitLightFlash
scaleTo: 1.8

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #FF26AC
scaleFrom: 1.5
scaleTo: 1.5

[effect_sparks2]
@copyFromSection:effect_sparks
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
ySpeedRelative:2

[movement]
movementType: AIR
moveSpeed: 5
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.0001

maxTurnSpeed: 8
turnAcceleration: 0.02

targetHeight: 35

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0


[global_resource_星空舰载机]
hidden: true
displayName: 星空舰载机
displayColor: #ffffff
priority: 1