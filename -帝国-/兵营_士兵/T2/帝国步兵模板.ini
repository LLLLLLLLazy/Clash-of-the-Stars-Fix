
[core]
name: NULL
class: CustomUnitMetadata

#template only
dont_load: true

reclaimPrice: ${int(section.price * 0.25)}

tags: ${tags}
@define tags: units, 步兵, 转向攻击

radius: 8
displayRadius: 12

isBio: true
softCollisionOnAll: 2

selfRegenRate: 0.03

[hiddenAction_可载步兵]
autoTrigger: if not self.hasParent and not self.tags(includes='可载步兵')
temporarilyAddTags: 可载步兵

[hiddenAction_已载步兵]
autoTrigger: if self.hasParent and self.tags(includes='可载步兵')
temporarilyRemoveTags: 可载步兵

[hiddenAction_步兵塔加成]
autoTrigger: if self.hasParent(withTag="步兵塔") and not self.tags(includes='步兵塔范围')
setUnitMemory: 属性[20]=memory.属性[20]+30
temporarilyAddTags: 步兵塔范围
alsoTriggerAction: 属性变化

[hiddenAction_步兵塔恢复]
autoTrigger: if not self.hasParent(withTag="步兵塔") and self.tags(includes='步兵塔范围')
setUnitMemory: 属性[20]=memory.属性[20]-30
temporarilyRemoveTags: 步兵塔范围
alsoTriggerAction: 属性变化


[hiddenAction_步兵塔T2加成]
autoTrigger: if self.hasParent(withTag="步兵塔T2") and not self.tags(includes='步兵塔范围T2')
setUnitMemory: 属性[20]=memory.属性[20]+70
temporarilyAddTags: 步兵塔范围T2
alsoTriggerAction: 属性变化

[hiddenAction_步兵塔T2恢复]
autoTrigger: if not self.hasParent(withTag="步兵塔T2") and self.tags(includes='步兵塔范围T2')
setUnitMemory: 属性[20]=memory.属性[20]-70
temporarilyRemoveTags: 步兵塔范围T2
alsoTriggerAction: 属性变化


[hiddenAction_附属运输禁止攻击]
autoTrigger: if (parent.hasParent(withTag="附属运输") or parent.parent.hasParent(withTag="附属运输") or parent.parent.parent.hasParent(withTag="附属运输")) and not self.tags(includes='附属运输状态')
setUnitMemory: 属性[20]=memory.属性[20]-${attack.maxAttackRange}
temporarilyAddTags: 附属运输状态
alsoTriggerAction: 属性变化

[hiddenAction_附属运输结束]
autoTrigger: if not (parent.hasParent(withTag="附属运输") or parent.parent.hasParent(withTag="附属运输") or parent.parent.parent.hasParent(withTag="附属运输")) and self.tags(includes='附属运输状态')
setUnitMemory: 属性[20]=memory.属性[20]+${attack.maxAttackRange}
temporarilyRemoveTags: 附属运输状态
alsoTriggerAction: 属性变化


[hiddenAction_基因种子]
autoTriggerOnEvent: completeAndActive
requireConditional: if self.globalTeamTags(includes='基因工程')
addResources: 基因种子=${core.price/1000}

[effect_黑光]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 1.7
scaleTo: 1.7
alpha: 1.7
drawUnderUnits:false

[effect_displacement]
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 25
fadeOut: true
fadeInTime: 5
attachedToUnit: false
color: #ffffff
scaleFrom: 0.1
scaleTo: 0.7
alpha: 0.3
drawUnderUnits:false

[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点

[graphics]
total_frames: 1

image:        NONE
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1

imageScale: 1

lock_body_rotation_with_main_turret: true

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.8
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.07

maxTurnSpeed: 4.0
turnAcceleration: 0.5

moveSlidingMode :true
moveIgnoringBody:false

reverseSpeedPercentage:1


[hiddenAction_生产跟随移动工厂]
@copyFromSection: template_生产跟随移动工厂
