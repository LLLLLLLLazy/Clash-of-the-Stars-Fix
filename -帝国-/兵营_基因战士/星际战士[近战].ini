
[core]
showInEditor:false
name: 星际战士[近战]
displayText: 基因战士
displayDescription: -为战斗而诞生 \n-灵活切换爆弹枪与链齿刀作战
class: CustomUnitMetadata
price: 2000, 基因种子=1
maxHp: 1200
mass: 6000

maxShield: 600
shieldRegen: 0

tags: units, 星际步兵, 星际战士, 转向攻击

energyMax: 12
energyRegen: 0.02
energyNeedsToRechargeToFull: true

armour: 20
armourMinDamageToKeep: 20

fogOfWarSightRange: 18

techLevel: 2
buildSpeed: 18.5s

radius: 14
displayRadius: 16
shieldRenderRadius: 15

isBio: true

#softCollisionOnAll: 3

selfRegenRate:0.08

transportSlotsNeeded:1

#generation_resources: 基因种子=0.006

showActionsWithMixedSelectionIfOtherUnitsHaveTag: 星际步兵

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU: true

[action_1]
id: 切换远程武器
text: 切换武器 - 枪
description: -拿出爆弹枪
convertTo: 星际战士[远程]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
buildSpeed: 0.5s
pos: 0

setUnitStats: shield=0

alwaysSinglePress: true

[action_基因升级]
price: 1600, 基因种子=1
id: 基因重型武装
text: 升级 - 重型武装
displayType: upgrade
buildSpeed: 12.8s
pos: 5
convertTo: 星际老兵[近战]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
isLocked: if self.resource(type='EXP', lessThan=1)
isLockedMessage: -需要击杀一个单位
setResourcesWithLogic: EXP=0

descriptionAddUnitStats: ${section.convertTo}
descriptionAddFromUnit: ${section.convertTo}
iconExtraImage: icon_upgrade_top.png
iconExtraColor: #80FFFFFF
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

spawnEffects: 黑光, displacement

[hiddenAction_经战击杀]
autoTriggerOnEvent: killedAnyUnit
requireConditional: if not eventSource.self.tags(includes="召唤物")
addResources: EXP=1

[hiddenAction_近战护盾]
autoTrigger: if not self.shield(full=true)
addResources: shield=0.25
setResourcesWithLogic: 近战护盾=self.resource.shield

[resource_近战护盾]
displayName: 近战护盾
displayRoundedDown: true

#[hiddenAction_死亡返还]
#autoTriggerOnEvent: destroyed
#addResources: 基因种子=0.5

[effect_黑光]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 1.7
scaleTo: 1.7
alpha: 1.7
drawUnderUnits:false

[effect_displacement]
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 25
fadeOut: true
fadeInTime: 5
attachedToUnit: false
color: #ffffff
scaleFrom: 0.1
scaleTo: 0.7
alpha: 0.3
drawUnderUnits:false

[hiddenAction_无延迟追击B]
@copyFromSection: template_无延迟追击B
[hiddenAction_无延迟追击B2]
@copyFromSection: template_无延迟追击B2

[graphics]
total_frames: 2
image:       星际战士近战.png
image_wreak: NONE
image_turret: NONE

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO_ANIMATED
shadowOffsetX:2
shadowOffsetY:2

animation_attack_start: 1
animation_attack_end: 1
animation_attack_speed: 12

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3.0

maxAttackRange: 15
shootDelay: 24

isMelee: true
meleeEngangementDistance: 150

[turret_1]
#主体
x: 0
y: 0
idleDir:0

turnSpeed: 4.1
turnSpeedAcceleration: 0.3

canShoot: false

recoilOffset: 3
recoilOutTime: 6
recoilReturnTime: 15

[turret_2]
#
x: 0
y: 0
attachedTo: 1
slave: true
invisible: true

projectile: 1

recoilOffset:-2

#shoot_flame: small
shoot_sound: large_gun_fire2
shoot_sound_vol: 0.1
#shoot_light: #FFccCCEE

canShoot: true

size: 0

[projectile_1]
tags= T-projectile
life: 50
instant: true

directDamage: 60
areaDamage: 60
areaRadius: 25
areaDamageNoFalloff: true

explodeEffect: NONE

[movement]
movementType: OVER_CLIFF
moveSpeed:0.7
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.03

reverseSpeedPercentage: 0

maxTurnSpeed: 4.1
turnAcceleration: 0.15

moveSlidingMode :true
moveIgnoringBody:true

[resource_exp]
displayName: EXP
displayColor: #ff6c00