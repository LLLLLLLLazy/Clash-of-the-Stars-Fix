[core]



name: 指挥中心
displayText: 指挥中心
displayDescription: -铁锈阵营 \n -产出大量资源 \n -起始基地被毁会损失资源 \n -可维修与协助建造单位 \n -造成部分范围伤害
class: CustomUnitMetadata
price: 8000
maxHp: 4000
mass: 10000
tags: units, 铁锈指挥中心, 基地
displayLocaleKey: commandCenter
footprint: -1,-1,1,1
constructionFootprint: -1,-1,1,2
techLevel: 1
buildSpeed: 1
radius: 28
isBio: false
isBuilding: true
isBuilder: true
canRepairBuildings: true
canReclaimResources: true
canRepairUnits : true
nanoRange: 280
nanoBuildSpeed: 3
autoRepair: true
nanoRepairSpeed: 0.2
availableInDemo: true
isPickableStartingUnit:	true
generation_credits: 44
borrowResourcesWhileAlive: 经济=-${core.generation_credits}
softCollisionOnAll: 3
exit_x: -1
exit_y: -1
energyMax: 10
energyRegen: 0.01
fogOfWarSightRange: 28
autoTriggerCooldownTime: 0.1s
effectOnDeath: CUSTOM:shockwaveLarge, largeExplosion, CUSTOM:explosionFlashLarge
soundOnDeath: buiding_explode: 1
[global_resource_经济]
hidden: true
[canBuild_1]
name: setRally, reclaim
pos: -1
[canBuild_2]
name: 建造者, scout
pos: 1
isVisible: if (not self.globalTeamTags(includes='AI系统') or self.globalTeamTags(includes='开端{I}')) and self.readUnitMemory('密令', type='string')!="20201214"


[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语

[resource_起始基地]
displayName: 起始基地


[hiddenAction_起始建造者+]
highPriorityQueue: true
id: 起始建造者+
produceUnits: 建造者
buildSpeed: 0s

[action_upgrade]
isVisible: if self.readUnitMemory('密令', type='string')!="20201214"
convertTo: T2 - 指挥中心
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 10000
text: 升级 - T2
description: -带有防护盾 \n -导弹威力增强 \n -修复与生产效率提升 \n -可使用铁锈技能 \n -更多资源产出 \n -视野提升
descriptionAddUnitStats: ${section.convertTo}
displayType: Upgrade
buildSpeed: 100s
pos: 0
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

ai_isHighPriority: true

[hiddenAction_阵营]
autoTrigger: if not self.globalTeamTags(includes='铁锈')
addGlobalTeamTags: 铁锈


[hiddenAction_顶点之处]
autoTrigger: if self.globalTeamTags(includes="顶点") and not self.tags(includes="顶点之处")
temporarilyAddTags: 顶点之处

[hiddenAction_落下顶点]
autoTrigger: if not self.globalTeamTags(includes="顶点") and self.tags(includes="顶点之处")
temporarilyRemoveTags: 顶点之处

[graphics]
total_frames: 4
image: base.png
image_back: base_back.png
image_wreak: base_dead.png
image_shadow: NONE
shadowOffsetX: 1
shadowOffsetY: 1
animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 6
animation_idle_pingPong: true
[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
turretTurnSpeed: 100
maxAttackRange: 280
shootDelay: 70
turretMultiTargeting: true
[turret_nanoTurret]

x: -3
y: 27

warmup: 30

turnSpeed: 4
size: 8

image: SHARED:nano_turret.png

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true
[turret_1]
x: 0
y: 0
shoot_sound: missile_fire
shoot_sound_vol: 0.3
#shoot_flame: small
shoot_light: #FFEECCCC
shouldResetTurret: false
idleSpin: 0
projectile: 1

[turret_magic]
x: 0
y: 0
canShoot: false

[projectile_1]
tags= T-projectile
directDamage: 55
areaDamage: 55
areaRadius: 45
life: 250
speed: 0.3
frame: 4
targetSpeed: 7
largeHitEffect: true
drawSize: 1.1
autoTargetingOnDeadTarget: true
trailEffect: true
ballistic: true
ballistic_delaymove_height: 25
ballistic_height: 25
lightColor: #f7ff1d
lightSize: 0.5
[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed: 0
turnAcceleration: 0

[effect_shockwaveLarge]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 2
life: 45
color: #FFEECCCC

[effect_explosionFlashLarge]
image: SHARED:light_50.png
scaleFrom: 8
scaleTo: 4
life: 20
fadeOut: true
priority: critical


[hiddenAction_密令自爆]
autoTrigger: if self.readUnitMemory('密令', type='string')=="20201214"
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 爆炸点
addResources: 摧毁=1
alsoTriggerAction: 爆炸2

[hiddenAction_爆炸2]
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 爆炸点

[hiddenAction_新铁出场]
autoTrigger: if self.resource(type='摧毁', greaterThan=25)
convertTo: A_commandCenter
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
produceUnits: megaBuilder
addGlobalTeamTags: 新之铁锈阵营
removeGlobalTeamTags: 铁锈
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 新星坠落1
playSoundAtUnit: missile_hit
spawnEffects: CUSTOM:大爆炸*7, CUSTOM:新星光, CUSTOM:冲击扭曲, CUSTOM:回缩扭曲

[projectile_爆炸点]
tags= T-projectile
directDamage: 0
life: 100
speed: 100
invisible: true
targetGroundSpread: 30
explodeEffect: NONE
explodeEffectOnShield: NONE
drawUnderUnits: false
spawnProjectilesOnExplode: 爆炸

[projectile_爆炸]
tags= T-projectile
areaDamage: 90
areaRadius: 45
life: 0
invisible: true
explodeOnEndOfLife: true
explodeEffect: CUSTOM:爆炸, shockwave
explodeEffectOnShield: CUSTOM:爆炸, shockwave
spawnUnit: 死亡碎片(spawnChance=0.5)

[projectile_新星坠落1]
tags= T-projectile
areaDamage: 100
areaRadius: 500
armourIgnoreAmount: 99999
largeHitEffect: true
life: 70
speed: 100

targetGround: true
instant: true

friendlyFire: true

[projectile_新星坠落2]
tags= T-projectile
areaDamage: -200
areaRadius: 300
armourIgnoreAmount: 500
largeHitEffect: true
life: 70
speed: 100

targetGround: true
instant: true

friendlyFire: true

[projectile_新星坠落3]
tags= T-projectile
areaDamage: 10000
areaRadius: 500
areaExpandTime: 50
life: 70
speed: 100
explodeEffect: NONE
explodeEffectOnShield: NONE

targetGround: true
instant: true

[effect_爆炸]
life: 45
stripIndex: explode_big
scaleFrom: 0.8
scaleTo: 0.8
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
alsoPlaySound: missile_hit: 0.8

[effect_大爆炸]
life: 25
stripIndex: explode_big
scaleFrom: 2.5
scaleTo: 2.5
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
xOffsetAbsoluteRandom: 45
yOffsetAbsoluteRandom: 45
delayedStartTimerRandom: 60
alsoPlaySound: missile_hit: 0.8

[effect_新星光]
life: 90
stripIndex: light_50
fadeInTime: 30
scaleFrom: 10
scaleTo: 0
alpha: 1

[effect_冲击扭曲]
drawType: displacement

image: SHARED:cone_inverted_normal_128.png
life: 80
fadeOut: true
fadeInTime: 10

attachedToUnit: true
color: #FFFFFF
scaleFrom: 0
scaleTo: 4
alpha: 1
drawUnderUnits: false
alwayStartDirAtZero: true

[effect_回缩扭曲]
drawType: displacement

image: SHARED:cone_inverted_normal_128.png
life: 30
fadeOut: true
fadeInTime: 2

attachedToUnit: true
color: #FFFFFF
scaleFrom: 4
scaleTo: 0
alpha: 1
drawUnderUnits: false
alwayStartDirAtZero: true

[resource_摧毁]
displayName: 摧毁
hidden: true


[ai]
buildPriority: 1
useAsBuilder: true
maxEachBase: 4

[action_AI建造者征集]
isVisible: if self.globalTeamTags(includes='AI系统') and not self.globalTeamTags(includes='开端{I}')
unitShownInUI: 建造者
textAddUnitName: 建造者
descriptionAddFromUnit: 建造者
descriptionAddUnitStats: 建造者
produceUnits: 建造者
buildSpeed: 0.002
price: 500
pos: 1

[hiddenAction_AIbuildThebuilder]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.hasResources(500) and not self.globalTeamTags(includes='开端{I}') and not numberOfUnitsInTeam(withTag='建造者', greaterThan=3) and self.queueSize(empty=true)
alsoQueueAction: AI建造者征集
addResources: credits=-500