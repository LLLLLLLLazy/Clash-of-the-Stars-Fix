
[core]
name: 攻城甲虫
displayDescription: -厚重的装甲 \n -躯体受伤翻倍 \n (密令单位)
price: 114514
reclaimPrice: 11451
maxHp: 1919810
mass: 60000

fogOfWarSightRange: 28

techLevel: 2
buildSpeed: 0.002

experimental:true

generation_credits: 20
generation_delay: 40

transportSlotsNeeded:5

radius:30

tags: units, 虫族, 大型虫, 镰刀赤甲虫, 固定射击

selfRegenRate: 0.8

isBio:true
isBug:true

soundOnDeath:bug_die:2

isPickableStartingUnit:	true

armour: 30
armourMinDamageToKeep: 30

energyMax: 200
energyRegen: 0.01667


isBuilder: true

[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语

[resource_起始基地]
displayName: 起始基地

[hiddenAction_created]
autoTrigger: if not self.hasFlag(id=1)
addResources: setFlag=1, hp=-1919000
spawnEffects: CUSTOM:崩坏*15

[action_killed]
isActive: false
autoTriggerOnEvent: killedAnyUnit
requireConditional: if not eventSource.self.tags(includes="召唤物")
text: 崩坏
description: -击杀损失生命……
pos: -1
displayType: infoOnly
buildSpeed: 0s
addResourcesWithLogic: hp=-100-eventSource.priceCredits*0.2
spawnEffects: CUSTOM:崩坏*2

[action_1]
autoTriggerOnEvent: destroyed
text: 巨大喷流
description: -大范围伤害
buildSpeed: 2s
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 2
fireTurretXAtGround_count: 15
highPriorityQueue: true

pos: 0

price: hp=2000
spawnEffects: CUSTOM:崩坏*10

[effect_崩坏]
stripIndex: effects
frameIndex: 0

life: 80
fadeOut: true
attachedToUnit: false
color: #513414
fadeInTime:2
scaleFrom: 1.3
scaleTo: 2.7
alpha: 0.7
drawUnderUnits:false
#yOffsetRelative:-7
#xOffsetRelativeRandom:3
xOffsetRelativeRandom:5
yOffsetRelativeRandom:5
xSpeedRelativeRandom:0.8
ySpeedRelativeRandom:0.8

shadow: true
atmospheric: true

[action_Upgrade]
convertTo: 攻城甲虫T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 10000, hp=10000
text: 强化
displayType:upgrade
buildSpeed: 33.3s
pos: 2
description:-全面加强
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

[action_switch1]
isVisible: if not self.hasFlag(id=2)
addResources: setFlag=2
displayType: action
text: 自动攻击
pos: 2
description: -关闭时只会攻击指令目标
buildSpeed: 0.1s
iconImage: icon_on.png
allowMultipleInQueue: false
highPriorityQueue: true
ai_isDisabled: true

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.hasFlag(id=2)
addResources: unsetFlag=2
iconImage: icon_off.png


[canBuild_1]
name: 瓢虫, 毒气
pos: 1

[canBuild_恐虐传送门]
isVisible: if self.hasResources(混沌元素=1)
name: 亚空间水晶
pos: 99



[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_血量减伤]
autoTriggerOnEvent: tookDamage
requireConditional: if self.resource.受击前血量>self.hp
setResourcesWithLogic: hp=self.hp-(self.resource.受击前血量-self.hp) * 1, 受击前血量=self.hp

[hiddenAction_受伤记录]
autoTriggerOnEvent: tookDamage
setResourcesWithLogic: 受击前血量=self.hp

[resource_受击前血量]
hidden: true


[animation_attack]
onActions:attack
pingPong:false
arm1_0.05s:{x:0, y:0, dir:0}
arm1_0.1s:{x:0, y:0, dir:-30}
arm1_0.2s:{x:0, y:0, dir:-70}
arm1_0.4s:{x:0, y:0, dir:-50}
arm1_0.5s:{x:0, y:0, dir:-20}
arm1_0.6s:{x:0, y:0, dir:-10}
arm1_0.7s:{x:0, y:0, dir:0}

arm2_0.05s:{x:0, y:0, dir:0}
arm2_0.1s:{x:0, y:0, dir:30}
arm2_0.2s:{x:0, y:0, dir:70}
arm2_0.4s:{x:0, y:0, dir:50}
arm2_0.5s:{x:0, y:0, dir:20}
arm2_0.6s:{x:0, y:0, dir:10}
arm2_0.7s:{x:0, y:0, dir:0}


[arm_1]
x:11
y:7
image_end:右镰.png
image_end_teamColors:false
drawOverBody:false
drawDirOffset:15
moveSpeed:18
[arm_2]
x:-11
y:7
image_end:左镰.png
image_end_teamColors:false
drawOverBody:false
drawDirOffset:-15
moveSpeed:18



[graphics]

drawLayer:experimentals
imageScale:1.5

total_frames:4
image:镰刀甲虫.png
image_wreak:NONE
image_turret:NONE

animation_moving_start:0
animation_moving_end:3
animation_moving_speed:7

image_shadow: AUTO_ANIMATED
shadowOffsetX:1
shadowOffsetY:1

splastEffect:true

lock_body_rotation_with_main_turret:true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize:35
turretTurnSpeed:3

maxAttackRange:280
shootDelay: 100

aimOffsetSpread: 0

[turret_1]
x:0
y:0

shoot_sound:large_gun_fire2
shoot_sound_vol:0.2
shoot_light:#AEFF00

recoilOffset:3
recoilOutTime:6
recoilReturnTime:18

projectile: 1

canAttackCondition: if not self.hasFlag(id=2) or self.hasFlag(id=2) and attacking == activeWaypointTarget

[projectile_1]
tags= T-projectile
life:500

areaDamage:100
areaRadius:55

buildingDamageMultiplier: 2

image:答辩.png

speed: 3

largeHitEffect:true

drawSize:1.2

trailEffect:CUSTOM:毒雾
trailEffectRate:3

color:#513414

lightColor: #513414
lightSize: 0.5

initialUnguidedSpeedHeight:1.2
gravity:0.1

[projectile_2]
tags= T-projectile
life:500

areaDamage:100
areaRadius:55
areaDamageNoFalloff: true

areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true

targetGround: true
targetGroundSpread: 70

buildingDamageMultiplier: 2

image:答辩.png

speed: 4
speedSpread: 2

largeHitEffect:true

drawSize:1.2

trailEffect:CUSTOM:毒雾
trailEffectRate:5

color:#513414

lightColor: #513414
lightSize: 0.5

initialUnguidedSpeedHeight:1.2
gravity:0.1

[effect_毒雾]
#烈性酸液
stripIndex: effects
frameIndex: 0
priority:low

life: 80
fadeOut: true
attachedToUnit: false
color: #513414
fadeInTime:5
hSpeed: 0.3
scaleFrom: 0.4
scaleTo: 1.0
alpha: 0.5
drawUnderUnits:false
#yOffsetRelative:-7
xOffsetRelativeRandom:3
xSpeedRelativeRandom:0.2
ySpeedRelative:2
ySpeedRelativeRandom:0.2

shadow: true
atmospheric: true

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.5
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.06

#reverseSpeedPercentage:1.0

maxTurnSpeed: 1.4
turnAcceleration: 0.15

moveSlidingMode :false
moveIgnoringBody:false


[global_resource_混沌元素]
hidden: false
displayName: 混沌元素
displayColor: #FF1A00
priority: 1