
[core]
name: 浸没仆从
displayDescription: -在水上时会攻击水下 \n -反之，在水下时会攻击水上 \n -非战斗状态时拥有护盾 \n -脆弱，但攻击力强大 \n -弱效毒素附加: 12
class: CustomUnitMetadata
price: 450
maxHp: 50
mass: 1000

maxShield: 80
shieldRegen: 0
shieldRenderRadius: 11

techLevel: 1

buildSpeed: 0.005
availableInDemo: true

radius: 9

selfRegenRate:0.03

softCollisionOnAll: 8

isBio: true
isBug: true
tags: units, 虫族, 小型虫

energyMax: 1
energyRegen: 0.1

autoTriggerCooldownTime: 0.1s

[hiddenAction_shield]
autoTrigger: if (not self.isAttacking or attacking.hp<=0) and not self.shield(full=true) and self.isEnergyFull
addResources: shield=5

[hiddenAction_attack]
setResourcesWithLogic: shield=0, energy=0

[action_floatAndSink]
convertTo: 浸没仆从[潜]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
id: ${section.text}
text: ↓下沉↓
description: -沉入水下
buildSpeed: 0.3s
pos:1
highPriorityQueue: true
alwaysSinglePress: true
spawnEffects: CUSTOM:shockwave2, CUSTOM:displacement

[effect_shockwave]
priority:low
stripIndex: shockwave_large
life: 15
attachedToUnit: true
scaleFrom: 0
scaleTo: 0
alpha: 0
alsoEmitEffectsOnDeath: CUSTOM:shockwave2, CUSTOM:displacement

[effect_shockwave2]
priority:low
stripIndex: shockwave_large
life: 45
fadeOut: true
fadeInTime: 3
attachedToUnit: false
color: #66B6E4
scaleFrom: 0
scaleTo: 0.5
alpha: 0.5
drawUnderUnits:true

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 60
fadeOut: true
fadeInTime: 5
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.1
scaleTo: 0.7
alpha: 0.03
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeed: 1

[hiddenAction_水下出厂]
@copyFromSection: template_水下出厂

[graphics]

total_frames: 1
image:        浸没仆从.png
image_wreak:  NONE
image_turret: NONE
image_shield: 结核护盾.png

showEnergyBar: false

#AUTO
image_shadow: NONE
shadowOffsetX:0
shadowOffsetY:0

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 100
animation_idle_scale_start: 1
animation_idle_scale_end: 1.02
animation_idle_pingPong: true

lock_body_rotation_with_main_turret: true

movementEffect: CUSTOM:splash
movementEffectRate: 8

[effect_splash]
priority:verylow
stripIndex: effects
frameIndex: 13

life: 60
fadeOut: true
fadeInTime: 3
attachedToUnit: false

scaleFrom: 0.7
scaleTo: 1.0
alpha: 0.4
atmospheric:true

dirOffsetRandom:180

ySpeedRelative:-0.2
yOffsetRelative:-1
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1

drawUnderUnits:true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits: false

turretSize: 12
turretTurnSpeed: 6

maxAttackRange: 80
shootDelay: 9

[turret_1]
x: 0
y: 0
canShoot: false

[turret_2]
x: 0
y: 0
attachedTo: 1
slave: true

barrelX: -1
barrelOffsetX_onOddShots: 2

canAttackLandUnits: if self.isUnderwater
canAttackUnderwaterUnits: if self.isAtGroundHeight

onShoot_triggerActions: attack

turnSpeed: 0
turnSpeedAcceleration: 0

[projectile_1]
tags= T-projectile
directDamage: 13
life: 300
speed: 0.2
targetSpeed: 2.0
targetSpeedAcceleration: 0.03

frame: 11
drawSize: 0.5

color: #ff3bff00
lightColor: #ff3bff00
lightSize: 0.15

deflectionPower: -1

explodeEffect: CUSTOM:explodeSmall
explodeEffectOnShield: 扭曲波

spawnUnit: 弱效毒雾
mutatorX_ifUnitWithoutTags: 毒免疫, 效果免疫, 不会受伤
mutatorX_addResourcesDirectHit: 弱效毒素=12

[resource_弱效毒素]
displayName: 弱效毒素

[effect_explodeSmall]
color: #ff3bff00
life: 17
image: 白爆.png
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_扭曲波]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 0.4
color: #ff3bff00

[movement]
movementType: WATER

reverseSpeedPercentage: 0.8

moveSpeed: 1.3
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.03

targetHeight: -0.7
targetHeightDrift: 0.3

maxTurnSpeed: 3.0
turnAcceleration: 0.2

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181





