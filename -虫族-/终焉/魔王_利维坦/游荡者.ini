[core]
name:曲行游荡者
displayDescription:-攻击地面与空中\n-死亡后恢复利维坦3%血量
tags: units, 盘绕之蛇, 召唤物

price:600
maxHp:240
mass:2000

radius:12

isBug:true
isBio:true

selfRegenRate:0.1

buildSpeed:5s

canNotBeGivenOrdersByPlayer: true

[action_深渊之息]
@copyFrom_skipThisSection:true
autoTriggerOnEvent: completeAndActive
addResources: 免疫渊海=1

[action_swallow]
isActive: false
autoTriggerOnEvent: killedAnyUnit
requireConditional: if not eventSource.self.tags(includes="召唤物")
text: 疵诟·圣洁之食
description: -击杀目标生成曲行游荡者
pos: 0.1
displayType: infoOnlyStockpile
buildSpeed: 0s
spawnUnits: 曲行游荡者

[action_swallow2]
isActive: false
text: 盘绕之蛇
description: -死亡后恢复利维坦3%血量
pos: 0.2
displayType: infoOnly
buildSpeed: 0s
autoTriggerOnEvent: destroyed
takeResources: hp=-2400
takeResources_includeUnitsWithinRange: 2000
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: 利维坦
takeResources_maxUnits: 10
spawnEffects:custom:windwave2

[hiddenAction_follow]
addWaypoint_type: guard
addWaypoint_maxTime: 2s
addWaypoint_target_nearestUnit_tagged: 利维坦
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_mapMustBeReachable: false
autoTrigger: if not self.isAttacking() and not self.hasActiveWaypoint(type='guard') and numberOfUnitsInTeam(withTag='利维坦', greaterThan=0, withinRange=1000)

[hiddenAction_recycle]
autoTrigger: if self.hasFlag(id=1) or not self.isInMap
spawnEffects:custom:projectileLight
deleteSelf: true
takeResources: ammo=-1
takeResources_includeUnitsWithinRange: 10000
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: 利维坦

[resource_免疫渊海]
displayName: 免疫渊海

[graphics]
image: 游荡者.png
#scaleImagesTo:25
image_turret:NONE
splastEffect:true

image_shadow:AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:projectileTrail
movementEffectRate: 4

lock_body_rotation_with_main_turret:true
[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:true
canAttackUnderwaterUnits:false
maxAttackRange:160
shootDelay:0.6s

isMelee: true
meleeEngangementDistance: 500

[turret_1]
x:0
y:0
invisible:true
projectile:1
turnSpeed:9
shoot_sound: plasma_fire2
shoot_sound_vol: 0.5
shoot_flame: smoke
shoot_light: #FF3BFF00
barrelY:8
recoilOffset:-3
recoilOutTime:5
recoilReturnTime:20

[projectile_1]
tags= T-projectile
directDamage:35
life: 200
speed: 4
targetSpeed: 10

trailEffect: CUSTOM:projectileTrail

frame: 11
drawSize: 1.2

color: #ff3bff00

lightColor:#ff3bff00
lightSize:0.3

explodeEffect: CUSTOM:explodeSmall

wobbleAmplitude: 0.9
wobbleFrequency: 0.4s

spawnProjectilesOnExplode:wind2
[projectile_wind2]
tags= T-projectile
life: 0
speed: 0
explodeOnEndOfLife:true
explodeEffect:CUSTOM:windwave2
largeHitEffect:true
areaDamage: 0
areaRadius: 25


[effect_explodeSmall]
life: 25
fadeOut: false
attachedToUnit: false
image: explode_big2.png
scaleFrom: 0.6
scaleTo: 0.6
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.6


[effect_windwave2]
image: shockwave.png
life: 30
scaleFrom: 0
scaleTo: 1
alpha: 1
color:#FF3BFF00

[effect_projectileTrail]
createWhenZoomedOut: false
priority:verylow
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #FF3BFF00
fadeInTime:2
scaleFrom: 0.3
scaleTo: 0.8
alpha: 0.3
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: false
color: #FF3BFF00
fadeInTime:10
scaleFrom: 2.4
scaleTo: 2.4
alpha: 2
drawUnderUnits: false

[movement]
movementType:air
moveSpeed:1.8
moveAccelerationSpeed:0.05
moveDecelerationSpeed:0.01

maxTurnSpeed:9
turnAcceleration:0.5

targetHeight:20
targetHeightDrift:2

moveSlidingMode: true
moveIgnoringBody: true