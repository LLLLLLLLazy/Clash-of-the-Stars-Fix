[core]



name: 肯努基斯[光束炮]
displayText: 肯努基斯α改
maxHp: 1250
mass: 13000
price: 4200
radius: 20
displayRadius: 22
buildSpeed: 40.2s
fogOfWarSightRange: 20
displayDescription: -帝国光束坦克α\n-中/较远射程\n-对地对空\n-自我修复\n-带有防护盾\n-对护盾伤害较低\n-强力破坏光束,但是充能慢\n-多功能
transportSlotsNeeded: 1
maxShield: 850
shieldRegen: 0.12
selfRegenRate: 0.06
energyMax: 12
energyRegen: 0.02
energyNeedsToRechargeToFull: true
tags: units, 光束车, 坦克
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 光束车

autoTriggerCooldownTime: 0.1s

[template_1]
isActive: true
tags: 切换武器, ${section.id}
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
buildSpeed: 1.5s
alwaysSinglePress: true

[action_1]
@copyFromSection: template_1
isActive: false
isGuiBlinking: true
id: 切换光束炮
text: 切换 - 光束炮
description: 激光爆发\n-短时间内造成大量伤害\n-较低射程
convertTo: 肯努基斯[光束炮]
iconImage: a光束炮.png
pos: 1

[action_2]
@copyFromSection: template_1
id: 切换光束射线
text: 切换 - 光束射线
description: 激光射束\n-持续刮痧\n-中射程\n-不消耗能量
convertTo: 肯努基斯[光束射线]
iconImage: a光束射线.png
pos: 2

[action_3]
@copyFromSection: template_1
id: 切换魔导束
text: 切换 - 魔导束
description: 长蓄能激光\n-远射程\n-不能攻击近距离目标\n-dps低\n-对护盾造成100%伤害
convertTo: 肯努基斯[魔导束]
iconImage: a魔导束.png
pos: 3

[action_switch1]
isVisible: if not self.globalTeamTags(includes="肯努α自动切换")
addGlobalTeamTags: 肯努α自动切换
displayType: action
text: 自动切换
pos: 4
description: -开启时会自动根据能量或与攻击目标的距离切换激光 \n -全局设置
buildSpeed: 0s
iconImage: SHARED:icon_off.png
allowMultipleInQueue: false
highPriorityQueue: true
ai_isDisabled: true

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.globalTeamTags(includes="肯努α自动切换")
removeGlobalTeamTags: 肯努α自动切换
iconImage: SHARED:icon_on.png
isGuiBlinking: true

[hiddenAction_自动切换-1]
autoTrigger: if attacking!=null and distanceBetween(self, attacking)<=210 and (not self.isEnergyRecharging or self.energy>self.maxEnergy-1) and self.globalTeamTags(includes="肯努α自动切换") and ${action_1.isActive} and self.queueSize(withActionTag='切换武器')<1
alsoQueueAction: 1

[hiddenAction_自动切换-2]
autoTrigger: if attacking!=null and distanceBetween(self, attacking)<=260 and ((attacking!=null and distanceBetween(self, attacking)>210 or self.hasActiveWaypoint(type='attack') and distanceBetween(self, activeWaypointTarget)>210) or self.isEnergyRecharging) and self.globalTeamTags(includes="肯努α自动切换") and ${action_2.isActive} and self.queueSize(withActionTag='切换武器')<1
alsoQueueAction: 2

[hiddenAction_自动切换-3]
autoTrigger: if (attacking!=null and distanceBetween(self, attacking)<400 or self.hasActiveWaypoint(type='attack') and distanceBetween(self, activeWaypointTarget)<400) and (attacking!=null and distanceBetween(self, attacking)>260 or self.hasActiveWaypoint(type='attack') and distanceBetween(self, activeWaypointTarget)>260) and (not self.isEnergyRecharging or self.energy>self.maxEnergy-1) and self.globalTeamTags(includes="肯努α自动切换") and ${action_3.isActive} and self.queueSize(withActionTag='切换武器')<1
alsoQueueAction: 3

[hiddenAction_自动取消-1]
autoTrigger: if (attacking!=null and distanceBetween(self, attacking)>210 or self.isEnergyRecharging) and self.globalTeamTags(includes="肯努α自动切换") and self.queueSize(withActionTag='切换光束炮')>0
refundAllQueuedItems: true

[hiddenAction_自动取消-2]
autoTrigger: if ((attacking!=null and distanceBetween(self, attacking)<=210) or (attacking!=null and distanceBetween(self, attacking)>260 or self.hasActiveWaypoint(type='attack') and distanceBetween(self, activeWaypointTarget)>260)) and (not self.isEnergyRecharging or self.energy>self.maxEnergy-1) and self.globalTeamTags(includes="肯努α自动切换") and self.queueSize(withActionTag='切换光束射线')>0
refundAllQueuedItems: true

[hiddenAction_自动取消-3]
autoTrigger: if attacking!=null and distanceBetween(self, attacking)<=260 and ((attacking!=null and distanceBetween(self, attacking)>210 or self.hasActiveWaypoint(type='attack') and distanceBetween(self, activeWaypointTarget)>210) or self.isEnergyRecharging) and self.globalTeamTags(includes="肯努α自动切换") and self.queueSize(withActionTag='切换魔导束')>0
refundAllQueuedItems: true


[hiddenAction_能量倾泻-满溢能量]
autoTrigger: if self.hasFlag(id=2)
addResources: energy=12

[hiddenAction_能量倾泻-攻击结束]
autoTrigger: if self.customTimer(laterThanSeconds=3) and self.hasFlag(id=2)
setUnitMemory: 属性[27]=memory.属性[27] - 0.25, 属性[2]=memory.属性[2] - 3
alsoTriggerAction: 属性变化
addResources: unsetFlag=2, unsetFlag=4
temporarilyAddTags: 碎甲
spawnEffects: CUSTOM:sparks*6, CUSTOM:sparks2*3, CUSTOM:hitLightFlash, CUSTOM:shockwave2

[hiddenAction_能量倾泻-防御结束]
autoTrigger: if self.customTimer(laterThanSeconds=3) and self.hasFlag(id=3)
setUnitMemory: 属性[27]=memory.属性[27] - 4.25, 属性[28]=memory.属性[28] - 4
alsoTriggerAction: 属性变化
addResources: unsetFlag=3
temporarilyAddTags: 碎甲
spawnEffects: CUSTOM:sparks*6, CUSTOM:sparks2*3, CUSTOM:hitLightFlash, CUSTOM:shockwave2

[hiddenAction_energy-1]
addResources: energy=-1

[graphics]
image: 肯努基斯阿尔法.png
image_wreak: 肯努基斯_死亡.png
image_turret: 风油精阿尔法.png
image_shield: red_shield.png
#scaleImagesTo: 40
#scaleTurretImagesTo: 24
total_frames: 3
animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 3
teamColorsOnTurret: true
dustEffect: true
image_shadow: AUTO
shadowOffsetX: 2
shadowOffsetY: 2

[attack]
canAttack: true
canAttackLandUnits: true
canAttackFlyingUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 210
turretTurnSpeed: 2.5
turretMultiTargeting: true
aimOffsetSpread: 0
shootDelay: 65

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_1.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_1]
x: 0
y: 0
energyUsage: 0.45
shouldResetTurret: true
projectile: 3
recoilOffset: -3
recoilReturnTime: 50
recoilOutTime: 5
barrelX: 0
barrelY: 20
shoot_sound: plasma_fire
shoot_sound_vol: 0.1
shoot_flame: large,CUSTOM:sparks*3
shoot_light: #A10000
warmup: 50
warmupCallDownRate: 0.5
warmupNoReset: true
warmupShootDelayTransfer: 61

[turret_2]
x: 0
y: 0
invisible: true
attachedTo: 1
slave: true
delay: 3s
shouldResetTurret: true
projectile: laser
recoilOffset: -3
recoilReturnTime: 50
recoilOutTime: 5
barrelX: 0
barrelY: 20
onShoot_triggerActions: energy-1
canAttackCondition: if self.energy(lessThan=1) or self.hasFlag(id=2) and self.energy(lessThan=10)
shoot_sound: plasma_fire
shoot_sound_vol: 0.5
shoot_flame: large,CUSTOM:sparks*5
shoot_light: #120000
[projectile_laser]
tags= T-projectile
areaDamage: 250
areaRadius: 55
directDamage: 250
life: 10
largeHitEffect: true
instant: true
laserEffect: true
instantReuseLast: true
color: #121212
shieldDamageMultiplier: 0.5
explodeEffect: CUSTOM:黑色光圈, CUSTOM:lightSlowFade
[projectile_3]
tags= T-projectile
areaDamage: 35
areaRadius: 35
areaDamageNoFalloff: true
life: 15
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage: SHARED:beam3.png
beamImageEnd: SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2
#explodeEffect: NONE
#explodeEffectOnShield: NONE
shieldDamageMultiplier: 0.5
sweepOffsetFromTargetRadius: 0.4
sweepSpeed: 10
color: #B00000
largeHitEffect: true
trailEffect: CUSTOM:projectileTrail2
trailEffectRate: 0.5
lightColor: #FFEDED
lightSize: 0.4
explodeEffect: CUSTOM:lightningShock,CUSTOM:shockwave,CUSTOM:sparks*3
explodeEffectOnShield: CUSTOM:shockwave,CUSTOM:hitLightFlash,CUSTOM:sparks*3
[effect_projectileTrail2]
createWhenZoomedOut: false
priority: low
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #A10000
fadeInTime: 0
scaleFrom: 0.6
scaleTo: 0.2
alpha: 0.2
drawUnderUnits: true
atmospheric: true
[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #90003C
dirSpeed: 5

[effect_hitLightFlash]
priority: high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #A10000

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits: false

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #1A0000
scaleFrom: 1.6
scaleTo: 0.8
alpha: 1.0
drawUnderUnits:false

[effect_红光消散]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #FF0000
fadeInTime: 5
scaleFrom: 0.5
scaleTo: 0.3
alpha: 1.0
drawUnderUnits:false

[effect_lightningShock]
life: 60

xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom: 180

fadeInTime: 0
fadeOut: false

attachedToUnit: false

color: #A10000
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2

alpha: 0.6

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #A10000


[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1

ySpeedRelative: 2

image: SHARED:spark.png
priority: verylow
color: #A10000

[effect_黑色光圈]
image: 白色光圈.png
life: 40
scaleFrom: 0.1
scaleTo: 0.5
dirSpeed: 1
color: #000000
[effect_白色光圈]
image: 白色光圈.png
life: 40
scaleFrom: 0.1
scaleTo: 0.5
dirSpeed: 1

[effect_白光]
@copyFromSection: effect_lightSlowFade
color: #FFE5E5


[effect_shockwave2]
stripIndex: shockwave
life: 20
scaleFrom: 0
scaleTo: 1.2
color: #90003C
dirSpeed: 5

[movement]
movementType: LAND
moveSpeed: 0.6
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.06

reverseSpeedPercentage: 1

maxTurnSpeed: 1.6
turnAcceleration: 0.15

moveSlidingMode : false
moveIgnoringBody: false