
[core]
name: 幻象
class: CustomUnitMetadata
price: 13500, 苍蓝能量=1
maxHp: 480
maxShield: 3200
shieldRegen: 1
mass: 3000
buildSpeed: 75s
displayDescription:  -拥有大额护盾但本体很脆弱 \n -护盾恢复速度极快 \n -超快射速 \n “以音速射下它们”

tags: units, 幻象, 转向攻击

techLevel: 2

availableInDemo: true
experimental: true

radius: 14
displayRadius: 22

shieldRenderRadius: 23

isBio: false

#energyMax: 120
#energyRegen: 1
#energyNeedsToRechargeToFull: false

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

[action_苍蓝升级]
displayType: upgrade
id: ${section.text}
text: 幻象-二重影
description: -警觉… \n -护盾不足75%或血量受损时受击释放两个“幻象”并短暂幻化 \n -“幻象”拥有和本体一样的护盾,但伤害极低 \n -在10秒后消失 \n CD:12s
buildSpeed: 27.8s
pos: 1
price: 苍蓝能量=1
allowMultipleInQueue: false
canPlayerCancel: false
whenBuilding_triggerAction: 苍蓝特效
spawnEffects: custom:星
addResources=setFlag=3
iconImage: 星尘特效.png
isActive: if not self.hasFlag(id=3)
isGuiBlinking: if self.hasFlag(id=3)

[hiddenAction_苍蓝特效]
spawnEffects: 苍, 苍2

[effect_苍]
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
image: hit.png
life: 1768
scaleFrom: 3
scaleTo: 3
alpha: 10
dirSpeed: 3
color: #294C8A
priority: high
alsoPlaySound: laser_deflect
[effect_苍2]
@copyFromSection:effect_苍
dirSpeed: -3
color: #337EE8
scaleFrom: 2
scaleTo: 2
[effect_星]
image: light.png
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: false
life: 100
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.9
#color: #294C8A

[hiddenAction_AIIllusion]
autoTriggerOnEvent: tookDamage
requireConditional: if self.hasFlag(id=3) and ( not self.hp(full=true) or self.shield<self.maxShield*0.75) and self.customTimer>12
text: AI-幻象
description: 危险之影
displayType: infoOnly
pos: 1
buildSpeed: 0s
isActive: false

isAlsoViewableByEnemies: true
convertTo: 幻象[幻]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
spawnUnits: 幻象[分身](offsetX=40), 幻象[分身](offsetX=-40)

resetCustomTimer: true
addActionCooldownTime: 12s
addActionCooldownApplyToActions: 苍蓝升级

[hiddenAction_created]
autoTriggerOnEvent: completeAndActive
spawnEffects: CUSTOM:blinkChargeOut_displacement*1, CUSTOM:星*1

[effect_blinkChargeOut_displacement]
#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 100
fadeOut: true
fadeInTime: 5

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.1
scaleTo: 2.5
alpha: 0.3
drawUnderUnits:false

alwayStartDirAtZero: true

[effect_energyDepletion_displacement]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 30
fadeOut: true
fadeInTime: 10

attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.5
scaleTo: 0.1
alpha: 0.2
drawUnderUnits:false

alwayStartDirAtZero: true

[graphics]

total_frames: 1
image:        幻象.png
image_wreak: 幻象残骸.png
image_turret: NONE
image_shield: 幻象屏障.png
#scaleImagesTo: 20
#scaleTurretImagesTo: 9


#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1


splastEffect: true

movementEffect: CUSTOM:projectileTrail
movementEffectRate: 8

lock_body_rotation_with_main_turret: true


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 1
#turretTurnSpeed: 5

maxAttackRange: 175
shootDelay: 27

#isFixedFiring: true
#aimOffsetSpread: 0

[turret_13]
invisible: true
canShoot: false
x: 0
y: 0
idleDir:0

turnSpeed: 5.1
#turnSpeedAcceleration: 0.5

[turret_1]
invisible: true
x: 18
y: 9
idleDir:0

projectile: 1

shoot_sound:plasma_fire
shoot_sound_vol:0.05
#limitingAngle:12
attachedTo: 13
slave: true

[turret_2]
invisible: true
x: 20
y: 5
idleDir:0
copyFrom: 1
warmup:3

[turret_3]
invisible: true
x: 22
y: 1
idleDir:0
copyFrom: 1
warmup:6

[turret_4]
invisible: true
x: 24
y: -3
idleDir:0
copyFrom: 1
warmup:9

[turret_5]
invisible: true
x: 26
y: -7
idleDir:0
copyFrom: 1
warmup:12

[turret_6]
invisible: true
x: 28
y: -11
idleDir:0
copyFrom: 1
warmup:15

[turret_7]
invisible: true
x: -18
y: 9
idleDir:0

projectile: 1

shoot_sound:plasma_fire
shoot_sound_vol:0.05
#limitingAngle:12
attachedTo: 13
slave: true

[turret_8]
invisible: true
x: -20
y: 5
idleDir:0
copyFrom: 7
warmup:3

[turret_9]
invisible: true
x: -22
y: 1
idleDir:0
copyFrom: 7
warmup:6

[turret_10]
invisible: true
x: -24
y: -3
idleDir:0
copyFrom: 7
warmup:9

[turret_11]
invisible: true
x: -26
y: -7
idleDir:0
copyFrom: 7
warmup:12

[turret_12]
invisible: true
x: -28
y: -11
idleDir:0
copyFrom: 7
warmup:15



[projectile_1]
tags= T-projectile
directDamage: 12

life: 60
speed: 30
frame: 11

deflectionPower: 0.5

lightColor: #FFccCCEE
lightSize: 1

effectOnCreate: CUSTOM:lightSlowFade
spawnProjectilesOnExplode:2(offsetRandomXY=100)

[projectile_2]
tags= T-projectile
directDamage: 1

life: 150
speed: 5
targetSpeed: 30
frame: 11

retargetingInFlight: true
#重新瞄准

deflectionPower: 0.5

lightColor: #FFccCCEE
lightSize: 1

effectOnCreate: CUSTOM:lightSlowFade

[effect_projectileTrail]

createWhenZoomedOut: false
priority:low

image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.7
scaleTo: 1.2
alpha: 0.4
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_lightSlowFade]
priority:low
image: hit.png
life: 11
fadeOut: true
fadeInTime: 1
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.4
scaleTo: 0.3
alpha: 1.0
drawUnderUnits:false

[movement]
movementType: AIR
moveSpeed: 1.7
moveAccelerationSpeed: 0.03
moveDecelerationSpeed: 0.06


#targetHeight: 12
#targetHeightDrift: 2

maxTurnSpeed: 5.0
turnAcceleration: 0.3

moveSlidingMode :true
#moveIgnoringBody:false
moveSlidingDir:  181
moveIgnoringBody: true


landOnGround: false
slowDeathFall: true





