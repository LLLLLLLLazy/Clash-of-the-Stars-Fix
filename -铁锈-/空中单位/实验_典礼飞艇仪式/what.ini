
[core]
name: what
displayText: 典礼飞艇仪式
displayDescription: "权限不足以访问"

class: CustomUnitMetadata
price: 65000
maxHp: 10000
mass: 90000
tags: units

armour: 1

fogOfWarSightRange: 18

techLevel: 1
experimental: true

buildSpeed: 0.00007
#availableInDemo: true

radius: 28
displayRadius: 30

isBio: false
#softCollisionOnAll: 3

selfRegenRate:0.2

transportSlotsNeeded: 6
#transportUnitsKillOnDeath: if self.isOverLiquid()
#transportUnitsHealBy: 1

energyMax: 4
energyRegen: 0.004
energyNeedsToRechargeToFull: true

builtFrom_1_name: experimentalLandFactory
builtFrom_1_pos:  5.1

[hiddenAction_AttackSpeedLock]
autoTrigger: if memory.属性[2]!=0
setUnitMemory: 属性[2]=0
alsoTriggerAction: 属性变化


[action_ErrorPreheat]
isActive: false
text: ErrorPreheat
description: -Attack goes from slow to fast to slow
pos: 1
displayType: infoOnly
buildSpeed: 0s
addResources: hp=1
#用英文…是故意的

[action_blinkQueued]
text: Blink
fireTurretXAtGround: skill
fireTurretXAtGround_withProjectile: null
fireTurretXAtGround_showGuideDecals: skillRange, line
alsoTriggerAction: blinkImplement
pos: 2
addActionCooldownTime: 3s

buildSpeed: 0s

[hiddenAction_blinkImplement]
fireTurretXAtGround: blink
fireTurretXAtGround_withProjectile: blink
fireTurretXAtGround_withTarget: getOffsetRelative(y=min(distanceBetween(self, thisActionTarget), ${attack.maxAttackRange}), dirOffset=directionBetween(self, thisActionTarget)-self.dir)

[decal_skillRange]
alwaysStartHeightAtZero: true
basePosition: self
layer: inactive
image: 范围圈600.png
imageScale: ${200/300}
@define timer_3s: ((self.timeAlive() % 3) / 3)
alpha: 0.4+cos( ${timer_3s} * 360) * 0.1

[decal_line]
alwaysStartHeightAtZero: true
layer: inactive
image: SHARED:blank.png
@define timer_2s: ((self.timeAlive() % 2) / 2)
alpha: 0.9+cos( ${timer_2s} * 360) * 0.3
drawLineTo: self

[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[projectile_null]
tags= T-projectile
areaDamage: 0
areaRadius: 0
invisible: true
life: 0
speed: 0
deflectionPower: -1
explodeEffect: NONE


[turret_blink]
x: 0
y: 0
canShoot:false
invisible: true
size: 1
turnSpeed: 40

[projectile_blink]
tags= T-projectile
teleportSource: true
instant: true
directDamage: 0
life: 99999
speed: 1
targetGround: true
deflectionPower:-1
shouldRevealFog:true

explodeEffect: CUSTOM:displacement
effectOnCreate: CUSTOM:residue

[effect_residue]
image: 典礼飞艇.png
life: 50
fadeOut: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 1.0
alpha: 1.0
drawUnderUnits: false

[effect_displacement]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 30
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.5
scaleTo: 2.0
alpha: 0.3
yOffsetAbsolute: -20
drawUnderUnits:false

alwayStartDirAtZero: true

[graphics]
total_frames: 1

#image:        解决.png
image:        典礼飞艇.png
image_wreak:  典礼飞艇残骸.png
#image_turret:  错误.png
image_turret:  典礼飞艇炮台.png
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#imageScale: 1.5

teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

#movementEffect: CUSTOM:engineTrail
#movementEffectRate: 6

#showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 4

maxAttackRange: 200
shootDelay: 100

turretMultiTargeting: true

aimOffsetSpread: 0

[turret_1]
x: -18
y: 6
delay: 0
projectile: 1

[turret_2]
copyFrom: 1
x: 18
y: 6

[turret_3]
x: -18
y: 6

shoot_light:#AEFF00

warmup: 300

warmupCallDownRate: 1

warmupNoReset: true
warmupShootDelayTransfer: 200

projectile: 2

[turret_4]
copyFrom: 3
x: 18
y: 6

[turret_5]
x: 0
y: 0
invisible: true
delay: 3
projectile: 3

energyUsage: 1

[projectile_1]
tags= T-projectile

#=== for the beam effect ===
life: 15

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
#beamImageOffsetRate: 1.5
beamImageOffsetRate: 6

explodeEffect: NONE
explodeEffectOnShield: NONE

#sweepOffsetFromTargetRadius:0.4
#sweepOffset: x
#sweepSpeed:10

#=== others ===

directDamage: 1

#color: #aa6284b8
#color: #dd99bcf2
color: #42f2f5

teamColorRatio_sourceRatio:0.8

teamColorRatio:0.5

#laserEffect: true

[projectile_2]
@define life:150
life: 0
speed: 6
largeHitEffect: true
frame: 6

moveWithParent: true

areaDamage: 90
areaRadius: 35

lightColor: #AEFF00
lightSize: 0.4

deflectionPower: -1

spawnProjectilesOnCreate: 2B(recursionLimit=1)
[projectile_2B]
@copyFromSection: projectile_2
areaDamage: 0
life: ${life}
spawnProjectilesOnExplode: 2D
[projectile_2D]
@copyFromSection: projectile_2
life: ${life}
speed: 999
targetGround: true
targetGround_includeTargetHeight: true
explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_3]
tags= T-projectile
areaDamage: 0
areaRadius: 30

wobbleAmplitude: 2.5
wobbleFrequency: 2s

targetGround: true
targetGroundSpread: 70
targetGround_includeTargetHeight: true

life: 240
speed: 3

deflectionPower: -1

trailEffect: true
largeHitEffect: true

image: helicopter_dead.png
spawnUnit: 直升机

[movement]
movementType: AIR
moveSpeed: 1.1
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 1.3
turnAcceleration: 0.05

reverseSpeedPercentage: 0.8

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45

slowDeathFall: true