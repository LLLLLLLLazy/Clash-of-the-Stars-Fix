[core]
copyFrom: 阵营槽位_common.ini

name: 阵营选择
altNames: campSelection
displayDescription: -起始阵营
maxHp: 10000
mass: 100
price: 50
radius: 140
isBio: true
isBuilder: true
isBuilding: true
isPickableStartingUnit: true
overrideAndReplace: commandCenter
canNotBeDamaged: true

tags: ${basicTag}
@define basicTag: units, 阵营选择, 不会受伤

@global NumberOfFactions: 4

footprint: -4,-4,4,4
constructionFootprint: -2,-2,2,2
disableAllUnitCollisions: true

energyMax: 15
energyRegen: 0.01666
energyStartingPercentage: 0

hideScorchMark: true
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 阵营选择


maxTransportingUnits: 99999
transportUnitsRequireMovementType: NONE, BUILDING, LAND, AIR, HOVER, OVER_CLIFF, OVER_CLIFF_WATER
transportUnitsBlockOtherTransports: false
transportUnitsCanUnloadUnits: false
transportUnitsAddUnloadOption: false
@memory 阵营DLC: unit[]


@memory 基础阵营总数:float

@memory 密令:string
@memory 开发者密令:string


autoTriggerCooldownTime: 1
autoTriggerCooldownTime_allowDangerousHighCPU: true


[hiddenAction_起始生成]
autoTriggerOnEvent: completeAndActive
addGlobalTeamTags: 加载完成
addResources: 起始基地=1
setUnitMemory: 基础阵营总数=8
alsoTriggerAction: 玩家阵营

[hiddenAction_玩家阵营]
requireConditional: if not self.isControlledByAI
temporarilyAddTags: 玩家阵营


[canBuild_1]
#避免开局判定失败
name: 礼花
pos: 100
isVisible: false




[hiddenAction_存入DLC数组]
autoTriggerOnEvent: transportingNewUnit
setUnitMemory: 阵营DLC[memory.阵营DLC.size]=eventSource



[hiddenAction_准备就绪]
autoTrigger: if self.isEnergyFull and not self.tags(includes='准备就绪')
temporarilyAddTags: 准备就绪
alsoTriggerAction: 游戏开始提示, 1E, 2E, 3E, 4E, 5E, 1E-新之铁锈, 密8E
alsoQueueAction: 游戏开始



[hiddenAction_游戏开始]
buildSpeed: 5s
spawnEffects: CUSTOM:选择确定
temporarilyAddTags: 开始

[hiddenAction_游戏开始提示]
showMessageToPlayer: 准备阶段结束,游戏正式开始


[template_选择]
isActive: if not self.tags(includes='准备就绪') or not self.hasFlag(id=31)
displayType: upgrade
pos: 1.0${camp}
buildSpeed: 0s
addResources: unsetFlag=1-10, setFlag=${camp}, setFlag=31
setResourcesWithLogic: 阵营=${camp}
isGuiBlinking: if self.hasFlag(id=${camp})
isLocked: if self.hasFlag(id=${camp})
isLockedMessage: 已选择此阵营
allowMultipleInQueue: false
highPriorityQueue: true
extraLagHidingInUI: true
isAlsoViewableByAllies: true
setUnitMemory: 开发者密令=memory.开发者密令+${camp}+1

takeResources_searchOnly: true
takeResources_includeUnitsWithinRange: 10
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: 阵营DLC
takeResources_triggerActionForEach: DLC选择更新

[hiddenAction_DLC选择更新]
sendMessageTo: thisActionTarget
sendMessageWithTags: 选择更新

[hiddenAction_接收选择更新]
autoTriggerOnEvent: newMessage(withTag='选择更新')
addResources: unsetFlag=1-10, setFlag=31
setResourcesWithLogic: 阵营=eventData('阵营数', type='float')


[action_1]
@copyFromSection: template_选择
@define camp: 1
isVisible: if memory.密令!="20201214"
text: 铁锈
description: -经济设施优越,资金充足 \n -单位种类繁多,策略灵活多变 \n "我们掌握核心资源"
iconImage: 铁锈图标.png

[action_1-新之铁锈]
@copyFromSection: action_1
isVisible: if memory.密令=="20201214"
text: 新之铁锈
description: -恒远星空的新兴之幻 \n "新星之耀的光辉照亮大地" \n [A]_正在来临Δ
iconImage: 新之铁锈图标.png

[action_2]
@copyFromSection: template_选择
@define camp: 2
isLockedAlt: if self.tags(includes='禁用虫族')
isLockedAltMessage: 此阵营已被投票禁用
text: 虫族
description: -迅速组织干扰与扩张 \n -以战养战,以敌人的残骸锻造登神之路 \n "腐蚀蔓延世界"
iconImage: 虫族图标.png

[action_3]
@copyFromSection: template_选择
@define camp: 3
text: 帝国
description: -无比强大的机械部队 \n -舍弃部分经济与防御,以全力碾压敌人 \n "帝皇之锋所向披靡"
iconImage: 帝国图标.png

[action_4]
@copyFromSection: template_选择
@define camp: 4
text: 苍蓝
description: -模块化移动基地,无限可能性的绝对核心 \n -在权杖的照耀下瓦解敌军 \n "奇迹是存在的"
iconImage: 苍蓝图标.png

[action_5]
@copyFromSection: template_选择
@define camp: 5
isVisible: if not self.isControlledByAI
text: 唐小天
description: -仅玩家可选测试阵营 \n -出场特效与贴图暂时沿用铁锈 \n -初始单位“宿舍”可生产“本科生牛马” \n "仅用于测试"
iconImage: 铁锈图标.png


[action_随机阵营]
autoTrigger: if self.timeAlive(laterThanSeconds=60)
isActive: if self.queueSize(withActionTag='随机阵营', lessThan=1) and (not self.tags(includes='准备就绪') or not self.hasFlag(id=31))
text: 随机阵营
displayType: action
pos: 1.1
buildSpeed: 0.06s
tags=随机阵营
iconImage: 问号.png
isAlsoViewableByAllies: true
setResourcesWithLogic: 随机阵营=int(rnd(1, ${NumberOfFactions}.99 + self.transportingCount))
alsoTriggerAction: R返, 1R, 2R, 3R, 4R, DLCR
autoTriggerOnEventRecursionLimit: 10

[hiddenAction_1R]
requireConditional: if self.resource.随机阵营 == 1
alsoTriggerAction: 1

[hiddenAction_2R]
requireConditional: if self.resource.随机阵营 == 2 and not self.tags(includes='禁用虫族')
alsoTriggerAction: 2

[hiddenAction_3R]
requireConditional: if self.resource.随机阵营 == 3
alsoTriggerAction: 3

[hiddenAction_4R]
requireConditional: if self.resource.随机阵营 == 4
alsoTriggerAction: 4

[hiddenAction_R返]
requireConditional: if self.resource.随机阵营 == self.resource.阵营
alsoQueueAction: 随机阵营
autoTriggerOnEventRecursionLimit: 10

[hiddenAction_2R返]
requireConditional: if self.resource.随机阵营 == 2 and self.tags(includes='禁用虫族')
alsoQueueAction: 随机阵营
autoTriggerOnEventRecursionLimit: 10

[hiddenAction_DLCR]
requireConditional: if self.resource.随机阵营 > ${NumberOfFactions}
sendMessageTo: self.readUnitMemory('阵营DLC', type='unit', index=self.resource.随机阵营 - ${NumberOfFactions})
sendMessageWithTags: 选定阵营



[action_2.1]
isVisible: if self.hasFlag(id=2)
text: 选择分支·衍黎
description: -选择虫族分支[衍黎] \n ${DescriptionYanLi}
displayType: queueUnit
buildSpeed: 0s
pos: 2
iconExtraImage: 虫矿.png
highPriorityQueue: true
alwaysSinglePress: true
isAlsoViewableByAllies: true
isLocked: if self.globalTeamTags(includes='选择衍黎') or memory.密令=="404286032"
isLockedMessage: 已选择虫族衍黎分支
isGuiBlinking: if self.globalTeamTags(includes='选择衍黎') or memory.密令=="404286032"
addGlobalTeamTags: 选择衍黎
removeGlobalTeamTags: 选择狂猎

[action_2.2]
@copyFromSection: action_2.1
text: 选择分支·狂猎
description: -选择虫族分支[狂猎] \n ${DescriptionKuangLie}
iconExtraImage: 虫矿[狂猎].png
isLocked: if self.globalTeamTags(includes='选择狂猎') or memory.密令=="404286032"
isLockedMessage: 已选择虫族狂猎分支
isGuiBlinking: if self.globalTeamTags(includes='选择狂猎') or memory.密令=="404286032"
addGlobalTeamTags: 选择狂猎
removeGlobalTeamTags: 选择衍黎



[hiddenAction_1E]
requireConditional: if self.hasFlag(id=1) and memory.密令!="20201214"
spawnEffects: 铁锈1, 铁锈2, 铁锈3, 铁锈4

[hiddenAction_1E-新之铁锈]
requireConditional: if self.hasFlag(id=1) and memory.密令=="20201214"
spawnEffects: 新之铁锈1, 新之铁锈2, 新之铁锈3, 新之铁锈4

[hiddenAction_2E]
requireConditional: if self.hasFlag(id=2)
spawnEffects: 虫族1, 虫族2, 虫族3, 虫族4

[hiddenAction_3E]
requireConditional: if self.hasFlag(id=3)
spawnEffects: 帝国1, 帝国2, 帝国3, 帝国4

[hiddenAction_4E]
requireConditional: if self.hasFlag(id=4)
spawnEffects: 苍蓝1, 苍蓝2, 苍蓝3, 苍蓝4

[hiddenAction_5E]
requireConditional: if self.hasFlag(id=5)
spawnEffects: 选择确定

[hiddenAction_密8E]
requireConditional: if not self.hasFlag(id=31) and memory.密令=="12581"
spawnEffects: 传奇炮塔师1, 传奇炮塔师2, 传奇炮塔师3, 传奇炮塔师4



[template_阵营出场]
@define BasicConditions: (self.tags(includes='开始') and self.numberOfAttachedUnits(withTag='阵营DLC已选择')<1)
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setResourcesWithLogic: 阵营=0, unsetFlag=1-31
attachments_deleteNumUnits: 10

[hiddenAction_1A]
@copyFromSection: template_阵营出场
autoTrigger: if self.hasFlag(id=1) and ${BasicConditions} and memory.密令!="20201214"
convertTo: 铁锈出场
showMessageToPlayer: ——“我们掌握核心资源”

[hiddenAction_2A]
@copyFromSection: template_阵营出场
autoTrigger: if self.hasFlag(id=2) and ${BasicConditions} and memory.密令!="404286032"
convertTo: 虫族出场
showMessageToPlayer: ——“腐蚀蔓延世界”

[hiddenAction_3A]
@copyFromSection: template_阵营出场
autoTrigger: if self.hasFlag(id=3) and ${BasicConditions}
convertTo: 帝国出场
showMessageToPlayer: ——“帝皇之锋所向披靡”

[hiddenAction_4A]
@copyFromSection: template_阵营出场
autoTrigger: if self.hasFlag(id=4) and ${BasicConditions}
convertTo: 探针召唤
showMessageToPlayer: ——“奇迹是存在的”

[hiddenAction_5A]
@copyFromSection: template_阵营出场
autoTrigger: if self.hasFlag(id=5) and ${BasicConditions}
convertTo: 唐小天出场
showMessageToPlayer: ——“测试开始”


[hiddenAction_DLCA]
@copyFromSection: template_阵营出场
autoTriggerOnEvent: newMessage(withTag='DLC出场')
convertTo: 空无出场
setResourcesWithLogic: 起始基地=0



#[action_禁虫投票]
#isActive: if not self.isEnergyFull
#isVisible: if numberOfUnitsInNeutralTeam(withTag="矿点定位", greaterThan=20) and not self.isControlledByAI
#isGuiBlinking: if self.tags(includes='禁虫投票')
#text: 禁用虫族(票数:%{numberOfUnitsInAllTeams(withTag="禁虫投票者")}/%{int(numberOfUnitsInAllTeams(withTag="玩家阵营")/2+0.5)})
#description: -当地图中资源池大于20且未开始游戏时可以由玩家投票 \n -票数达到玩家一半时禁止所有选择"虫族"与"双邪恶"
#displayType: action
#buildSpeed: 0s
#pos: 11
#tags: 禁虫投票
#isLocked: if self.tags(includes='禁虫投票')
#isLockedMessage: 已投票

#allowMultipleInQueue: false
#isAlsoViewableByAllies: true
#temporarilyAddTags: 禁虫投票

#[hiddenAction_禁用虫族]
#autoTrigger: if numberOfUnitsInAllTeams(withTag="禁虫投票") >= int(numberOfUnitsInAllTeams(withTag="玩家阵营")/2+0.5) and self.timeAlive(laterThanSeconds=0.1) and not self.tags(includes='禁用虫族') and not self.tags(includes='准备就绪')
#showMessageToPlayer: 经过玩家投票禁用了虫族选择
#temporarilyAddTags: 禁用虫族
#alsoTriggerAction: 重置选项

[hiddenAction_重置选项]
requireConditional: if self.hasFlag(id=2)
addResources: unsetFlag=2, unsetFlag=31



[action_密令]
isVisible: if not game.nukesEnabled and not self.tags(includes='密令') and length(memory.密令)==0
isGuiBlinking: if self.tags(includes='密令')
text: [ 密令 ]
displayType: infoOnly
buildSpeed: 0s
pos: 10

temporarilyAddTags: 密令

allowMultipleInQueue: false
highPriorityQueue: true
alwaysSinglePress: true

extraLagHidingInUI: true
isAlsoViewableByAllies: true

[action_密令列表关闭]
@copyFromSection: action_密令
isVisible: if not game.nukesEnabled and self.tags(includes='密令') and length(memory.密令)==0
temporarilyAddTags: NONE
temporarilyRemoveTags: 密令

[action_密令显]
@copyFromSection: action_密令
isVisible: if not game.nukesEnabled and not self.tags(includes='密令') and length(memory.密令)>0
text: [%{memory.密令}]

[action_密令列表关闭显]
@copyFromSection: action_密令列表关闭
isVisible: if not game.nukesEnabled and self.tags(includes='密令') and length(memory.密令)>0
text: [%{memory.密令}]

[action_令Clear]
isVisible: if self.tags(includes='密令')
text: C
description: { %{memory.密令} }
displayType: infoOnly
buildSpeed: 0s
pos: 10.01
iconImage: ROOT:/素材/button_no.png
highPriorityQueue: true
alwaysSinglePress: true
setUnitMemory: 密令=""

[action_令0]
@define number: 0
isVisible: if self.tags(includes='密令')
text: ${number}
description: { %{memory.密令} }
displayType: infoOnly
buildSpeed: 0s
pos: 10.02
isLocked: if length(memory.密令)>=100
isLockedMessage: 输入达到上限
highPriorityQueue: true
alwaysSinglePress: true
setUnitMemory: 密令=memory.密令+${number}

[action_令1]
@copyFromSection: action_令0
@define number: 1
pos: 10.1

[action_令2]
@copyFromSection: action_令0
@define number: 2
pos: 10.2

[action_令3]
@copyFromSection: action_令0
@define number: 3
pos: 10.3

[action_令4]
@copyFromSection: action_令0
@define number: 4
pos: 10.4

[action_令5]
@copyFromSection: action_令0
@define number: 5
pos: 10.5

[action_令6]
@copyFromSection: action_令0
@define number: 6
pos: 10.6

[action_令7]
@copyFromSection: action_令0
@define number: 7
pos: 10.7

[action_令8]
@copyFromSection: action_令0
@define number: 8
pos: 10.8

[action_令9]
@copyFromSection: action_令0
@define number: 9
pos: 10.9


[hiddenAction_密令铁锈选择]
autoTrigger: if memory.密令=="20201214" and not self.hasFlag(id=31)
addResources: setFlag=1, setFlag=31
setResourcesWithLogic: 阵营=1


[hiddenAction_密令双邪虫族出场]
@copyFromSection: template_阵营出场
autoTrigger: if memory.密令=="404286032" and not self.tags(includes='禁用虫族') and ${BasicConditions}
convertTo: 双邪虫族出场
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
showMessageToPlayer: ——“腐蚀从此蔓延”

[hiddenAction_密令新之铁锈出场]
@copyFromSection: template_阵营出场
autoTrigger: if memory.密令=="20201214" and ${BasicConditions} and self.hasFlag(id=1)
convertTo: 铁锈出场
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
showMessageToPlayer: ——“新星之耀的光辉照亮大地”

[hiddenAction_密令召唤恶臭保护者]
@copyFromSection: template_阵营出场
autoTrigger: if memory.密令=="114514" and ${BasicConditions}
convertTo: 攻城甲虫
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
showMessageToPlayer: ——“代行魔王的意志”

[hiddenAction_密令召唤传奇炮塔师]
@copyFromSection: template_阵营出场
autoTrigger: if memory.密令=="12581" and ${BasicConditions}
convertTo: 传奇炮塔师
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
showMessageToPlayer: ——“档案保存完好”


#[hiddenAction_密5]
#addResources: unsetFlag=1-10, setFlag=31
#setResourcesWithLogic: 阵营=5
#setUnitMemory: 密令="180"

[hiddenAction_密5]
addResources: unsetFlag=1-10, setFlag=31
setResourcesWithLogic: 阵营=5
setUnitMemory: 密令="404286032"

[hiddenAction_密6]
addResources: unsetFlag=1-10, setFlag=1, setFlag=31
setResourcesWithLogic: 阵营=6
setUnitMemory: 密令="20201214"

[hiddenAction_密7]
addResources: unsetFlag=1-10, setFlag=31
setResourcesWithLogic: 阵营=7
setUnitMemory: 密令="114514"

[hiddenAction_密8]
addResources: unsetFlag=1-10, setFlag=31
setResourcesWithLogic: 阵营=8
setUnitMemory: 密令="12581"

[hiddenAction_密5R]
requireConditional: if self.resource.随机阵营 == 5
alsoTriggerAction: 密5

[hiddenAction_密6R]
requireConditional: if self.resource.随机阵营 == 6
alsoTriggerAction: 密6

[hiddenAction_密7R]
requireConditional: if self.resource.随机阵营 == 7
alsoTriggerAction: 密7

[hiddenAction_密8R]
requireConditional: if self.resource.随机阵营 == 8
alsoTriggerAction: 密8



[hiddenAction_开发者密令]
autoTrigger: if memory.开发者密令=="114131112111"
spawnUnits: 开发者模式(offsetY=-20)
showMessageToPlayer: 已激活开发者模式
setUnitMemory: 开发者密令=memory.开发者密令+0


[template_阵营贴花]
layer: afterBody

[decal_1]
@copyFromSection: template_阵营贴花
imageScale: 0.9
image: 铁锈.png
isVisible: if self.hasFlag(id=1) and memory.密令!="20201214"

[decal_1-新之铁锈]
@copyFromSection: template_阵营贴花
imageScale: 0.9
image: 新之铁锈.png
isVisible: if self.hasFlag(id=1) and memory.密令=="20201214"

[decal_2]
@copyFromSection: template_阵营贴花
image: 虫族.png
isVisible: if self.hasFlag(id=2)

[decal_3]
@copyFromSection: template_阵营贴花
imageScale: 0.47
image: 帝国.png
isVisible: if self.hasFlag(id=3)

[decal_4]
@copyFromSection: template_阵营贴花
image: 苍蓝.png
isVisible: if self.hasFlag(id=4)

[decal_5]
@copyFromSection: template_阵营贴花
imageScale: 0.8
image: 铁锈.png
isVisible: if self.hasFlag(id=5)

[decal_密8]
@copyFromSection: template_阵营贴花
imageScale: 0.8
image: 传奇炮塔师.png
isVisible: if memory.密令=="12581" and not self.hasFlag(id=31)


[decal_picker]
imageScale: 0.77
image: picker.png
teamColors: true

[decal_准备条框]
isVisible: if not self.isEnergyFull
image: 白色条框.png
color: #0000CC

layer: beforeUI
alwaysStartDirAtZero: true
yOffsetAbsolute: ${core.radius + 15}
xOffsetAbsolute: 0.5

imageScaleX: ${core.radius - 0.5}
lineWidth: ${core.radius}

onlyWhileAlive: true

[decal_准备条-左边框]
@copyFromSection: decal_准备条框
image: 白色条左边框.png

xOffsetAbsolute: -${core.radius - 0.5}
imageScaleX: 1

[decal_准备条-右边框]
@copyFromSection: decal_准备条-左边框
image: 白色条右边框.png

xOffsetAbsolute: ${core.radius + 0.5}

[decal_准备条]
@copyFromSection: decal_准备条框
image: 白色条.png
color: #0000CC

xOffsetAbsolute: -${core.radius}
imageScaleX: ${core.radius} * 0.1333 * self.energy



[resource_随机阵营]
hidden: true

[resource_阵营]
hidden: true

[resource_起始基地]
displayName: 起始基地



[template_阵营特效]
priority: veryhigh
life: 64
fadeOut: true
attachedToUnit: false
scaleFrom: 1.2
scaleTo: 1
alpha: 0.8
drawUnderUnits: false
alwayStartDirAtZero: true
createWhenOffscreen: true

[template_阵营特效放]
@copyFromSection: template_阵营特效
life: 24
scaleFrom: 1.5
scaleTo: 2
alpha: 0.4

[template_阵营特效持续]
createWhenOffscreen: true
priority: critical
image: SHARED:blank.png
life: 300
scaleFrom: 0
scaleTo: 0
trailEffect: 阵营特效微放
trailEffectRate: 10

[template_阵营特效微放]
@copyFromSection: template_阵营特效放
scaleFrom: 1
scaleTo: 1.2
alpha: 0.2


[effect_选择确定]
@copyFromSection: template_阵营特效放
image: picker.png
scaleFrom: 0.77
scaleTo: 0.76
teamColorRatio: 1

[effect_铁锈1]
@copyFromSection: template_阵营特效
image: 铁锈.png
scaleFrom: ${0.9*1.2}
scaleTo: 0.9

[effect_铁锈2]
@copyFromSection: template_阵营特效放
image: 铁锈.png
scaleFrom: ${0.9*1.5}
scaleTo: ${0.9*2}

[effect_铁锈3]
@copyFromSection: template_阵营特效持续
trailEffect: 铁锈4

[effect_铁锈4]
@copyFromSection: template_阵营特效微放
image: 铁锈.png
scaleFrom: 0.9
scaleTo: ${0.9*1.2}


[effect_虫族1]
@copyFromSection: template_阵营特效
image: 虫族.png

[effect_虫族2]
@copyFromSection: template_阵营特效放
image: 虫族.png

[effect_虫族3]
@copyFromSection: template_阵营特效持续
trailEffect: 虫族4

[effect_虫族4]
@copyFromSection: template_阵营特效微放
image: 虫族.png


[effect_帝国1]
@copyFromSection: template_阵营特效
image: 帝国.png
scaleFrom: ${0.47*1.2}
scaleTo: 0.47

[effect_帝国2]
@copyFromSection: template_阵营特效放
image: 帝国.png
scaleFrom: ${0.47*1.5}
scaleTo: ${0.47*2}

[effect_帝国3]
@copyFromSection: template_阵营特效持续
trailEffect: 帝国4

[effect_帝国4]
@copyFromSection: template_阵营特效微放
image: 帝国.png
scaleFrom: 0.47
scaleTo: ${0.47*1.2}


[effect_苍蓝1]
@copyFromSection: template_阵营特效
image: 苍蓝.png

[effect_苍蓝2]
@copyFromSection: template_阵营特效放
image: 苍蓝.png

[effect_苍蓝3]
@copyFromSection: template_阵营特效持续
trailEffect: 苍蓝4

[effect_苍蓝4]
@copyFromSection: template_阵营特效微放
image: 苍蓝.png


[effect_新之铁锈1]
@copyFromSection: template_阵营特效
image: 新之铁锈.png
scaleFrom: ${0.9*1.2}
scaleTo: 0.9

[effect_新之铁锈2]
@copyFromSection: template_阵营特效放
image: 新之铁锈.png
scaleFrom: ${0.9*1.5}
scaleTo: ${0.9*2}

[effect_新之铁锈3]
@copyFromSection: template_阵营特效持续
trailEffect: 新之铁锈4

[effect_新之铁锈4]
@copyFromSection: template_阵营特效微放
image: 新之铁锈.png
scaleFrom: 0.9
scaleTo: ${0.9*1.2}


[effect_传奇炮塔师1]
@copyFromSection: template_阵营特效
image: 传奇炮塔师.png
scaleFrom: ${0.8*1.2}
scaleTo: 0.8

[effect_传奇炮塔师2]
@copyFromSection: template_阵营特效放
image: 传奇炮塔师.png
scaleFrom: ${0.8*1.5}
scaleTo: ${0.8*2}

[effect_传奇炮塔师3]
@copyFromSection: template_阵营特效持续
trailEffect: 传奇炮塔师4

[effect_传奇炮塔师4]
@copyFromSection: template_阵营特效微放
image: 传奇炮塔师.png
scaleFrom: 0.8
scaleTo: ${0.8*1.2}



[turret_1]
x: 0
y: 0
canShoot: false
invisible: true

[projectile_雾爆]
tags= T-projectile
areaDamage: 120
areaRadius: 65
largeHitEffect: true
trailEffect: true
life: 150
speed: 4
frame: 9
drawSize: 1.2
instant: true
lightColor: #ffff925c
lightSize: 0.6
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
lightCastOnGround: true
spawnProjectilesOnExplode: 3-2*10, 爆炸效果
spawnProjectilesOnCreate: 荒冲
explodeEffect: CUSTOM:projectileTrail小*5

[projectile_荒冲]
tags= T-projectile
areaDamage: 0
areaRadius: 330
areaExpandTime: 50
life: 50
instant: true
areaHitAirAndLandAtSameTime: true
drawUnderUnits: true
pushForce: 500
pushVelocity: 10
explodeEffect: CUSTOM:荒冲击波

[projectile_3-2]
tags= T-projectile
areaDamage: 40
areaRadius: 40
largeHitEffect: true
trailEffect: true
life: 150
speed: 5
frame: 9
drawSize: 0.6
instant: false
lightColor: #ffff925c
lightSize: 0.5
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
targetGround: true
targetGroundSpread: 80
lightCastOnGround: true
spawnProjectilesOnExplode: 3-3*5, 爆炸效果
explodeEffect: CUSTOM:projectileTrail小*2

[projectile_3-3]
tags= T-projectile
areaDamage: 25
areaRadius: 25
largeHitEffect: true
trailEffect: true
life: 150
speed: 5
frame: 9
drawSize: 0.4
instant: false
lightColor: #ffff925c
lightSize: 0.4
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
targetGround: true
targetGroundSpread: 80
lightCastOnGround: true
spawnProjectilesOnExplode: 爆炸效果
explodeEffect: CUSTOM:projectileTrail小*1

[projectile_爆炸效果]
tags= T-projectile
directDamage: 0
largeHitEffect: true
life: 0
explodeOnEndOfLife: true
explodeEffectOnShield: NONE

[effect_projectileTrail小]
#烟雾
stripIndex: effects
frameIndex: 0

life: 120
fadeOut: true
attachedToUnit: false
color: #F08927
fadeInTime: 0
scaleFrom: 3
scaleTo: 5
alpha: 0.6
drawUnderUnits: false
atmospheric: true

dirOffsetRandom: 180

shadow: true

xOffsetRelativeRandom: 10
yOffsetRelativeRandom: 10
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[effect_荒冲击波]
stripIndex: shockwave_large
color: #ffff925c
life: 50
scaleFrom: 0
scaleTo: 7.2
alpha: 1
alsoPlaySound: large_gun_fire2



[graphics]
image: SHARED:blank.png

showEnergyBar: false
showTransportBar: false

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackUnderwaterUnits: false
canAttackLandUnits: false

maxAttackRange: 0
shootDelay: 50

[movement]
movementType: LAND
moveSpeed: 0
maxTurnSpeed: 5

[ai]
useAsBuilder: true



[hiddenAction_AIChoose]
autoTrigger: if self.isControlledByAI and (not self.tags(includes='开始') and not self.hasFlag(id=11) or self.timeAlive(laterThanSeconds=1) and not self.hasFlag(id=31))
spawnUnits: 漂浮灵控制, AI系统
addResources: setFlag=11
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: AI随机
fireTurretXAtGround_withOffset: 0,0

[projectile_AI随机]
tags= T-projectile
life: 0
areaDamage: 0
explodeEffect: NONE
#spawnProjectilesOnCreate: AI铁(spawnChance=0.33, maxSpawnLimit=1), AI虫(spawnChance=0.33, maxSpawnLimit=1), AI帝(spawnChance=0.33, maxSpawnLimit=1), AI苍(maxSpawnLimit=1)
#暂未进行其他AI更新呐喵
spawnProjectilesOnCreate: AI铁(spawnChance=0.5, maxSpawnLimit=1), AI虫(maxSpawnLimit=1)

[projectile_AI铁]
tags= T-projectile
life: 60
instant: true
targetGround: true
areaDamage: 0
areaRadius: 1
explodeEffect: NONE
explodeEffectOnShield: NONE
friendlyFire: only-ignoreEnemy
mutatorX_ifUnitWithTags: 阵营选择
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: 时点=1

[projectile_AI虫]
@copyFromSection: projectile_AI铁
mutatorX_addResourcesAreaHit: 时点=2

[projectile_AI帝]
@copyFromSection: projectile_AI铁
mutatorX_addResourcesAreaHit: 时点=3

[projectile_AI苍]
@copyFromSection: projectile_AI铁
mutatorX_addResourcesAreaHit: 时点=4

[hiddenAction_AI1]
autoTrigger: if self.isControlledByAI and self.resource(type='时点', equalTo=1) and not self.tags(includes='准备就绪')
alsoQueueAction: 1
resourceAmount: 时点
resourceAmount_setValue: 0

[hiddenAction_AI2]
autoTrigger: if self.isControlledByAI and self.resource(type='时点', equalTo=2) and not self.tags(includes='准备就绪') and not self.tags(includes='禁用虫族')
alsoQueueAction: 2
@copyFromSection: hiddenAction_AI1

[hiddenAction_AI3]
autoTrigger: if self.isControlledByAI and self.resource(type='时点', equalTo=3) and (self.queueSize(empty=true) or not self.tags(includes='准备就绪') and self.queueSize(lessThan=2))
alsoQueueAction: 3
@copyFromSection: hiddenAction_AI1

[hiddenAction_AI4]
autoTrigger: if self.isControlledByAI and self.resource(type='时点', equalTo=4) and (self.queueSize(empty=true) or not self.tags(includes='准备就绪') and self.queueSize(lessThan=2))
alsoQueueAction: 4
@copyFromSection: hiddenAction_AI1

[global_resource_时点]
displayName: 时点{I}
displayColor: #ffffff
priority: 0.5
