[core]
name:山
displayDescription:
class: CustomUnitMetadata
price:0
maxHp:25000
armour:40
mass:3000
techLevel:2
radius: 60
displayRadius: 60
isBuilding:true
numBitsOnDeath:16
isBio:false
showInEditor:false
isUnselectable:true
isUnselectableAsTarget:false
tags: 可承伤魔法, Building,FB,Wall,Defence
effectOnDeath:CUSTOM:dust*5
explodeOnDeath:false
isUnrepairableUnit:true
showOnMinimap:false
footprint: -2,0,2,4
constructionFootprint: -2,0,2,4
autoTriggerCooldownTime: 10
autoTriggerCooldownTime_allowDangerousHighCPU:true

[graphics]
drawLayer:ground
total_frames:1
image:山.png
image_back:山底部.png
image_wreak:坑.png
image_turret:SHARED:blank.png
image_shadow:AUTO
imageScale:1.0
image_offsetY:-2
shadowOffsetX:4
shadowOffsetY:4
disableLowHpFire:true
disableLowHpSmoke:true
#showHealthBar:false
showEnergyBar:false
icon_zoomed_out_neverShow: true

[attack]
canAttack:false
canAttackFlyingUnits: false
canAttackLandUnits:false
canAttackUnderwaterUnits:false
turretSize: 0
aimOffsetSpread: -0.01
turretTurnSpeed: 100
shootDelay:0
maxAttackRange:0

[movement]
movementType:NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed:0
turnAcceleration:0
moveSlidingMode :false
moveIgnoringBody:false
targetHeight:0

[effect_dust]
priority: high
life:90
image:dust.png
scaleFrom: 1.0
scaleTo: 2.4
alpha: 0.8
hSpeed: 0.5
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom:40
yOffsetRelativeRandom:40
createWhenOverLand: true
createWhenOverLiquid: false
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect:CUSTOM:dust2
trailEffectRate:2.0

[effect_dust2]
priority: high
life: 90
image:dust.png
scaleFrom: 1.0
scaleTo: 2.4
physics: true
physicsGravity: 0.4
alpha: 0.8
createWhenOverLand: true
createWhenOverLiquid: false
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits:false
spawnChance:0.3

[effect_dust3]
priority: high
life:120
image:dust.png
scaleFrom: 1.0
scaleTo: 2.4
alpha: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom:40
yOffsetRelativeRandom:40
createWhenOverLand: true
createWhenOverLiquid: false
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
spawnChance:0.5

[effect_ripple]
priority:veryhigh
drawType: displacement
image:ripple.png
life:30
drawUnderUnits:true
attachedToUnit:false
scaleFrom: 1.0
scaleTo:1.9
alpha:0.9
dirSpeed:5.0
alsoPlaySound:地裂.ogg

[effect_what]
drawType: displacement
image:what.png
life:60
fadeOut:true
attachedToUnit: true
scaleFrom:100
scaleTo:100
alpha:0.05
drawUnderUnits:false
alwayStartDirAtZero: true
total_frames: 2
animateFrameStart: 0
animateFrameEnd:1
animateFrameSpeed: 0.4
animateFrameLooping:true

[hiddenAction_start]
autoTriggerOnEvent:completeAndActive
spawnEffects:CUSTOM:dust*3,CUSTOM:ripple,CUSTOM:what
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround:1

[turret_1]
x:0
y:0
image:SHARED:blank.png
turnSpeed:1.5
canShoot:false
canAttackFlyingUnits:true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false
projectile:震

[projectile_震]
life:30
tags= bullet
drawSize:0
areaDamage:900
areaRadius:180
buildingDamageMultiplier:2.0
speedSpread:6
image:SHARED:blank.png
autoTargetingOnDeadTarget:false
speed:15
turnSpeed:0
explodeEffect:NONE
deflectionPower:-1
explodeOnEndOfLife: true
areaHitUnderwaterAlways:true
pushVelocity:5.0
pushForce:5.0

[projectile_震2]
life:30
tags= bullet
drawSize:0
areaDamage:120
areaRadius:180
buildingDamageMultiplier:2.0
speedSpread:6
image:SHARED:blank.png
autoTargetingOnDeadTarget:false
speed:15
turnSpeed:0
explodeEffect:NONE
deflectionPower:-1
explodeOnEndOfLife: true
areaHitUnderwaterAlways:true

[effect_spray]
priority: high
life:30
lifeRandom: 25
image:spray.png
scaleFrom: 1.0
scaleTo: 3.8
physics: true
physicsGravity: 0.4
alpha: 0.8
hSpeed: 1.8
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom:40
yOffsetRelativeRandom:40
createWhenOverLand: false
createWhenOverLiquid: true
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect:CUSTOM:spray2
trailEffectRate:2.0

[effect_spray2]
priority: high
life: 30
lifeRandom: 25
image:spray.png
scaleFrom: 1.0
scaleTo: 3.8
physics: true
physicsGravity: 0.4
alpha: 0.8
createWhenOverLand: false
createWhenOverLiquid: true
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits:false

[hiddenAction_I]
autoTrigger:if self.isInWater
spawnEffects:CUSTOM:spray*3
playSoundAtUnit:震水.ogg
deleteSelf:true

[hiddenAction_IV]
autoTrigger:if self.numberOfUnitsInTeam(withTag='强积雨云',greaterThan=0,withinRange=400)
spawnEffects:CUSTOM:dust3*2
fireTurretXAtGround:1
fireTurretXAtGround_withProjectile:震2

[template_提取目标]
takeResources_excludeUnitsWithoutTags: units
takeResources_includeUnitsWithinRange: 180
takeResources_includeUnitsWithinRange_team: enemy
takeResources_maxUnits: 9999

[hiddenAction_状态时间]
@copyFromSection: template_提取目标
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="units", greaterThan=0, withinRange=180) and self.numberOfUnitsInTeam(withTag='强积雨云', greaterThan=0, withinRange=400)
takeResources: 泥石流=-1
takeResources_excludeUnitsWithTheseResources: 泥石流=2
temporarilyAddTags: 泥石流

[resource_泥石流]
hidden: true
