[core]



name:电盘虫
maxHp:1250
mass:10000
price:2600, 腐蚀=${corrode}
radius:18
displayRadius:22
techLevel:2
softCollisionOnAll:10
armour:8
armourMinDamageToKeep:8
selfRegenRate:0.15
maxShield:1350
shieldRegen:0.2
shieldDisplayOnlyDeflection:true

buildSpeed: 18.5s
isBug:true
isBio:true
tags: units, 虫族, 中型虫, 电盘虫, 固定射击
displayDescription:-坚实可靠\n-蓄电撞击\n-适合抵御人海战术

autoTriggerCooldownTime: 15

unitsSpawnedOnDeath: 资源返还(addResources=ammo:650|energy:50)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 电盘虫[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 175
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[hiddenAction_电盘]
autoTrigger: true
spawnEffects: CUSTOM:电盘

[graphics]
image:大电耶.png
scaleImagesTo:50
splastEffect:true
image_turret:无h.png
image_shadow: AUTO_ANIMATED
shadowOffsetX:1
shadowOffsetY:1
lock_body_rotation_with_main_turret:true
total_frames:4
animation_moving_start:0
animation_moving_end:3
animation_moving_speed:4

[attack]
canAttack:true
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false
maxAttackRange:40
shootDelay:60

isMelee:true
meleeEngangementDistance: 150

isFixedFiring:true
aimOffsetSpread:0
[turret_1]
recoilOffset:8
recoilOutTime:5
recoilReturnTime:0.6s
x:0
y:0
invisible:false
projectile:1
canAttackMaxAngle: 10
shoot_sound:NONE
shoot_sound_vol:0
shoot_flame:CUSTOM:lightningwave
shoot_light:#FFEECCCC
onShoot_triggerActions: AIattack确认
[turret_2]
x: 0
y: 0
barrelX: 15
barrelY: 22
attachedTo: 1
slave: true
projectile: 2
turnSpeed: 0
turnSpeedAcceleration: 0
canAttackMaxAngle: 45

linkDelayWithTurret: 1
shoot_sound:lighting_burst
shoot_sound_vol:0.3
shoot_flame:CUSTOM:sparks2*3
shoot_light:#FFcceeee
warmup:5
chargeEffectImage: SHARED:lighting_charge.png

canShoot: true
invisible: true

[turret_3]
copyFrom: 2
x: 0
y: 0
barrelX: -15
barrelY: 22

[turret_4]
copyFrom: 2
x: 0
y: 0
barrelX: 20
barrelY: 17
warmup:10

[turret_5]
copyFrom: 2
x: 0
y: 0
barrelX: -20
barrelY: 17
warmup:10

[turret_6]
copyFrom: 2
x: 0
y: 0
barrelX: 0
barrelY: 25
warmup: 0
shoot_sound:NONE

[projectile_1]
tags= T-projectile
areaDamage:60
areaRadius:55
areaRadiusFromEdge: true
largeHitEffect:true
life:60
speed:3
frame:1
drawSize:1
instant:true
shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0.1
buildingDamageMultiplier: 0.5
spawnUnit:连环闪电(offsetDir=90), 连环闪电(offsetDir=-90), 连环闪电(offsetDir=180)

[projectile_2]
tags= T-projectile
directDamage: 10
life: 25
instant: true
lightingEffect: true
largeHitEffect: true

shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0.1

buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*5
explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash
spawnUnit: 连环闪电盘

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.2
drawUnderUnits:false


[effect_lightningShock]
life: 30

hOffset: 0
dirOffset: 0
fadeInTime: 0
fadeOut: false
attachedToUnit: true

alpha: 0.5
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow

[effect_lightningwave]
image: shockwave2.png
life: 30
scaleFrom: 0
scaleTo: 2
alpha: 1.0
yOffsetRelative: 25
color: #63e6e8

[effect_电盘]
life: 15
attachedToUnit: true
image: 缠电.png
scaleFrom: 1
scaleTo: 1
alpha: 0.9
total_frames: 4
yOffsetRelative: -5
animateFrameStart: 0
animateFrameEnd: 3
animateFrameSpeed: 0.25
animateFrameLooping: true
fadeOut: false

[movement]
movementType: LAND
moveSpeed: 1

moveAccelerationSpeed: 0.1
moveDecelerationSpeed: 0.03

maxTurnSpeed: 2.5
turnAcceleration: 0.7

targetHeight: 0
targetHeightDrift: 0

reverseSpeedPercentage: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45

[ai]
upgradedFrom: 盘虫

[hiddenAction_AIGather]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 5s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.globalTeamTags(includes='中刻{I}')

[hiddenAction_AImoveattack]
clearAllWaypoints: true
addWaypoint_type: follow
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: true
addWaypoint_triggerActionIfFailed: AIattackBlocked
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.isAttacking() and self.globalTeamTags(includes='中刻{I}') and not self.hasActiveWaypoint(type='follow')

[hiddenAction_AI攻击计时重置]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.globalTeamTags(includes='开端{I}') and not self.hasActiveWaypoint(type='follow') and self.hasActiveWaypoint(type='attackMove') and self.isAttacking and self.customTimer(laterThanSeconds=10)
resetCustomTimer: true

[hiddenAction_AIinvalidattack]
@copyFromSection: hiddenAction_AImoveattack
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.globalTeamTags(includes='中刻{I}') and not self.hasActiveWaypoint(type='follow') and self.hasActiveWaypoint(type='attackMove') and self.isAttacking and self.customTimer(laterThanSeconds=8)
resetCustomTimer: true
temporarilyAddTags: 无效攻击

[hiddenAction_AIInvalidrecovery]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.globalTeamTags(includes='中刻{I}') and self.hasActiveWaypoint(type='follow') and self.customTimer(laterThanSeconds=6)
temporarilyRemoveTags: 无效攻击

[hiddenAction_AIattack]
autoTrigger: if self.globalTeamTags(includes='AI系统') and numberOfUnitsInEnemyTeam(withinRange=300, greaterThan=0) and (self.hasActiveWaypoint(type='follow') or self.hasActiveWaypoint(type='attack')) and self.customTimer(laterThanSeconds=3) and not self.tags(includes='无效攻击')
clearAllWaypoints: true
addWaypoint_type: attackMove
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: true
resetCustomTimer:true

[hiddenAction_AI指定攻击]
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_mapMustBeReachable: true
addWaypoint_target_nearestUnit_tagged: 中心防御对地, T3机枪, 电机枪塔, 地震塔T2, 赤星塔
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_maxRange: 200
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.globalTeamTags(includes='中刻{I}')

[hiddenAction_AIattack侦测]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.customTimer(laterThanSeconds=0.5, withinSeconds=1.5) and not self.isAttacking() and not self.tags(includes='无效攻击')
alsoTriggerAction: AImoveattack

[hiddenAction_AIattackBlocked]
requireConditional: if not self.hasResources(AI阻挡=30)
addResources: AI阻挡=1

[hiddenAction_AIBlockInformation]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.tags(includes='电盘虫') and self.hasResources(AI阻挡=30)
temporarilyRemoveTags: 电盘虫

[resource_AI阻挡]
displayName: AI阻挡

[hiddenAction_AIattack确认]
resetCustomTimer: true