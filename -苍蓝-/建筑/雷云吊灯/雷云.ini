
[core]
name: 雷暴预警
displayDescription: -持续对空闪电伤害
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 999999

tags: magic

techLevel: 1
buildSpeed: 2.7s

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
showOnMinimap: false
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable: true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 0.1s

[hiddenAction_completeAndActive]
autoTriggerOnEvent: completeAndActive
spawnEffects: CUSTOM:雷云

alsoTriggerAction: 寻敌形态

[hiddenAction_寻敌形态]
autoTrigger: if self.hasFlag(id=2) and (not self.hasActiveWaypoint(type='attack') or not activeWaypointTarget.flying)
addResources: setFlag=1, unsetFlag=2
setUnitMemory: 属性[20]=memory.属性[20]+(200-${attack.maxAttackRange})
alsoTriggerAction: 属性变化

[hiddenAction_攻击形态]
addResources: unsetFlag=1, setFlag=2
setUnitMemory: 属性[20]=memory.属性[20]-(200-${attack.maxAttackRange})
alsoTriggerAction: 属性变化
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_fromReference: thisActionTarget

[hiddenAction_kill]
autoTrigger: if self.timeAlive(laterThanSeconds=2.5)
deleteSelf: true

[effect_雷云]
priority:veryhigh
image: 雷云.png
imageShadow:SHADOW:雷云.png
life: 150
fadeOut: false
fadeInTime: 30
attachedToUnit: true
scaleFrom: 1.0
scaleTo: 1.0
alpha: 1.0
hOffset: 150
drawUnderUnits:false
alwayStartDirAtZero:true
alsoEmitEffectsOnDeath:CUSTOM:雷云散*3

[effect_雷云散]
image: 雷云.png
#imageShadow:SHADOW:雷云.png
life: 30
fadeOut: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 0.7
alpha: 0.7
drawUnderUnits:false
alwayStartDirAtZero:true

xSpeedAbsoluteRandom:2
ySpeedAbsoluteRandom:2

[effect_雷云雾]
priority: verylow
image: 云.png
life: 120
lifeRandom: 30
color: #7E9B99
fadeInTime: 25
scaleFrom: 0.3
scaleTo: 0.4
alpha: 0.25
attachedToUnit: false
hOffset: 150
dirOffsetRandom: 180
xOffsetRelativeRandom: 25
yOffsetRelativeRandom: 25
xSpeedAbsoluteRandom: 0.4
ySpeedAbsoluteRandom: 0.4
atmospheric: true

[graphics]
total_frames: 1
image:        null.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: 雷云雾
movementEffectRate: 5

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretTurnSpeed: 999

maxAttackRange: 10
shootDelay: 30

[turret_1]
x: 0
y: 0
height: 150

shoot_sound:雷击.ogg
shoot_sound_vol:0.2
projectile: 1

canAttackCondition: if not self.hasFlag(id=1)

[turret_3]
x: 0
y: 0
canAttackCondition: if self.hasFlag(id=1)
onShoot_triggerActions: 攻击形态
projectile: null

[projectile_null]
directDamage: 0
life: 0
speed: 0
invisible: true

[projectile_1]
directDamage: 100

life: 20
instant: true
lightingEffect: true
largeHitEffect: true

shieldDefectionMultiplier: 0.1

buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*5
explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 22
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightningShock]
life: 60


hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

attachedToUnit: true


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_sparks]
attachedToUnit: false
life: 100
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 3
image: SHARED:spark.png
priority: verylow

[movement]
movementType: AIR
moveSpeed: 6.0
moveAccelerationSpeed: 1.0
moveDecelerationSpeed: 1.0

targetHeight: 0

maxTurnSpeed: 1.0
turnAcceleration: 1.0

moveSlidingMode :true
moveIgnoringBody:true



[ai]
disableUse:true

