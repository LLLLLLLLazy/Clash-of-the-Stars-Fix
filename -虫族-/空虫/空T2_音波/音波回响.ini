
[core]
name:音波回响
price:1000, 腐蚀=${corrode}
maxHp:310
mass:3000

radius:14
isBug:true
isBio:true

softCollisionOnAll: 12

tags: units, 虫族, 中型虫, 转向攻击

techLevel:2
buildSpeed:11.1s

selfRegenRate:0.1

energyMax: 15
energyRegen: 0.05
energyNeedsToRechargeToFull: true
energyRegenWhenRecharging: 0.15

displayDescription:-攻击地面单位\n-输出强力\n阴 波

unitsSpawnedOnDeath: 资源返还(addResources=ammo:250|energy:125)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 音波回响[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 500
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2


[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点

[graphics]
image:回响.png
image_turret:NONE

#scaleImagesTo:40

image_shadow: AUTO_ANIMATED
shadowOffsetX:1
shadowOffsetY:1

total_frames:4

animation_idle_start:0
animation_idle_end:3
animation_idle_speed:3

animation_moving_start:0
animation_moving_end:3
animation_moving_speed:3

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false

maxAttackRange: 140

shootDelay: 0.1

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 4.0

canShoot: false

#recoilOffset: -2
#recoilOutTime: 5
#recoilReturnTime: 8

[turret_2]
#
x: 0
y: 14
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_flame: shockwave

energyUsage: 1.04

canShoot: true

aimOffsetSpread: 1.4

[projectile_1]
tags= T-projectile
#areaDamage:80
#areaRadius:8
#areaDamageNoFalloff:true
directDamage: 10
life: 60

speed: 5

frame: 6

#targetGround:true
#targetGroundSpread:20

spawnUnit: 回响波(spawnChance=0.15, offsetHeight=5)
explodeEffect: CUSTOM:shockwave
trailEffect: CUSTOM:绿光
trailEffectRate: 2

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
color: #B700FFFF
dirSpeed: 5

[effect_绿光]
color: #00FFAA
createWhenZoomedOut: false
priority:low
image: 白光.png
life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[movement]
movementType: AIR
moveSpeed: 2.1
moveAccelerationSpeed: 0.2
moveDecelerationSpeed: 0.1

maxTurnSpeed: 3
turnAcceleration: 0.5

targetHeight: 20
targetHeightDrift: 1


[ai]
upgradedFrom: 音波

[hiddenAction_AIattack]
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 资源提取器
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: false
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.isAttacking() and numberOfUnitsInEnemyTeam(greaterThan=0, withTag='资源提取器') and not self.hasActiveWaypoint(type='attack') and self.globalTeamTags(includes='开端{I}') and not self.globalTeamTags(includes='中刻{I}')

[hiddenAction_AI集群进攻2]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')