
[core]
name: 次元之门
class: CustomUnitMetadata
price: 10000
maxHp: 2000
mass: 18000
displayDescription: -能使单位在两个次元门中瞬间传送 \n -吸收地脉资源 \n -苍蓝能量+0.0015
maxShield: 1000
shieldRegen: 0.25
shieldDisplayOnlyDeflection: true

tags: units, 次元之门, 资源提取器

generation_resources: credits=34, 苍蓝能量=0.0015

armour: 5
armourMinDamageToKeep: 5

placeOnlyOnResPool: true

disableAllUnitCollisions: true

techLevel: 1
buildSpeed: 100s

radius: 16
shieldRenderRadius: 20

softCollisionOnAll: 3

isBio: false
isBuilding: true


exit_x: 0
exit_y: -1
exit_moveAwayAmount: 120

transportSlotsNeeded: 10000
maxTransportingUnits: 9999
transportUnitsRequireMovementType: LAND, AIR, HOVER, OVER_CLIFF, OVER_CLIFF_WATER
transportUnitsKillOnDeath: false
transportUnitsBlockOtherTransports: false


autoTriggerCooldownTime: 1
autoTriggerCooldownTime_allowDangerousHighCPU:true

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径
addWaypoint_type: IGNORE
addWaypoint_target_fromReference: IGNORE

[decal_运输范围]
@copyFromSection: template_运输范围

[hiddenAction_环]
autoTriggerOnEvent: created
autoTrigger: if self.customTimer(laterThanSeconds=60)
spawnEffects: custom:curewave, custom:curewave2
resetCustomTimer: true
[effect_curewave]
liveAfterAttachedDies: false
fadeOut: false
attachedToUnit: true
drawUnderUnits: true
image: 罩.png
life: 3600
scaleFrom: 1.2
scaleTo: 1.2
alpha: 0.16
dirSpeed: 1
color: #48EFFF
priority: high
alsoPlaySound: laser_deflect
yOffsetAbsolute: 2
[effect_curewave2]
@copyFromSection:effect_curewave
dirSpeed: -1
color: #2BCEFF
scaleFrom: 0.95
scaleTo: 0.95

[hiddenAction_quake]
autoTrigger: true
spawnEffects:CUSTOM:quake*1

[effect_quake]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 50
fadeOut: true
fadeInTime: 2
scaleFrom: 0.6
scaleTo: 0
alpha: 0.3
drawUnderUnits: false

dirOffsetRandom: 180
dirSpeedRandom: 0.3
dirSpeed: -0.5

[action_编号显示]
isActive: false
text: 编号: %{self.resource.编号}
description: 与相同编号的次元之门连接
displayType: infoOnlyStockpile
buildSpeed: 0s
pos: 0

autoTriggerOnEvent: created
addResources: 编号=1
temporarilyAddTags: 次元门1

[action_编号-]
isActive: if self.resource.编号>1
text: <
displayType: action
buildSpeed: 0s
pos: 0.1

addResources: 编号=-1
alsoTriggerAction: 编号标签1, 编号标签2, 编号标签3, 编号标签4, 编号标签5, 编号标签6, 编号标签7, 编号标签8, 编号标签9, 编号标签10

alwaysSinglePress: true
allowMultipleInQueue: false

[action_编号+]
@copyFromSection: action_编号-
isActive: if self.resource.编号<10
text: >
pos: 0.2

addResources: 编号=1

[hiddenAction_次元传输1]
@define number: 1
autoTrigger: if self.transportingCount > 0 and self.tags(includes="次元门${number}")
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 1
fireTurretXAtGround_withTarget: globalSearchForFirstUnit(withTag="次元门${number}", relation='own').getAsMarker
alsoTriggerAction: 传输效果
[hiddenAction_传输效果]
requireConditional: if self.resource.计时传输效<=0
spawnEffects: CUSTOM:穿梭光*2, CUSTOM:光波, CUSTOM:扭曲波
addResources: 计时传输效=28

[hiddenAction_次元传输2]
@define number: 2
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输3]
@define number: 3
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输4]
@define number: 4
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输5]
@define number: 5
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输6]
@define number: 6
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输7]
@define number: 7
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输8]
@define number: 8
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输9]
@define number: 9
@copyFromSection: hiddenAction_次元传输1

[hiddenAction_次元传输10]
@define number: 10
@copyFromSection: hiddenAction_次元传输1


[hiddenAction_编号标签1]
@define number: 1
requireConditional: if self.resource.编号==${number}
temporarilyAddTags: 次元门${number}
temporarilyRemoveTags: 次元门1, 次元门2, 次元门3, 次元门4, 次元门5, 次元门6, 次元门7, 次元门8, 次元门9, 次元门10

[hiddenAction_编号标签2]
@define number: 2
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签3]
@define number: 3
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签4]
@define number: 4
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签5]
@define number: 5
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签6]
@define number: 6
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签7]
@define number: 7
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签8]
@define number: 8
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签9]
@define number: 9
@copyFromSection: hiddenAction_编号标签1

[hiddenAction_编号标签10]
@define number: 10
@copyFromSection: hiddenAction_编号标签1

[resource_编号]
displayName: 编号

[resource_计时回波]
displayName: 计时回波

[resource_计时传输效]
displayName: 计时传输效

[hiddenAction_计时回波]
autoTrigger: if self.resource.计时回波>0
addResources: 计时回波=-1

[hiddenAction_计时传输效]
autoTrigger: if self.resource.计时传输效>0
addResources: 计时传输效=-1


[hiddenAction_连接回波]
autoTrigger: if self.resource.计时回波<=0 and (numberOfUnitsInTeam(withTag="次元门1", greaterThan=1) and self.tags(includes="次元门1") or numberOfUnitsInTeam(withTag="次元门2", greaterThan=1) and self.tags(includes="次元门2") or numberOfUnitsInTeam(withTag="次元门3", greaterThan=1) and self.tags(includes="次元门3") or numberOfUnitsInTeam(withTag="次元门4", greaterThan=1) and self.tags(includes="次元门4") or numberOfUnitsInTeam(withTag="次元门5", greaterThan=1) and self.tags(includes="次元门5") or numberOfUnitsInTeam(withTag="次元门6", greaterThan=1) and self.tags(includes="次元门6") or numberOfUnitsInTeam(withTag="次元门7", greaterThan=1) and self.tags(includes="次元门7") or numberOfUnitsInTeam(withTag="次元门8", greaterThan=1) and self.tags(includes="次元门8") or numberOfUnitsInTeam(withTag="次元门9", greaterThan=1) and self.tags(includes="次元门9") or numberOfUnitsInTeam(withTag="次元门10", greaterThan=1) and self.tags(includes="次元门10"))
#spawnEffects: CUSTOM:回波
addResources: 计时回波=100

[graphics]
total_frames: 1

image:        null.png
image_back:   NONE
image_wreak:  NONE

imageScale: 1.1

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1

showTransportBar: false

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[turret_1]
x: 0
y: 0

canShoot: false

[projectile_1]
tags= T-projectile
life: 30
speed: 2
areaDamage: 10
areaRadius: 30
explodeEffect: CUSTOM:穿梭光2*2, CUSTOM:光波2, CUSTOM:扭曲波放

laserEffect: true
color: #5076CCFF

instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

unloadUpToXUnitsFromSource: 100

spawnProjectilesOnCreate: beam

[projectile_beam]
tags= T-projectile
#=== for the beam effect ===
life: 30
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

explodeEffect: NONE
explodeEffectOnShield: NONE

directDamage: 0
color: #50B4D0FF

[effect_穿梭光]
stripIndex: light_50
life: 40
scaleFrom: 5
scaleTo: 0
alpha: 0.8
color: #76CCFF
dirOffsetRandom: 180
dirSpeedRandom: 5

[effect_光波]
@copyFromSection: effect_穿梭光
stripIndex: shockwave_large
life: 30
scaleFrom: 2.5

[effect_穿梭光2]
@copyFromSection: effect_穿梭光
scaleFrom: 0
scaleTo: 5

[effect_光波2]
@copyFromSection: effect_光波
scaleFrom: 0
scaleTo: 2.5

[effect_扭曲波]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 40
fadeOut: true
fadeInTime: 2
scaleFrom: 2
scaleTo: 0
alpha: 0.3
drawUnderUnits: false
yOffsetAbsolute: -3

dirOffsetRandom: 180
dirSpeedRandom: 1

[effect_扭曲波放]
@copyFromSection: effect_扭曲波
scaleFrom: 0
scaleTo: 2


[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1


[arm_1]
x: 0
y: 0
image_end: 虫洞.png
image_end_teamColors: true
drawOverBody: true
spinRate: 0.5

[ai]

buildPriority: 0.03

noneInBaseExtraPriority: 0.04

noneGlobalExtraPriority: 0.1


maxEachBase: 1
maxGlobal: 3



