
[core]
name: 聚能光束炮
displayDescription: -攻击地面与空中 \n -需较长时间充能 \n -倾泻等离子风暴 \n -爆发伤害高
copyFrom: common_slot.ini

energyMax: 10
energyRegen: -0.1

autoTriggerCooldownTime: 0.1s

[hiddenAction_energy]
autoTrigger: if self.hasFlag(id=1)
addResources: energy=10

[hiddenAction_notEnergy]
autoTrigger: if not self.hasFlag(id=1) and not self.isEnergyEmpty()
addResources: energy=-10

[hiddenAction_1]
alsoQueueAction: A
[hiddenAction_A]
whenBuilding_cannotMove: true
addResources: unsetFlag=1
buildSpeed: 2.7s

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 3

maxAttackRange: 1000
shootDelay: 400

turretRotateWithBody: false

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
attachedTo: b1
slave: true

turnSpeed: 3

shoot_sound:幻影致命光.ogg
shoot_sound_vol:1.0
shoot_flame:CUSTOM:大开火*5

invisible: true

projectile: null

#delay: 400
warmup: 100
warmupStartEffect: CUSTOM:聚能*8
chargeEffectImage: 聚能核.png

resourceUsage: setFlag=1
onShoot_triggerActions: 1

[turret_b1]
x: 0
y: 0

turnSpeed: 3

#shoot_sound:plasma_fire
#shoot_sound_vol:0.2
shoot_flame:CUSTOM:小开火,CUSTOM:开火光

image: 聚能光束炮.png

projectile: laser

energyUsage: 1
#canAttackCondition: if self.hasFlag(id=1)

delay: 8

[projectile_laser]
tags= T-projectile
areaDamage: 1000
areaRadius: 80
areaDamageNoFalloff: true

life: 10

largeHitEffect: true

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      beam.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_end.png

beamImageOffsetRate: 5

sweepOffset: 50
sweepSpeed: 15

#color: #42f2f5
color: #00ffff

explodeEffect: CUSTOM:灼光*2, CUSTOM:雾
explodeEffectOnShield: CUSTOM:灼光*2, CUSTOM:雾

[projectile_null]
tags= T-projectile
directDamage:0
invisible: true
life: 0
explodeEffect: NONE

[effect_聚能]
image: 聚能.png
life: 100
fadeOut: true
attachedToUnit: false
fadeInTime: 10
scaleFrom: 1.0
scaleTo: 0.0
alpha: 0.8
dirOffsetRandom:180
drawUnderUnits:false

[effect_大开火]
stripIndex: effects
frameIndex: 0
life: 60
fadeOut: true
attachedToUnit: false
color: #00ffff
fadeInTime:3
scaleFrom: 0.5
scaleTo: 1.5
alpha: 0.8
drawUnderUnits:false
xOffsetRelativeRandom:1
xSpeedRelativeRandom:0.3
ySpeedRelative:1.5
ySpeedRelativeRandom:0.5
dirOffsetRandom: 180
shadow: true
atmospheric: true

[effect_小开火]
priority:low
stripIndex: effects
frameIndex: 0
life: 20
fadeOut: true
attachedToUnit: false
color: #00ffff
fadeInTime:2
hSpeed: 0.1
scaleFrom: 0.4
scaleTo: 1.2
alpha: 0.7
drawUnderUnits:false
xOffsetRelativeRandom:1
xSpeedRelativeRandom:0.4
ySpeedRelative:2.0
ySpeedRelativeRandom:0.5
dirOffsetRandom: 180
shadow: true
atmospheric: true

[effect_开火光]
priority:low
image: 聚能核.png
life: 35
fadeOut: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.9
drawUnderUnits:false

[effect_灼光]
image: SHARED:light_50.png
life: 150
fadeOut: true
attachedToUnit: false
color: #00ffff
hSpeed: 1
hSpeedRandom: 0.5
scaleFrom: 2.0
scaleTo: 0.5
alpha: 1.0
drawUnderUnits:false

[effect_雾]
image: fog.png
life: 150
fadeOut: true
attachedToUnit: false
fadeInTime: 5
hSpeed: 0.1
scaleFrom: 0.1
scaleTo: 0.2
alpha: 1.0
drawUnderUnits:false
dirOffsetRandom: 180