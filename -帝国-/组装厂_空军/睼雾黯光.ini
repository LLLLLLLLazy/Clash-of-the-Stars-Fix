
[core]
name: 睼雾黯光
displayDescription: -睼视暗雾之中
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 0

tags: magic, 睼雾黯光

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 3
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true
showOnMinimap: false

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 0.1s

[hiddenAction_暗光消散]
autoTrigger: if self.timeAlive(laterThanSeconds=1) and not self.hasParent
temporarilyRemoveTags: 睼雾黯光

[hiddenAction_kill]
autoTrigger: if self.timeAlive(laterThanSeconds=1.2) and not self.hasParent
deleteSelf: true

[hiddenAction_附属瞄准]
autoTrigger: if parent.activeWaypointTarget != nullUnit and parent.hasActiveWaypoint(type='attack') and self.activeWaypointTarget != parent.activeWaypointTarget
clearAllWaypoints: true
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_fromReference: parent.activeWaypointTarget

[hiddenAction_重置目标]
autoTrigger: if self.hasFlag(id=1)
addResources: unsetFlag=1

[graphics]
image: SHARED:blank.png
showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   if not self.hasFlag(id=1)
canAttackUnderwaterUnits: false

canOnlyAttackUnitsWithoutTags: 墙

turretTurnSpeed: 1000
maxAttackRange: 550
shootDelay: 1

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
projectile: 1
limitingRange: 12
canAttackCondition: if not self.hasParent

[projectile_1]
areaDamage: 0
areaRadius: 0
life: 5
instant: true
invisible: true
teleportSource: true
targetGround: true
targetGround_includeTargetHeight: true
disableLeadTargeting: true
explodeEffect: NONE
explodeEffectOnShield: NONE

[turret_睼雾]
x: 0
y: 0
delay: 60
projectile: 暗线

canAttackCondition: if self.hasParent and parent.flying and parent.speed>0.1 and attacking.numberOfUnitsInEnemyTeam(withTag="睼雾黯光", lessThan=1, withinRange=20)

[projectile_暗线]
life: 81

instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage: 暗线.png
beamImageEnd: SHARED:spark.png
beamImageOffsetRate: 2
drawUnderUnits: true

explodeEffect: NONE
explodeEffectOnShield: NONE

areaDamage: 0
areaRadius: 0

color: #500F0F0F
spawnUnit: 睼雾黯光

[turret_攻击目标]
x: 0
y: 0
delay: 10
projectile: null
canAttackCondition: if self.hasParent

[projectile_null]
areaDamage: 0
life: 0
speed: 0
invisible: true

[movement]
movementType: AIR
moveSpeed: 0
moveAccelerationSpeed: 0.0
moveDecelerationSpeed: 0.0
