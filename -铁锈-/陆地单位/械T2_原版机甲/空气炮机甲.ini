
[core]
name: 空气炮机甲
displayDescription: -攻击地面与空中 \n -对目标给予推力 \n -开火后需要装填
class: CustomUnitMetadata

copyFrom: mech_large_common.ini

price: 5000
maxHp: 2500
mass: 20000
tags: units, 重型机甲, 转向攻击

armour: 15
armourMinDamageToKeep: 15

techLevel: 2
buildSpeed: 0.0006
#availableInDemo: true

fogOfWarSightRange: 18

radius: 25
#displayRadius: 11
isBio: false
softCollisionOnAll: 0

builtFrom_1_name: mechFactoryT2
builtFrom_1_pos: 8.1

energyMax: 3
energyRegen: 0.012
energyNeedsToRechargeToFull: true

transportSlotsNeeded: 2

autoTriggerCooldownTime: 0.1s

[action_switch1]
isVisible: if not self.hasFlag(id=1)
addResources: setFlag=1, unsetFlag=2
displayType: action
text: 自动攻击模式
pos: 2
description: -关闭时只会在获得攻击指令后开火
buildSpeed: 0s
iconImage: SHARED:icon_on.png
highPriorityQueue: true
ai_isDisabled: true

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.hasFlag(id=1)
addResources: unsetFlag=1
iconImage: SHARED:icon_off.png

[hiddenAction_攻击指令]
autoTrigger: if self.hasFlag(id=1) and not self.hasFlag(id=2) and attacking == activeWaypointTarget and activeWaypointTarget != nullUnit
addResources: setFlag=2

[hiddenAction_停止攻击]
autoTrigger: if self.hasFlag(id=1) and self.hasFlag(id=2) and (attacking != activeWaypointTarget or activeWaypointTarget == nullUnit) and attacking == nullUnit
addResources: unsetFlag=2

[graphics]
total_frames: 1

image:        空气炮机甲.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2


#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6


#lock_shadow_rotation_with_main_turret: true
lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 260
shootDelay: 10

turretRotateWithBody: false

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 3.2
turnSpeedAcceleration: 0.3

canShoot: false
canAttackCondition: if not self.hasFlag(id=1) or self.hasFlag(id=1) and self.hasFlag(id=2)

recoilOffset: -1
recoilOutTime: 2
recoilReturnTime: 3

[turret_2]
#
x: -2
y: 27
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:shockwave
shoot_light:#FFccCCEE

canShoot: true
canAttackCondition: if not self.hasFlag(id=1) or self.hasFlag(id=1) and self.hasFlag(id=2)

size: 0

energyUsage: 1

warmup:15

chargeEffectImage: 空气弹.png


[turret_4]
#显示额外伤害数据
x: 0
y: 0
canAttackCondition:	false
copyFrom: 2

projectile: 2

[projectile_1]
tags= T-projectile
directDamage: 50
life: 100
speed: 20
targetSpeed: 16

trailEffect:CUSTOM:左排气,CUSTOM:右排气
trailEffectRate:1

largeHitEffect: true

image: 空气弹.png

areaDamage: 45
areaRadius: 40

deflectionPower: -1

pushForce: 10
pushVelocity: 2

explodeEffect:CUSTOM:冲气*2, CUSTOM:shockwave
explodeEffectOnShield:CUSTOM:冲气*2, CUSTOM:shockwave

spawnProjectilesOnExplode: 2, 3

[projectile_2]
tags= T-projectile
life: 0
invisible: true
speed: 0

areaDamage: 5
areaRadius: 80
areaExpandTime: 25

deflectionPower: -1
explodeOnEndOfLife: true

pushVelocity: 1

explodeEffect: 空气波
explodeEffectOnShield: 空气波


[projectile_3]
tags= T-projectile
areaDamage: 0
areaRadius: 40
life: 1
speed: 0
invisible: true
explodeOnEndOfLife: true
deflectionPower: -1
pushForce: 1
pushVelocity: 0.1
explodeEffect: NONE
explodeEffectOnShield: NONE
spawnProjectilesOnExplode: 3(recursionLimit=25)


[effect_左排气]
stripIndex: effects
frameIndex: 0
priority:verylow

life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:3
hSpeed: 0.1
scaleFrom: 0.4
scaleTo: 1.2
alpha: 0.4
drawUnderUnits:false

xSpeedRelative:-0.5

atmospheric: true

[effect_右排气]
stripIndex: effects
frameIndex: 0
priority:verylow

life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:3
hSpeed: 0.1
scaleFrom: 0.4
scaleTo: 1.2
alpha: 0.4
drawUnderUnits:false

xSpeedRelative:0.5

atmospheric: true

[effect_冲气]
stripIndex: effects
frameIndex: 0
priority:verylow

life: 60
fadeOut: true
attachedToUnit: false
fadeInTime:3
hSpeed: 0.1
scaleFrom: 0.6
scaleTo: 2.0
alpha: 0.3
drawUnderUnits:false

xSpeedRelativeRandom:0.3
ySpeedRelative:0.8
ySpeedRelativeRandom:0.2

atmospheric: true

[effect_shockwave]
stripIndex: shockwave
life: 20
fadeOut: true
attachedToUnit: false
scaleFrom: 0
scaleTo: 1.7
alpha: 0.7

[effect_空气波]
stripIndex: shockwave_large
life: 25
fadeOut: true
attachedToUnit: false
scaleFrom: 0
scaleTo: 1.6
alpha: 0.3


[movement]

moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


reverseSpeedPercentage:1


