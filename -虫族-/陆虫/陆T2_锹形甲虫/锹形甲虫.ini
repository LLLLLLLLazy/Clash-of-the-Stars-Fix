
[core]
name: 锹形甲虫
displayText: 锹形甲虫
displayDescription: -攻击地面单位 \n -全副武装甲壳 \n -攻击将目标夹向自己 \n -不擅长边移动边攻击 \n -可短暂飞行 \n “锹形甲虫很喜欢吃核桃，所以进化出了夹碎之后往里吸的攻击方式”

price: 8000
maxHp: 3500
mass: 30000

armour: 25
armourMinDamageToKeep: 25

tags: units, 虫族, 中型虫+, 锹形甲虫, 固定射击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 锹形甲虫

techLevel: 2

buildSpeed: 0.00042
selfBuildRate: 0.00042

transportSlotsNeeded: 2

radius: 23
displayRadius: 23

selfRegenRate: 0.13

softCollisionOnAll: 20

isBio: true
isBug: true

energyMax: 5
energyRegen: 0.005

autoTriggerCooldownTime: 0.1s

[action_fly]
isLocked: if not self.energy(full=true)
isLockedMessage: 冷却中…

convertTo: 锹形甲虫[振翅]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
id: ${section.text}
text: 振翅
description: -展开鞘翅 \n -使用翼膜短暂飞行 \n -飞行期间不能攻击 \n -请注意不要降落于液体内
buildSpeed: 0.5s
pos: 0
playSoundAtUnit:Video.ogg
alwaysSinglePress: true
whenBuilding_cannotMove: true
whenBuilding_temporarilyConvertTo:锹形甲虫[转换中]
whenBuilding_triggerAction: 延时属性更新
convertTo_keepCurrentFields: maxHp, maxShield

[hiddenAction_延时属性更新]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}

[action_painting]
isVisible: if self.globalTeamTags(includes='璀璨甲虫涂装')
convertTo: 锹形甲虫[璀璨]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 涂装
tags=璀璨
text: “璀璨”
description: -个性涂装 \n(不影响战斗属性)
displayType: upgrade
buildSpeed: 3.3s
pos: 0.3
canPlayerCancel: false
whenBuilding_triggerAction: 璀璨

[hiddenAction_涂装解锁]
autoTrigger: if ( self.kills(greaterThan=2) or self.playerName=="一般通过" ) and not self.globalTeamTags(includes='璀璨甲虫涂装')
addGlobalTeamTags: 璀璨甲虫涂装

[hiddenAction_璀璨]
spawnEffects: 光辉释放, 光环初现, 圣光, 璀璨阵法显现, 中心圣光星, 光音
playSoundAtUnit: Magic13.ogg

[hiddenAction_光辉凝聚]
autoTrigger: if self.queueSize(withActionTag='璀璨')>0 and self.customTimer>0.2
fireTurretXAtGround: magic
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 光辉凝聚
resetCustomTimer: true


[action_沁水]
isActive:false
isVisible: if self.isOverwater
autoTrigger: if self.isOverwater
isGuiBlinking: if self.isOverwater
addResources: energy=-0.1
pos: 1
text: 沁水
description: -无法振翅
buildSpeed:1s

[action_熔化]
isActive:false
isVisible: if self.isOverLiquid and not self.isOverwater
autoTrigger: if self.isOverLiquid and not self.isOverwater
isGuiBlinking: if self.isOverLiquid and not self.isOverwater
addResources: hp=-10, energy=-0.1
pos: 2
text: 熔化
description: -在岩浆上持续损毁生命值 \n -无法振翅
buildSpeed:1s

[animation_攻击]

onActions: attack

arm1_.0s:{x:0, y:0, dir:0}
arm1_.2s:{x:0, y:-3, dir:-60}
arm1_.3s:{x:0, y:7, dir:-20}
arm1_.4s:{x:0, y:5, dir:20}
arm1_.5s:{x:0, y:0, dir:0}

arm2_.0s:{x:0, y:0, dir:0}
arm2_.2s:{x:0, y:-3, dir:60}
arm2_.3s:{x:0, y:7, dir:20}
arm2_.4s:{x:0, y:5, dir:-20}
arm2_.5s:{x:0, y:0, dir:0}

arm3_.0s:{x:0, y:0}
arm3_.2s:{x:0, y:-3}
arm3_.3s:{x:0, y:7}
arm3_.4s:{x:0, y:5}
arm3_.5s:{x:0, y:0}

arm4_.0s:{x:0, y:0}
arm4_.2s:{x:0, y:-3}
arm4_.3s:{x:0, y:7}
arm4_.4s:{x:0, y:5}
arm4_.5s:{x:0, y:0}

arm5_.0s:{x:0, y:0}
arm5_.2s:{x:0, y:-3}
arm5_.3s:{x:0, y:7}
arm5_.4s:{x:0, y:5}
arm5_.5s:{x:0, y:0}

arm6_.0s:{x:0, y:0}
arm6_.2s:{x:0, y:-3}
arm6_.3s:{x:0, y:7}
arm6_.4s:{x:0, y:5}
arm6_.5s:{x:0, y:0}

arm7_.0s:{x:0, y:0}
arm7_.2s:{x:0, y:-3}
arm7_.3s:{x:0, y:7}
arm7_.4s:{x:0, y:5}
arm7_.5s:{x:0, y:0}

[graphics]
total_frames: 1
image:        SHARED:blank.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

lock_shadow_rotation_with_main_turret: true
lock_body_rotation_with_main_turret: true

[attack]
isMelee: true
meleeEngangementDistance: 150

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 35
turretTurnSpeed: 3.2

maxAttackRange: 30
shootDelay: 47

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0

canAttackMaxAngle: 10

shoot_sound:Open.ogg
shoot_sound_vol:0.6

[projectile_1]
tags= T-projectile
delayedStartTimer: 20
life: 50
instant: true
directDamage:135
areaDamage: 135
areaRadius: 40
pushVelocity: -0.5
explodeEffect:NONE
explodeEffectOnShield:NONE
spawnProjectilesOnExplode: 1V(recursionLimit=30)

[projectile_1V]
tags= T-projectile
delayedStartTimer: 1
areaDamage: 0
areaRadius: 40
pushVelocity: -0.15
life: 0
instant: true
invisible: true
moveWithParent: true
explodeEffect: NONE
explodeEffectOnShield: NONE
spawnProjectilesOnExplode: 1V(recursionLimit=30)

[turret_magic]
x: 0
y: 0
size: 0
canShoot: false
attachedTo: 1
slave: true

[leg_1]
x: -17
y: 14
attach_x: 0
attach_y: 14
moveSpeed: 3.0
resetAngle:5
heightSpeed: 0.8

holdDisMin: 10
holdDisMax: 13
hardLimit: 22
image_leg:  右中腿.png

[leg_2]
x: 17
y: 14
attach_x: 0
attach_y: 14
copyFrom: 1
image_leg:  左中腿.png

[leg_3]
x: -19
y: 7
attach_x: 0
attach_y: 3
copyFrom: 1
image_leg:  左中腿.png

[leg_4]
x: 19
y: 7
attach_x: 0
attach_y: 3
copyFrom: 1
image_leg:  右中腿.png

[leg_5]
x: -17
y: -8
attach_x: 0
attach_y: -8
copyFrom: 1
image_leg:  左后腿.png

[leg_6]
x: 17
y: -8
attach_x: 0
attach_y: -8
copyFrom: 1
image_leg:  右后腿.png

[arm_1]
x:-7
y:23
image_end:左颚.png
image_end_shadow: SHADOW:左颚.png

drawOverBody:true

[arm_2]
x:7
y:23
image_end:右颚.png
image_end_shadow: SHADOW:右颚.png

drawOverBody:true

[arm_3]
x:0
y:0
image_end: 主体.png
image_end_shadow: SHADOW:主体.png
image_end_teamColors:true

drawOverBody:true

[arm_4]
x:-1
y:15
endDirOffset:30
image_end:左翼膜.png
image_end_shadow: SHADOW:左翼膜.png

drawOverBody:true

[arm_5]
x:1
y:15
endDirOffset:-30
image_end:右翼膜.png
image_end_shadow: SHADOW:右翼膜.png

drawOverBody:true

[arm_6]
x:-5
y:2
image_end:左鞘翅.png
image_end_shadow: SHADOW:左鞘翅.png

drawOverBody:true

[arm_7]
x:5
y:2
image_end:右鞘翅.png
image_end_shadow: SHADOW:右鞘翅.png

drawOverBody:true

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.7
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.08

maxTurnSpeed: 3.1
turnAcceleration: 0.3

targetHeight: 2
targetHeightDrift: 0

moveSlidingMode :true
moveIgnoringBody:true

moveSlidingDir:  45

slowDeathFall: true

reverseSpeedPercentage:0


[projectile_光辉凝聚]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 0
speed: 0
turnSpeed: 0
invisible: true
deflectionPower: -1
explodeEffect: NONE
targetGroundSpread: 10
spawnProjectilesOnEndOfLife: 光辉2(offsetRandomDir=360)

[projectile_光辉2]
@copyFromSection: projectile_光辉凝聚
spawnProjectilesOnEndOfLife: 光辉3(yOffsetRelative=120)

[projectile_光辉3]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 100
speed: 0.2
targetSpeed: 4
targetSpeedAcceleration: 0.07
deflectionPower: -1

image: 光球.png
drawSize: 0.75
color: #32FFFF66

trailEffect: CUSTOM:圣光尾迹
trailEffectRate: 3
effectOnCreate: 璀璨光弹星, 璀璨闪光, 璀璨闪星, 璀璨光辉2
explodeEffect: 璀璨光辉, 璀璨闪光

wobbleAmplitude: 2
wobbleFrequency: 180
targetGroundSpread: 40

[effect_璀璨闪光]
priority: low
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
scaleFrom: 1
scaleTo: 1
alpha: 0.5
color: #FFFF66

[effect_璀璨闪星]
priority: high
image: 光星.png
life: 25
fadeOut: true
attachedToUnit: false
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.5
color: #FFFF66

[effect_璀璨光辉]
createWhenOffscreen: true
showInFog: true
priority: high
image: 璀璨光辉.png
life: 25
fadeInTime: 5
fadeOut: true
attachedToUnit: false
scaleFrom: 0.1
scaleTo: 0.3
alpha: 0.5
color: #FFFF66
trailEffect: 璀璨光辉2
trailEffectRate: 6

[effect_璀璨光辉2]
createWhenOffscreen: true
showInFog: true
priority: low
image: 璀璨光辉.png
life: 15
fadeInTime: 5
fadeOut: true
attachedToUnit: false
scaleFrom: 0
scaleTo: 0.3
alpha: 0.3
color: #FFFF66


[effect_璀璨光弹星]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光星.png
life: 150
fadeInTime: 30
fadeOut: true
attachedToUnit: true
liveAfterAttachedDies: false
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.3
color: #FFFF66
dirSpeed: 1
dirSpeedRandom: 0.3

[effect_圣光尾迹]
priority: high
image: 光星.png
life: 40
fadeInTime: 3
fadeOut: true
attachedToUnit: false
scaleFrom: 0.15
scaleTo: 0.15
alpha: 0.3
color: #FFFF66
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2



[effect_光辉释放]
priority: veryhigh
image: SHARED:blank.png
life: 198
trailEffect: 光辉释放+
trailEffectRate: 6

[effect_光辉释放+]
createWhenOffscreen: true
showInFog: true
priority: verylow
image: 白涟漪.png
life: 40
fadeOut: true
attachedToUnit: false
scaleFrom: 0
scaleTo: 5
alpha: 0.1
color: #FFFF66
dirOffsetRandom: 360
drawUnderUnits: true


[effect_光环初现]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光圈.png
life: 25
fadeOut: false
attachedToUnit: true
fadeInTime: 3
scaleFrom: 3
scaleTo: 2.5
alpha: 0.3
color: #FFFF66
dirSpeed: 1
dirOffsetRandom: 360
trailEffect: 光辉环聚
trailEffectRate: 3

alsoEmitEffectsOnDeath: 光环暂滞

[effect_光环暂滞]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光圈.png
life: 170
fadeOut: false
attachedToUnit: true
scaleFrom: 2.5
scaleTo: 2.6
alpha: 0.3
color: #FFFF66
dirSpeed: 1
dirSpeedRandom: 0.2
trailEffect: 光辉环绕, 亮光辉环绕
trailEffectRate: 5

alsoEmitEffectsOnDeath: 光环闪烁*2

[effect_光环闪烁]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光圈.png
life: 30
fadeOut: true
attachedToUnit: true
scaleFrom: 2.6
scaleTo: 2.8
alpha: 0.3
color: #FFFF66
dirSpeed: 1
dirSpeedRandom: 0.2


[effect_光辉环聚]
createWhenOffscreen: true
showInFog: true
priority: low
image: 光圈.png
life: 30
lifeRandom: 5
fadeOut: true
attachedToUnit: true
fadeInTime: 10
scaleFrom: 3
scaleTo: 1
alpha: 0.1
color: #FFFF66
dirSpeed: 1
dirSpeedRandom: 0.2
dirOffsetRandom: 360
atmospheric: true

[effect_光辉环绕]
createWhenOffscreen: true
showInFog: true
priority: low
image: 光圈.png
life: 40
lifeRandom: 5
fadeOut: true
attachedToUnit: true
fadeInTime: 10
scaleFrom: 2.5
scaleTo: 2.6
alpha: 0.1
color: #FFFF66
dirSpeed: 0.8
dirSpeedRandom: 0.2
dirOffsetRandom: 360
atmospheric: true

[effect_亮光辉环绕]
@copyFromSection: effect_光辉环绕
alpha: 0.3
spawnChance: 0.2



[effect_圣光]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 圣光.png
life: 190
fadeOut: false
attachedToUnit: true
fadeInTime: 20
scaleFrom: 2.5
scaleTo: 2.5
alpha: 0.1
color: #FFFF66
dirSpeed: 0.1
dirOffsetRandom: 360
trailEffect: 圣光辉
trailEffectRate: 6

alsoEmitEffectsOnDeath: 圣光终烁, 圣光终曲

[effect_圣光终烁]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 圣光.png
life: 30
fadeInTime: 5
fadeOut: true
attachedToUnit: true
scaleFrom: 2.8
scaleTo: 2
alpha: 0.5
color: #FFFF66
dirSpeed: 0.15

[effect_圣光辉]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 圣光.png
life: 40
fadeOut: false
attachedToUnit: true
scaleFrom: 2.5
scaleTo: 2.8
alpha: 0.04
color: #FFFF66
dirSpeed: 0.1

[effect_圣光终曲]
createWhenOffscreen: true
showInFog: true
drawType: displacement
priority: veryhigh
image: 圣光.png
life: 20
fadeOut: true
attachedToUnit: true
scaleFrom: 2.5
scaleTo: 2
alpha: 0.1
color: #FFFF66
dirSpeed: 0.15


[effect_璀璨阵法显现]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 阵法.png
life: 30
fadeInTime: 20
fadeOut: false
attachedToUnit: true
scaleFrom: 0.05
scaleTo: 0.2
alpha: 0.2
color: #FFFF66
dirSpeed: 0.2
drawUnderUnits: true
alsoEmitEffectsOnDeath: 璀璨阵法

[effect_璀璨阵法]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 阵法.png
life: 168
fadeOut: false
attachedToUnit: true
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.2
color: #FFFF66
dirSpeed: 0.2
trailEffect: 阵法光辉, 大阵法光辉
trailEffectRate: 6
drawUnderUnits: true

[effect_阵法光辉]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 阵法.png
life: 40
fadeOut: true
attachedToUnit: true
scaleFrom: 0.2
scaleTo: 0.24
alpha: 0.06
color: #FFFF66
drawUnderUnits: true

[effect_大阵法光辉]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 阵法.png
life: 40
fadeOut: true
attachedToUnit: true
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.08
color: #FFFF66
dirSpeed: 0.15
drawUnderUnits: true


[effect_中心圣光星]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光星.png
life: 190
fadeInTime: 25
fadeOut: false
attachedToUnit: true
scaleFrom: 2
scaleTo: 2
alpha: 0.2
color: #FFFF66
alsoEmitEffectsOnDeath: 中心圣光星闪, 旋终曲, 波终曲

[effect_中心圣光星闪]
createWhenOffscreen: true
showInFog: true
priority: veryhigh
image: 光星.png
life: 30
fadeOut: true
attachedToUnit: true
scaleFrom: 2
scaleTo: 0.1
alpha: 0.7
color: #FFFF66

[effect_旋终曲]
drawType: displacement
image: SHARED:cone_inverted_normal_128.png
life: 35
fadeOut: true
fadeInTime: 5
attachedToUnit: true
color: #ffffff
scaleFrom: 4
scaleTo: 3
alpha: 0.2
dirSpeed: 3
dirOffset: 30
alwayStartDirAtZero: true
drawUnderUnits:false

[effect_波终曲]
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 35
fadeOut: true
attachedToUnit: true
color: #ffffff
scaleFrom: 0.1
scaleTo: 3
alpha: 0.2
dirSpeed: 1
dirOffset: 30
alwayStartDirAtZero: true
drawUnderUnits:false


[effect_光音]
life: 0
delayedStartTimer: 160
alsoEmitEffectsOnDeath: 光音+

[effect_光音+]
life: 0
alsoPlaySound: vision.ogg