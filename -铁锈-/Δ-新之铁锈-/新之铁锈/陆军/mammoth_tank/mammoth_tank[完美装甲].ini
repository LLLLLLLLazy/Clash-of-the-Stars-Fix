
[core]
name: mammothTank[完美装甲]
copyFrom: mammoth_tank.ini
overrideAndReplace: NONE
displayText: 初式-猛犸坦克(完美装甲)
showInEditor: false

armour: 300
armourMinDamageToKeep: 0

[hiddenAction_满能]
convertTo: mammothTank2[完美装甲]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[action_armor]
text: 完美装甲
description: -极高伤害减免\n-受到攻击减少装甲覆盖\n-如果护甲被穿透则被破甲
price: armor=1
buildSpeed: 0s
displayType: infoOnly
displayRemainingStockpile: true
isActive: false

[hiddenAction_受到攻击]
autoTrigger: if self.hasTakenDamage(withinSeconds=0.04)
playSoundAtUnit: 铛.wav
addResources: armor=-3

[hiddenAction_破甲]
autoTrigger: if self.resource(type="armor", lessThan=1) or not self.hp(full=true)
convertTo: A_mammothTank
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
playSoundAtUnit: weaponAxeHit2.ogg
resourceAmount: armor
resourceAmount_setValue: 0