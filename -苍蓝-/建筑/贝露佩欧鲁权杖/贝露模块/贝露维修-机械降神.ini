
[core]
name: 机械降神
displayText: “机械降神”
copyFrom: common_slot.ini

displayDescription: -将你所需要的送上舞台

price: 0

tags: 贝露模块, 贝露中心单位, 机械降神, 权能模块

isBuilder: true
autoRepair: true

nanoRange: 360
nanoRepairSpeed: 9999
nanoBuildSpeed: 9999
resourceReclaimMultiplier: 9999

canRepairBuildings: true
canRepairUnits:	true
#canRepairUnitsOnlyWithTags: 机神赐域

autoTriggerCooldownTime: 1
autoTriggerCooldownTime_allowDangerousHighCPU:true

[action_reclaim]
isActive: false

[action_destroy]
isActive: false

[hiddenAction_探针模块]
autoTrigger: if self.hasParent(withTag="贝露之眼")
convertTo: 机械降神[探针]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[hiddenAction_附属维修]
autoTrigger: if customTarget1.hasActiveWaypoint(type='repair') and (not self.hasActiveWaypoint(type='repair') or activeWaypointTarget!=customTarget1.activeWaypointTarget)
clearAllWaypoints: true
addWaypoint_type: repair
addWaypoint_prepend: true
addWaypoint_target_fromReference: customTarget1.activeWaypointTarget

[hiddenAction_附属回收]
autoTrigger: if customTarget1.hasActiveWaypoint(type='reclaim') and (not self.hasActiveWaypoint(type='reclaim') or activeWaypointTarget!=customTarget1.activeWaypointTarget)
clearAllWaypoints: true
addWaypoint_type: reclaim
addWaypoint_prepend: true
addWaypoint_target_fromReference: customTarget1.activeWaypointTarget

[hiddenAction_苍临全图]
autoTrigger: if not self.hasFlag(id=1)
addResources: setFlag=1
takeResources: 0
takeResources_includeUnitsWithinRange: 99999
takeResources_includeUnitsWithinRange_team: any
takeResources_excludeUnitsWithoutTags: 空资源池
takeResources_triggerActionForEach: 生成能源站信息
takeResources_maxUnits: 999
spawnEffects: 苍临
playSoundAtUnit: plasma_fire
fireTurretXAtGround_withProjectile: 2
fireTurretXAtGround_withOffset: 0, 1000
fireTurretXAtGround: nano
spawnUnits: 苍临之筑[不完整]

[hiddenAction_生成能源站信息]
sendMessageTo: thisActionTarget
sendMessageWithTags: 生成能源站
sendMessageWithData: 能源站归属=self.teamId, 机械降神=true

[hiddenAction_重筑]
autoTrigger: if self.hasFlag(id=1) and not self.hasUnitInTeam(withTag='苍临之筑')
spawnUnits: 苍临之筑[不完整]

[attack]
canAttack: false
maxAttackRange: 360

[turret_nano]
x: 0
y: 50
turnSpeed: 9999
canShoot: false
isMainNanoTurret: true

[graphics]
image: 苍.png

repairEffectAtTarget: CUSTOM:displacement
repairEffectRate: 0

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 50
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 1.5
alpha: 0.8
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1

[effect_苍临]
priority: critical
image: 白色光圈.png
life: 300
alpha: 0.5
scaleFrom: 0
scaleTo: 100
dirSpeed: 15
drawUnderUnits: true
color: #18FFFF
createWhenOffscreen: true
showInFog: true

[projectile_2]
directDamage: 220
laserEffect: true
instant: true
life: 20
color: #42f2f5
spawnProjectilesOnCreate: 2附, 3

[projectile_2附]
directDamage: 0
instant: true
lightingEffect: true
life: 20

[projectile_3]
armourIgnoreAmount: 9999
areaDamage: 3000
areaRadius: 25
areaDamageNoFalloff: true
life: 10
instant: true
lightingEffect: true