
[core]
showInEditor:false
copyFrom: 乌贼治愈者.ini
name: 乌贼治愈者[旗舰]
tags: units, 旗舰, 能量冷却3

fogOfWarSightRange: 24

generation_credits: 8
generation_delay: 40

unitsSpawnedOnDeath:旗舰大破

energyMax: 60
energyRegen: 0.016
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 50

[action_flagship]
autoTrigger: if numberOfUnitsInTeam(withTag='旗舰', greaterThan=1)
convertTo: 乌贼治愈者
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[effect_pain]
scaleTo: 1.65

[action_技能]
displayType: action
text: 缠乱愈护
pos: 1
price: 0
isLocked: if not self.energy(full=true)
isLockedMessage: 冷却中...
addResources: setFlag=1, setFlag=2, energy=-60
description: -使用后10s内每秒回复/减少附近己方单位1000护盾\n CD:60s
buildSpeed: 1s
iconImage: pain.png
iconExtraImage: shield_mid.png
iconExtraIsVisible: if self.hasFlag(id=1)
isGuiBlinking: if self.hasFlag(id=2)
alsoQueueAction: 盾+

[hiddenAction_盾+]
buildSpeed: 1s
requireConditional: if self.ammo(lessThan=10) and self.hasFlag(id=2)
addResources: unsetFlag=1, ammo=1
fireTurretXAtGround: magic
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile:pain+
alsoQueueAction: 盾-

[hiddenAction_盾-]
@copyFromSection: hiddenAction_盾+
addResources: setFlag=1, ammo=1
fireTurretXAtGround_withProjectile:pain-
alsoQueueAction: 盾+

[hiddenAction_技能停止]
autoTrigger: if self.ammo(equalTo=10)
addResources: unsetFlag=1, unsetFlag=2

[attack]
maxAttackRange: 220
shootDelay: 50

[projectile_pain+]
tags= T-projectile
life: 1
invisible: true
explodeOnEndOfLife:true
targetGround:true
deflectionPower: -1
areaDamage: -1000
areaRadius: 220
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
hullDamageMultiplier: 0
areaDamageNoFalloff: true
armourIgnoreAmount: 999
shieldDefectionMultiplier: 0
friendlyFire: only-ignoreEnemy
explodeEffect:CUSTOM:pain, CUSTOM:Shieldcircle

[projectile_pain-]
tags= T-projectile
life: 1
invisible: true
explodeOnEndOfLife:true
targetGround:true
deflectionPower: -1
areaDamage: 1000
areaRadius: 220
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
hullDamageMultiplier: 0
areaDamageNoFalloff: true
armourIgnoreAmount: 999
shieldDefectionMultiplier: 0
friendlyFire: only-ignoreEnemy
explodeEffect:CUSTOM:ShieldReceive

[effect_Shieldcircle]
alpha: 0.6
life: 60
scaleFrom: 0.1
scaleTo: 1.65
dirSpeed: 6
image: shield_mid.png
attachedToUnit: true

[effect_ShieldReceive]
alpha: 0.5
life: 30
scaleFrom: 2.1
scaleTo: 0.1
dirSpeed: -6
image: shield_mid.png
attachedToUnit: true

