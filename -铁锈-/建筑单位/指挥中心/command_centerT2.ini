[core]
name: T2 - 指挥中心
displayText: T2 - 指挥中心
displayDescription: -铁锈阵营 \n -产出大量资源 \n -起始基地被毁会损失资源 \n -可维修与协助建造单位 \n -造成部分范围伤害
class: CustomUnitMetadata
tags: units, 铁锈指挥中心, 指挥中心T2, 基地
price: 18000
maxHp: 4000
maxShield: 2000
shieldRegen: 0.15
selfRegenRate: 0.04
armour: 5
armourMinDamageToKeep: 5
mass: 10000
footprint: -1,-1,1,1
constructionFootprint: -1,-1,1,2
techLevel: 2
radius: 28
isBio: false
isBuilding: true
isBuilder: true
canRepairBuildings: true
canReclaimResources: true
canRepairUnits : true
nanoRange: 330
nanoBuildSpeed: 5
autoRepair: true
nanoRepairSpeed: 0.5
nanoFactorySpeed: 2
isPickableStartingUnit: true
availableInDemo: true
generation_credits: 60
borrowResourcesWhileAlive: 经济=-${core.generation_credits}
softCollisionOnAll: 3
effectOnDeath: CUSTOM:shockwaveLarge, largeExplosion, CUSTOM:explosionFlashLarge
soundOnDeath: buiding_explode: 1
exit_x: -1
exit_y: -1
energyMax: 10
energyRegen: 0.012
fogOfWarSightRange: 34

[global_resource_经济]
hidden: true

[canBuild_1]
name: setRally, reclaim
pos: -1

[canBuild_2]
name: 建造者,scout
pos: 1

[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语

[resource_起始基地]
displayName: 起始基地

[action_bombing]
displayType: action
price: 7000
text: 轰炸区
description: -在指定位置投下大量导弹\n-无法有效伤害护盾与建筑\n-会伤及我军
fireTurretXAtGround: boom
fireTurretXAtGround_withProjectile: 新boom
allowMultipleInQueue: false
buildSpeed: 0
pos: 0
iconImage: 轰炸区.png
highPriorityQueue: true
isAlsoViewableByAllies: true

onlyOneUnitAtATime: true
addActionCooldownTime: 200s
addActionCooldownApplyToActions: bombing, money
addGlobalTeamTags: CD
addAllActionCooldownsTime: 2s
isLocked: if globalSearchForFirstUnit(withTag='单位系统', relation='own').resource.铁锈CD>0
addResources: setFlag=0, energy=-200
alsoQueueAction: flag重置

takeResources: 铁锈CD=-200
takeResources_includeReference: globalSearchForFirstUnit(withTag='单位系统', relation='own')
takeResources_discardCollected: true

[action_money]
displayType: action
price: 0
text: 资金补助
description: -在指定位置投下资源箱
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: money
allowMultipleInQueue: false
buildSpeed: 0
pos: 0
iconImage: stats_button_income.png
highPriorityQueue: true
isAlsoViewableByAllies: true

onlyOneUnitAtATime: true
addActionCooldownTime: 200s
addActionCooldownApplyToActions: bombing, money
addGlobalTeamTags: CD
addAllActionCooldownsTime: 2s
isLocked: if globalSearchForFirstUnit(withTag='单位系统', relation='own').resource.铁锈CD>0
addResources: setFlag=0, energy=-200
alsoQueueAction: flag重置

takeResources: 铁锈CD=-200
takeResources_includeReference: globalSearchForFirstUnit(withTag='单位系统', relation='own')
takeResources_discardCollected: true

[hiddenAction_CD]
autoTrigger: if self.globalTeamTags(includes='CD') and not self.hasFlag(id=0)
removeGlobalTeamTags: CD
addActionCooldownTime: 200s
addActionCooldownApplyToActions: bombing, money
addResources: energy=-200

[hiddenAction_flag重置]
buildSpeed: 1s
addResources: unsetFlag=0

[hiddenAction_中心防御]
autoTrigger: if not self.globalTeamTags(includes='中心防御')
addGlobalTeamTags: 中心防御


[action_生存防御巩固]
@copyFromSection: template_生存防御巩固
pos: 0.1

[effect_生存防御巩固形]
@copyFromSection: template_生存防御巩固形


[hiddenAction_顶点之处]
autoTrigger: if self.globalTeamTags(includes="顶点") and not self.tags(includes="顶点之处")
temporarilyAddTags: 顶点之处

[hiddenAction_落下顶点]
autoTrigger: if not self.globalTeamTags(includes="顶点") and self.tags(includes="顶点之处")
temporarilyRemoveTags: 顶点之处

[graphics]
total_frames: 4
image: base.png
image_back: base_back.png
image_wreak: base_dead.png
image_shadow: NONE
shadowOffsetX: 1
shadowOffsetY: 1
animation_idle_start: 0
animation_idle_end: 3
animation_idle_speed: 6
animation_idle_pingPong: true
[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
turretTurnSpeed: 100
maxAttackRange: 330
shootDelay: 20
turretMultiTargeting: true
[turret_nanoTurret]

x: -3
y: 27

warmup: 30

turnSpeed: 4
size: 8

image: SHARED:nano_turret.png

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

isMainNanoTurret: true
[turret_1]
x: 0
y: 0
shoot_sound: missile_fire
shoot_sound_vol: 0.4
#shoot_flame: small
shoot_light: #FFEECCCC
shouldResetTurret: false
idleSpin: 0
energyUsage: 1
projectile: 1

[turret_magic]
x: 0
y: 0
canShoot: false

[projectile_1]
tags= T-projectile
directDamage: 65
areaDamage: 65
areaRadius: 65
life: 250
speed: 0.3
frame: 4
targetSpeed: 7
largeHitEffect: true
drawSize: 1.2
autoTargetingOnDeadTarget: true
trailEffect: true
ballistic: true
ballistic_delaymove_height: 40
ballistic_height: 40
lightColor: #f7ff1d
lightSize: 0.5
[turret_boom]
x: 0
y: 0
canAttackFlyingUnits: false
canAttackLandUnits: if self.resource(type='CD', lessThan=1) and self.isControlledByAI
resourceUsage: credits=7000, CD=-200
onShoot_triggerActions: AIbombing
projectile: 新boom
invisible: true
shoot_sound: nuke_launch
shoot_sound_vol: 0.5
limitingRange: 1500
[projectile_boom]
tags= T-projectile
directDamage: 0
life: 30
speed: 5
frame: 4
drawSize: 1.2
trailEffect: true
ballistic: true
ballistic_delaymove_height: 2000
ballistic_height: 2000
lightColor: #f7ff1d
lightSize: 0.5
spawnProjectilesOnEndOfLife: boom2*10,轰炸区
[projectile_boom2]
tags= T-projectile
directDamage: 0
life: 30
speed: 8
frame: 4
drawSize: 1
trailEffect: true
ballistic: true
ballistic_delaymove_height: 2000
ballistic_height: 2000
lightColor: #f7ff1d
lightSize: 0.3
wobbleAmplitude: 5
wobbleFrequency: 100
[projectile_新boom]
tags= T-projectile
directDamage: 0
life: 30
speed: 5
frame: 4
drawSize: 1.2
trailEffect: true
ballistic: true
ballistic_delaymove_height: 2000
ballistic_height: 2000
targetGround: true
lightColor: #f7ff1d
lightSize: 0.5
spawnProjectilesOnEndOfLife: 新boom2*10,新boom2-1
deflectionPower: 10
[projectile_新boom2]
tags= T-projectile
directDamage: 0
life: 7s
speed: 8
frame: 4
drawSize: 1
trailEffect: true
ballistic: true
ballistic_delaymove_height: 2000
ballistic_height: 2000
targetGround: true
lightColor: #f7ff1d
lightSize: 0.3
wobbleAmplitude: 5
wobbleFrequency: 100
spawnProjectilesOnEndOfLife: 新boom3*5(offsetDir=-90,offsetRandomXY=120)
deflectionPower: -1

[projectile_新boom2-1]
tags= T-projectile
directDamage: 0
life: 7s
speed: 8
frame: 4
drawSize: 1
trailEffect: true
ballistic: true
ballistic_delaymove_height: 2000
ballistic_height: 2000
targetGround: true
lightColor: #f7ff1d
lightSize: 0.3
wobbleAmplitude: 5
wobbleFrequency: 100
spawnProjectilesOnEndOfLife: 轰炸区
deflectionPower: -1

[projectile_新boom3]
tags= T-projectile
areaDamage: 150
areaRadius: 55
life: 600
speed: 9
speedSpread: 6
frame: 4
drawSize: 1
trailEffect: true
ballistic: true
lightColor: #f7ff1d
lightSize: 0.3
targetGround: true
targetGroundSpread: 120
largeHitEffect: true
explodeOnEndOfLife: true
friendlyFire: true
areaHitAirAndLandAtSameTime: true
deflectionPower: -1

[projectile_轰炸区]
tags= T-projectile
life: 50
directDamage: 0
targetGround: true
instant: true
explodeEffect: NONE
spawnUnit: 导弹轰炸区

[projectile_money]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 50
instant: true
explodeEffect: NONE
spawnUnit: 资金补助

[effect_shockwaveLarge]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 2
life: 45
color: #FFEECCCC

[effect_explosionFlashLarge]
image: SHARED:light_50.png
scaleFrom: 8
scaleTo: 4
life: 20
fadeOut: true
priority: critical

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed: 0
turnAcceleration: 0
[ai]
buildPriority: 1
useAsBuilder: true
maxEachBase: 4

[hiddenAction_AIbombing]
addActionCooldownTime: 200s
addActionCooldownApplyToActions: bombing

[resource_CD]
displayName: 剩余冷却

[resource_铁锈CD]
hidden: true