
[core]
name: 碎质合成
displayText: “碎质合成”
copyFrom: common_slot.ini

displayDescription: -无数的星屑组成独一无二的宇宙

price: 0

energyMax: 10
energyStartingPercentage: 0

tags: 贝露模块, 贝露中心单位, 碎质合成, 权能模块

[action_reclaim]
isActive: false

[action_destroy]
isActive: false

[hiddenAction_日耀初光]
autoTrigger: if parent.resource.日耀模块 > 0 and self.resource.日耀模块 == self.resource.月曜模块
addResources: 日耀模块=1

[hiddenAction_月曜初光]
autoTrigger: if parent.resource.月曜模块 > 0 and self.resource.日耀模块 == self.resource.月曜模块
addResources: 月曜模块=1

[hiddenAction_日光交替]
autoTrigger: if parent.resource.月曜模块 > 0 and self.resource.日耀模块 > 0
fireTurretXAtGround: 星光质换
fireTurretXAtGround_withOffset: 0, 0
addResources: 日耀模块=-1, 月曜模块=1

[hiddenAction_月光交替]
@copyFromSection: hiddenAction_日光交替
autoTrigger: if parent.resource.日耀模块 > 0 and self.resource.月曜模块 > 0
addResources: 日耀模块=1, 月曜模块=-1

[hiddenAction_能量增加]
autoTrigger: if self.isAttacking and self.energy < 10
addEnergy: 1

[hiddenAction_能量减少]
autoTriggerOnEvent: killedAnyUnit
autoTrigger: if not self.isAttacking and self.energy > 0
addEnergy: -1

[resource_日耀模块]
displayName: 日耀模块

[resource_月曜模块]
displayName: 月曜模块

[hiddenAction_月曜无效]
autoTrigger: true
setResourcesWithLogic: 月曜T1攻速=0.01, 月曜T2攻速=0.01

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 500
shootDelay: 6
turretSize: 0

aimOffsetSpread: 0

[turret_0]
x: 0
y: 50
canShoot: false
turnSpeed: 1000

[turret_1]
x: 0
y: 0
attachedTo: 0
slave: true
projectile: 1
canAttackCondition: if self.energy(lessThan=1)

[turret_2]
@copyFromSection: turret_1
canAttackCondition: if self.energy(lessThan=2)
projectile: 2

[turret_3]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=3)
projectile: 3

[turret_4]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=4)
projectile: 4

[turret_5]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=5)
projectile: 5

[turret_6]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=6)
projectile: 6

[turret_7]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=7)
projectile: 7

[turret_8]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=8)
projectile: 8

[turret_9]
@copyFromSection: turret_2
canAttackCondition: if self.energy(lessThan=9)
projectile: 9

[turret_10]
@copyFromSection: turret_2
shoot_flame: CUSTOM:wave, CUSTOM:释光, CUSTOM:光圈
canAttackCondition: if self.energy(lessThan=10)
projectile: 10

[turret_终]
@copyFromSection: turret_2
shoot_flame: CUSTOM:wave, CUSTOM:大释光, CUSTOM:光圈
canAttackCondition: if self.energy(equalTo=10)
projectile: 最终天束
energyUsage: 1


[projectile_1]
life: 20
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 3

sweepOffsetFromTargetRadius: 1.8
sweepOffset: 135
sweepSpeed: 10

explodeEffect: CUSTOM:光痕, CUSTOM:星痕曜
explodeEffectOnShield: CUSTOM:光痕, CUSTOM:星痕曜

areaDamage: 50
areaRadius: 30
areaRadiusFromEdge: true
areaDamageNoFalloff: true

[projectile_2]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 1.6
sweepOffset: 120

[projectile_3]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 1.4
sweepOffset: 105

[projectile_4]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 1.2
sweepOffset: 90

[projectile_5]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 1.0
sweepOffset: 75

[projectile_6]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 0.8
sweepOffset: 60

[projectile_7]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 0.6
sweepOffset: 45

[projectile_8]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 0.4
sweepOffset: 30

[projectile_9]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 0.2
sweepOffset: 15

[projectile_10]
@copyFromSection: projectile_1
sweepOffsetFromTargetRadius: 0
sweepOffset: 0

[projectile_最终天束]
life: 40
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      大激光.png
beamImageEnd:  beam1_end.png
beamImageStart: beam1_start.png
beamImageOffsetRate: 3

explodeEffect: CUSTOM:白星, CUSTOM:白光, CUSTOM:终闪, CUSTOM:碎光*12, CUSTOM:星散*8, CUSTOM:displacement_ripples
explodeEffectOnShield: CUSTOM:白星, CUSTOM:白光, CUSTOM:终闪, CUSTOM:碎光*12, CUSTOM:星散*8, CUSTOM:displacement_ripples

directDamage: 0
mutatorX_ifUnitWithoutTags: NONE任意
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: 虚空=1

spawnProjectilesOnEndOfLife: 红(recursionLimit=8)

[projectile_红]
life: 4
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      大激光.png
beamImageEnd:  beam1_end.png
beamImageStart: beam1_start.png
beamImageOffsetRate: 3

explodeEffect: NONE
explodeEffectOnShield: NONE

armourIgnoreAmount: 2147483647
directDamage: 2147483647
shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0


color: #32ff0000
#spawnProjectilesOnEndOfLife: 橙(recursionLimit=8)

[projectile_橙]
@copyFromSection: projectile_红
color: #55FF7F00
spawnProjectilesOnEndOfLife: 黄(recursionLimit=8)

[projectile_黄]
@copyFromSection: projectile_红
color: #78FFFF00
spawnProjectilesOnEndOfLife: 绿(recursionLimit=8)

[projectile_绿]
@copyFromSection: projectile_红
color: #9B00FF00
spawnProjectilesOnEndOfLife: 青(recursionLimit=8)

[projectile_青]
@copyFromSection: projectile_红
color: #BE00FFFF
spawnProjectilesOnEndOfLife: 蓝(recursionLimit=8)

[projectile_蓝]
@copyFromSection: projectile_红
color: #E10000FF
spawnProjectilesOnEndOfLife: 紫(recursionLimit=8)

[projectile_紫]
@copyFromSection: projectile_红
directDamage: 99999
color: #8B00FF
spawnProjectilesOnEndOfLife: NONE



[turret_星光质换]
x: 0
y: 0
canShoot: false
projectile: 星光质换

[projectile_星光质换]
life: 99
instant: true
targetGround: true
areaDamage: -1000
areaRadius: 360
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
friendlyFire: only-ignoreEnemy
hullDamageMultiplier: 0
deflectionPower: -1
lightColor: #FFFFFF
lightSize: 1

pushForce: -1
pushVelocity: -5

explodeEffect: CUSTOM:回光波
explodeEffectOnShield: CUSTOM:回光波
spawnProjectilesOnCreate: 星光质换2(recursionLimit=1)

[projectile_星光质换2]
@copyFromSection: projectile_星光质换
areaDamage: 1000
areaRadius: 510
areaExpandTime: 40
friendlyFire: false

hullDamageMultiplier: 1
pushForce: 1
pushVelocity: 5

explodeEffect: CUSTOM:至光波
explodeEffectOnShield: CUSTOM:至光波
delayedStartTimer: 40

[effect_回光波]
stripIndex: shockwave_large
life: 40
scaleFrom: 7
scaleTo: 0
alpha: 0.5
fadeInTime: 8
dirSpeed: -5

[effect_至光波]
@copyFromSection: effect_回光波
scaleFrom: 0
scaleTo: 10
dirSpeed: 5


[effect_wave]
stripIndex: shockwave_large
life: 20
scaleFrom: 0
scaleTo: 0.4
alpha: 0.8
alsoPlaySound: laser_deflect:0.5
alsoEmitEffectsOnDeath: wavecollect

[effect_wavecollect]
@copyFromSection: effect_wave
scaleFrom: 0.4
scaleTo: 0
fadeInTime: 20
alsoEmitEffectsOnDeath: NONE

[effect_释光]
image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: true
color: #FFFFFF
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_大释光]
@copyFromSection: effect_释光
life: 25
scaleFrom: 0.8
scaleTo: 1.7

[effect_光圈]
stripIndex: shockwave
life: 10
scaleFrom: 0.5
scaleTo: 0.5
alpha: 1.0


[effect_光痕]
stripIndex: light_50
priority: verylow
life: 200
attachedToUnit: false
fadeInTime: 20
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.5

[effect_星痕曜]
stripIndex: light_50
priority: low
life: 10
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.3
color: #E8773A
attachedToUnit: false
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30
alsoEmitEffectsOnDeath: 星痕月

[effect_星痕月]
@copyFromSection: effect_星痕曜
color: #42F8FF
xOffsetRelativeRandom: 0
yOffsetRelativeRandom: 0
alsoEmitEffectsOnDeath: 星痕缀

[effect_星痕缀]
@copyFromSection: effect_星痕月
alsoEmitEffectsOnDeath: NONE
life: 180
scaleTo: 0.1
color: #FFFFFF

[effect_白星]
image: ROOT:/素材/白星.png
priority: critical
life: 60
attachedToUnit: false
fadeInTime: 0
scaleFrom: 1.2
scaleTo: 1.2
alpha: 2

[effect_白光]
@copyFromSection: effect_释光
priority: critical
life: 60
scaleFrom: 1.7
scaleTo: 1.7

[effect_终闪]
@copyFromSection: effect_释光
life: 20
scaleFrom: 5
scaleTo: 5
alpha: 0.8

[effect_碎光]
priority: critical
image: SHARED:light_50.png
life: 50
fadeOut: true
attachedToUnit: true
color: #FFFFFF
fadeInTime: 2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.8
drawUnderUnits: false
xSpeedAbsoluteRandom: 3
ySpeedAbsoluteRandom: 3
delayedStartTimerRandom: 30

[effect_星散]
image: ROOT:/素材/白星.png
life: 60
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.6
attachedToUnit: false
xOffsetRelativeRandom: 80
yOffsetRelativeRandom: 80
delayedStartTimerRandom: 20

[effect_displacement_ripples]
drawType: displacement

image: SHARED:cone_inverted_normal_128.png
life: 45
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.3
scaleTo: 2
alpha: 0.6
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 2

[graphics]
image: 苍.png




