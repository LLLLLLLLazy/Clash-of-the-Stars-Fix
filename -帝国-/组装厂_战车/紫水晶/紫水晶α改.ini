
[core]
name: 紫水晶α改
displayText: 紫水晶α改

displayDescription: -非常全副武装\n-攻击地面与空中\n-散布大量紫水晶\n-紫水晶柱α能减缓敌军的50%攻速\n-受到来自正面的伤害减少25%
class: CustomUnitMetadata
price: 16000
maxHp: 6200
mass: 50000

tags: units, 紫水晶α改
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 紫水晶α改

armour: 20
armourMinDamageToKeep: 20

fogOfWarSightRange: 18

techLevel: 2
buildSpeed: 0.0003
#availableInDemo: true

selfRegenRate: 0.15

radius: 36
displayRadius: 38

isBio: false

transportSlotsNeeded: 4

effectOnDeath: CUSTOM:shockwave_large, large

energyMax: 2.4
energyRegen: 0
energyNeedsToRechargeToFull: true
energyRegenWhenRecharging: 0.00125

autoTriggerCooldownTime: 10

[hiddenAction_energyRegen]
addResources: energy=0.8
autoTrigger: if not self.isAttacking and not self.isEnergyRecharging and numberOfUnitsInEnemyTeam(lessThan=1, withinRange=500)

[action_burst]
id: 水晶爆破α
text: 水晶爆破α
description: -引爆附近的紫水晶柱及α \n -每引爆一个紫水晶柱α会为其召唤者回复少量能量
buildSpeed: 0
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: burst
allowMultipleInQueue: false
addActionCooldownTime: 1s

[projectile_burst]
tags= T-projectile
life: 0
explodeOnEndOfLife:true
speed: 0
drawSize: 0
targetGround:true
deflectionPower: -1
areaDamage: 0
areaRadius: 500

mutator1_ifUnitWithTags: 紫水晶柱
mutator1_areaDamageMultiplier: 0
mutator1_addResourcesAreaHit: hp=-400
mutator2_ifUnitWithTags: 紫水晶柱α
mutator2_areaDamageMultiplier: 0
mutator2_addResourcesAreaHit: setFlag=0

friendlyFire: only-ignoreEnemy
explodeEffect: NONE


[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_血量减伤]
autoTriggerOnEvent: tookDamage
requireConditional: if self.resource.受击前血量>self.hp and directionBetween(self, eventSource)-self.dir >-45 and directionBetween(self, eventSource)-self.dir <45
setResourcesWithLogic: hp=self.hp+(self.resource.受击前血量-self.hp) * 0.25, 受击前血量=self.hp

[hiddenAction_受伤记录]
autoTriggerOnEvent: tookDamage
setResourcesWithLogic: 受击前血量=self.hp

[resource_受击前血量]
hidden: true

[graphics]
total_frames: 3

image:        紫水晶α.png
image_wreak: NONE
image_turret: NONE
teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX: 3
shadowOffsetY: 3


animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 1


dustEffect: true
dustEffectReverse: false


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 15
turretTurnSpeed: 2

aimOffsetSpread: 10

maxAttackRange: 350
shootDelay: 50

[turret_2]
#炮管上
x: 0
y: 8
image: 紫水晶α炮管.png
attachedTo: 1
turnSpeed: 0
barrelY: 19

projectile: 1
altProjectile: 1-2
altProjectileCondition: if self.energy(lessThan=0.81)
energyUsage: 0.1

shoot_sound: large_gun_fire2
shoot_sound_vol: 0.1
shoot_light: #E6A1E6
warmupStartEffect: CUSTOM:紫水晶炮光
warmup: 10

recoilOffset: -3
recoilOutTime: 8
recoilReturnTime: 35

canAttackMaxAngle: 181

[turret_3]
#炮管右上
x: 6.5
y: 5.5
copyFrom: 2
idleDir: 45

[turret_4]
#炮管右
x: 8
y: 0
copyFrom: 2
idleDir: 90

[turret_5]
#炮管右下
x: 6.5
y: -5.5
copyFrom: 2
idleDir: 135

[turret_6]
#炮管下
x: 0
y: -8
copyFrom: 2
idleDir: 180

[turret_7]
#炮管左下
x: -6.5
y: -5.5
copyFrom: 2
idleDir: 225

[turret_8]
#炮管左
x: -8
y: 0
copyFrom: 2
idleDir: 270

[turret_9]
#炮管左上
x: -6.5
y: 5.5
copyFrom: 2
idleDir: 315

[turret_1]
#炮座
x: 0
y: 0
image: 紫水晶α炮台.png
projectile: 0
warmup: 10

[turret_碾压]
x: 0
y: 0
canShoot: false
invisible: true

turnSpeed: 0
projectile: 碾压

size: 0
delay: 10s
limitingMinRange: 50

[projectile_碾压]
tags= T-projectile
life: 0
invisible: true
explodeOnEndOfLife: true
targetGround: true
explodeEffect:NONE

areaDamage: 0
areaRadius: 50
areaRadiusFromEdge: true
areaDamageNoFalloff: true

pushForce: 1
pushVelocity: 5

[projectile_0]
tags= T-projectile
directDamage: 0
life: 0
invisible: true

[projectile_1]
tags= T-projectile
directDamage: 0
life: 100
speed: 3
turnSpeed: 0.01
turnSpeedWhenNear: 30

deflectionPower: 2

drawType: 2
drawSize: 0.8
frame: 2

color: #B212B2

largeHitEffect: true

trailEffect: CUSTOM:光线
trailEffectRate: 4

wobbleAmplitude: 0.2
wobbleFrequency: 30

retargetingInFlight: true
retargetingInFlightSearchRange: 300

explodeOnEndOfLife: true
spawnProjectilesOnExplode: 4A
spawnProjectilesOnCreate: 1附

explodeEffect: CUSTOM:水晶浮现, CUSTOM:水晶波
explodeEffectOnShield: CUSTOM:水晶浮现, CUSTOM:水晶波

[projectile_1-2]
tags= T-projectile
directDamage: 0
life: 130
speed: 2.5
turnSpeed: 0.5
turnSpeedWhenNear: 30

deflectionPower: 2

drawType: 2
drawSize: 0.8
frame: 2

color: #B212B2
lightColor: #FF7FFF
lightSize: 0.6

largeHitEffect: true

trailEffect: CUSTOM:光线, CUSTOM:紫水晶光焰
trailEffectRate: 4

retargetingInFlight: true
retargetingInFlightSearchRange: 300

explodeOnEndOfLife: true
spawnProjectilesOnExplode: 1晶能(recursionLimit=1), 3, 4(offsetHeight=5)
spawnProjectilesOnCreate: 1附

#explodeEffect: CUSTOM:hitLightFlash
#explodeEffectOnShield: CUSTOM:hitLightFlash

[projectile_1附]
tags= T-projectile
life: 130
speed: 2.5
turnSpeed: 0.5
turnSpeedWhenNear: 30

directDamage: 0
deflectionPower: 0

retargetingInFlight: true
retargetingInFlightSearchRange: 300

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

color: #60E340E3

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_1晶能]
tags= T-projectile
explodeOnEndOfLife:true
life: 0
invisible: true
areaDamage: 0
areaRadius:	150
friendlyFire: true
deflectionPower: -1
explodeEffect: NONE
explodeEffectOnShield: NONE
mutatorX_ifUnitWithTags: 紫水晶柱α
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: energy=1

[projectile_2A]
tags= T-projectile
directDamage: 0
life: 20
invisible: true
speed: 0
turnSpeed: 0
deflectionPower: -1

effectOnCreate: CUSTOM:水晶显现
spawnProjectilesOnEndOfLife: 2c(recursionLimit=99)

[projectile_2c]
tags= T-projectile
directDamage: 0
life: 50
speed: 7
turnSpeed: 12
turnSpeedWhenNear: 60
image: 紫水晶柱α.png
drawSize: 0.6

deflectionPower: 2

largeHitEffect: true

lightColor: #BA4BBA
lightSize: 0.6

trailEffect: CUSTOM:紫水晶光焰
trailEffectRate: 3

wobbleAmplitude: 4
wobbleFrequency: 5s

targetGround: true
targetGroundSpread: 80
leadTargetingSpeedCalculation: 1

spawnProjectilesOnEndOfLife: 2c+(recursionLimit=99)

spawnUnit: 紫水晶柱α(alwayStartDirAtZero=true)

[projectile_2c+]
@copyFromSection: projectile_2c
spawnProjectilesOnEndOfLife: NONE
life: 500
turnSpeed: 25


[projectile_3]
tags= T-projectile
life: 3
speed: 0

explodeOnEndOfLife:true
spawnProjectilesOnExplode: 3(recursionLimit=65), 3伤(recursionLimit=65), 3A(recursionLimit=999, offsetRandomDir=181, spawnChance=0.025), 3A2(recursionLimit=999, offsetRandomDir=181, spawnChance=0.01), 2A(recursionLimit=1, xOffsetRelative=5, yOffsetRelative=5, offsetDir=90, offsetHeight=5), 2A(recursionLimit=1, xOffsetRelative=-5, yOffsetRelative=5, offsetDir=-90, offsetHeight=5)

directDamage: 1
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_directDamageMultiplier: 0.3

laserEffect: true

color: #78E340E3

explodeEffect: CUSTOM:水晶簇闪光, CUSTOM:紫水晶粒子
explodeEffectOnShield: CUSTOM:水晶簇闪光, CUSTOM:紫水晶粒子

[projectile_3伤]
tags= T-projectile
life: 10
instant: true
sweepOffsetFromTargetRadius: 0.6
invisible: true

directDamage: 1
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_directDamageMultiplier: 0.16

explodeEffect: CUSTOM:水晶簇闪光, CUSTOM:紫水晶散粒
explodeEffectOnShield: CUSTOM:水晶簇闪光, CUSTOM:紫水晶散粒

[projectile_3A]
tags= T-projectile
life: 16
speed: 6
turnSpeed: 0
invisible: true

explodeOnEndOfLife:true

directDamage: 0

targetGround: true
targetGroundSpread: 200

effectOnCreate: CUSTOM:紫水晶粒子颗
explodeEffect: CUSTOM:水晶簇闪光
explodeEffectOnShield: CUSTOM:水晶簇闪光

[projectile_4]
tags= T-projectile
life: 160
speed: 0
turnSpeed: 0
invisible: true

explodeOnEndOfLife:true
spawnProjectilesOnExplode: 4A

directDamage: 0
deflectionPower: -1

explodeEffect: CUSTOM:水晶浮现, CUSTOM:水晶波
explodeEffectOnShield: CUSTOM:水晶浮现, CUSTOM:水晶波

[projectile_4A]
tags= T-projectile
directDamage: 0
life: 20
speed: 0
turnSpeed: 0
invisible: true

explodeOnEndOfLife: true
deflectionPower: -1

spawnUnit: 紫水晶柱α(alwayStartDirAtZero=true)

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_3A2]
tags= T-projectile
speed: 8

spawnProjectilesOnExplode: 3B2(recursionLimit=999, offsetDir=180), 3附A2(recursionLimit=999)

@copyFromSection: projectile_3A

[projectile_3B]
tags= T-projectile
life: 20
speed: 0
invisible: true

explodeOnEndOfLife:true
spawnProjectilesOnExplode: 3c(recursionLimit=999), 3附c(recursionLimit=999)

directDamage: 0
deflectionPower: -1

retargetingInFlight: true
retargetingInFlightSearchRange: 300

effectOnCreate: CUSTOM:水晶显现
explodeEffect: CUSTOM:水晶簇闪光
explodeEffectOnShield: CUSTOM:水晶簇闪光

[projectile_3B2]
tags= T-projectile

retargetingInFlight: false
@copyFromSection: projectile_3B

[projectile_3附A]
tags= T-projectile
life: 20
speed: 0

directDamage: 0
deflectionPower: -1

retargetingInFlight: true
retargetingInFlightSearchRange: 300

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

color: #60E340E3

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_3附A2]
@copyFromSection: projectile_3附A
retargetingInFlight: false

[projectile_3c]
tags= T-projectile
directDamage: 100
life: 300
speed: 7
turnSpeed: 24
image: 紫水晶柱α.png
drawSize: 0.6

deflectionPower: 2

largeHitEffect: true

lightColor: #844DAB
lightSize: 0.6

trailEffect: CUSTOM:紫水晶光焰
trailEffectRate: 3

targetGround: true
targetGroundSpread: 30
leadTargetingSpeedCalculation: 1

spawnUnit: 紫水晶柱α(alwayStartDirAtZero=true)

[projectile_3附c]
tags= T-projectile
life: 120
speed: 7
turnSpeed: 24
deflectionPower: 0

@copyFromSection: projectile_3附A

retargetingInFlight: false

color: #AAE340E3

[effect_光线]
createWhenOffscreen: true
priority: low
image: 白光长线.png
life: 60
fadeOut: true
attachedToUnit: false
color: #A450A4
fadeInTime: 2
scaleFrom: 1.0
scaleTo: 1
alpha: 1.5
drawUnderUnits: true
yOffsetRelative: -16
atmospheric: true

[effect_水晶显现]
createWhenOffscreen: true
priority: veryhigh
image: 紫水晶柱α.png
life: 20
fadeInTime: 15
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.5
drawUnderUnits: true
alsoEmitEffectsOnDeath: CUSTOM:水晶波

[effect_水晶浮现]
@copyFromSection: effect_水晶显现
alwayStartDirAtZero: true
hOffset: -10
hSpeed: 0.25
alpha: 1


[effect_水晶波]
priority: low
stripIndex: shockwave
life: 20
color: #AB4DAB
scaleFrom: 0
scaleTo: 0.8
alpha: 0.8

[effect_紫水晶光焰]
priority: high

image: SHARED:light_50.png
life: 18
fadeOut: true
attachedToUnit: false
color: #E340E3

scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.4

xSpeedRelativeRandom: 1.0
ySpeedRelative: -0.8
ySpeedRelativeRandom: 1.0

drawUnderUnits: false

[effect_水晶簇闪光]
priority: high

image: SHARED:light_50.png
life: 3
color: #EB50EB

scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.5

[effect_紫水晶粒子]
priority: verylow

image: SHARED:light_50.png
life: 16
color: #A945A9

fadeOut: false
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.8

xSpeedRelativeRandom: 2.0
ySpeedRelativeRandom: 2.0

[effect_紫水晶粒子颗]
priority: high

image: SHARED:light_50.png
life: 16
color: #A945A9

fadeOut: false
scaleFrom: 0.6
scaleTo: 0.3
alpha: 0.9

[effect_紫水晶炮光]
priority: verylow

image: SHARED:light_50.png
life: 10
fadeInTime: 2
color: #EB50EB

fadeOut: false
scaleFrom: 0.3
scaleTo: 0.3
alpha: 0.8

yOffsetRelative: -15
ySpeedRelative: 1.8

[effect_紫水晶散粒]
attachedToUnit: false
spawnChance: 0.2
life: 50
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #EB50EB
fadeInTime: 5


[effect_shockwave_large]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 1.5
life: 30
color: #C2AFCC

[movement]
movementType: LAND
moveSpeed: 0.5
moveAccelerationSpeed: 0.03
moveDecelerationSpeed: 0.03

maxTurnSpeed: 1.4
turnAcceleration: 0.07

reverseSpeedPercentage: 0.9

moveSlidingMode :false
moveIgnoringBody:false





