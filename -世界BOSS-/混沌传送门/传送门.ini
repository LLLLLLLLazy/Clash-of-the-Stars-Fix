
[hiddenAction_基本单位设定]
@copyFrom_skipThisSection:true
autoTrigger: false

[core]



name: 亚空间传送门
displayText: 混沌锚点
displayDescription: -30分钟后降临大恶魔
maxHp:60000
mass:1000000
price:500000
radius:20
#showInEditor: false

isBuilding:true
experimental: true

footprint: 1,1,-1,-1
constructionFootprint: 1,1,-1,-1
energyMax:1800
energyStartingPercentage:0
energyRegen:0.0166667

fogOfWarSightRange: 50
disableAllUnitCollisions: true
canNotBeDirectlyAttacked: true
disableDeathOnZeroHp: true

createOnAggressiveTeam: true

unitsSpawnedOnDeath: 混沌水晶
effectOnDeath: CUSTOM:赤光, CUSTOM:赤放光2, CUSTOM:赤光散+*10

[hiddenAction_deviation]
autoTrigger: if numberOfUnitsInNeutralTeam(withTag="资源池", withinRange=20)>0
teleportTo: getOffsetRelative(x=rnd(-50, 50), y=rnd(-50, 50))

[graphics]
image:亚空间传送门.png
scaleImagesTo:60
drawLayer: experimentals
[attack]
canAttack: false
[movement]
movementType: AIR
targetHeight: 0
targetHeightDrift: 0

[hiddenAction_1]
autoTrigger:if self.energy(equalTo=1800)
deleteSelf:true
spawnUnits: 大恶魔, 漂浮灵控制(addResources=setFlag:2), 单位系统
addEnergy:-1800
addResources: setFlag=0
showMessageToAllPlayers:恶魔领主已降临

[hiddenAction_2]
autoTrigger:if self.energy>self.maxEnergy-60 and not self.hasFlag(id=1)
addResources: setFlag=1
showMessageToAllPlayers:你感受到了世界中心的波动......

[hiddenAction_3]
autoTrigger: if self.hp(empty=true) and not self.hasFlag(id=0)
alsoTriggerAction: 1
spawnEffects: CUSTOM:赤光, CUSTOM:赤放光2, CUSTOM:赤光散+*10

[effect_赤光]
priority: veryhigh
attachedToUnit: true
life: 200
alpha: 0.8
scaleFrom: 5
scaleTo: 0
image: SHARED:light_50.png
color: #FF4D4D
fadeOut: false
drawUnderUnits: false

[effect_赤放光2]
@copyFromSection: effect_赤光
fadeOut: true
life: 20
alpha: 0.7
scaleFrom: 1
scaleTo: 3

[effect_赤光散+]
@copyFromSection: effect_赤光
life: 80
alpha: 1.0
scaleFrom: 0.6
scaleTo: 0.2
color: #FF0000
fadeOut: true
atmospheric: true
xSpeedRelativeRandom: 2.5
ySpeedRelativeRandom: 2.5



[hiddenAction_赤血祭焰]
autoTrigger: if self.resource.赤血祭焰>=1
addResourcesWithLogic: hp=-self.maxHp*0.2*self.resource.赤血祭焰, 赤血祭焰=-self.resource.赤血祭焰

[resource_赤血祭焰]
displayName: 赤血祭焰