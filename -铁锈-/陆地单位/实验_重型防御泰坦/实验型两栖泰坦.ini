
[core]
name: 重型防御泰坦
tags: units, 重型机甲, 重型防御泰坦
price: 178000
maxHp: 12000
mass: 150000

radius: 40

armour: 18
armourMinDamageToKeep: 18

generation_credits:	18
borrowResourcesWhileAlive: 经济=-${core.generation_credits}

fogOfWarSightRange: 26

buildSpeed: 0.0001

experimental: true
availableInDemo: true

builtFrom_1_name: experimentalLandfactory
builtFrom_1_pos: 7

techLevel: 1

displayDescription: -非常非常全副武装 \n -携带四个可维修与激光拦截的浮游机械 \n -散裂火炮&加特林机炮 \n -能越过水与山崖 \n -冷离子:使目标移速降低25% \n -少量资源产出

#selfRegenRate: 0.2

energyMax: 40
energyRegen: 0.016

maxShield: 8000
shieldRegen: 0.8

numBitsOnDeath: 60
explodeTypeOnDeath: largeUnit

transportSlotsNeeded: 14

[global_resource_经济]
hidden: true

[action_冷离子]
isActive: false
text: 冷离子
description: -冷离子攻击会将目标移速-25%
pos: 1
displayType: infoOnly
buildSpeed: 0s
addResources: hp=1

[attachment_1]
x: -50
y: -50
canAttack: true
addTransportedUnits: true
keepAliveWhenParentDies: false
onCreateSpawnUnitOf: 浮游机械
canBeAttackedAndDamaged: false
[attachment_2]
x: 50
y: -50
@copyFromSection: attachment_1
[attachment_3]
x: -50
y: 50
@copyFromSection: attachment_1
[attachment_4]
x: 50
y: 50
@copyFromSection: attachment_1

[action_1]
text: 导弹发射
description: -向移动的方向400距离发射8发导弹轰炸
buildSpeed: 1.2s
price: 6000, energy=40
allowMultipleInQueue: false
whenBuilding_cannotMove: true
whenBuilding_triggerAction: 导弹标记, 延时属性更新
whenBuilding_temporarilyConvertTo: 重型防御泰坦[预备]
whenBuilding_playAnimation: 开板
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}

fireTurretXAtGround_withProjectile: 4
fireTurretXAtGround: 导弹2
fireTurretXAtGround_withOffset: 9, 400
#alsoQueueAction: 导弹3, 导弹1, 导弹2, 导弹3, 导弹1,  导弹1, 导弹3, 导弹2, 导弹2, 导弹1, 导弹3,  导弹1, 导弹2, 导弹3, 导弹3, 导弹2, 导弹1
alsoQueueAction: 导弹1, 导弹2, 导弹1, 导弹2, 导弹1, 导弹2, 导弹1, 导弹2, 

[hiddenAction_导弹1]
buildSpeed: 0.15s
highPriorityQueue: true
whenBuilding_cannotMove: true
whenBuilding_temporarilyConvertTo: 重型防御泰坦[预备]
whenBuilding_playAnimation: 开板
whenBuilding_triggerAction: 延时属性更新
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}
fireTurretXAtGround_withProjectile: 4
fireTurretXAtGround: 导弹1
fireTurretXAtGround_withOffset: -9, 400

[hiddenAction_导弹2]
@copyFromSection: hiddenAction_导弹1
fireTurretXAtGround: 导弹2
fireTurretXAtGround_withOffset: 9, 400

#[hiddenAction_导弹3]
#@copyFromSection: hiddenAction_导弹1
#fireTurretXAtGround: 导弹3
#fireTurretXAtGround_withOffset: 9, 400


[hiddenAction_导弹标记]
alsoQueueAction: 导弹标2, 导弹标1

[hiddenAction_导弹标1]
buildSpeed: 0.2s
highPriorityQueue: true
whenBuilding_cannotMove: true
whenBuilding_temporarilyConvertTo: 重型防御泰坦[预备]
whenBuilding_playAnimation: 开板
whenBuilding_triggerAction: 延时属性更新
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}
fireTurretXAtGround_withProjectile: 4标
fireTurretXAtGround: 导弹点1
fireTurretXAtGround_withOffset: -14, 400

#[hiddenAction_导弹标2]
#@copyFromSection: hiddenAction_导弹标1
#fireTurretXAtGround_withOffset: 0, 400

[hiddenAction_导弹标2]
@copyFromSection: hiddenAction_导弹标1
fireTurretXAtGround_withOffset: 14, 400

[hiddenAction_延时属性更新]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}


[arm_1]
x: -9
y: 21.2
image_end: 泰坦导弹发射器(左).png

[arm_2]
x: 9
y: 21.2
image_end: 泰坦导弹发射器(右).png

[arm_3]
x: -9
y: 21.2
image_end: 挡板.png

[arm_4]
x: 9
y: 21.2
image_end: 挡板.png

[animation_开板]
blendIn: 0s
blendOut: 1.5s
arm3_0.7s: {x:-6, y:0}
arm3_0.8s: {x:-6, y:0}
arm3_1.5s: {x:-6, y:-11}
arm3_3s: {x:-6, y:-11}

arm4_0.7s: {x:6, y:0}
arm4_0.8s: {x:6, y:0}
arm4_1.5s: {x:6, y:-11}
arm4_3s: {x:6, y:-11}

[graphics]
image: 重型防御泰坦.png
image_turret: 重型防御泰坦.png

scaleImagesTo: 100
scaleTurretImagesTo: 100

image_shadow: AUTO
shadowOffsetX: 3
shadowOffsetY: 3

teamColorsOnTurret: true

lock_body_rotation_with_main_turret: true
lock_leg_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

turretTurnSpeed: 1.5

maxAttackRange: 360
shootDelay: 10

turretRotateWithBody: true
turretMultiTargeting: true

aimOffsetSpread: 0.2

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_4.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_4]
#机枪
x: 30
y: 0
barrelX: 0
barrelY: 48
attachedTo: 1

turnSpeed: 1.0
turnSpeedAcceleration: 0.2

projectile: 1

shoot_sound: tank_firing
shoot_sound_vol: 0.4
shoot_flame: smoke

shouldResetTurret: true
image: p.png

recoilOffset: -2
recoilOutTime: 3
recoilReturnTime: 8

limitingRange: 260

warmup: 600
warmupCallDownRate: 1
warmupNoReset: true
warmupShootDelayTransfer: 3

[projectile_1]
tags= T-projectile
directDamage: 30
armourIgnoreAmount: 10
largeHitEffect: true
life: 150
speed: 7
frame: 5
drawSize: 1.2

lightColor: #ffe92b
lightSize: 0.4

[turret_3]
#火炮
x: -30
attachedTo: 1
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false
y: 0
turnSpeed: 0.25
image: g.png
projectile: 3
turnSpeedAcceleration: 0.25
shoot_sound: large_gun_fire2
shoot_sound_vol: 0.5
shoot_flame: large
barrelX: 0
barrelY: 50
delay: 2.5s
shouldResetTurret: true
recoilOffset: -8
recoilReturnTime: 60
recoilOutTime: 5
limitingRange: 320

[projectile_3]
tags= T-projectile
areaDamage: 270
areaRadius: 65
largeHitEffect: true
trailEffect: CUSTOM:projectileTrail小小
trailEffectRate: 4
life: 150
speed: 4
frame: 9
drawSize: 1.2
instant: false
lightColor: #ffff925c
lightSize: 0.6
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
lightCastOnGround: true
spawnProjectilesOnExplode: 3-2*5, 爆炸效果
explodeEffect: CUSTOM:projectileTrail小*4

[projectile_3-2]
tags= T-projectile
areaDamage: 40
areaRadius: 55
largeHitEffect: true
trailEffect: true
life: 150
speed: 4
frame: 9
drawSize: 0.6
instant: false
lightColor: #ffff925c
lightSize: 0.5
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
targetGround: true
targetGroundSpread: 50
lightCastOnGround: true
spawnProjectilesOnExplode: 3-3*2, 爆炸效果
explodeEffect: CUSTOM:projectileTrail小*2

[projectile_3-3]
tags= T-projectile
areaDamage: 25
areaRadius: 45
largeHitEffect: true
trailEffect: true
life: 150
speed: 4
frame: 9
drawSize: 0.4
instant: false
lightColor: #ffff925c
lightSize: 0.4
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
targetGround: true
targetGroundSpread: 30
lightCastOnGround: true
spawnProjectilesOnExplode: 爆炸效果
explodeEffect: CUSTOM:projectileTrail小*1

[projectile_爆炸效果]
tags= T-projectile
directDamage: 0
largeHitEffect: true
life: 0
explodeOnEndOfLife: true
explodeEffectOnShield: NONE

[turret_1]
x: 0
canAttack: false
y: 0
turnSpeedAcceleration: 0.4

[turret_2]
#等离子
attachedTo: 1
x: 0
canAttack: true
y: -9
projectile: 2
turnSpeedAcceleration: 0.5
shoot_sound: tank_firing
shoot_sound_vol: 1.5
shoot_flame: CUSTOM:iceShockwave
turnSpeed: 0.45
barrelX: 8
barrelY: 47
barrelOffsetX_onOddShots: -16
delay: 40
image: n.png
recoilOffset: -5
recoilOutTime: 5
recoilReturnTime: 30

[projectile_2]
tags= T-projectile
directDamage: 150

largeHitEffect: true
life: 150
speed: 8
targetSpeed: 11
targetSpeedAcceleration: 0.05
frame: 11
drawSize: 1.1
#trailEffect: CUSTOM:projectileTrail
trailEffect: CUSTOM:ice小
trailEffectRate: 1
instant: false
lightColor: #FFccCCEE
lightSize: 0.5
explodeEffect: CUSTOM:ice, CUSTOM:lightSlowFade

spawnUnit: 冷离子


[turret_导弹1]
x: -9
y: 21
canShoot: false
shoot_sound: missile_fire
shoot_sound_vol: 1.5
shoot_flame: large, CUSTOM:发射烟*3
invisible: true

[turret_导弹2]
x: 9
y: 21
copyFrom: 导弹1

[turret_导弹点1]
x: 0
y: 21
canShoot: false
invisible: true

[projectile_4]
tags= T-projectile
areaDamage: 400
areaRadius: 70
life: 100
speed: 2
targetSpeed: 10
targetSpeedAcceleration: 0.1
color: #ffff00
image: 导弹.png
drawSize: 0.75
deflectionPower: -1
trailEffect: CUSTOM:projectileTrail, CUSTOM:projectileTrail2, CUSTOM:projectileTrail3
trailEffectRate: 2
effectOnCreate: CUSTOM:projectileLight
explodeEffect: CUSTOM:explodeLarge, CUSTOM:橙冲击波, CUSTOM:爆烟*5
explodeEffectOnShield: CUSTOM:explodeLarge, CUSTOM:橙冲击波, CUSTOM:爆烟*5
lightColor: #FFAA00
lightSize: 1
explodeOnEndOfLife: true
retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 30
targetGroundSpread: 20

[projectile_4标]
tags= T-projectile
areaDamage: 0
life: 50
instant: true
explodeEffect: CUSTOM:红标
explodeEffectOnShield: CUSTOM:红标


[effect_projectileTrail小]
#烟雾
stripIndex: effects
frameIndex: 0

life: 120
fadeOut: true
attachedToUnit: false
color: #fcbe03
fadeInTime: 3
scaleFrom: 1.8
scaleTo: 4
alpha: 0.3
drawUnderUnits:false
#ySpeedRelative:-1
atmospheric:true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[effect_projectileTrail小小]
#烟雾
stripIndex: effects
frameIndex: 0

life: 120
fadeOut: true
attachedToUnit: false
color: #fcbe03
fadeInTime: 3
scaleFrom: 1
scaleTo: 2.5
alpha: 0.3
drawUnderUnits:false
#ySpeedRelative:-1
atmospheric:true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2



[effect_ice]
life: 56

#hOffset: 0
#dirOffset: 0

#fadeInTime: 0
#fadeOut: false

#attachedToUnit: true

scaleFrom: 1.8
scaleTo: 1.8

image: ice1.png
total_frames: 13
animateFrameStart: 0
animateFrameEnd: 12
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_ice小]
life: 33

#hOffset: 0
#dirOffset: 0

#fadeInTime: 0
#fadeOut: false

attachedToUnit: false

#scaleFrom: 1.4
#scaleTo: 1.4

image: ice1.png
total_frames: 13
animateFrameStart: 5
animateFrameEnd: 12
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_iceShockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2.0
color: #63e6e8

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 70
fadeOut: true
attachedToUnit: true
color: #A0FEFF
scaleFrom: 0.8
scaleTo: 1.6
alpha: 1
drawUnderUnits:false



[effect_projectileLight]
priority: veryhigh

image: SHARED:light_50.png
life: 50
fadeOut: true
attachedToUnit: true
color: #FAC014
fadeInTime: 2
scaleFrom: 1.2
scaleTo: 1
alpha: 1
drawUnderUnits: false
liveAfterAttachedDies: false

[effect_projectileTrail]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: false
color: #ffe92b
fadeInTime: 2
scaleFrom: 0.5
scaleTo: 0.3
alpha: 0.8
drawUnderUnits:true

[effect_projectileTrail2]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #ffff925c
fadeInTime: 2
scaleFrom: 0.9
scaleTo: 0.5
alpha: 0.6
drawUnderUnits:true
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1

[effect_projectileTrail3]
priority: low
#烟雾
stripIndex: effects
frameIndex: 0
life: 30
fadeOut: true
attachedToUnit: false
fadeInTime: 3
scaleFrom: 0.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false
atmospheric:true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.3
ySpeedAbsoluteRandom: 0.3
xOffsetRelativeRandom: 5
yOffsetRelativeRandom: 5

[effect_发射烟]
stripIndex: effects
frameIndex: 0
life: 30
fadeOut: true
attachedToUnit: false
fadeInTime: 3
scaleFrom: 1
scaleTo: 1.5
alpha: 0.5
drawUnderUnits: false
atmospheric: true

dirOffsetRandom: 180

xSpeedRelativeRandom: 1
ySpeedRelativeRandom: 1
ySpeedRelative: -2

[effect_explodeLarge]
priority: veryhigh
color: #E8CABA
life: 30
attachedToUnit: true
stripIndex: explode_big2
scaleFrom: 2
scaleTo: 2
alpha: 0.8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
alsoPlaySound: missile_hit

[effect_橙冲击波]
priority: veryhigh
color: #E89263
life: 35
attachedToUnit: true
stripIndex: shockwave_large
scaleFrom: 0
scaleTo: 1.5
alpha: 1
fadeOut: true

[effect_爆烟]
stripIndex: effects
frameIndex: 0
life: 70
fadeOut: true
attachedToUnit: false
color: #FFB92D
fadeInTime: 10
scaleFrom: 2
scaleTo: 3
alpha: 0.7
drawUnderUnits: false
ySpeedRelative: -0.4
atmospheric: true

dirOffsetRandom: 180

shadow: true

xSpeedAbsoluteRandom: 1
ySpeedAbsoluteRandom: 1

[effect_红标]
priority: veryhigh
life: 120
attachedToUnit: true
liveAfterAttachedDies: true
image: icon_红标.png
scaleFrom: 1.3
scaleTo: 1
alpha: 10
fadeOut: true
dirSpeed: 3

[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.35
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.17

maxTurnSpeed: 1.15
turnAcceleration: 0.4

moveIgnoringBody: true

[leg_1]
x: 20
y: 0
moveSpeed: 1
moveWarmUp: 20
attach_x: 15
attach_y: 0
image_leg: 原版的.png
rotateSpeed: 2
heightSpeed: 0.2
resetAngle: 0.00000001
image_foot: 脚5.png
dust_effect: true
holdDisMin: 8
holdDisMax: 20
estimatingPositionMultiplier: 1.1

[leg_2]
x: -20
y: 0
attach_x: -15
attach_y: 0
copyFrom: 1