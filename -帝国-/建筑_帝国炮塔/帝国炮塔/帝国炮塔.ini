
[core]
name: 帝国炮塔
displayText: 帝国炮塔
displayDescription: -攻击地面单位 \n -仅攻击单个目标 \n -浮动装甲 \n -防守性价比低

class: CustomUnitMetadata
price: 2300
maxHp: 2000
mass: 9000
tags: units

armour: 5
armourMinDamageToKeep: 5

footprint: 0,0,1,1
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

techLevel: 1
buildSpeed: 30s

radius: 19
#displayRadius: 25

isBio: false
isBuilding: true

autoTriggerCooldownTime: 0.1s

[action_浮动装甲]
isVisible: true
isActive: false
id: ${section.text}
text: 浮动装甲
description: -根据受到的单次伤害与每秒伤害进行减伤\n -受到伤害越高，减伤越高\n -无法减伤超过当前血量的单次伤害
pos: 0
iconImage: 浮甲icon.png
displayType: infoOnlyStockpile
buildSpeed: 0s

[action_upgrade_双管]
convertTo: 帝国双管炮塔
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  2800
text: 升级 - 双管
description: -更快的攻击速度 \n -更高的血量
descriptionAddUnitStats: ${section.convertTo}

displayType: Upgrade
buildSpeed: 0.001

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_upgrade_剑]
convertTo: 帝国剑塔
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  3700
text: 升级 - 剑
description: -短距离穿刺激光 \n -更高的血量
descriptionAddUnitStats: ${section.convertTo}

displayType: Upgrade
buildSpeed: 0.0009

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_upgrade_火炮]
convertTo: 帝国火炮塔
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  6700
text: 升级 - 火炮
description: -很远的射程 \n -可以对目标身后造成多段爆炸 \n -开火间隔长
descriptionAddUnitStats: ${section.convertTo}

displayType: Upgrade
buildSpeed: 0.0003

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_upgrade_机枪]
convertTo: 帝国机枪塔
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  4000
text: 升级 - 机枪
description: -短暂预热后以很快的速度攻击 \n -可以攻击到空中 \n -射程略微提升
descriptionAddUnitStats: ${section.convertTo}

displayType: Upgrade
buildSpeed: 0.0006

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF


[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_浮动装甲减伤]
@copyFromSection: template_浮动装甲减伤

[hiddenAction_浮动装甲复损]
autoTrigger: if self.resource.受损量>0
addResourcesWithLogic: 受损量=-select(self.resource.受损量>1, self.resource.受损量/2, self.resource.受损量)

[resource_受击前血量]
hidden: true

[resource_受到伤害]
hidden: true

[resource_受损量]
displayName: 受损量

[graphics]
total_frames: 1

image:        帝国炮塔底座.png
image_wreak:  帝国炮塔残骸.png
image_turret: 帝国炮塔.png

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 26
turretTurnSpeed: 4

maxAttackRange: 200
shootDelay: 200

[turret_1]
x: 0
y: 0
attachedTo: 2
slave: true

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:large_gun_fire2
shoot_sound_vol:0.25
shoot_flame:CUSTOM:开火*3

warmup:20
warmupStartEffect: CUSTOM:聚能*5

image: 帝国炮管.png

chargeEffectImage: 黑球.png

recoilOffset: -3
recoilOutTime: 3
recoilReturnTime: 17

idleSweepAngle: 20
idleSweepDelay: 210
idleSweepSpeed: 0.2

[turret_1A]
invisible: true
x: 0
y: 0
attachedTo: 2
slave: true

canShoot: false

turnSpeed: 0
turnSpeedAcceleration: 0

[turret_2]
x: 0
y: 6

canShoot: false

turnSpeed: 4.0
turnSpeedAcceleration: 0.3
turnSpeedDeceleration: 0.5

shouldResetTurret: false

recoilOffset: -1
recoilOutTime: 3
recoilReturnTime: 17

idleSweepAngle: 30
idleSweepDelay: 250
idleSweepSpeed: 0.1

[projectile_1]
tags= T-projectile
directDamage: 390
life: 100
speed: 10

image: 黑球.png

lightColor: #000000
lightSize: 0.6

deflectionPower: 2

trailEffect: CUSTOM:黑球
trailEffectRate: 1

explodeEffect:CUSTOM:大爆炸,CUSTOM:冲击波,CUSTOM:光
explodeEffectOnShield:CUSTOM:光*2,CUSTOM:冲击波

[effect_开火]
stripIndex: effects
frameIndex: 0
priority:low

life: 35
fadeOut: true
attachedToUnit: false
color: #000000
fadeInTime:5
hSpeed: 0.3
scaleFrom: 0.5
scaleTo: 2.0
alpha: 0.3
drawUnderUnits:false
xOffsetRelativeRandom:4
xSpeedRelativeRandom:0.2
ySpeedRelative:1
ySpeedRelativeRandom:0.2

shadow: true
atmospheric: true

[effect_聚能]
image: 黑球聚.png
life: 20
fadeOut: false
fadeInTime: 15
attachedToUnit: true
scaleFrom: 1.0
scaleTo: 0.0
alpha: 1.0
dirOffsetRandom:180
drawUnderUnits:false

[effect_黑球]
priority:verylow
image: 黑球.png
life: 20
fadeOut: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 0.6
alpha: 1.0
drawUnderUnits: false

[effect_大爆炸]
priority: veryhigh
life: 30
attachedToUnit: true
image: explode.png
scaleFrom: 1.5
scaleTo: 1.5
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_冲击波]
drawType: displacement
stripIndex: shockwave
life: 30
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0
scaleTo: 1.8
alpha: 0.9
alsoPlaySound:小爆炸.ogg:0.4

[effect_光]
priority:high

image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #000000

scaleFrom: 1.0
scaleTo: 1.0
alpha: 0.7
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

