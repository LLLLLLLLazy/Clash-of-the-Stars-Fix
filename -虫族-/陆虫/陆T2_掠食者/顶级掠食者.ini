
[core]
copyFrom: 掠食者.ini
name: 顶级掠食者
displayDescription: -释放魔导电 \n -攻击地面与空中 \n -对地开火需要消耗能量 \n “优秀的猎手会将代价降到最低”
price: credits=6500, 腐蚀=${corrode}
maxHp: 1200
mass: 12000

maxShield: 700
shieldRegen: 0.25

techLevel: 3

fogOfWarSightRange: 18

shieldRenderRadius: 24

tags: units, 虫族, 中型虫+, 顶级掠食者, 固定射击

overrideAndReplace: NONE

selfRegenRate: 0.25

unitsSpawnedOnDeath: 资源返还(addResources=ammo:1625|energy:200)

[hiddenAction_腐蚀价格]
@global corrode: 800
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 顶级掠食者[亡灵]

[action_energyRegen]
isActive: false
isGuiBlinking: if self.hp(full=true)
autoTrigger: if self.hp(full=true)
addResourcesWithLogic: energy=0.1 * select(self.hasParent(withTag="池虫"), 2.5, 0)
id: ${section.text}
text: 袭掠
description: -当血量为满时,能量加倍恢复
displayType: infoOnly
buildSpeed: 0
pos: 0.1

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[action_Upgrade]
@copyFrom_skipThisSection:true

[action_Upgrade2]
@copyFrom_skipThisSection:true

[hiddenAction_自动腐蚀]
@copyFrom_skipThisSection:true

[hiddenAction_自动腐蚀2]
@copyFrom_skipThisSection:true

[graphics]
image:        顶级掠食者.png



[turret_1]
shoot_sound: lighting_burst
shoot_sound_vol: 0.2
shoot_light: #63e6e8

[projectile_1]
@copyFrom_skipThisSection:true
directDamage: 55
life: 80
speed: 5
targetSpeed: 8

lightingEffect: true
largeHitEffect: true

shieldDefectionMultiplier: 0.1
buildingDamageMultiplier: 0.5

wobbleAmplitude: 2.5
wobbleFrequency: 2s

frame: 6

lightColor: #63e6e8
lightSize: 0.6

deflectionPower: -1


[ai]
upgradedFrom: 掠食者

[hiddenAction_AI走位]
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
alsoTriggerAction: AI随机侧移
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true

[hiddenAction_AI随机侧移]
requireConditional: if not attachment.getOffsetRelative(y=-40).isOverPassableTile(type='${movement.movementType}')
clearActiveWaypoint: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 2s
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=30, x=rnd(-200, 200))

[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(lessThan=400))
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and (self.hp(full=true))
addResources: unsetFlag=1

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')