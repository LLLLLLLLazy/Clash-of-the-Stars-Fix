
[core]
name:行星级
displayText: 行星级
displayDescription: -无形无息的暗物质结界庇护其身 \n -帝国超合金装甲,有效吸收伤害 \n -六门星流机炮 \n -两门陨星炮 \n -破碎空间 裂位主炮 \n -无视护甲 \n -帝国的敌人皆会化为虚无,坠落之行星亦然带来终结
class: CustomUnitMetadata
price:850000
maxHp:30000
mass:600000
tags: units, 行星级
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 行星级

armour:50
armourMinDamageToKeep:50

selfRegenRate:0.5

radius:110
shieldRenderRadius:200

techLevel:2
buildSpeed:150s
experimental: true

maxShield:30000
shieldRegen:1
shieldDisplayOnlyDeflection:true
shieldDeflectionDisplayRate:1

transportSlotsNeeded:50

fogOfWarSightRange:50
explodeTypeOnDeath:largeUnit

#maxTransportingUnits:20

#transportUnitsCanUnloadUnits:true
#transportUnitsRequireMovementType: LAND,AIR,HOVER,OVER_CLIFF,OVER_CLIFF_WATER

numBitsOnDeath: 0
explodeOnDeath: false
hideScorchMark: false

effectOnDeath:CUSTOM:黑2*1, 虚无缥缈
fireTurretXAtSelfOnDeath:magic

autoTriggerCooldownTime: 0.1s

[hiddenAction_create]
autoTrigger: if not self.hasFlag(id=1)
spawnUnits: 小行星坠落(alwayStartDirAtZero=true, offsetRandomDir=30)
deleteSelf:true

[hiddenAction_生成完成]
autoTriggerOnEvent: completeAndActive
requireConditional: if self.hasFlag(id=1) and customTarget1.tags(includes='临时生成器')
takeResources: setFlag=0
takeResources_discardCollected: true
takeResources_includeReference: customTarget1


[action_mainAttack]
displayType: action
iconImage: beam1.png
iconExtraImage: 黑洞.png
id: ${section.text}
text: [裂位]
description: -主炮攻击指示点 \n -让敌人陷落于破碎空间 \n -不能瞄准到后方的敌人 \n -某些超凡存在能够无视其影响
buildSpeed: 0s
pos: 0
addActionCooldownTime: 2s
fireTurretXAtGround: AttackDictate
fireTurretXAtGround_onlyOverPassableTileOf: AIR
fireTurretXAtGround_showGuideDecals: targetGuide
resetCustomTimer: true

[hiddenAction_主炮冷却]
addActionCooldownTime: 18s
addActionCooldownApplyToActions: mainAttack

[hiddenAction_裂位之隙]
autoTrigger: if numberOfUnitsInTeam(withTag="黑障", greaterThan=0, withinRange=320)
convertTo: 行星级[黑障]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setResourcesWithLogic: 免疫渊海=1

[hiddenAction_虚无化]
autoTrigger: if numberOfUnitsInTeam(withTag="黑障", greaterThan=0, withinRange=440) and numberOfUnitsInTeam(withTag="黑障", lessThan=1, withinRange=320)
convertTo: 行星级[虚无]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setResourcesWithLogic: 免疫渊海=0

[decal_targetGuide]
alwaysStartDirAtZero: true
alwaysStartHeightAtZero: true
layer: inactive

image: 黑障.png

@define area_guide_size: 489

imageScale: 320/${area_guide_size /2}
alpha: 0.2
color: #000000

[graphics]
image:行星级.png
image_turret:行星终结者.png
#image_shield: 可乐.png
image_shield:黑障.png

scaleImagesTo:150
scaleTurretImagesTo:60

image_shadow:AUTO

disableLowHpFire: false
disableLowHpSmoke: false
showTransportBar: false

[attack]
canAttack:true
canAttackLandUnits:true
canAttackFlyingUnits:true
canAttackUnderwaterUnits:false

turretTurnSpeed:1.5

maxAttackRange:650

turretRotateWithBody:true
turretMultiTargeting:true

[turret_AttackDictate]
x: 0
y: 0
canShoot: false
invisible: true
projectile: AttackDictate

[projectile_AttackDictate]
tags= T-projectile
directDamage: 0
invisible: true
life: 100
instant: true
spawnUnit: 行星主炮指示
explodeEffect: NONE

[turret_1Aiming]
x: 0
y: 0
delay: 10
invisible: true
projectile: 1Aiming
turnSpeed: 99
canOnlyAttackUnitsWithTags: 行星主炮指示

[projectile_1Aiming]
tags= T-projectile
directDamage: 0
invisible: true
life: 100
instant: true
explodeEffect: NONE
mutatorX_ifUnitWithTags: 行星主炮指示
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: setFlag=1

[turret_1]
#等离子炮*4
x:40
y:-60
barrelY:60
idleDir:30
image:行星炮台A.png
delay:10
warmup:20
warmupNoReset:true
warmupCallDownRate:0.2
#chargeEffectImage:SHARED:lighting_charge.png
chargeEffectImage: laser_tank_charge.png

canOnlyAttackUnitsWithoutTags: 行星主炮指示

aimOffsetSpread: 0.2
projectile:1
limitingRange:550

shoot_sound:plasma_fire
shoot_sound_vol:0.05

[turret_2]
x:-40
y:-60
idleDir:-30
copyFrom:1

[turret_3]
x:-40
y:60
idleDir:-30
copyFrom:1

[turret_4]
x:40
y:60
idleDir:30
copyFrom:1

[turret_5]
x:-40
y:0
idleDir:-30
copyFrom:1

[turret_6]
x:40
y:0
idleDir:30
copyFrom:1

[projectile_1]
tags= T-projectile
armourIgnoreAmount: 9999
directDamage: 30
life: 200
speed: 15

color:#ff0000
drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:1

explodeEffect: CUSTOM:projectilePassThough, smallExplosion, CUSTOM:hitLightFlash
effectOnCreate: CUSTOM:projectileLight

spawnProjectilesOnExplode:1附(maxSpawnLimit=1,offsetRandomXY=200)

[projectile_1附]
tags= T-projectile
armourIgnoreAmount: 9999
directDamage: 30
life: 200
speed: 15

color:#ff0000
drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2

explodeEffect: CUSTOM:projectilePassThough, smallExplosion, CUSTOM:hitLightFlash
effectOnCreate: CUSTOM:projectileLight

retargetingInFlight: true
#重新瞄准

[turret_7]
#激光炮
x:-24
y:120
barrelY:24
image:行星炮台B.png
delay:600
projectile:2
#canAttackFlyingUnits:false

canOnlyAttackUnitsWithoutTags: 行星主炮指示

recoilOffset: -10
recoilOutTime: 5
recoilReturnTime: 45

shoot_sound:cannon_firing
shoot_sound_vol:1.5
shoot_flame:CUSTOM:projectilePassThough2*8
shoot_light:#ff0000

[turret_8]
x:24
y:120
copyFrom:7
linkDelayWithTurret:7
warmup:300

[projectile_2]
tags= T-projectile
image: 行星坠落.png
life: 400
speed: 7

areaDamage: 5400

areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways:true

alwaysVisibleInFog: true

targetGround: true

drawSize: 0.5

areaRadius: 250
areaExpandTime:50
deflectionPower:-1

shouldRevealFog:true
nukeWeapon:true
friendlyFire:true

lightColor: #FFE735
lightSize: 0.5

trailEffect: CUSTOM:流星
trailEffectRate: 1

[effect_流星]
priority:high
stripIndex: effects
frameIndex: 0

life: 100
fadeOut: true
attachedToUnit: false
color: #F08927
fadeInTime:5
scaleFrom: 0.9
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false
#ySpeedRelative:-1
atmospheric:true

dirOffsetRandom:180

shadow:true

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[turret_主炮]
x:0
y:-150
barrelY:120

shoot_sound:plasma_fire
shoot_sound_vol:1.5
shoot_flame:CUSTOM:散华*8,CUSTOM:噬光*1,CUSTOM:大暗幕*1,CUSTOM:黑团*1
#shoot_light:#000000

warmupStartEffect:CUSTOM:暗幕*1

canOnlyAttackUnitsWithTags: 行星主炮指示
canAttackCondition: if self.customTimer<=5

onShoot_triggerActions: 主炮冷却

turnSpeed:0.5

projectile:主炮

recoilOffset:-20
recoilOutTime:5
recoilReturnTime:200

warmup:2s
delay:18s
warmupCallDownRate:0.3

[projectile_主炮]
tags= T-projectile
directDamage: 0
life: 0
speed: 0

deflectionPower: -1

spawnProjectilesOnEndOfLife: 主炮1, 黑障

[projectile_主炮1]
tags= T-projectile
directDamage:0
areaDamage:0
areaRadius:320
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
life:60
largeHitEffect:true
instant:true
laserEffect:true
#color:#000000
explodeEffect: NONE
explodeEffectOnShield: NONE

beamImage: beam1.png

[projectile_黑障]
tags= T-projectile
directDamage:0
areaDamage:0
areaRadius:320
areaDamageNoFalloff:true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
life:50
speed:100
deflectionPower: -1
invisible: true
explodeEffect: NONE
explodeEffectOnShield: NONE
spawnProjectilesOnExplode: 黑障1

pushForce: 9999
pushVelocity: 30

#mutatorX_ifUnitWithTags: 行星主炮指示
#mutatorX_directDamageMultiplier: 0
#mutatorX_addResourcesDirectHit: setFlag=0

mutatorX_ifUnitWithoutTags:虚无
mutatorX_areaDamageMultiplier:0
mutatorX_addResourcesAreaHit:虚空=1

[projectile_黑障1]
tags= T-projectile
areaDamage:5000
areaRadius:320
areaDamageNoFalloff:true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
life:30
speed:0
targetGround:true
explodeOnEndOfLife:true
deflectionPower: -1
invisible: true
explodeEffect: NONE
explodeEffectOnShield: NONE
spawnUnit: 黑障

[turret_magic]
x: 0
y: 0
invisible: true
canShoot: false
projectile: 黑洞

[projectile_黑洞]
tags= T-projectile
armourIgnoreAmount:1000
areaDamage:0
areaRadius:600
areaRadiusFromEdge:true
areaDamageNoFalloff:true
friendlyFire: true
life: 0
explodeOnEndOfLife:true
deflectionPower: -1
explodeEffect:CUSTOM:黑
explodeEffectOnShield:CUSTOM:黑
spawnProjectilesOnExplode: 黑黑
mutatorX_ifUnitWithoutTags: 单位系统
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: 虚空=1
areaHitAirAndLandAtSameTime:true
areaHitUnderwaterAlways:true

[projectile_黑黑]
tags= T-projectile
armourIgnoreAmount:2147483647
areaDamage:2147483647
areaRadius:600
areaExpandTime:10
areaRadiusFromEdge:true
areaDamageNoFalloff:true
#buildingDamageMultiplier:0
shieldDamageMultiplier:1
shieldDefectionMultiplier:0
friendlyFire: true
life:0
explodeOnEndOfLife:true
deflectionPower: -1
explodeEffect:CUSTOM:黑
explodeEffectOnShield:CUSTOM:黑
areaHitAirAndLandAtSameTime:true
areaHitUnderwaterAlways:true
delayedStartTimer: 70

[animation_idle]
onActions : idle, move

arm1_0s:{alpha:0.1}
arm1_1s:{alpha:0.1}
arm1_2s:{alpha:0.2}
arm1_3s:{alpha:0.3}
arm1_4s:{alpha:0.4}
arm1_5s:{alpha:0.3}
arm1_6s:{alpha:0.2}
arm1_7s:{alpha:0.1}

KeyframeTimeScale: 0.5

[arm_1]
x: 0
y: 0

image_end: 黑化.png

drawOverBody: true

[movement]
movementType:AIR
moveSpeed:0.5
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.05

maxTurnSpeed:0.3
turnAcceleration: 0.005

targetHeight: 50
targetHeightDrift: 0

reverseSpeedPercentage: 0

#moveSlidingMode :true
#moveIgnoringBody:false

#slowDeathFall:true

#[ai]
#暂无

[effect_lightSlowFade]
image:SHARED:light_50.png
life:40
fadeOut:true
attachedToUnit:true
color:#ffffff
scaleFrom:0.7
scaleTo:0.7
alpha:0.4
drawUnderUnits:true

[effect_projectileTrail]
image:SHARED:light_50.png
life:20
fadeOut:true
attachedToUnit:false
color:#ff0000
fadeInTime:2
scaleFrom:0.4
scaleTo:0.4
alpha:0.3
drawUnderUnits:true

[effect_projectileLight]
image:SHARED:light_50.png
life:100
fadeOut:true
attachedToUnit:true
color:#ff0000
fadeInTime:2
scaleFrom:0.8
scaleTo:0.8
alpha:0.3
drawUnderUnits:false
liveAfterAttachedDies:false

[effect_hitLightFlash]
image:SHARED:light_50.png
life:14
fadeOut:true
attachedToUnit:false
color:#ff0000
scaleFrom:1
scaleTo:1
alpha:0.2
drawUnderUnits:false

[effect_projectilePassThough]
frameIndex:4
stripIndex:projectiles2
life:30
fadeOut:true
attachedToUnit:false
color:#ff0000
scaleFrom:1
scaleTo:0.5
alpha:1
drawUnderUnits:false
ySpeedRelative:5
atmospheric:true

[effect_projectilePassThough2]
#image:SHARED:light_50.png
priority:high
stripIndex: effects
frameIndex: 0
life:50
fadeOut:true
attachedToUnit:false
color:#F08927
scaleFrom:1.0
scaleTo:1.8
alpha:1.0
drawUnderUnits:false
xSpeedRelativeRandom:2
ySpeedRelativeRandom:2
atmospheric:true

[effect_shockwave]
priority:veryhigh
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 5
color: #ff0000

[effect_windwave]
priority:veryhigh
image: shockwave2.png
life: 120
scaleFrom: 10
scaleTo: 0
alpha: 0.9
dirSpeed: 5
color:#ff0000

[effect_白]
priority:critical
image: 白色光圈.png
life: 60
scaleFrom: 0.0
scaleTo: 1.2
fadeOut: false
fadeInTime: 30
color: #FFFFFF

[effect_黑]
priority:critical
image: 白色光圈.png
life: 30
scaleFrom: 1.2
scaleTo: 0.0
fadeOut: false
color: #000000

[effect_黑2]
priority:critical
image: 黑障.png
life: 300
scaleFrom: 2.65
scaleTo: 0.0
fadeOut: false
fadeInTime: 10
color: #000000

[effect_虚无缥缈]
drawType: displacement
priority: critical
image: SHARED:cone_inverted_normal_128.png
life: 300
scaleFrom: 12
scaleTo: 0
alpha: 0.2
dirSpeedRandom: 2

[effect_黑洞]
alsoPlaySound:warning.ogg:1.5
priority:veryhigh
image: 黑洞.png
fadeOut: false
fadeInTime:200
life: 200
scaleFrom: 0.1
scaleTo: 0.8
#alpha: 1.0
dirSpeed: 10

[effect_散华]
priority:low
attachedToUnit:true
life:120
alpha:0.3
scaleFrom:0.6
scaleTo:1.2
image:SHARED:light_50.png
color: #000000
drawUnderUnits:false
atmospheric:true
xSpeedRelativeRandom:1.2
ySpeedRelativeRandom:1.2

[effect_黑团]
priority:critical
attachedToUnit:false
life:300
alpha:1.0
scaleFrom:1.0
scaleTo:1.0
image:SHARED:light_50.png
color: #000000
drawUnderUnits:false

[effect_噬光]
image:glow_sharp.png
priority:critical

life: 50
fadeOut: true
attachedToUnit: false
scaleFrom: 10.0
scaleTo: 10.0
color: #000000
drawUnderUnits:false

[effect_暗幕] 
priority:critical
image: 黑.png
life: 200
fadeOut: false
alpha: 0.5
scaleFrom: 5.0
scaleTo: 5.0
drawUnderUnits: false
createWhenOffscreen: true
showInFog: true
color: #000000
fadeInTime: 200

[effect_大暗幕] 
priority:critical
image: 黑.png
life: 50
#fadeOut: false
alpha: 1
scaleFrom: 5.0
scaleTo: 5.0
drawUnderUnits: false
createWhenOffscreen: true
showInFog: true
color: #000000
#fadeInTime: 200

#=====================================================#

[resource_免疫渊海]
displayName: 免疫渊海