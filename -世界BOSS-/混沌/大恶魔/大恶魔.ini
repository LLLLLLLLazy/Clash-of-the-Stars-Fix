[core]

showInEditor: false
name: 大恶魔
price: 400000
maxHp: 40000
mass: 300000
armour: 13
armourMinDamageToKeep: 13

tags: units, 恐虐大恶魔, 混沌元素

displayText: 恶魔领主
displayDescription: -中立敌对单位 \n -范围内无目标时会追踪经济最高的玩家 \n -拥有多种攻击能力，但均可被躲开 \n -受到的每秒伤害过高时会拥有伤害减免 \n -脱战一段时间后会恢复血量 \n -血量低于50%时获得强化 \n -死亡后掉落混沌元素 \n -地狱某一部族的头领 \n -为了他的子民而争夺地脉能源

selfRegenRate: 0.0
shieldDisplayOnlyDeflection: true

techLevel: 3
buildSpeed: 300s
experimental: true
createOnAggressiveTeam: true

radius: 60

energyMax: 1
energyRegen: 0.002

softCollisionOnAll: 50

transportSlotsNeeded: 10
fogOfWarSightRange: 30

autoTriggerCooldownTime: 0.5s

[hiddenAction_创建-降临]
autoTrigger: if not self.hasFlag(id=9)
addResources: setFlag=9
spawnUnits: 湮灭(addResources=setFlag:3)


[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_dps限伤]
@copyFromSection: template_浮动装甲减伤
@define Limiting: 800
@define HighDamageReduction: 2

[hiddenAction_dps量]
autoTrigger: if self.resource.受损量>0
addResourcesWithLogic: 受损量=-select(self.resource.受损量>1, self.resource.受损量/2, self.resource.受损量)

[resource_受击前血量]
hidden: true

[resource_受到伤害]
hidden: true

[resource_受损量]
displayName: 受损量


[template_skill]
price: energy=1, setFlag=${skill}
addResources: unsetFlag=1-5
isVisible: if not self.hasFlag(id=6)
whenBuilding_temporarilyConvertTo: 大恶魔[蓄力]
whenBuilding_cannotMove: true
whenBuilding_triggerAction: 延时属性更新
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}
pos: ${skill}

[hiddenAction_延时属性更新]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}

[hiddenAction_Boss2]
autoTrigger: if self.hp(lessThan=20000) and not self.hasFlag(id=6)
addResources: setFlag=6, 红幕=9, 赤时=0.5
spawnUnits: 骨龙*4(offsetRandomX=250, offsetRandomY=250)
spawnEffects: CUSTOM:红雾*15, CUSTOM:赤光, CUSTOM:赤放光, CUSTOM:赤光散+*10, CUSTOM:震撼虚波2, CUSTOM:震撼光波, CUSTOM:法阵展开
convertTo: 大恶魔[二形]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 雾爆
fireTurretXAtGround_withOffset: 0, 0

[hiddenAction_death]
autoTriggerOnEvent: destroyed
spawnEffects: CUSTOM:赤光, CUSTOM:赤放光2, CUSTOM:赤光散+*10
showMessageToAllPlayers: 恶魔领主已被击败

[hiddenAction_crystal]
autoTriggerOnEvent: destroyed
requireConditional: if self.resource(type='虚空')<1
spawnUnits: 混沌水晶

[action_1]
@copyFromSection: template_skill
@define skill: 1
text: 战吼
description: -以自身为中心发出震荡波击退范围200以内的敌人并造成${projectile_1.areaDamage}伤害\n -蓄力:2s
buildSpeed: 2s
fireTurretXAtGround_withProjectile: ${skill}
fireTurretXAtGround_count: 1
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
whenBuilding_playAnimation: breath
spawnEffectsOnQueue: CUSTOM:红圈${skill}, CUSTOM:红${skill}
playSoundAtUnit: large_gun_fire2

[action_2]
@copyFromSection: template_skill
@define skill: 2
text: 飞斧
description: -投掷斧头对直线路径上的敌人造成1782伤害并击退\n -飞行一定时间后返回再对该路径上的敌人造成1782伤害并击退\n -蓄力:1.5s
buildSpeed: 1.5s
#playSoundAtUnit: chakram.ogg
whenBuilding_playAnimation: cast
whenBuilding_cannotMove: true
whenBuilding_triggerAction: 2弹, 2红
resetCustomTimer: true
[hiddenAction_2弹]
fireTurretXAtGround_withProjectile: 2
fireTurretXAtGround: 2
fireTurretXAtGround_withTarget: self.attacking.getOffsetRelative(y=select(self.attacking.speed>0.2, self.attacking.maxMoveSpeed*(90 + (distanceBetween(self.getOffsetRelative(x=-50, y=-5), self.attacking.getOffsetRelative(y=self.attacking.maxMoveSpeed*90)))/4), 0))

[hiddenAction_2红]
fireTurretXAtGround_withProjectile: 2红
fireTurretXAtGround: 2
fireTurretXAtGround_withTarget: self.attacking.getOffsetRelative(y=select(self.attacking.speed>0.2, self.attacking.maxMoveSpeed*(90 + (distanceBetween(self.getOffsetRelative(x=-50, y=-5), self.attacking.getOffsetRelative(y=self.attacking.maxMoveSpeed*90)))/4), 0))

[action_3]
@copyFromSection: template_skill
@define skill: 3
text: 光柱
description: -在600范围内随机降下20个激光造成660伤害\n -蓄力:3s
buildSpeed: 3s
whenBuilding_playAnimation: store
whenBuilding_triggerAction: 3弹, 3束
[hiddenAction_3弹]
fireTurretXAtGround_withProjectile: 3
fireTurretXAtGround_count: 20
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
[hiddenAction_3束]
fireTurretXAtGround_withProjectile: 3束
fireTurretXAtGround: 3
fireTurretXAtGround_withOffset: 0, 0

[action_4]
@copyFromSection: template_skill
@define skill: 4
isActive: if self.teamId == -2 or self.teamId != -2 and attacking!=nullUnit and distanceBetween(self, attacking)<500
text: 湮灭
description: -在目标敌人处降下湮灭造成5s持续DPS960爆发伤害\n -蓄力:3s
buildSpeed: 3s
whenBuilding_playAnimation: store

[action_5]
@copyFromSection: template_skill
@define skill: 5
text: 普通攻击
description: -向敌人丢出一个火球造成528伤害\n -蓄力:1.5s
buildSpeed: 1.5s
isActive: false
displayType: infoOnlyStockpile
whenBuilding_playAnimation: throw
whenBuilding_cannotMove: true
allowMultipleInQueue: false
price: energy=0, setFlag=${skill}
addActionCooldownTime: 6s
resourceAmount: 脱战
resourceAmount_setValue: 0
[hiddenAction_5C]
requireConditional: if not self.hasFlag(id=6)
alsoQueueAction: 5

[action_赤1]
@copyFromSection: action_1
isVisible: if self.hasFlag(id=6)
text: 赤·战吼
description: -以自身为中心发出震荡波击退范围200以内的敌人并造成1400伤害\n -蓄力:2s
fireTurretXAtGround_withProjectile: 赤${skill}

[action_赤2]
@copyFromSection: action_2
isVisible: if self.hasFlag(id=6)
text: 赤·飞斧
description: -投掷斧头对直线路径上的敌人造成2700伤害并击退\n -飞行一定时间后返回再对该路径上的敌人造成2700伤害并击退\n -蓄力:1.5s
whenBuilding_triggerAction: 赤2弹, 2红
[hiddenAction_赤2弹]
@copyFromSection: hiddenAction_2弹
fireTurretXAtGround_withProjectile: 赤2

[action_赤3]
@copyFromSection: action_3
isVisible: if self.hasFlag(id=6)
text: 赤·光柱
description: -在600范围内随机降下30个激光造成1000伤害+600滞留伤害\n -蓄力:3s
fireTurretXAtGround_withProjectile: 赤${skill}
whenBuilding_triggerAction: 赤3弹, 赤3束
whenBuilding_temporarilyConvertTo: 大恶魔[蓄力飞]
[hiddenAction_赤3弹]
@copyFromSection: hiddenAction_3弹
fireTurretXAtGround_withProjectile: 赤3
fireTurretXAtGround_count: 30
[hiddenAction_赤3束]
@copyFromSection: hiddenAction_3束
fireTurretXAtGround_withProjectile: 赤3束

[action_赤4]
@copyFromSection: action_4
isVisible: if self.hasFlag(id=6)
text: 赤·湮灭
description: -在目标敌人处降下湮灭造成5s持续DPS1560爆发伤害\n -蓄力:3s

[action_赤5]
@copyFromSection: action_5
isVisible: if self.hasFlag(id=6)
requireConditional: if self.hasFlag(id=6)
text: 赤·火球
description: -向敌人丢出一个火球造成800伤害\n -蓄力:1.5s
[hiddenAction_赤5C]
requireConditional: if self.hasFlag(id=6)
alsoQueueAction: 赤5

[hiddenAction_赤形]
autoTrigger: if self.hasFlag(id=6) and self.hasResources(赤时=1)
spawnEffects: CUSTOM:Imposing*10, CUSTOM:glow
addEnergy: 0.1
addResources: 红幕=1, 赤时=-1
alsoTriggerAction: 红幕
[hiddenAction_炎封]
autoTrigger: if self.hasFlag(id=6)
spawnUnits: 炎封(alwayStartDirAtZero=true)
[hiddenAction_红幕]
requireConditional: if self.hasResources(红幕=10)
spawnUnits: 色幕(addResources=setFlag:4,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=700,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=1400,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=2100,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=2800,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=-700,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=-1400,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=-2100,alwayStartDirAtZero=true), 色幕(addResources=setFlag:4,offsetX=-2800,alwayStartDirAtZero=true)
spawnEffects: CUSTOM:火墙领域
addResources: 红幕=-10
[resource_红幕]
displayName: 红

[hiddenAction_赤时]
autoTrigger: if self.hasFlag(id=6)
addResources: 赤时=0.5
[resource_赤时]
displayName: 赤时

[effect_Imposing]
priority: low
attachedToUnit: true
life: 60
alpha: 0.4
scaleFrom: 0.8
scaleTo: 2.0
image: SHARED:light_50.png
color: #ff0000
drawUnderUnits: false
atmospheric: true
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30
xSpeedRelativeRandom: 3
ySpeedRelativeRandom: 3

[effect_glow]
priority: low
attachedToUnit: true
life: 20
alpha: 0.8
scaleFrom: 0.1
scaleTo: 6
image: SHARED:light_50.png
color: #FF4D4D
drawUnderUnits: false

[hiddenAction_脱战计时]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='units', lessThan=1, withinRange=500) and not self.hp(full=true)
addResources: 脱战=0.5

[hiddenAction_脱战恢复]
autoTrigger: if self.hasResources(脱战=10)
addResources: 脱战=-10, hp=4000

[resource_脱战]
displayName: 脱战


[hiddenAction_自动攻击]
autoTrigger: if self.isEnergyFull and numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=400) and not self.hasFlag(id=11) and not self.hasFlag(id=12) and not self.hasFlag(id=13) and not self.hasFlag(id=14) and self.teamId == -2
fireTurretXAtGround: skill
fireTurretXAtGround_withProjectile: 技能随机
fireTurretXAtGround_withOffset: 0, 0
resourceAmount: 脱战
resourceAmount_setValue: 0

[hiddenAction_自动攻击2]
@copyFromSection: hiddenAction_自动攻击
autoTrigger: if self.isEnergyFull and numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=400) and self.hasFlag(id=11) and not self.hasFlag(id=12) and not self.hasFlag(id=13) and not self.hasFlag(id=14) and numberOfUnitsInEnemyTeam(withTag='units', lessThan=1, withinRange=200) and self.teamId == -2
fireTurretXAtGround_withProjectile: 技能随机2

[hiddenAction_去向顶点]
autoTrigger: if not numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=400) and numberOfUnitsInEnemyTeam(withTag="顶点之处", greaterThan=0) and not self.hasActiveWaypoint(type='move') and self.teamId == -2
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_nearestUnit_tagged: 顶点之处
addWaypoint_target_mapMustBeReachable: false
addWaypoint_maxTime: 5s

[hiddenAction_发现敌人]
autoTrigger: if self.isAttacking and not numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=400) and not self.isMoving and self.teamId == -2
addWaypoint_type: move
addWaypoint_position_relativeOffsetFromSelf: 0, 100
addWaypoint_maxTime: 2s

[hiddenAction_停下]
autoTrigger: if self.isAttacking and numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=400) and self.hasActiveWaypoint(type='move') and self.teamId == -2
clearActiveWaypoint: true

[turret_skill]
x: 0
y: 0
size: 0
canShoot: false

[projectile_技能随机]
tags= T-projectile
life: 0
invisible: true
areaDamage: 0
explodeEffect: NONE
spawnProjectilesOnCreate: 随机数(spawnChance=0.6, maxSpawnLimit=1), 随机数2(spawnChance=0.5, maxSpawnLimit=1), 随机数3(spawnChance=0.5, maxSpawnLimit=1), 随机数4(maxSpawnLimit=1)

[projectile_技能随机2]
@copyFromSection: projectile_技能随机
spawnProjectilesOnCreate: 随机数2(spawnChance=0.5, maxSpawnLimit=1), 随机数3(spawnChance=0.5, maxSpawnLimit=1), 随机数4(maxSpawnLimit=1)

[projectile_随机数]
tags= T-projectile
invisible: true
life: 60
instant: true
areaDamage: 0
areaRadius: 42
areaRadiusFromEdge: true
explodeEffect: NONE
explodeEffectOnShield: NONE
friendlyFire: only-ignoreEnemy
mutatorX_ifUnitWithTags: 恐虐大恶魔
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: setFlag=11

[projectile_随机数2]
@copyFromSection: projectile_随机数
mutatorX_addResourcesAreaHit: setFlag=12

[projectile_随机数3]
@copyFromSection: projectile_随机数
mutatorX_addResourcesAreaHit: setFlag=13

[projectile_随机数4]
@copyFromSection: projectile_随机数
mutatorX_addResourcesAreaHit: setFlag=14

[hiddenAction_技1]
autoTrigger: if self.hasFlag(id=1${skill}) and self.queueSize(empty=true) and self.isEnergyFull and numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=200) and (not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列") or self.attacking.speed>0.5)
alsoQueueAction: ${skill}
addResources: unsetFlag=11-14, setFlag=${skill}, energy=-1
requireConditional: if not self.hasFlag(id=6)
spawnEffects: CUSTOM:红圈${skill}, CUSTOM:红${skill}
@define skill: 1

[hiddenAction_技2]
autoTrigger: if self.hasFlag(id=1${skill}) and self.queueSize(empty=true) and self.isEnergyFull and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列")
spawnEffects: NONE
@copyFromSection: hiddenAction_技1
@define skill: 2

[hiddenAction_技3]
@copyFromSection: hiddenAction_技2
@define skill: 3

[hiddenAction_技4]
autoTrigger: if (self.hasFlag(id=1${skill}) or numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列")) and self.queueSize(empty=true) and self.isEnergyFull
@copyFromSection: hiddenAction_技2
@define skill: 4

[hiddenAction_赤技1]
@copyFromSection: hiddenAction_技1
autoTrigger: if self.hasFlag(id=1${skill}) and self.queueSize(empty=true) and numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=200) and (not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列") or self.attacking.speed>0.5)
alsoQueueAction: 赤1
requireConditional: true

[hiddenAction_赤技2]
@copyFromSection: hiddenAction_技2
autoTrigger: if self.hasFlag(id=1${skill}) and self.queueSize(empty=true) and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列")
alsoQueueAction: 赤2
requireConditional: true

[hiddenAction_赤技3]
@copyFromSection: hiddenAction_技3
alsoQueueAction: 赤3
requireConditional: true

[hiddenAction_赤技4]
@copyFromSection: hiddenAction_技4
autoTrigger: if (self.hasFlag(id=1${skill}) or numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=50, withTag="暴食圩列") and self.isEnergyFull) and self.queueSize(empty=true)
alsoQueueAction: 赤4
requireConditional: true


[animation_attack]
#onActions:attack
pingPong:false
arm1_0.05s:{x:0, y:0, dir:0}
arm1_0.1s:{x:0, y:0, dir:-30}
arm1_0.2s:{x:0, y:0, dir:-70}
arm1_0.4s:{x:0, y:0, dir:-50}
arm1_0.5s:{x:0, y:0, dir:-20}
arm1_0.6s:{x:0, y:0, dir:-10}
arm1_0.7s:{x:0, y:0, dir:0}

arm2_0.05s:{x:0, y:0, dir:0}
arm2_0.1s:{x:0, y:0, dir:30}
arm2_0.2s:{x:0, y:0, dir:70}
arm2_0.4s:{x:0, y:0, dir:50}
arm2_0.5s:{x:0, y:0, dir:20}
arm2_0.6s:{x:0, y:0, dir:10}
arm2_0.7s:{x:0, y:0, dir:0}

[animation_move]
KeyframeTimeScale : 1.1
onActions: move
blendIn : 0.4s
blendOut : 0.4s

arm1_0.5s: {x:0, y:0, dir:2.5}
arm1_0.9s: {x:0, y:0, dir:0}
arm1_1.4s: {x:0, y:0, dir:-2.5}
arm1_1.8s: {x:0, y:0, dir:0}

arm2_0.5s: {x:-0, y:0, dir:2.5}
arm2_0.9s: {x:0, y:0, dir:0}
arm2_1.4s: {x:-0, y:0, dir:-2.5}
arm2_1.8s: {x:0, y:0, dir:0}
arm3_0.5s: {x:-0, y:0, dir:2.5}
arm3_0.9s: {x:0, y:0, dir:0}
arm3_1.4s: {x:-0, y:0, dir:-2.5}
arm3_1.8s: {x:0, y:0, dir:0}

[animation_idle]
onActions: idle
blendIn : 0.2s
blendOut : 0.2s

arm1_0s: {x:0, y:0, dir:5}
arm2_0s: {x:0, y:0, dir:-5}

body_0s: {scale:1}
body_2s: {scale:1.03}

pingPong:true

[animation_breath]
blendIn : 0.2s
blendOut : 0.2s

arm1_0s: {x:0, y:0, dir:0}
arm1_2s: {x:-6, y:0, dir:50}

arm2_0s: {x:0, y:0, dir:0}
arm2_2s: {x:6, y:0, dir:-50}
arm3_0s: {x:0, y:0, dir:0}
arm3_2s: {x:6, y:0, dir:-50}

body_0s: {scale:1}
body_2s: {scale:1.04}

pingPong:true

[animation_cast]
blendIn : 0.2s
blendOut : 0.15s
arm2_0s: {x:0, y:0, dir:0}
arm2_2s: {x:0, y:0, dir:-70}
arm3_0s: {x:0, y:0, dir:0}
arm3_2s: {x:0, y:0, dir:-70}

pingPong:true


[animation_store]
blendIn : 0.2s
blendOut : 0.3s

arm1_0s: {x:0, y:0, dir:0}
arm1_3s: {x:-0, y:0, dir:-46}

arm2_0s: {x:0, y:0, dir:0}
arm2_3s: {x:0, y:0, dir:46}
arm3_0s: {x:0, y:0, dir:0}
arm3_3s: {x:0, y:0, dir:46}

body_0s: {scale:1}
body_3s: {scale:1.02}

pingPong:true

[animation_throw]
blendIn : 0.2s
blendOut : 0.1s
arm1_0s: {x:0, y:0, dir:0}
arm1_1.5s: {x:0, y:0, dir:40}

pingPong:true


[arm_1]
x: 33.5
y: 0
image_end: 右手.png
image_end_teamColors: true
drawOverBody: false
drawDirOffset: 0
moveSpeed: 18
[arm_4]
@copyFromSection: arm_1
x: 35.5
y: 2
image_end: null.png
image_end_shadow: SHADOW:右手.png
[arm_2]
x: -33.5
y: 0
image_end: 左手.png
image_end_shadow: SHADOW:左手.png
image_end_teamColors: true
drawOverBody: false
drawDirOffset: 0
moveSpeed: 18
hidden: if self.customTimer(laterThanSeconds=2.5)
[arm_3]
@copyFromSection: arm_2
image_end: 左斧手.png
hidden: if not self.customTimer(laterThanSeconds=2.5)

[arm_6]
x: 0
y: -3.5
image_end: 首领.png
drawOverBody: true

[leg_1]
x: 25
y: 0
attach_x: 25
attach_y: 0
moveSpeed: 2
moveWarmUp: 20

image_leg: 腿部.png
image_foot: 脚部.png

rotateSpeed: 4
heightSpeed: 0.3
resetAngle: 0

dust_effect: true
holdDisMin: 8
holdDisMax: 22
estimatingPositionMultiplier: 1.1

[leg_2]
x: -25
y: 0
attach_x: -25
attach_y: 0
copyFrom: 1



[global_resource_顶点]
hidden: false
displayName: 顶点{◎}
displayColor: #B4CC0000
priority: 0.5



[graphics]
drawLayer: experimentals
imageScale: 1.5
total_frames: 1
image: 大恶魔将军.png
image_wreak: NONE
image_turret: NONE
image_shield: red_shield.png
image_shadow:AUTO
shadowOffsetX:2
shadowOffsetY:2
movementEffect: CUSTOM:红披, CUSTOM:红披L, CUSTOM:红披R
movementEffectRate: 6
showHealthBar: false

[decal_大恶魔血条]
@copyFromSection: decal_大恶魔血条框
image: 大恶魔血条线.png
color: #B4FFFFFF

yOffsetAbsolute: -${core.radius + 17.5}
xOffsetAbsolute: -51.6

imageScaleX: 103 * (self.hp / self.maxHp)

[decal_大恶魔血条亮]
@copyFromSection: decal_大恶魔血条
image: 大恶魔血条亮.png
color: #DDFFFFFF

isVisible: if self.shield(lessThan=6000) and self.hasTakenDamage(withinSeconds=0.08)

[decal_大恶魔血条黄铜]
@copyFromSection: decal_大恶魔血条
image: 大恶魔血条黄铜.png

isVisible: if self.shield(greaterThan=6000)

[decal_大恶魔血条框]
image: 大恶魔血条.png
color: #B4FFFFFF

layer: beforeUI
alwaysStartDirAtZero: true
yOffsetAbsolute: -${core.radius + 25}

imageScaleX: 1
imageScaleY: 0.75

onlyWhileAlive: true

[decal_大恶魔血条赤红]
@copyFromSection: decal_大恶魔血条框
image: 大恶魔血条赤红.png
imageScale: 1.025
color: #DDFFFFFF

isVisible: if self.hp(lessThan=${core.maxHp * 0.5})

[effect_红披]
priority: low
image: SHARED:light_50.png
color: #ff0000
life: 80
alpha: 0.04
fadeInTime: 5
scaleFrom: 3.2
scaleTo: 0
drawUnderUnits: true
atmospheric: true
fadeOut: false
ySpeedRelative: -0.4
yOffsetRelative: -18
[effect_红披L]
@copyFromSection: effect_红披
life: 60
xSpeedRelative: -0.5
xOffsetRelative: 60
[effect_红披R]
@copyFromSection: effect_红披L
xSpeedRelative: 0.5
xOffsetRelative: -60

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: true
aimOffsetSpread: 0
isFixedFiring: true
turretSize: 35
turretTurnSpeed: 2
maxAttackRange: 400
isMelee: true
shootDelay: 0.5s
meleeEngangementDistance: 100000

[turret_1]
x: 0
y: 0
turnSpeed: 0
canShoot: false
shoot_light: #afafaf
limitingRange: 400

[turret_2]
x: 0
y: 0
barrelX: -50
barrelY: -5
canShoot: false
shoot_light: #ff0000

[turret_3]
x: 0
y: 0
size: 0
barrelHeight: 1000
attachedTo:	1
slave: true
canShoot: false
shoot_light: #ff0000

[turret_4]
x: 0
y: 0
canAttackMaxAngle: 181
canShoot: false
shoot_light: #ff0000
delay: 4s
projectile: 4
altProjectile: 赤4
altProjectileCondition: if self.hasFlag(id=6)

[turret_5红]
x: 0
y: 0
barrelX: 50
onShoot_triggerActions: 5C, 赤5C
canAttackCondition: if self.queueSize(empty=true)
delay: 6s
projectile: 5红
altProjectile: 赤5红
altProjectileCondition: if self.hasFlag(id=6)

[template_area]
areaDamageNoFalloff: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true

[projectile_1]
@copyFromSection: template_area
areaDamage: 924
areaRadius: 201
areaExpandTime: 17
life: 50
instant: true
drawUnderUnits: true
pushForce: 10000
pushVelocity: 15
buildingDamageMultiplier: 1.5
explodeEffect: CUSTOM:震撼波, CUSTOM:震撼光波

[projectile_赤1]
@copyFromSection: projectile_1
areaDamage: 1400
explodeEffect: CUSTOM:震撼波, CUSTOM:震撼光波, CUSTOM:红雾*8, CUSTOM:赤光散+*8
explodeEffectOnShield: CUSTOM:震撼波, CUSTOM:震撼光波, CUSTOM:红雾*8, CUSTOM:赤光散+*8

[effect_震撼波]
priority: veryhigh
stripIndex: shockwave_large
life: 35
scaleFrom: 0
scaleTo: 9.72
alpha: 2
alsoPlaySound: large_gun_fire2
color: #ff0000
alsoEmitEffects: CUSTOM:震撼虚波
[effect_震撼虚波]
@copyFromSection: effect_震撼波
delayedStartTimer: 4
color: #bfff0000
alsoEmitEffects: CUSTOM:震撼虚波2
[effect_震撼虚波2]
@copyFromSection: effect_震撼虚波
color: #7fff0000
alsoEmitEffects: CUSTOM:震撼虚波3
[effect_震撼虚波3]
@copyFromSection: effect_震撼虚波
color: #3fff0000

[effect_震撼光波]
image: disturbance.png
priority: veryhigh
life: 35
scaleFrom: 0
scaleTo: 8
alpha: 2
color: #ff0000

[projectile_2]
tags= T-projectile
areaDamage: 0
life: 90
speed: 0
#turnSpeed: 0
invisible: true
deflectionPower: -1
spawnProjectilesOnEndOfLife: 2+(recursionLimit=7), 2预回(recursionLimit=1)

[projectile_2+]
@copyFromSection: template_area
areaDamage: 1782
areaRadius: 30
armourIgnoreAmount: 24
pushVelocity: 5
life: 11
speed: 5
turnSpeed: 0
invisible: true
deflectionPower: -1
targetGroundSpread: 999
trailEffect: CUSTOM:猩红拖尾, CUSTOM:猩红尾焰
trailEffectRate: 2
lightColor: #FF4D4D
lightSize: 0.8
effectOnCreate: CUSTOM:狱斧
explodeEffect: CUSTOM:光挥粒*2
explodeOnEndOfLife: true
spawnProjectilesOnEndOfLife: 2+(recursionLimit=7)
[projectile_2预回]
tags= T-projectile
areaDamage: 0
life: 77
speed: 5
turnSpeed: 0
invisible: true
deflectionPower: -1
explodeEffect: NONE
explodeOnEndOfLife: true
targetGroundSpread: 999
spawnProjectilesOnExplode: 2回(recursionLimit=7)
[projectile_2回]
@copyFromSection: projectile_2+
speed: -5
spawnProjectilesOnEndOfLife: 2回(recursionLimit=7)

[projectile_2红]
tags= T-projectile
spawnProjectilesOnEndOfLife: 2红+(recursionLimit=7), 2红预回(recursionLimit=1)
areaDamage: 0
life: 0
invisible: true
[projectile_2红+]
@copyFromSection: projectile_2+
areaDamage: 0
pushVelocity: 0
trailEffectRate: 5
effectOnCreate: NONE
explodeEffect: CUSTOM:红圈2, CUSTOM:红2
explodeEffectOnShield: CUSTOM:红圈2, CUSTOM:红2
spawnProjectilesOnEndOfLife: 2红+(recursionLimit=7)
[projectile_2红预回]
@copyFromSection: projectile_2预回
life: 77
spawnProjectilesOnExplode: 2红回(recursionLimit=7)
[projectile_2红回]
@copyFromSection: projectile_2红+
speed: -5
spawnProjectilesOnEndOfLife: 2红回(recursionLimit=7)

[projectile_赤2]
@copyFromSection: projectile_2
explodeOnEndOfLife: true
explodeEffect: CUSTOM:烈光*3, CUSTOM:炎光无随, CUSTOM:赤光散*2, CUSTOM:赤放光2无随
spawnProjectilesOnEndOfLife: 赤2+(recursionLimit=7), 赤2预回(recursionLimit=1)

[projectile_赤2+]
@copyFromSection: projectile_2+
areaDamage: 2700
armourIgnoreAmount: 60
trailEffect: CUSTOM:猩红拖尾, CUSTOM:猩红尾焰
trailEffectRate: 2
lightSize: 0.9
explodeEffect: CUSTOM:光挥粒*2, CUSTOM:烈光, CUSTOM:赤光散+, CUSTOM:赤放光2
spawnProjectilesOnEndOfLife: 赤2+(recursionLimit=7)
[projectile_赤2预回]
@copyFromSection: projectile_2预回
spawnProjectilesOnExplode: 赤2回(recursionLimit=7)
[projectile_赤2回]
@copyFromSection: projectile_赤2+
speed: -5
spawnProjectilesOnEndOfLife: 赤2回(recursionLimit=7)

[effect_狱斧]
createWhenOffscreen: true
attachedToUnit: true
life: 12
scaleFrom: 1.2
scaleTo: 1.2
alpha: 1
image: 狱斧.png
priority: critical
fadeOut: false
drawUnderUnits: true
dirSpeed: 32

[effect_光挥粒]
priority: veryhigh
image: SHARED:light_50.png
attachedToUnit: false
life: 20
xSpeedRelativeRandom: 3
ySpeedRelativeRandom: 3
scaleFrom: 0.3
scaleTo: 0.3
dirSpeed: 6
alpha: 0.8
color: #ff0000

[effect_猩红拖尾]
priority: veryhigh
createWhenZoomedOut: false
image: 白光.png
life: 32
fadeOut: true
attachedToUnit: false
fadeInTime: 2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.8
color: #ff0000
drawUnderUnits: true
atmospheric: true

[effect_猩红尾焰]
priority: veryhigh
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime: 2
scaleFrom: 0.6
scaleTo: 0.5
alpha: 0.5

[effect_赤放光2无随]
@copyFromSection: effect_赤放光2
attachedToUnit: false
[effect_炎光无随]
@copyFromSection: effect_炎光
attachedToUnit: false



[projectile_3]
tags= T-projectile
areaDamage: 0
life: 200
speed: 12
speedSpread: 2
invisible: true
deflectionPower: -1
targetGroundSpread: 600
explodeOnEndOfLife: true
explodeEffect: CUSTOM:红圈3, CUSTOM:红3
explodeEffectOnShield: CUSTOM:红圈3, CUSTOM:红3
spawnUnit: 赤光束

[projectile_3束]
@copyFromSection: template_area
#areaExpandTime: 180
areaDamage: 660
areaRadius: 40
laserEffect: true
instant: true
life: 180
color: #ff0000
explodeEffect: CUSTOM:赤光, CUSTOM:赤光散*2, CUSTOM:赤光散2*3, CUSTOM:赤光散3*4, CUSTOM:赤光散4*5, CUSTOM:赤放光
explodeEffectOnShield: CUSTOM:赤光, CUSTOM:赤光散*2, CUSTOM:赤光散2*3, CUSTOM:赤光散3*4, CUSTOM:赤光散4*5, CUSTOM:赤放光

[projectile_赤3]
@copyFromSection: projectile_3
spawnUnit: 赤光束(addResources=setFlag:2)
[projectile_赤3束]
@copyFromSection: projectile_3束
areaDamage: 1000
explodeEffect: CUSTOM:赤光, CUSTOM:赤光散*3, CUSTOM:赤光散2*4, CUSTOM:赤光散3*5, CUSTOM:赤光散4*6, CUSTOM:赤放光, CUSTOM:红雾*5
explodeEffectOnShield: CUSTOM:赤光, CUSTOM:赤光散*3, CUSTOM:赤光散2*4, CUSTOM:赤光散3*5, CUSTOM:赤光散4*6, CUSTOM:赤放光, CUSTOM:红雾*5

[effect_赤光]
priority: veryhigh
attachedToUnit: true
life: 200
alpha: 0.8
scaleFrom: 5
scaleTo: 2
image: SHARED:light_50.png
color: #FF4D4D
fadeOut: false
drawUnderUnits: false

[effect_赤光散]
@copyFromSection: effect_赤光
life: 80
alpha: 0.9
scaleFrom: 0.4
scaleTo: 0.1
color: #FF0000
fadeOut: true
atmospheric: true
xSpeedRelativeRandom: 1.8
ySpeedRelativeRandom: 1.8
[effect_赤光散2]
@copyFromSection: effect_赤光散
delayedStartTimer: 60
[effect_赤光散3]
@copyFromSection: effect_赤光散
delayedStartTimer: 120
[effect_赤光散4]
@copyFromSection: effect_赤光散
delayedStartTimer: 180
[effect_赤放光]
@copyFromSection: effect_赤光
delayedStartTimer: 180
fadeOut: true
life: 20
alpha: 0.7
scaleFrom: 1
scaleTo: 15



[projectile_4]
tags= T-projectile
areaDamage: 0
life: 9
speed: 99
invisible: true
deflectionPower: -1
explodeOnEndOfLife: true
explodeEffect: CUSTOM:红圈4, CUSTOM:红4
explodeEffectOnShield: CUSTOM:红圈4, CUSTOM:红4
spawnUnit: 湮灭(alwayStartDirAtZero=true)

[projectile_赤4]
@copyFromSection: projectile_4
spawnUnit: 湮灭(alwayStartDirAtZero=true, addResources=setFlag:2)


[projectile_5红]
tags= T-projectile
areaDamage: 0
life: 9
speed: 99
invisible: true
explodeOnEndOfLife: true
deflectionPower: -1
targetGround: true
targetGroundSpread: 0
explodeEffect: CUSTOM:红圈5, CUSTOM:红5
explodeEffectOnShield: CUSTOM:红圈5, CUSTOM:红5
spawnProjectilesOnCreate: 5滞

[projectile_5滞]
tags= T-projectile
areaDamage: 0
life: 90
speed: 0
invisible: true
deflectionPower: -1
spawnProjectilesOnEndOfLife: 5
disableLeadTargeting: true

[projectile_5]
@copyFromSection: template_area
areaDamage: 528
areaRadius: 60
life: 999
deflectionPower: -1
speed: 5
targetSpeed: 10
targetSpeedAcceleration: 0.02
largeHitEffect: true
drawSize: 1.5
frame: 9
lightColor: #ff0000
lightSize: 1
initialUnguidedSpeedHeight: 1.6
gravity: 0.12
targetGround: true
targetGroundSpread: 0
lightCastOnGround: true
trailEffect: CUSTOM:炎烟
trailEffectRate:2
effectOnCreate: CUSTOM:火光
explodeEffect: CUSTOM:炎爆, CUSTOM:炎火波, CUSTOM:炎光, CUSTOM:火散*6
explodeEffectOnShield: CUSTOM:炎爆, CUSTOM:炎火波, CUSTOM:炎光, CUSTOM:火散*6
spawnProjectilesOnExplode: 爆炸效果

[projectile_赤5红]
@copyFromSection: projectile_5红
spawnProjectilesOnCreate: 赤5滞
[projectile_赤5滞]
@copyFromSection: projectile_5滞
spawnProjectilesOnEndOfLife: 赤5

[projectile_赤5]
@copyFromSection: projectile_5
areaDamage: 800
trailEffect: CUSTOM:炎烟, CUSTOM:赤光散
trailEffectRate: 2
effectOnCreate: CUSTOM:火光, CUSTOM:烈光*3, CUSTOM:炎光, CUSTOM:赤放光2, CUSTOM:炎释
explodeEffect: CUSTOM:炎爆, CUSTOM:炎火波, CUSTOM:炎光, CUSTOM:火散*8, CUSTOM:炎放波, CUSTOM:炎风, CUSTOM:赤放光2, CUSTOM:赤光散*3
explodeEffectOnShield: CUSTOM:炎爆, CUSTOM:炎火波, CUSTOM:炎光, CUSTOM:火散*8, CUSTOM:炎放波, CUSTOM:炎风, CUSTOM:赤放光2, CUSTOM:赤光散*3

[projectile_爆炸效果]
tags= T-projectile
directDamage: 0
largeHitEffect: true
life: 0
explodeOnEndOfLife: true
explodeEffectOnShield: NONE

[effect_炎烟]
priority: veryhigh
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #FF3A28
fadeInTime:2
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.6
drawUnderUnits: false
atmospheric: true
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[effect_火光]
priority: veryhigh
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FF3A28
fadeInTime:2
scaleFrom: 1.6
scaleTo: 1.6
alpha: 0.6
drawUnderUnits: false
liveAfterAttachedDies: false

[effect_炎爆]
priority: veryhigh
life: 30
scaleFrom: 2
scaleTo: 8
color: #FF3A28
alpha: 0.9

image: ice1.png
total_frames: 13
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_炎火波]
priority: veryhigh
stripIndex: shockwave_large
life: 25
scaleFrom: 0
scaleTo: 1.5
alpha: 2
color: #ff0000

[effect_炎光]
priority: veryhigh
attachedToUnit: true
life: 25
alpha: 0.8
scaleFrom: 1
scaleTo: 1.5
image: SHARED:light_50.png
color: #FF3A28
drawUnderUnits: false

[effect_火散]
priority: veryhigh
life: 60
alpha: 1
scaleFrom: 1
scaleTo: 1
stripIndex: fire
drawUnderUnits: false
atmospheric: true
attachedToUnit: true
xSpeedRelativeRandom: 1.8
ySpeedRelativeRandom: 1.8

[effect_炎放波]
@copyFromSection: effect_炎火波
life: 30
scaleTo: 2
alpha: 1
color: #FF3A28

[effect_炎风]
@copyFromSection: effect_炎放波
image: disturbance.png

[effect_炎释]
@copyFromSection: effect_炎火波
life: 10
scaleFrom: 1
scaleTo: 0
alpha: 1
color: #FF3A28

[effect_红雾]
priority: high
stripIndex: effects
life: 70
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime: 5
scaleFrom: 0.5
scaleTo: 1.0
alpha: 0.5
drawUnderUnits:false
atmospheric:true
hSpeed: 1
hOffsetRandom: 0.75
dirOffsetRandom: 180
xSpeedAbsoluteRandom: 3
ySpeedAbsoluteRandom: 3

[effect_赤光散+]
@copyFromSection: effect_赤光
life: 80
alpha: 1.0
scaleFrom: 0.6
scaleTo: 0.2
color: #FF0000
fadeOut: true
atmospheric: true
xSpeedRelativeRandom: 2.5
ySpeedRelativeRandom: 2.5

[effect_赤放光2]
@copyFromSection: effect_赤光
fadeOut: true
life: 20
alpha: 0.7
scaleFrom: 1
scaleTo: 3

[effect_烈光]
attachedToUnit: false
life: 30
xSpeedRelativeRandom: 1.8
ySpeedRelativeRandom: 1.8
ySpeedRelative: -3
scaleFrom: 0.6
scaleTo: 0.6
image: SHARED:light_25.png
color: #FF3A28

[projectile_雾爆]
tags= T-projectile
areaDamage: 120
areaRadius: 60
largeHitEffect: true
life: 150
instant: true
spawnProjectilesOnExplode: 雾爆2*10, 爆炸效果
explodeEffect: CUSTOM:烟雾*5

[projectile_雾爆2]
tags= T-projectile
areaDamage: 40
areaRadius: 40
largeHitEffect: true
trailEffect: true
life: 150
speed: 6
frame: 9
drawSize: 0.6
instant: false
lightColor: #ff0000
lightSize: 0.5
initialUnguidedSpeedHeight: 1.2
gravity: 0.18
targetGround: true
targetGroundSpread: 80
lightCastOnGround: true
spawnProjectilesOnExplode: 雾爆3*5
explodeEffect: CUSTOM:烟雾*2

[projectile_雾爆3]
@copyFromSection: projectile_雾爆2
areaDamage: 25
areaRadius: 25
drawSize: 0.4
instant: false
lightSize: 0.4
explodeEffect: CUSTOM:烟雾*1

[effect_烟雾]
priority: low
stripIndex: effects
frameIndex: 0
life: 120
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime:0
scaleFrom: 5
scaleTo: 8
alpha: 0.6
drawUnderUnits:false
atmospheric:true
dirOffsetRandom:180
shadow: true

xOffsetRelativeRandom: 10
yOffsetRelativeRandom: 10
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2



[effect_火墙领域]
priority: critical
alwayStartDirAtZero: true
createWhenOffscreen: true
attachedToUnit: true
drawUnderUnits: true
image: 法阵.png
life: 660
scaleFrom: 6.5
scaleTo: 6.5
alpha: 0.45
fadeOut: false
fadeInTime: 10
[effect_法阵展开]
@copyFromSection: effect_火墙领域
life: 60
scaleFrom: 0
scaleTo: 6.5
fadeInTime: 30


[effect_红圈1]
priority: critical
createWhenOffscreen: true
liveAfterAttachedDies: true
attachedToUnit: true
drawUnderUnits: true
image: 红圈.png
life: 120
scaleFrom: 0.8
scaleTo: 0.8
alpha: 2
dirSpeed: 10
fadeOut: false
fadeInTime: 20
color: #ff0000

[effect_红1]
priority: critical
createWhenOffscreen: true
liveAfterAttachedDies: true
attachedToUnit: true
drawUnderUnits: true
image: 红.png
life: 120
scaleFrom: 0
scaleTo: 0.8
alpha: 1.0
dirSpeed: 10
fadeOut: false
fadeInTime: 60
color: #ff0000

[effect_红圈2]
@copyFromSection: effect_红圈1
image: 红圈粗.png
life: 90
scaleFrom: 0.12
scaleTo: 0.12

[effect_红2]
@copyFromSection: effect_红1
life: 90
scaleTo: 0.12
fadeInTime: 45

[effect_红圈3]
@copyFromSection: effect_红圈1
image: 红圈粗.png
life: 180
scaleFrom: 0.16
scaleTo: 0.16

[effect_红3]
@copyFromSection: effect_红1
life: 180
scaleTo: 0.16
fadeInTime: 90

[effect_红圈4]
@copyFromSection: effect_红圈1
attachedToUnit: false
image: 红圈粗.png
life: 180
scaleFrom: 0.24
scaleTo: 0.24

[effect_红4]
@copyFromSection: effect_红1
attachedToUnit: false
life: 180
scaleTo: 0.24
fadeInTime: 90

[effect_红圈5]
@copyFromSection: effect_红圈4
image: 红圈粗.png
life: 90
scaleFrom: 0.24
scaleTo: 0.24

[effect_红5]
@copyFromSection: effect_红4
life: 90
scaleTo: 0.24
fadeInTime: 45

[movement]
moveSpeed: 0.6
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.05
maxTurnSpeed: 1.5
turnAcceleration: 0.2
movementType: AIR
targetHeight: 0
targetHeightDrift: 0