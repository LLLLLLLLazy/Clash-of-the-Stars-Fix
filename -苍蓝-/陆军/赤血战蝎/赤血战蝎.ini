
[core]
name: 赤血战蝎
displayText: 赤血战蝎
displayDescription: -细胞合金装甲 \n -两架固定喷火器(角度限制) \n -一台导弹发射器 \n -血战:攻击恢复血量 \n -自我修复 \n -也许不太适合群体行动 \n -即将破损时它会生气
class: CustomUnitMetadata
price: 3500
maxHp: 2600

mass: 13000

tags: units, 赤血

techLevel: 2

buildSpeed: 0.0008

availableInDemo: false

selfRegenRate: 0.12

radius: 18
#displayRadius: 13
isBio: true

softCollisionOnAll: 3

autoTriggerCooldownTime: 0.1s

[hiddenAction_berserk]
autoTrigger: if self.hp(LessThan=600)
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: berserk
convertTo: 赤血战蝎[狂化]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
setResourcesWithLogic: hp=self.hp*4
#spawnEffects:CUSTOM:blood*25

[projectile_berserk]
tags= T-projectile
areaDamage: 100
areaRadius: 100
areaExpandTime: 30
life: 50
instant: true
areaHitAirAndLandAtSameTime: true

pushForce: 1
pushVelocity: 8

explodeEffect: CUSTOM:shockwave, CUSTOM:wind*8

[effect_shockwave]
stripIndex: shockwave
life: 30
color: #FF6E00
scaleFrom: 0
scaleTo: 4
alpha: 1
alsoPlaySound: large_gun_fire2

[effect_wind]
stripIndex: effects
frameIndex: 0

life: 50
fadeOut: true
attachedToUnit: false
color: #FF6E00
fadeInTime:2
hSpeed: 0.3
scaleFrom: 0.9
scaleTo: 0.7
alpha: 0.6
drawUnderUnits:false
xOffsetRelativeRandom:5
yOffsetRelativeRandom:5
xSpeedRelativeRandom:3
ySpeedRelativeRandom:3

shadow: true
atmospheric: true

[action_killed]
isActive: false
autoTriggerOnEvent: killedAnyUnit
requireConditional: if not eventSource.self.tags(includes="召唤物")
text: 血战
description: -攻击恢复血量
pos: 1
displayType: infoOnly
buildSpeed: 0s
addResources: hp=10

[action_upgrade]
isVisible: if self.kills(greaterThan=4)
isLocked: if not self.kills(greaterThan=4)
isLockedMessage: 需击杀5个单位
convertTo: 赤血战蝎T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 67000, 腐蚀=7000
text: 腐蚀 - 焚烬
description: 这是场危险的异变……
displayType: upgrade
buildSpeed: 166.6s
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

alsoTriggerAction: 脱离眠梦枕
alsoTriggerOrQueueActionConditional: if self.hasParent(withTag="眠梦枕")

[hiddenAction_脱离眠梦枕]
disconnectFromParent: true

[graphics]
total_frames: 2

image:        赤血战蝎.png
image_wreak:  蝎壳.png
image_turret: 震波炮.png

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

animation_moving_start: 0
animation_moving_end: 1
animation_moving_speed: 2

dustEffect: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 4
turretTurnSpeed: 3

maxAttackRange: 240
shootDelay: 7

aimOffsetSpread: 0
turretMultiTargeting: true

[turret_1]
x: -8
y: 14
canShoot: false
image: null.png
turnSpeed: 0

[turret_2]
x: 8
y: 14
copyFrom: 1

[turret_1-2]
x: 0
y: 0
barrelX: -8
barrelY: 14
invisible: true
shoot_flame: CUSTOM:火光

turnSpeed: 0

canAttackFlyingUnits: false
canAttackLandUnits:   true

projectile: 1

limitingRange: 170

canAttackMaxAngle: 35

resourceUsage: hp=-1

[turret_2-2]
x: 0
y: 0
barrelX: 8
barrelY: 14
copyFrom: 1-2
linkDelayWithTurret: 1-2
warmup: 1

[turret_X]
x: 0
y: -10
size: 8
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

recoilOffset: -3
recoilOutTime: 5
recoilReturnTime: 7

delay: 360

resourceUsage: hp=-10

projectile:X

[projectile_1]
tags= T-projectile
life: 70
speed: 7

targetSpeed: 2.5
targetSpeedAcceleration: 0.3
speedSpread: 1

frame: 3
drawSize: 0.9

flameWeapon: true

targetGround:true
targetGroundSpread: 30

deflectionPower: -1

areaDamage: 7
areaRadius: 65

[projectile_X]
tags= T-projectile
directDamage: 35
areaDamage: 45
areaRadius: 40
life:300
speed:0.1
targetSpeed:6
trailEffect: true
largeHitEffect: true

spawnUnit:火花Z
image: 红导弹.png


[effect_火光]
priority: verylow
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #FF6E00
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.13

[effect_blood]
priority:low
attachedToUnit:true
life:120
alpha:0.3
image: SHARED:spark.png
scaleFrom: 3
scaleTo: 2
color: #ff0000
drawUnderUnits:false
atmospheric:true
xOffsetRelativeRandom:8
yOffsetRelativeRandom:8
xSpeedRelativeRandom:0.8
ySpeedRelativeRandom:0.8

[movement]
movementType: LAND
moveSpeed: 0.8
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.06

reverseSpeedPercentage: 0.8

maxTurnSpeed: 3
turnAcceleration: 0.2

moveSlidingMode :false
moveIgnoringBody:false

