
[core]
name:扭曲魂灵
displayDescription: “深空星海之声，呼唤迷途羔羊”
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 999999

tags=magic, 魂灵

disableAllUnitCollisions:  true
isUnselectable:true
ignoreInUnitCapCalculation: true

showInEditor:false

canNotBeDirectlyAttacked:true

showOnMinimapToEnemies: false

techLevel: 1
buildSpeed: 3.33s
#availableInDemo: true

isBuilding: true

radius: 10
displayRadius: 10

isBio: false
softCollisionOnAll: 0

numBitsOnDeath: 0
explodeOnDeath: false
hideScorchMark: false

fogOfWarSightRange: 3

fireTurretXAtSelfOnDeath: 1

autoTriggerCooldownTime: 20

[hiddenAction_波]
autoTrigger: true
fireTurretXAtGround: 2
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 扭曲波

[action_gather]
autoTrigger: if self.timeAlive(laterThanSeconds=5)
takeResources: setFlag=1
takeResources_excludeUnitsWithoutAllResources: false
takeResources_includeUnitsWithinRange: 1500
takeResources_excludeUnitsWithoutTags: 魂灵
takeResources_maxUnits: 30
addResources: setFlag=1
isVisible: false

[hiddenAction_kill]
autoTrigger: if self.hasFlag(id=1)
deleteSelf: true

[graphics]
total_frames: 1
imageScale: 0.5
image:        SHARED:glow_green.png
image_wreak:  NONE
image_turret: NONE

disableLowHpSmoke: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
canOnlyAttackUnitsWithoutTags: 建筑附属

turretTurnSpeed: 1000

aimOffsetSpread: 0
maxAttackRange: 1500
shootDelay: 2

[turret_1]
x:0
y:0
canAttackCondition:	if self.hasFlag(id=1)
shoot_light:#FF00CCCC
projectile: 1
resourceUsage: hp=1

[turret_2]
x: 0
y: 0
canShoot: false
projectile: 扭曲波

[turret_3]
x: 0
y: 0
canAttackCondition:	if attacking.priceCredits<20000
resourceUsage: hasFlag=1, hasMissingFlag=2, setFlag=2
limitingMinRange: 360
projectile: 3
linkDelayWithTurret: 1

[turret_3-2]
@copyFromSection: turret_3
canAttackCondition:	if attacking.priceCredits>=20000 and attacking.priceCredits<120000
projectile: 3-2

[turret_3-3]
@copyFromSection: turret_3
canAttackCondition:	if attacking.priceCredits>=120000
projectile: 3-3


[turret_4]
x: 0
y: 0
limitingMinRange: 360
projectile: 4

[projectile_1]
directDamage: 10
life:170
speed:10
frame:6
color: #00FF00
lightColor: #3bff00
lightSize: 0.5
trailEffect: CUSTOM:绿光, CUSTOM:projectileTrail
trailEffectRate: 1
explodeEffect: CUSTOM:explodeSmall
explodeEffectOnShield: CUSTOM:explodeSmall
deflectionPower: -1
retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 500

[projectile_扭曲波]
areaDamage: 1
areaRadius: 50
pushForce: -1
pushVelocity: -3
areaRadiusFromEdge: true
life: 20
speed: 0
invisible: true
deflectionPower: -1
explodeOnEndOfLife:true
explodeEffect: CUSTOM:扭曲波
explodeEffectOnShield: CUSTOM:扭曲波
#spawnProjectilesOnExplode: 扭曲波(recursionLimit=30)

[projectile_3]
life: 15
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 1.5
explodeEffect: NONE
explodeEffectOnShield: NONE
directDamage: 0
color: #803bff00
pushVelocity: -6

[projectile_3-2]
@copyFromSection: projectile_3
pushVelocity: -3

[projectile_3-3]
@copyFromSection: projectile_3
pushVelocity: -1

[projectile_4]
@copyFromSection: projectile_3
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_directDamageMultiplier: 0.0000001
directDamage: -1
pushVelocity: 0
color: #203bff00
alwaysVisibleInFog: true



[effect_扭曲波]
image: shockwave.png
attachedToUnit: false
life: 20
scaleFrom: 0
scaleTo: 2
alpha: 0.5
color: #ff3bff00
showInFog: true
alsoEmitEffects: CUSTOM:扭曲波2

[effect_扭曲波2]
@copyFromSection: effect_扭曲波
scaleFrom: 2
scaleTo: 0

[effect_绿光]
color: #00FFAA
createWhenZoomedOut: false
priority:low
image: 白光.png
life: 60
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #00FFAA
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:false

[effect_explodeSmall]
color: #00FFAA
life: 15
attachedToUnit: true
image: 白爆.png
scaleFrom: 0.8
scaleTo: 0.8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
yOffsetRelative: 0
xOffsetRelative: 0

[movement]
movementType: AIR
moveSpeed: 0
moveAccelerationSpeed: 0.0
moveDecelerationSpeed: 0.0
targetHeight: 25

maxTurnSpeed: 0.0
turnAcceleration: 0.0

moveSlidingMode :false
moveIgnoringBody:false

[ai]
disableUse:true