
[core]
name: 贝露一式[界限突破]
displayText: 魔王
displayDescription: -全副武装 \n -自我修复 \n -攻击地面单位 \n -可消耗苍蓝能量填装流能风暴
class: CustomUnitMetadata
price:121000, 苍蓝能量=5, 基因种子=1
maxHp: 9000
mass: 100000
tags: units, 贝露大型战斗单位, 魔王, 破界之力, 能量冷却

techLevel: 2
buildSpeed: 90.0s
availableInDemo: false

experimental: true

radius: 24
displayRadius: 38
isBio: false
#softCollisionOnAll: 3
softCollisionOnAll: 24

selfRegenRate:0.25

transportSlotsNeeded: 6

energyMax: 60
energyRegen: 0.1
energyNeedsToRechargeToFull: false

showActionsWithMixedSelectionIfOtherUnitsHaveTag: 魔王

[hiddenAction_created]
autoTrigger: if not self.hasFlag(id=2)
spawnEffects: displacement*1, 高亮星
addResources: setFlag=2

[action_冲刺]
isActive: if self.hp>500
isLocked: if self.energy(LessThan=30)
isLockedMessage: 冷却中...
convertTo: 贝露一式2[界限突破]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: queueUnit
price: credits=1500, hp=500
id: ${section.text}
text: 血曜冲击
description: -进行一段时间的俯冲\n-可向指定敌军冲撞\n-期间拥有护盾
addResources: ammo=1
descriptionAddUnitStats: ${section.convertTo}
buildSpeed: 0.5s
iconImage: Shred.png
whenBuilding_cannotMove: true
highPriorityQueue: true
pos: 1

[action_填装流能风暴]
isVisible: if not self.hasFlag(id=1)
displayType: queueUnit
price: 苍蓝能量=2
id: 填装流能风暴
text: 填装 - 流能风暴
description: -准备一次流能风暴 \n -流能风暴能困住并撕裂指定位置的敌方单位 \n -威力巨大但不可控，会伤害到己方单位
addResources: setFlag=1
playSoundToPlayer: WulfrumBastionRecharge.ogg: 0.6
allowMultipleInQueue: false
buildSpeed: 33.3s
pos: 2

[action_流能风暴]
isVisible: if self.hasFlag(id=1)
isGuiBlinking: true
displayType: queueUnit
id: 流能风暴
text: 流能风暴
description: -在指定位置卷起能量风暴 \n -困住并撕裂其中的单位 \n -小心误伤己方 \n -自身拥有对流能风暴的50%伤害减免
addResources: unsetFlag=1
fireTurretXAtGround: 8
fireTurretXAtGround_withProjectile: 8
allowMultipleInQueue: false
highPriorityQueue: true
buildSpeed: 0.5s
iconImage: Trippy.png
whenBuilding_cannotMove: true
pos: 2

[turret_8]
x: 0
y: 0
invisible:true
canShoot: false
limitingRange: 350

[projectile_8]
tags= T-projectile
life: 50
instant: true
areaDamage: 0
areaRadius: 0
targetGround: true
spawnUnit:流能风暴

[graphics]
drawLayer: experimentals
total_frames: 1
image:        破界血曜号.png
image_wreak:  破界血曜号残骸.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

lock_body_rotation_with_main_turret: true

movementEffect: scoutTrailL, scoutTrailR
movementEffectRate: 8

[effect_scoutTrailL]
stripIndex: effects
frameIndex: 0
priority:low

life: 50
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime:2
hSpeed: 0.1
scaleFrom: 0.5
scaleTo: 2.0
alpha: 0.3
drawUnderUnits:false
xOffsetRelative:-18
yOffsetRelative:-45
xOffsetRelativeRandom:3
xSpeedRelative:0.5
xSpeedRelativeRandom:0.15

[effect_scoutTrailR]
@copyFromSection:effect_scoutTrailL
xOffsetRelative:18

[decal_红光]
onlyWhileAlive: true
layer: afterBody
alpha: 0.3+cos( ((self.timeAlive() % 4) / 4) * 360) * 0.08
image: 红光.png
imageScale: 2.5

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 5

maxAttackRange: 260
shootDelay: 6

[turret_1]
invisible: true
canShoot: false
x: 0
y: 0
idleDir:0

[turret_2]
x: 0
y: -7
attachedTo: 1
slave: true

shoot_flame: 起始小法阵, 精灵尘布散*3
shoot_light: #ff0000

delay: 20

projectile: 1

[turret_3]
x: 0
y: 25
attachedTo: 1
slave: true

shoot_sound:喷雾.ogg
shoot_sound_vol:0.4
shoot_flame:喷雾
#shoot_light: #3BFFCE

warmup:	25

delay: 95

aimOffsetSpread: 0

projectile: 3

[turret_4]
x: 12
y: 35
attachedTo: 1
slave: true

shoot_sound:RogueStealth.ogg
shoot_sound_vol:0.4
shoot_light: #ff0000

projectile: 5

[turret_5]
x: -12
y: 35
copyFrom:4

[projectile_1]
areaDamage: 210
areaRadius: 0
life: 30
speed: 0.1
targetSpeed: 5
targetSpeedAcceleration: 0.1
explodeOnEndOfLife: true

autoTargetingOnDeadTarget: true
autoTargetingOnDeadTargetRange: ${attack.maxAttackRange}

explodeEffect: 法阵旋烁, 旋烁光
explodeEffectOnShield: 法阵旋烁, 旋烁光

drawSize: 0

wobbleAmplitude: 5
wobbleFrequency: 1s

effectOnCreate: 旋转小法阵, 红光

spawnProjectilesOnCreate: 1(maxSpawnLimit=1)
spawnProjectilesOnExplode: 2

[projectile_2]
tags= T-projectile
life: 100
speed: 0.2
targetSpeed: 15
targetSpeedAcceleration: 0.5

image: 弩箭.png
drawSize: 0.8

color: #ff0000

directDamage: 50

sweepSpeed: 0
sweepOffsetFromTargetRadius: 0.3

trailEffect: 精灵尘
trailEffectRate: 4

effectOnCreate: 转换光

explodeEffect:精灵尘击散*3, 精灵尘击散坠*2, 命中光*2, 光爆炸
explodeEffectOnShield:精灵尘击散*3, 命中光*2

[projectile_3]
areaDamage: 1000
areaRadius: 0
drawSize: 0
life: 5
speed: 2.5
trailEffect: 浊气
trailEffectRate: 1
deflectionPower: -1
spawnProjectilesOnEndOfLife: 4*5

[projectile_4]
tags= T-projectile
areaDamage: 200
areaRadius: 100

targetGround: true
targetGroundSpread: 30

drawSize: 0

life: 300
speed: 4
targetSpeed: 2

trailEffect: 浊气
trailEffectRate: 3

deflectionPower: -1

initialUnguidedSpeedHeight: 1.0
gravity: 0.1
lightCastOnGround: true

explodeEffect:上升浊气, 滞留浊气, 雾扭曲

[projectile_5]
directDamage: 18
life: 12
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png

beamImageOffsetRate: 4

explodeEffect: NONE

sweepOffsetFromTargetRadius:0.4
sweepSpeed: 15

color: #ff0000

[effect_喷雾]
priority: low
stripIndex: effects
frameIndex: 0

life: 25
fadeOut: true
fadeInTime: 10
attachedToUnit: false
color: #ff0000
scaleFrom: 0.5
scaleTo: 0.9
alpha: 0.7
drawUnderUnits: false
dirOffsetRandom: 180
ySpeedRelative: 1
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1


[effect_浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 35
fadeOut: true
fadeInTime: 7
attachedToUnit: false
color: #ff0000
scaleFrom: 2.5
scaleTo: 0.7
alpha: 0.3
hSpeed: 0.1
drawUnderUnits: false

shadow: true
atmospheric: true

dirOffsetRandom: 180

ySpeedRelative: 0.1

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[effect_上升浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 60
fadeOut: true
fadeInTime: 4
attachedToUnit: false
color: #ff0000
scaleFrom: 2.8
scaleTo: 1.8
alpha: 0.35
hSpeed: 0.8
hSpeedRandom:0.3
dirOffsetRandom: 180
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2
drawUnderUnits: false

shadow: true
atmospheric: true

[effect_滞留浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 100
fadeOut: true
fadeInTime: 10
attachedToUnit: false
color: #ff0000
scaleFrom: 2.8
scaleTo: 4.0
alpha: 0.45
hSpeed: 0.1
dirOffsetRandom: 180
xSpeedAbsoluteRandom: 0.3
ySpeedAbsoluteRandom: 0.3
drawUnderUnits: false

shadow: true
atmospheric: true

[effect_雾扭曲]
priority:verylow
drawType: displacement
image: SHARED:ripple_normal_128.png
life: 45
fadeOut: true
fadeInTime: 15
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 1
alpha: 0.03
drawUnderUnits: false

dirOffsetRandom: 180
dirSpeedRandom: 0.1

[effect_起始小法阵]
priority:low
image: 法阵.png
imageShadow: SHADOW:法阵.png
life: 60
fadeOut: true
fadeInTime: 10
attachedToUnit: true
color: #ff0000
scaleFrom: 0.25
scaleTo: 0.4

yOffsetAbsolute: 10
hOffset: 10

drawUnderUnits:false

[effect_旋转小法阵]
image: 法阵.png
life: 60
fadeOut: true
fadeInTime: 2
attachedToUnit: true
color: #ff0000
scaleFrom: 0.25
scaleTo: 0.25
dirSpeedRandom: 2
drawUnderUnits:false

[effect_红光]
image: SHARED:light_50.png
life: 60
fadeOut: true
fadeInTime: 2
attachedToUnit: true
color: #ff0000
scaleFrom: 1.2
scaleTo: 1.2
alpha: 0.3
dirSpeedRandom: 2


[effect_法阵旋烁]
@copyFromSection: effect_旋转小法阵
priority: low
life: 8
fadeInTime: 0
scaleFrom: 0.25
scaleTo: 0.25
alpha: 0.6
dirSpeed: -5
alsoEmitEffectsOnDeath: 法阵旋烁2

[effect_法阵旋烁2]
@copyFromSection: effect_法阵旋烁
life: 14
scaleTo: 0.5
alsoEmitEffectsOnDeath: NONE


[effect_旋烁光]
image: SHARED:light_50.png
life: 10
attachedToUnit: false
color: #ff0000
scaleFrom: 1
scaleTo: 1
dirSpeed: -5
alsoEmitEffectsOnDeath: 旋烁光2

[effect_旋烁光2]
@copyFromSection: effect_旋烁光
scaleTo: 0.6
alsoEmitEffectsOnDeath: NONE


[effect_转换光]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #ff0000
scaleFrom: 0.5
scaleTo: 0.5
alpha: 1.0
drawUnderUnits:false
alsoPlaySound: DesertProwlerSmokeBombEnd.ogg:0.4

[effect_命中光]
priority: low
image: SHARED:light_50.png
life: 35
fadeOut: true
attachedToUnit: false
color: #ff0000
scaleFrom: 0.6
scaleTo: 0.3
alpha: 0.7
drawUnderUnits:false

[effect_精灵尘]
priority: verylow
image: SHARED:spark.png
life: 60
fadeOut: true
attachedToUnit: false
color: #ff0000
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.1
ySpeedRelative: -0.1
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[effect_精灵尘布散]
priority: verylow
image: SHARED:spark.png
life: 60
fadeInTime: 5
attachedToUnit: false
color: #ff0000
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.8
physicsGravity: 0.6
physics: true
xSpeedRelativeRandom: 0.6
ySpeedRelativeRandom: 0.6
xOffsetRelativeRandom: 20
yOffsetRelativeRandom: 20

[effect_精灵尘击散]
priority: verylow
image: SHARED:spark.png
life: 60
fadeOut: true
attachedToUnit: false
color: #ff0000
scaleFrom: 1.5
scaleTo: 1.5
ySpeedRelative: 2.3
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[effect_精灵尘击散坠]
@copyFromSection: effect_精灵尘击散
hSpeed: 1
physicsGravity: 0.6
physics: true

[effect_光爆炸]
life: 20
image: 红光爆炸.png
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.6
color: #ff0000
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 35
fadeOut: true

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 2.0
alpha: 0.5
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeed: 1

[effect_高亮星]
image: light.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FF0000
scaleFrom: 1.5
scaleTo: 1.2
alpha: 0.9
drawUnderUnits:false

[movement]
movementType: AIR
moveSpeed: 1.4
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.04

landOnGround: false

reverseSpeedPercentage:0.8

maxTurnSpeed: 2.7
turnAcceleration: 0.3

moveSlidingMode :true
moveIgnoringBody:false
moveSlidingDir:  60

slowDeathFall: true


[ai]
upgradedFrom: 贝露一式

