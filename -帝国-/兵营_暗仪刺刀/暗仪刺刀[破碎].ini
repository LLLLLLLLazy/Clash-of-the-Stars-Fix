
[core]
showInEditor: false
name: 暗仪刺刀[破碎]

copyFrom: 暗仪刺刀.ini

shieldRegen: 0

showOnMinimapToEnemies: true

[hiddenAction_护盾消耗]
addResources: hp=0
spawnEffects: NONE

[action_reply]
displayType: action
price: 0
text: 修理影盾装置
description: -回复20%护盾(%{self.maxShield*0.2})

addResourcesWithLogic: shield=self.maxShield*0.2
whenBuilding_cannotMove: true

buildSpeed: 8s
pos: 2

allowMultipleInQueue: false

[hiddenAction_护盾破碎]
autoTrigger: if not self.shield(lessThan=50)
convertTo: 暗仪刺刀
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
playSoundAtUnit: Autodoor.ogg:0.1
spawnEffects: 护盾聚, 黑尘*3

[effect_护盾聚]
priority: veryhigh
life: 40
fadeOut: true
fadeInTime: 25
attachedToUnit: true
image: black_shield.png
scaleFrom: 1.1
scaleTo: 0.8
alpha: 1.0
drawUnderUnits: false

[projectile_1]
tags= T-projectile
directDamage: 500

explodeEffect: 半月斩
explodeEffectOnShield: 半月斩

[projectile_2]
tags= T-projectile
directDamage: 500
explodeEffect: 左刺击
explodeEffectOnShield: 左刺击

[projectile_3]
tags= T-projectile
explodeEffect: 右刺击
explodeEffectOnShield: 右刺击

[movement]
movementType: OVER_CLIFF

[ai]
upgradedFrom: 暗仪刺刀