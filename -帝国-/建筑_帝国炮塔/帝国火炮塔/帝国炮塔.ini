
[core]
name: 帝国火炮塔
displayText: 帝国火炮塔
displayDescription: -攻击地面单位 \n -对目标身后造成多段爆炸 \n -不能攻击近距离的敌人 \n -浮动装甲

class: CustomUnitMetadata
price: 9000
maxHp: 2200
mass: 9000
tags: units

armour: 40
armourMinDamageToKeep: 40

footprint: 0,0,1,1
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

techLevel: 1
buildSpeed: 30s

radius: 19
#displayRadius: 25

isBio: false
isBuilding: true

autoTriggerCooldownTime: 0.1s

[action_浮动装甲]
isVisible: true
isActive: false
id: ${section.text}
text: 浮动装甲
description: -根据受到的单次伤害与每秒伤害进行减伤\n -受到伤害越高，减伤越高\n -无法减伤超过当前血量的单次伤害
pos: 0
iconImage: 浮甲icon.png
displayType: infoOnlyStockpile
buildSpeed: 0s

[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_浮动装甲减伤]
@copyFromSection: template_浮动装甲减伤

[hiddenAction_浮动装甲复损]
autoTrigger: if self.resource.受损量>0
addResourcesWithLogic: 受损量=-select(self.resource.受损量>1, self.resource.受损量/2, self.resource.受损量)

[resource_受击前血量]
hidden: true

[resource_受到伤害]
hidden: true

[resource_受损量]
displayName: 受损量

[graphics]
total_frames: 1

image:        帝国炮塔底座.png
image_wreak:  帝国炮塔残骸.png
image_turret: 帝国炮塔.png

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 37
turretTurnSpeed: 4

maxAttackRange: 400
shootDelay: 300

aimOffsetSpread: 0

[turret_1]
x: 0
y: 7
attachedTo: 2
slave: true

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:large_gun_fire2
shoot_sound_vol:0.4
shoot_flame:CUSTOM:开火*4

limitingMinRange: 70

warmup:40
warmupStartEffect: CUSTOM:聚能*7

image: 帝国炮管.png

chargeEffectImage: 黑球.png

recoilOffset: -3
recoilOutTime: 3
recoilReturnTime: 17

[turret_2]
x: 0
y: 6

canShoot: false

turnSpeed: 4.0
turnSpeedAcceleration: 0.3
turnSpeedDeceleration: 0.5

limitingMinRange: 70

shouldResetTurret: false

recoilOffset: -1
recoilOutTime: 3
recoilReturnTime: 17

idleSweepAngle: 30
idleSweepDelay: 250
idleSweepSpeed: 0.1

[projectile_1]
tags= T-projectile
areaDamage: 390
areaRadius: 65
life: 200
speed: 10

image: 黑球.png

lightColor: #000000
lightSize: 0.7

deflectionPower: 3

targetGround: true

trailEffect: CUSTOM:黑球
trailEffectRate: 1

spawnProjectilesOnExplode: 2(yOffsetRelative=10)

explodeEffect:CUSTOM:大爆炸,CUSTOM:冲击波,CUSTOM:光
explodeEffectOnShield:CUSTOM:光*2,CUSTOM:冲击波

[projectile_2]
tags= T-projectile
explodeOnEndOfLife: true
areaDamage: 390
areaRadius: 65
life: 10
speed: 10
turnSpeed: 0

image: 黑球.png

lightColor: #000000
lightSize: 0.7

deflectionPower: 3

targetGround: true
targetGroundSpread: 999999999

trailEffect: CUSTOM:黑球
trailEffectRate: 1

spawnProjectilesOnEndOfLife: 2(yOffsetRelative=10,recursionLimit=5)

explodeEffect:CUSTOM:大爆炸,CUSTOM:冲击波,CUSTOM:光
explodeEffectOnShield:CUSTOM:光*2,CUSTOM:冲击波

[effect_开火]
stripIndex: effects
frameIndex: 0
priority:low

life: 35
fadeOut: true
attachedToUnit: false
color: #000000
fadeInTime:5
hSpeed: 0.2
scaleFrom: 0.5
scaleTo: 2.0
alpha: 0.3
drawUnderUnits:false
xOffsetRelativeRandom:4
xSpeedRelativeRandom:0.2
ySpeedRelative:1
ySpeedRelativeRandom:0.2

shadow: true
atmospheric: true

[effect_聚能]
image: 黑球聚.png
life: 40
fadeOut: false
fadeInTime: 35
attachedToUnit: true
scaleFrom: 1.2
scaleTo: 0.0
alpha: 1.0
dirOffsetRandom:180
drawUnderUnits:false

[effect_黑球]
priority:verylow
image: 黑球.png
life: 25
fadeOut: true
attachedToUnit: false
scaleFrom: 1.2
scaleTo: 0.3
alpha: 1.0
drawUnderUnits: false

[effect_大爆炸]
priority: veryhigh
life: 30
attachedToUnit: true
image: explode.png
scaleFrom: 2.0
scaleTo: 2.0
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_冲击波]
drawType: displacement
stripIndex: shockwave
life: 30
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0
scaleTo: 2.5
alpha: 0.9
alsoPlaySound:小爆炸.ogg:0.6

[effect_光]
priority:high

image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #000000

scaleFrom: 1.4
scaleTo: 1.4
alpha: 0.7
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 帝国炮塔