[core]

copyFrom: turret_common_land.ini

name:虫高塔T2
price:3300
maxHp:1300

techLevel:2
buildSpeed:0.001

tags: units, 虫族, 虫建筑, 虫筑系T2, 炮塔
selfRegenRate:0.2

displayDescription:-仅对空\n-射程远\n-祂想俯视群星……
fogOfWarSightRange: 22
fogOfWarSightRangeWhileNotBuilt: 15

energyMax:3
energyRegen:0.0006

[action_1]
isVisible: if self.resource(type="生长", lessThan=${action_1.price/10})
convertTo:虫高塔T3
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType:action
price:16000
id: 进化虫高塔T3
text:进化 - T3
description:-祂想摘下群星……\n-仅对空\n-射程很远
descriptionAddUnitStats: ${section.convertTo}
buildSpeed: 83.3s
addResources: energy=3
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_衍1]
@copyFromSection: action_1, template_衍黎进化
isVisible: if self.resource(type="生长", greaterThan=${action_1.price/10-1})
addResources: 生长=-${action_1.price/10}
id: 生长${action_1.id}
textPostFix: (生长: ${action_1.price/10})
buildSpeed: 6s


[hiddenAction_自生长1]
autoTrigger: if self.hasUnitInTeam(withTag="生长-虫高塔T3") and self.hasResources(生长=${action_1.price/10}) and self.queueSize(empty=true)
alsoQueueAction: 衍1


[action_击退]
price:energy=1
pos:0.1
text: 群声尖啸
description:-恐怖的低语回荡于高塔之中……\n-击退范围内的空中敌人
buildSpeed:0.1s
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: dreadAura
highPriorityQueue: true
alwaysSinglePress: true

[action_响应]
isVisible: if not self.hasFlag(id=1)
displayType: upgrade
price:腐蚀=10
pos:0.2
text:[ 响应 ]
description:-在攻击时自动释放一次群声尖啸
buildSpeed:0.1s
allowMultipleInQueue: false
addResources: setFlag=1

[action_响应中]
isVisible: if self.hasFlag(id=1)
isGuiBlinking: if self.hasFlag(id=1)
displayType: infoOnly
pos:0.2
text:[ 响应 ]
description:-在攻击时自动释放一次群声尖啸\n-再次点击关闭响应-返还50%腐蚀
buildSpeed:0.5s
allowMultipleInQueue: false
addResources: unsetFlag=1, 腐蚀=5

[effect_curewave]
image: shockwave.png
life: 85
scaleFrom: 0
scaleTo: 11
alpha: 0.9
color: #94B072
alsoPlaySound: large_gun_fire2

[graphics]
image:cccc2.png
scaleImagesTo:30

[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:false
canAttackUnderwaterUnits:false

maxAttackRange:340
shootDelay:82
[turret_1]
x:0
y:25
shoot_light:#FF00CCCC

[projectile_1]
tags= T-projectile
directDamage:250
life:70
speed:10
frame:6
color: #00FF00
lightColor: #FFBF00
lightSize: 0.5
trailEffect: CUSTOM:绿光
trailEffectRate: 1
explodeEffect: CUSTOM:explodeSmall

[turret_2]
x:0
y:0
size: 0
barrelHeight: 10
attachedTo:1
slave:true
linkDelayWithTurret:1
energyUsage: 1
projectile: dreadAura
canAttackCondition: if self.hasFlag(id=1)

[projectile_dreadAura]
tags= T-projectile
life: 10
speed: 99
invisible: true
targetGround: true
targetGroundHeightOffset: 10
explodeOnEndOfLife:true
explodeEffect: CUSTOM:curewave
deflectionPower: -1
areaDamage: 10
areaRadius: 320
areaExpandTime:75
pushForce:1
pushVelocity:8

[effect_绿光]
color: #00FFAA
createWhenZoomedOut: false
priority:low
image: 白光.png
life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true


[effect_explodeSmall]
color: #ff3bff00
life: 20
attachedToUnit: true
image: explode_big2.png
scaleFrom: 0.7
scaleTo: 0.7
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false


[hiddenAction_AIreclaim]
autoTrigger: if self.isControlledByAI and self.hp(lessThan=180) and self.queueSize(empty=true)
alsoQueueAction: reclaim