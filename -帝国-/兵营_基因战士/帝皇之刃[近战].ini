
[core]
showInEditor:false
name: 帝皇之刃[近战]
displayText: 帝皇之刃
displayDescription: -帝皇最信任的部队 \n -爆弹枪搭配对地火箭弹 \n -拔出双刀累积暗影护盾 \n -可短暂遁入暗影
class: CustomUnitMetadata
price: 7000,基因种子=10
maxHp: 1800
mass: 24000

maxShield: 1000
shieldRegen: 0.3

tags: units, 星际步兵, 帝皇之刃, 坚韧意志, 转向攻击

armour:20
armourMinDamageToKeep:20

fogOfWarSightRange: 20

techLevel: 2
buildSpeed: 33.3s

radius: 20
displayRadius: 24

isBio: true

#softCollisionOnAll: 3

selfRegenRate: 0.16

transportSlotsNeeded:2

energyMax: 5
energyRegen: 0.02
energyNeedsToRechargeToFull: true

showActionsWithMixedSelectionIfOtherUnitsHaveTag: 星际步兵

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU: true

[action_影遁]
isActive: if self.resource.暗影冷却<=0
id: ${section.text}
text: 影遁
description: -可进入短时间暗影状态 \n -拥有60%护盾时进行冷却 \n -期间无法被瞄准且不会显示于敌方小地图上 \n -子弹可无视激光防御 \n -护甲转为20伤害减免 \n -立即获得200护盾 \n -暗锋攻击回复护盾 \n -移动速度加快 \n -无视地形 \n CD:25s
pos: 1
displayType: action
iconImage: explosion_vortex_UI.png
isGuiBlinking: if self.resource.暗影冷却<=0 or self.resource.暗影冷却>0 and self.shield >= self.maxShield * 0.6
spawnEffectsOnQueue: 暗影荡, blackwave

convertTo: 帝皇之刃[暗影]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
addResources: shield=200, 暗影冷却=25
buildSpeed: 0s

isLocked: if self.resource.暗影冷却>0 and self.shield >= self.maxShield * 0.6
isLockedMessage: 冷却中:%{int(self.resource.暗影冷却)}s
isLockedAlt: if self.resource.暗影冷却>0 and self.shield < self.maxShield * 0.6
isLockedAltMessage: 冷却中:%{int(self.resource.暗影冷却)}s (护盾不足60%)

canPlayerCancel: false
alwaysSinglePress: true
allowMultipleInQueue: false
#highPriorityQueue: true

alsoQueueAction: 恢复状态

[hiddenAction_恢复状态]
id: 恢复状态
buildSpeed: 3s
convertTo: 帝皇之刃[近战]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[hiddenAction_暗影冷却]
autoTrigger: if self.resource.暗影冷却>0 and self.shield >= self.maxShield * 0.6
addResourcesWithLogic: 暗影冷却=-min(${1/60}, self.resource.暗影冷却)

[resource_暗影冷却]
displayName: 暗影冷却


[action_1]
id: 切换远程武器
pos:0
text:钢鸣
description:火力压制
convertTo:帝皇之刃[远程]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
buildSpeed: 0.2s
addActionCooldownTime: 0.5s
alwaysSinglePress: true


[effect_blackwave]
stripIndex: shockwave_large
life: 80
scaleFrom: 0
scaleTo: 5
alpha: 1.0
color: #000000
alsoPlaySound: large_gun_fire2

[effect_暗影荡]
priority: low
image: blue_shockwave2.png
life: 80
fadeOut: true
attachedToUnit: true
fadeInTime:1
scaleFrom: 3
scaleTo: 1
alpha: 0.5
color:#cb21ec
drawUnderUnits: true
yOffsetRelative: -6


[action_熔化]
isActive:false
isVisible: if self.isOverLiquid and not self.isOverwater
autoTrigger: if self.isOverLiquid and not self.isOverwater
isGuiBlinking: if self.isOverLiquid and not self.isOverwater
addResources: hp=-1.6
pos:2
id: ${section.text}
text: 熔岩
description: -在岩浆上持续损失生命值
buildSpeed:0s


[hiddenAction_无延迟追击B]
@copyFromSection: template_无延迟追击B
[hiddenAction_无延迟追击B2]
@copyFromSection: template_无延迟追击B2

[animation_attack]
onActions:attack
#pingPong:false
arm1_0.05s:{x:0, y:0, dir:0}
arm1_0.1s:{x:0, y:0, dir:30}
arm1_0.15s:{x:0, y:0, dir:70}
arm1_0.25s:{x:0, y:0, dir:50}
arm1_0.3s:{x:0, y:0, dir:20}
arm1_0.35s:{x:0, y:0, dir:10}
arm1_0.4s:{x:0, y:0, dir:0}

arm2_0.05s:{x:0, y:0, dir:0}
arm2_0.1s:{x:0, y:0, dir:-30}
arm2_0.15s:{x:0, y:0, dir:-70}
arm2_0.25s:{x:0, y:0, dir:-50}
arm2_0.3s:{x:0, y:0, dir:-20}
arm2_0.35s:{x:0, y:0, dir:-10}
arm2_0.4s:{x:0, y:0, dir:0}

[arm_1]
x:16
y:2
image_end:左手弯刀.png
image_end_teamColors:true
drawOverBody:false
drawDirOffset:10
moveSpeed:18

[arm_2]
x:-16
y:2
image_end:右手弯刀.png
image_end_teamColors:true
drawOverBody:false
drawDirOffset:-10
moveSpeed:18

[graphics]
total_frames: 1
image:  帝皇之刃近战形态身体.png
image_wreak: NONE
image_turret: NONE
image_shield: black_shield.png

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true
lock_leg_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 25
shootDelay: 24

isMelee: true
meleeEngangementDistance: 150

[turret_1]
#主体
invisible: true
#canShoot: false
x: 0
y: 0
idleDir:0

turnSpeed: 5

shoot_sound:large_gun_fire2
shoot_sound_vol:0.15

[projectile_1]
tags= T-projectile
instant:true
invisible: true
directDamage:100
areaDamage:100
areaRadius:45
areaDamageNoFalloff:true
pushForce:1
pushVelocity:-2
life:60
speed:10
frame:1
drawSize:1
explodeEffect: CUSTOM:刀光
explodeEffectOnShield: CUSTOM:刀光
spawnProjectilesOnExplode:爆炸效果

[projectile_爆炸效果]
tags= T-projectile
areaDamage:0
areaRadius:45
largeHitEffect: true
invisible: true
life:0
explodeOnEndOfLife:true
explodeEffectOnShield:NONE

[turret_2]
#右臂
attachedTo: 1
x: 16
y: 0
idleDir: -15
limitingAngle: 60
canShoot: false

[turret_3]
#左臂
attachedTo: 1
x: -16
y: 0
idleDir:15
limitingAngle: 60
canShoot: false

[turret_4]
#肩甲
x: 0
y: 0
attachedTo: 1
slave: true
idleDir:0

canShoot: false

image: 帝皇之刃近战形态身体.png


[effect_刀光]
priority:high
image:LBAW.png
atmospheric:true
life: 18
ySpeedRelative: 5
alpha: 0.4

[movement]
movementType: OVER_CLIFF
moveSpeed: 1.1
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.02

reverseSpeedPercentage: 0

maxTurnSpeed: 4.1
turnAcceleration: 0.15

moveSlidingMode :true
moveIgnoringBody:true


[resource_exp]
displayName: EXP
displayColor: #ff6c00