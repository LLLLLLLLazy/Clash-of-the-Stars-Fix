
[core]
name: 塘虫
displayText: 塘虫
displayDescription: -可搭载一个单位 \n -搭载单位不会一同死亡 \n -本身没有攻击能力 \n -可跨越山崖与水面 \n -位于水面时可以飞起来 \n -可以消耗能量喷气加速 \n \n -2024.9.16 冠军限定-
class: CustomUnitMetadata
price: 4000
maxHp: 1500
mass: 10000

maxShield: 600
shieldRegen: 0.2

shieldRenderRadius: 25

fogOfWarSightRange: 17

techLevel: 2
buildSpeed: 0.0007
#availableInDemo: true

radius: 20
displayRadius: 22
isBio: true
isBug: true
tags: units, 虫族, 中型虫, 塘虫
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 塘虫

numBitsOnDeath: 5

transportSlotsNeeded: 2
maxTransportingUnits: 1
transportUnitsRequireMovementType: LAND, HOVER, OVER_CLIFF, OVER_CLIFF_WATER, WATER
transportUnitsCanUnloadUnits: if not self.isMoving or not self.isTransportUnloading

selfRegenRate:0.1

softCollisionOnAll: 18

energyMax: 8
energyRegen: 0.004

autoTriggerCooldownTime: 6

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径

[decal_运输范围]
@copyFromSection: template_运输范围

[action_冠军签名]
iconImage: 数字人-签名.png
isVisible: if self.timeAlive < 10
isActive: false
id: 冠军签名
description: -冠军签名- \n (10s后隐藏)
pos: 99
displayType: infoOnlyStockpile
buildSpeed: 0s


[action_water]
isActive: if self.isOverWater()

convertTo: 塘虫[水]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
displayType: action
price:  0
id: ${section.text}
text: Fly
description: -在水中时可飞行 \n -飞行时暂停恢复能量
buildSpeed: 0.5s
pos: 1

[action_rush]
isActive: if self.isEnergyFull()
convertTo: 塘虫[喷射]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
displayType: action
price:  0
id: ${section.text}
text: 超级喷气加速
description: -持续消耗能量 \n -期间速度大幅提升 \n -且装载单位将被保护
buildSpeed: 1s
pos: 2
playSoundAtUnit: 塘虫喷射.ogg
spawnEffects: 大喷射*6


[action_熔化]
isActive:false
isVisible: if self.isOverLiquid and not self.isOverwater and self.isAtGroundHeight
autoTrigger: ${section.isVisible}
isGuiBlinking: ${section.isVisible}
addResources: hp=-6
pos: 3
id: ${section.text}
text: 熔化
description: -在岩浆上持续损毁生命值
buildSpeed: 0.1s


[hiddenAction_护盾修正]
autoTrigger: if not self.shield(lessThan=30)
convertTo: 塘虫[护盾]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield


[hiddenAction_攻击范围]
autoTrigger: if attachment.readUnitMemory("属性", type='float', index=4) != memory.属性[4]
setUnitMemory: 属性[20]=attachment.readUnitMemory("属性", type='float', index=4), 属性[55]=0
alsoTriggerAction: 属性变化


[hiddenAction_死亡]
autoTriggerOnEvent: destroyed
takeResources: hp=1000
takeResources_discardCollected: true
takeResources_includeUnitsInTransport: true

[attachment_1]
x: 0
y: 1
canAttack: true
addTransportedUnits: true
#添加到被运输
canBeAttackedAndDamaged: true
#可被攻击损坏
rotateWithParent: true
#附属一同旋转
resetRotationWhenNotAttacking: true
#不攻击时恢复角度
lockLegMovement: true
#锁定腿脚
prioritizeParentsMainTarget: true
#优先考虑母体攻击
isUnselectable: true
#禁止选择: true
isUnselectableAsTarget: false
#禁止选择和作为攻击目标: false
redirectDamageToParent: true
redirectDamageToParent_shieldOnly: true
#重定向到母体护盾

keepAliveWhenParentDies: true

[graphics]
total_frames: 1

image:        塘虫.png
image_wreak: NONE
image_turret: NONE
image_shield: green_shields.png

teamColorsOnTurret: true

#AUTO
image_shadow: AUTO_ANIMATED
shadowOffsetX:1
shadowOffsetY:1

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 120
animation_idle_scale_start:1
animation_idle_scale_end:1.02
animation_idle_pingPong: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 1
turretTurnSpeed: 3

maxAttackRange: 0
shootDelay: 50

[turret_1]
x: 0
y: 0
energyUsage: 99

[projectile_1]
directDamage: 0
life: 0

[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[leg_1]
x: -19
y: -2
attach_x: 0
attach_y: 0
moveSpeed: 3.0
resetAngle:20

heightSpeed: 0.6

image_leg:  腿.png
image_foot: 脚.png

drawLegWhenZoomedOut: true

dust_effect: false

holdDisMin: 24
holdDisMax: 38

[leg_2]
x: 19
y: -2
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -16
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1
endDirOffset: -15

[leg_4]
x: 16
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1
endDirOffset: 15

[leg_5]
x: -16
y: -14
attach_x: 0
attach_y: -2
copyFrom: 1
endDirOffset: -5

[leg_6]
x: 16
y: -14
attach_x: 0
attach_y: -2
copyFrom: 1
endDirOffset: 5

[effect_大喷射]
stripIndex: effects
frameIndex: 0

life: 200
fadeOut: true
attachedToUnit: false
color: #AB892B
fadeInTime: 3
scaleFrom: 3.2
scaleTo: 7.6
alpha: 0.6
drawUnderUnits:false

dirOffsetRandom:180

dirSpeed: 0.8
dirSpeedRandom: 0.3

xOffsetRelativeRandom:9
yOffsetRelativeRandom:9

xSpeedAbsoluteRandom: 0.6
ySpeedAbsoluteRandom: 0.6

[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.5
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.08

maxTurnSpeed: 3.5
turnAcceleration: 0.3

moveSlidingMode :true
moveIgnoringBody:true


reverseSpeedPercentage:0