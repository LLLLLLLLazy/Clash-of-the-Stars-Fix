
[core]
name: mechLaser
class: CustomUnitMetadata

copyFrom: mech_large_common.ini

overrideAndReplace: mechLaser

price: 9000
maxHp: 1500
mass: 30000
tags: units, 重型机甲, 等离子机甲, 转向攻击

techLevel: 2
buildSpeed: 0.0006
#availableInDemo: true

fogOfWarSightRange: 22


radius: 25
#displayRadius: 11
isBio: false
softCollisionOnAll: 0


selfRegenRate:0.06



energyMax: 3
energyRegen: 0.0110
energyNeedsToRechargeToFull: true


builtFrom_1_name: mechFactoryT2
builtFrom_1_pos: 8.2


transportSlotsNeeded: 2



[graphics]
total_frames: 1

image:        topLaser.png
image_wreak:  NONE
image_turret: NONE

image_shadow: SHADOW:topLaser.png
shadowOffsetX:2
shadowOffsetY:2


#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6


#lock_shadow_rotation_with_main_turret: true
lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

aimOffsetSpread: 0.1

maxAttackRange: 320
shootDelay: 5

turretRotateWithBody: false


[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 3.2
turnSpeedAcceleration: 0.07
turnSpeedDeceleration: 0.12

canShoot: false
canAttackCondition: if attacking == activeWaypointTarget or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>460


recoilOffset: -1
recoilOutTime: 2
recoilReturnTime: 3


[turret_2]
#
x: 13
y: 49
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_sound:plasma_fire
shoot_sound_vol:0.07
#shoot_flame:small
shoot_light:#FFccCCEE

canShoot: true
canAttackCondition: if attacking == activeWaypointTarget or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>460

size: 0


energyUsage: 1

warmup:15

chargeEffectImage: SHARED:lighting_charge.png

[turret_3]
#显示额外伤害数据
x: 0
y: 0
canAttackCondition:	false
copyFrom: 2

projectile: 2

[turret_4]
@copyFromSection: turret_3
projectile: 等离子体

[projectile_1]
tags= T-projectile
directDamage:110

largeHitEffect:true
life:150
speed:15
targetSpeed:8
targetSpeedAcceleration:-0.05
frame:11
drawSize:1.1
trailEffect:CUSTOM:projectileTrail, CUSTOM:projectileTrail2
trailEffectRate:1.5
lightColor: #FFccCCEE
lightSize: 0.6
explodeEffect: CUSTOM:hitLightFlash, CUSTOM:explodeSmall, CUSTOM:lightSlowFade, CUSTOM:波
explodeEffectOnShield: CUSTOM:hitLightFlash, CUSTOM:lightSlowFade, CUSTOM:波
spawnProjectilesOnCreate: 等离子体, 2

[projectile_2]
tags= T-projectile
directDamage:50
life:150
speed:15
targetSpeed:4.5
targetSpeedAcceleration:0.8
drawType:2
frame:4
drawSize:0.8
color: #D9F8FF
lightColor: #63e6e8
lightSize: 0.6
explodeEffect: CUSTOM:离子波, CUSTOM:projectilePassThough
explodeEffectOnShield: CUSTOM:离子波

[projectile_等离子体]
tags= T-projectile
areaIgnoreUnitsCloserThan: 99
areaDamage: 70
life: 0
speed: 0
invisible: true
explodeOnEndOfLife: true
spawnUnit: 等离子体(offsetDir=180, offsetRandomDir=60)
explodeEffect: CUSTOM:离子波
explodeEffectOnShield: CUSTOM:离子波

[effect_explodeSmall]
image: 白爆.png
life: 25
fadeOut: false
scaleFrom: 1
scaleTo: 1
alpha: 0.8
color: #63e6e8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1

[effect_projectileTrail2]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.3
scaleTo: 0.3
alpha: 0.7
ySpeedRelative: 1

[effect_hitLightFlash]
priority:high
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.3
scaleTo: 0.2
alpha: 1.7

[effect_projectilePassThough]
priority: low
frameIndex: 4
stripIndex: projectiles2
life: 10
fadeOut: true
attachedToUnit: false
color: #D9F8FF
scaleFrom: 0.6
scaleTo: 0.5
alpha: 1
drawUnderUnits: false
ySpeedRelative: 2
atmospheric: true

[effect_波]
#priority: low
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2.0
color: #63e6e8
fadeInTime: 3
alpha: 2

[effect_离子波]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 1
color: #D9F8FF
fadeInTime: 5
alpha: 1

[movement]

moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


reverseSpeedPercentage:1


[hiddenAction_AI走位]
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_mapMustBeReachable: true
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true