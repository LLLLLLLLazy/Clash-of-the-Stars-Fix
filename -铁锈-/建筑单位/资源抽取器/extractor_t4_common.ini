[core]
dont_load:true


name: 资源抽取器T4
displayLocaleKey: extractor
copyFrom: extractor_common.ini
price: 20000

displayDescription:-生成资金\n-只能建造在资源池上\n-铁锈最高技术的资源抽取器, 最大程度开发矿坑

selfRegenRate: 0.1

techLevel: 3

[hiddenAction_雾]
autoTrigger: true
spawnEffects: CUSTOM:雾*1

[action_reclaim]
text: 超量加载
description: -这非常危险! \n -无法取消执行 \n -期间资金产出大幅提升 \n -并造就一些副产物
displayType: action
pos: -1
ai_isDisabled: true
allowMultipleInQueue: false
#fireTurretXAtGround: 1
#fireTurretXAtGround_withOffset:0,0
#fireTurretXAtGround_withProjectile: nuke
buildSpeed: 0.0008
addResources: 新能魔素=15
setResourcesWithLogic: hp=-99999
whenBuilding_temporarilyConvertTo:资源抽取器T4[超量加载]
whenBuilding_triggerAction: 延时属性更新
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}

canPlayerCancel: false

[hiddenAction_延时属性更新]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${DelayedConvertUpdate}



[action_switch1]
isVisible: if not self.globalTeamTags(includes="显示抽取器T4爆炸范围圈")
addGlobalTeamTags: 显示抽取器T4爆炸范围圈
displayType: infoOnly
text: 显示范围圈
description: -显示超频模式/超量加载后的爆炸范围
iconImage: SHARED:icon_off.png
buildSpeed: 0s
pos: -0.99
highPriorityQueue: true
allowMultipleInQueue: false

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.globalTeamTags(includes="显示抽取器T4爆炸范围圈")
removeGlobalTeamTags: 显示抽取器T4爆炸范围圈
addGlobalTeamTags: IGNORE
iconImage: SHARED:icon_on.png


[decal_dangerGuide]
isVisible: if self.globalTeamTags(includes="显示抽取器T4爆炸范围圈")
onlyWhileActive: true
onlyWhileAlive: true
onlyOnNonPreview: true
onlyTeam: own
onlyWithZoomLevelOrMore: 0.7
alwaysStartDirAtZero: true

image: 红层环.png

@define area_guide_size: 256
@define area_guide_radius: 128

imageScale: ${ projectile_nuke.areaRadius +20 }/${area_guide_radius}

@define timer_1s: ((globalSearchForFirstUnit(withTag='单位系统', relation='own').self.timeAlive % 2) / 2)
alpha: 0.2+cos( ${timer_1s} * 360) * 0.1
color: #FF0000



[animation_idle]
onActions:idle
body_0s:{frame:0}
body_0.8s:{frame:3}
body_1.0s:{frame:3}
pingPong:true

[graphics]
image: extractor_t4.png

[turret_1]
x:0
y:0
invisible:true

shoot_sound:plasma_fire
shoot_sound_vol:0.1

projectile: nuke

[projectile_nuke]
tags= T-projectile
#nuke
life: 50

instant: true

largeHitEffect: true

frame: 0
shadowFrame:1

drawType:1

targetGround: true
areaDamage: 800

buildingDamageMultiplier: 10
areaHitAirAndLandAtSameTime: true
alwaysVisibleInFog: true

areaRadius: 200

areaExpandTime: 60

deflectionPower:-1

shouldRevealFog:true
nukeWeapon:true

lightColor: #FFEEEE00
lightSize: 1

friendlyFire: only-ignoreEnemy

[effect_雾]
stripIndex: effects
frameIndex: 0
priority:low

life: 200
fadeOut: true
attachedToUnit: false
color: #A911F5
fadeInTime:5
hSpeed: 0.5
scaleFrom: 0.5
scaleTo: 3.0
alpha: 0.8
drawUnderUnits:false
yOffsetRelative:5
xSpeedRelative:0.2

shadow: true
atmospheric: true
