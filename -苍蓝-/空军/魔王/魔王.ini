
[core]
name: 贝露一式
displayText: 新生魔王
displayDescription: -全副武装 \n -自我修复 \n -攻击地面单位
class: CustomUnitMetadata
price: 21000, 苍蓝能量=1
maxHp: 6500
mass: 50000
tags: units, 贝露大型战斗单位

techLevel: 1
buildSpeed: 83.3s
availableInDemo: false

experimental: true

radius: 24
displayRadius: 38
isBio: false
#softCollisionOnAll: 3
softCollisionOnAll: 24

selfRegenRate: 0.2

transportSlotsNeeded: 5

energyMax: 6
energyRegen: 0.03
energyNeedsToRechargeToFull: true

[action_苍蓝升级]
convertTo: 贝露一式[界限突破]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: upgrade
price: 100000, 苍蓝能量=4, 基因种子=1
id: ${section.text}
text: 黑神注目
description: -注目之下加冕成为真魔王 \n -攻击力大幅提升 \n -耐久与机动性加强 \n -可消耗少量资金进行血曜冲击 \n -可消耗苍蓝能量释放流能风暴
buildSpeed: 0.0001
pos: 1
allowMultipleInQueue: false
canPlayerCancel: false
whenBuilding_triggerAction: 苍蓝特效
iconImage: BrimlingBuff.png

[hiddenAction_苍蓝特效]
spawnEffects: 苍, 苍2, 苍3

[effect_苍]
priority:critical
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
image: hit.png
life: 9999
scaleFrom: 4
scaleTo: 4
alpha: 10
dirSpeed: 3
color: #ff0000
alsoPlaySound: laser_deflect
[effect_苍2]
@copyFromSection:effect_苍
drawUnderUnits: false
dirSpeed: -3
color: #ff0000
scaleFrom: 3
scaleTo: 3
[effect_苍3]
@copyFromSection:effect_苍
dirSpeed: 2
color: #ff0000
scaleFrom: 2
scaleTo: 2
image: shockwave.png

[graphics]
drawLayer: experimentals
total_frames: 1
image:        魔王.png
image_wreak:  魔王残骸.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 5

maxAttackRange: 220
shootDelay: 6

[turret_1]
invisible: true
canShoot: false
x: 0
y: 0
idleDir:0

[turret_2]
x: 0
y: -7
attachedTo: 1
slave: true

shoot_flame: 起始小法阵
shoot_light: #3BFFCE

projectile: 1

energyUsage: 1

[turret_3]
x: 0
y: 25
attachedTo: 1
slave: true

shoot_sound:喷雾.ogg
shoot_sound_vol:0.4
shoot_flame:喷雾
#shoot_light: #3BFFCE

delay: 10

canAttackCondition:	if self.energy(lessThan=5) and not self.energy(lessThan=3)

aimOffsetSpread: 0

projectile: 3

[turret_4]
x: 12
y: 35
attachedTo: 1
slave: true

shoot_sound:RogueStealth.ogg
shoot_sound_vol:0.4
shoot_light: #3BFFCE

canAttackCondition:	if self.energy(lessThan=2.5)

projectile: 5

[turret_5]
x: -12
y: 35
copyFrom:4

[projectile_1]
tags= T-projectile
areaDamage: 70
areaRadius: 0
life: 30
speed: 0.1
targetSpeed: 3
targetSpeedAcceleration: 0.1
explodeOnEndOfLife: true

autoTargetingOnDeadTarget: true
autoTargetingOnDeadTargetRange: ${attack.maxAttackRange}

explodeEffect: 法阵旋烁, 旋烁光
explodeEffectOnShield: 法阵旋烁, 旋烁光

drawSize: 0

wobbleAmplitude: 5
wobbleFrequency: 1s

effectOnCreate: 旋转小法阵
spawnProjectilesOnExplode: 2

[projectile_2]
tags= T-projectile
life: 100
speed: 0.2
targetSpeed: 15
targetSpeedAcceleration: 0.5

image: 弩箭.png
drawSize: 0.8

directDamage: 70

sweepSpeed: 0
sweepOffsetFromTargetRadius: 0.3

trailEffect: 精灵尘
trailEffectRate: 4

effectOnCreate: 转换光

explodeEffect:精灵尘击散*5, 命中光*2, 光爆炸
explodeEffectOnShield:精灵尘击散*3, 命中光*2

[projectile_3]
tags= T-projectile
areaDamage: 150
areaRadius: 0
drawSize: 0
life: 5
speed: 2.5
trailEffect: 浊气
trailEffectRate: 2
deflectionPower: -1
spawnProjectilesOnEndOfLife: 4*2

[projectile_4]
tags= T-projectile
areaDamage: 75
areaRadius: 60

targetGround: true
targetGroundSpread: 35

drawSize: 0

life: 300
speed: 4
targetSpeed: 2

trailEffect: 浊气
trailEffectRate: 2

deflectionPower: -1

initialUnguidedSpeedHeight: 1.0
gravity: 0.1
lightCastOnGround: true

explodeEffect:上升浊气, 滞留浊气, 雾扭曲

[projectile_5]
tags= T-projectile
directDamage: 18
life: 12
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png

beamImageOffsetRate: 4

explodeEffect: NONE

sweepOffsetFromTargetRadius:0.4
sweepSpeed: 15

color: #3BFFCE

[effect_喷雾]
priority: low
stripIndex: effects
frameIndex: 0

life: 25
fadeOut: true
fadeInTime: 10
attachedToUnit: false
color: #3BFFCE
scaleFrom: 0.5
scaleTo: 0.9
alpha: 0.7
drawUnderUnits: false
dirOffsetRandom: 180
ySpeedRelative: 1
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1


[effect_浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 35
fadeOut: true
fadeInTime: 7
attachedToUnit: false
color: #3BFFCE
scaleFrom: 2.5
scaleTo: 0.7
alpha: 0.3
hSpeed: 0.1
drawUnderUnits: false

shadow: true
atmospheric: true

dirOffsetRandom: 180

ySpeedRelative: 0.1

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[effect_上升浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 50
fadeOut: true
fadeInTime: 4
attachedToUnit: false
color: #3BFFCE
scaleFrom: 2.8
scaleTo: 1.8
alpha: 0.35
hSpeed: 0.8
hSpeedRandom:0.3
dirOffsetRandom: 180
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2
drawUnderUnits: false

shadow: true
atmospheric: true

[effect_滞留浊气]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 100
fadeOut: true
fadeInTime: 10
attachedToUnit: false
color: #3BFFCE
scaleFrom: 2.8
scaleTo: 4.0
alpha: 0.45
hSpeed: 0.1
dirOffsetRandom: 180
xSpeedAbsoluteRandom: 0.3
ySpeedAbsoluteRandom: 0.3
drawUnderUnits: false

shadow: true
atmospheric: true

[effect_雾扭曲]
priority:verylow
drawType: displacement
image: SHARED:ripple_normal_128.png
life: 30
fadeOut: true
fadeInTime: 15
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 0.7
alpha: 0.03
drawUnderUnits: false

dirOffsetRandom: 180
dirSpeedRandom: 0.1

[effect_起始小法阵]
priority:low
image: 法阵.png
life: 25
fadeOut: true
fadeInTime: 2
attachedToUnit: true
scaleFrom: 0.25
scaleTo: 0.3

drawUnderUnits:false

[effect_旋转小法阵]
image: 法阵.png
life: 60
fadeOut: true
fadeInTime: 2
attachedToUnit: true
scaleFrom: 0.25
scaleTo: 0.25
dirSpeedRandom: 2
drawUnderUnits:false

[effect_法阵旋烁]
@copyFromSection: effect_旋转小法阵
priority: low
life: 8
fadeInTime: 0
scaleFrom: 0.25
scaleTo: 0.25
alpha: 0.8
dirSpeed: 5
alsoEmitEffectsOnDeath: 法阵旋烁2

[effect_法阵旋烁2]
@copyFromSection: effect_法阵旋烁
life: 16
scaleTo: 0.5
alsoEmitEffectsOnDeath: NONE


[effect_旋烁光]
image: SHARED:light_50.png
life: 10
attachedToUnit: false
color: #3BFFCE
scaleFrom: 1
scaleTo: 1
dirSpeed: 5
alsoEmitEffectsOnDeath: 旋烁光2

[effect_旋烁光2]
@copyFromSection: effect_旋烁光
scaleTo: 0.6
alsoEmitEffectsOnDeath: NONE


[effect_转换光]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #3BFFCE
scaleFrom: 0.5
scaleTo: 0.5
alpha: 1.0
drawUnderUnits:false
alsoPlaySound: DesertProwlerSmokeBombEnd.ogg:0.4

[effect_命中光]
priority: low
image: SHARED:light_50.png
life: 35
fadeOut: true
attachedToUnit: false
color: #3BFFCE
scaleFrom: 0.6
scaleTo: 0.3
alpha: 0.7
drawUnderUnits:false


[effect_精灵尘]
priority: verylow
image: SHARED:spark.png
life: 60
fadeOut: true
attachedToUnit: false
color: #3BFFCE
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.1
ySpeedRelative: -0.1
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[effect_精灵尘击散]
priority: verylow
image: SHARED:spark.png
life: 60
fadeOut: true
attachedToUnit: false
color: #3BFFCE
scaleFrom: 1.5
scaleTo: 1.5
ySpeedRelative: 2.3
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[effect_光爆炸]
life: 20
image: 蓝光爆炸.png
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.6
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[movement]
movementType: AIR
moveSpeed: 1
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.04

landOnGround: false

reverseSpeedPercentage:0.8

maxTurnSpeed: 2.7
turnAcceleration: 0.3

moveSlidingMode :true
moveIgnoringBody:false
moveSlidingDir:  60

slowDeathFall: true
