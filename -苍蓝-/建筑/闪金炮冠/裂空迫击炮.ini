
[core]
name: 裂空迫击炮
displayText: 闪金炮冠
displayDescription: -厚重装甲 \n -发射巨型炮弹轰击陆地目标并分裂出弹片造成二次伤害 \n -对群毁灭性打击 \n -建造完成时击退周围的地面单位

class: CustomUnitMetadata
price: 11000
maxHp: 4000
mass: 10000
tags: units

footprint: 0,0,1,1
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

techLevel: 1
buildSpeed: 110s

radius: 16
#displayRadius: 25

isBio: false
isBuilding: true

[action_upgrade_gunT3]
convertTo: 裂空迫击炮EX
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 31000
text: 升级 - T2
description: -生命值提升并配置防护盾 \n -极大程度提升射程 \n -弹片能在爆炸后弹射跟踪敌人 \n -不易被激光防御拦截 \n -对群对单都非常强大！
displayType: Upgrade
buildSpeed: 0.0001
pos: 0

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[hiddenAction_created]
autoTrigger: if not self.hasFlag(id=1)
addResources: setFlag=1
fireTurretXAtGround: magic
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: magic

[turret_magic]
x: 0
y: 0
canShoot: false
invisible:true

size: 0

shoot_sound:cannon_firing
shoot_sound_vol:0.4

[projectile_magic]
targetGround: true

areaDamage: 0
areaRadius: 280
areaExpandTime:20
life: 50
speed: 10

frame: 0
drawSize: 0

largeHitEffect:true

pushForce: 15.0
pushVelocity: 15.0

deflectionPower: -1

explodeEffect: 金波1, 金波2, 金波3, 金波4
spawnProjectilesOnExplode: 特效

[effect_金波1]
stripIndex: shockwave
life: 25
fadeOut: true
attachedToUnit: false
color: #FFF600
scaleFrom: 0.5
scaleTo: 11.0
alpha: 0.9
drawUnderUnits:true

[effect_金波2]
@copyFromSection: effect_金波1
life: 28

[effect_金波3]
@copyFromSection: effect_金波1
life: 31

[effect_金波4]
@copyFromSection: effect_金波1
life: 34

[graphics]
total_frames: 1

image:        裂空底座.png
image_wreak:  底座残骸.png
image_turret: 裂空迫击炮.png
teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 30
turretTurnSpeed: 2

maxAttackRange: 290
shootDelay: 2.83s

[turret_1]
x: 0
y: 6

turnSpeed: 2
turnSpeedAcceleration: 0.1

#image_drawOffsetY:12

shoot_sound:cannon_firing
shoot_sound_vol:0.4
shoot_flame: large, shockwave
shoot_light:#FFEECCCC

shouldResetTurret: false

projectile: 1

recoilOffset: -3
recoilOutTime: 10
recoilReturnTime: 15

[projectile_1]
tags= T-projectile
targetGround: true

areaDamage: 110
areaRadius: 80
life: 300
speed: 10

lightColor: #FAFAFA
frame: 0

#frame: 2

drawType: 2
drawSize: 1.2
color: #bebe50

largeHitEffect:true

targetGroundSpread: 20
#initialUnguidedSpeedHeight: 1.2
#gravity:0.18
#lightCastOnGround: true
deflectionPower: 3

trailEffect: CUSTOM:金
trailEffectRate: 1

spawnProjectilesOnExplode: 2*16, 特效

[projectile_特效]
tags= T-projectile
life: 50
speed: 5
areaDamage: 0
areaRadius: 0
drawSize: 0
targetGround:true
explodeEffect: CUSTOM:闪, CUSTOM:闪2*8

[projectile_2]
tags= T-projectile
life: 120
speed: 6
areaDamage: 0
areaRadius: 40
largeHitEffect:true
image:弹片.png
drawSize: 1.0
targetGround:true
targetGroundSpread:100
spawnProjectilesOnExplode:2D
[projectile_2D]
tags= T-projectile
life: 0
invisible: true
areaDamage: 55
areaRadius: 80
explodeOnEndOfLife: true
explodeEffect: NONE
explodeEffectOnShield: NONE

[effect_金]
stripIndex: effects
frameIndex: 0
priority:low

life: 100
fadeOut: true
attachedToUnit: false
color: #FFF600
fadeInTime:3
hSpeed: 0.1
scaleFrom: 1.0
scaleTo: 1.4
alpha: 0.5
drawUnderUnits:false
xSpeedRelativeRandom:0.1

shadow: true
atmospheric: true

[effect_闪]
priority:veryhigh
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: false
color: #FFEE00
scaleFrom: 2.5
scaleTo: 2.0
alpha: 0.7
drawUnderUnits:false

[effect_闪2]
priority:high
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: false
color: #FFEE00
scaleFrom: 2.5
scaleTo: 0.5
alpha: 0.4
xSpeedRelativeRandom:0.4
ySpeedRelativeRandom:0.4
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 裂空迫击炮

buildPriority: 0.2
noneInBaseExtraPriority: 0.15

maxEachBase: 1




