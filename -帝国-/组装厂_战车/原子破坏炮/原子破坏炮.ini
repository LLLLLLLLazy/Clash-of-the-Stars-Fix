
[core]
name: 原子破坏炮
displayDescription: -攻击地面单位 \n -将单个目标从原子层面分解 \n -开火后需要重新装填

class: CustomUnitMetadata
price: 21000
maxHp: 3000
mass: 90000
tags: units, 原子破坏炮

techLevel: 2
buildSpeed: 0.0003
#availableInDemo: true

radius: 35
displayRadius: 38

isBio: false
softCollisionOnAll: 0

numBitsOnDeath: 15
explodeTypeOnDeath: large
effectOnDeath: CUSTOM:shockwave

fogOfWarSightRange: 22

energyMax: 6
energyRegen: 0

transportSlotsNeeded: 4

[hiddenAction_preload]
autoTrigger: if self.energy(empty=true) and self.queueSize(empty=true)
alsoQueueAction: filling

[action_filling]
isLocked: if self.energy(full=true)
isLockedMessage: 能量充足

text: 装填
description: -能量补充 \n -装填期间会清空能量
displayType: action
pos: 1
buildSpeed: 13s

addEnergy: 6

whenBuilding_triggerAction: flameout

allowMultipleInQueue: false
canPlayerCancel: false

[hiddenAction_flameout]
autoTrigger: false
addEnergy: -6

[action_switch1]
isVisible: if not self.hasFlag(id=1)
addResources: setFlag=1
displayType: action
text: 自动攻击
pos: 2
description: -关闭时只会攻击指令目标
buildSpeed: 0.1s
iconImage: SHARED:icon_on.png
allowMultipleInQueue: false
highPriorityQueue: true
ai_isDisabled: true

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.hasFlag(id=1)
addResources: unsetFlag=1
iconImage: SHARED:icon_off.png

[graphics]
total_frames: 4

image:        轰击者身.png
image_wreak:  轰击者残骸.png
image_turret: 轰击者炮台.png

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

teamColorsOnTurret: true


animation_moving_start: 0
animation_moving_end: 3
animation_moving_speed: 3


dustEffect: true



[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 50
turretTurnSpeed: 2

maxAttackRange: 350
#shootDelay: 150
shootDelay: 90

aimOffsetSpread: 0

[turret_1]
#coil
x: 0
y: 20
attachedTo: 2
slave: true

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:单发激光.wav
shoot_sound_vol:0.5
shoot_flame:CUSTOM:lightSlowFade, 原能光散*4

warmup: 30
warmupStartEffect: 聚能光预热, 聚能光心

canAttackMaxAngle: 3

canShoot: true
canAttackCondition: if not self.hasFlag(id=1) or self.hasFlag(id=1) and attacking == activeWaypointTarget

image: 轰击者炮.png

recoilOffset: -5
recoilOutTime: 3
recoilReturnTime: 17

energyUsage: 1

[turret_2]
#turret
x: 0
y: -20

canShoot: false
canAttackCondition: if not self.hasFlag(id=1) or self.hasFlag(id=1) and attacking == activeWaypointTarget

turnSpeed: 2.5
turnSpeedAcceleration: 0.18
turnSpeedDeceleration: 0.35

recoilOffset: -1
recoilOutTime: 6
recoilReturnTime: 34

[projectile_1]
tags= T-projectile
areaDamage: 1300
areaRadius: 0
life: 30
color: #000000
instant: true
beamImage: SHARED:beam3.png
beamImageEnd: SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 5

explodeEffect: CUSTOM:原界剥离1, CUSTOM:原界剥离2, CUSTOM:原界剥离3, CUSTOM:原界剥离4, CUSTOM:原界剥离5*8
explodeEffectOnShield: CUSTOM:原界剥离1, CUSTOM:原界剥离2, CUSTOM:原界剥离3, CUSTOM:原界剥离4, CUSTOM:原界剥离5*8

spawnProjectilesOnCreate: 2

[projectile_2]
tags= T-projectile
directDamage: 1300
life: 50
delayedStartTimer: 30
instant: true

explodeEffect: NONE
explodeEffectOnShield: NONE


[effect_聚能光心]
priority: veryhigh
image: SHARED:light_50.png
life: 50
fadeOut: true
fadeInTime: 30
scaleFrom: 0
scaleTo: 0.8
alpha: 1
color: #000000

[effect_聚能光预热]
priority: veryhigh
image: SHARED:blank.png
life: 25
trailEffect: 聚能光
trailEffectRate: 3

[effect_聚能光]
priority: verylow
life: 12
fadeOut: false
fadeInTime: 2
scaleFrom: 0.8
scaleTo: 0
alpha: 0.8
color: #000000
image: 远光.png
dirOffsetRandom: 180
delayedStartTimerRandom: 5

[effect_原能光散]
image: SHARED:light_50.png
delayedStartTimer: 3
life: 12

fadeOut: true
attachedToUnit: true
color: #000000
scaleFrom: 0.3
scaleTo: 0.1
alpha: 1.0
drawUnderUnits:false

xSpeedAbsoluteRandom:2.2
ySpeedAbsoluteRandom:2.2


[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #000000
scaleFrom: 1.6
scaleTo: 0.2
alpha: 1.0
drawUnderUnits:false

[effect_原界剥离1]
priority:veryhigh

image: 原界剥离.png
life: 10
fadeOut: false
fadeInTime:2
attachedToUnit: true
scaleFrom: 0
scaleTo: 1.3
alpha: 1
dirOffset: 45
dirSpeed: 18
drawUnderUnits:false

[effect_原界剥离2]
priority:veryhigh

image: 原界剥离.png
delayedStartTimer: 10
life: 20
fadeOut: false
attachedToUnit: true
scaleFrom: 1.4
scaleTo: 1.5
alpha: 1
dirOffset: 45
drawUnderUnits:false

[effect_原界剥离3]
priority:veryhigh

image: 原界剥离2.png
delayedStartTimer: 30
life: 30
fadeOut: true
attachedToUnit: true
scaleFrom: 1.5
scaleTo: 1.4
alpha: 1
dirOffset: 45
drawUnderUnits:false

[effect_原界剥离4]
priority:veryhigh

image: 原界剥离2.png
delayedStartTimer: 30
life: 20
fadeOut: true
attachedToUnit: true
scaleFrom: 1.6
scaleTo: 1.7
alpha: 0.7
dirOffset: 45
drawUnderUnits:false

[effect_原界剥离5]
image: SHARED:light_50.png
delayedStartTimer: 40
life: 30
lifeRandom:5

fadeOut: true
attachedToUnit: true
color: #000000
scaleFrom: 0.4
scaleTo: 0.8
alpha: 1.0
drawUnderUnits:false

xSpeedAbsoluteRandom:2
ySpeedAbsoluteRandom:2


[effect_shockwave]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 2
life: 45
color: #C2AFCC

[movement]
movementType: LAND
moveSpeed: 0.4
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.02

maxTurnSpeed: 1.2
turnAcceleration: 0.05

reverseSpeedPercentage: 0.95

moveSlidingMode :false
moveIgnoringBody:false