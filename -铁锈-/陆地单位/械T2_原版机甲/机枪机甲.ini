
[core]
name: 机枪机甲
displayText: 机枪机甲
displayDescription: -能攻击地面 \n -高射速 \n -开火速度逐渐加快 \n -有防护盾(能被电击绕过) \n -最终间隔: 0.083s
class: CustomUnitMetadata

copyFrom: mech_med_common.ini

overrideAndReplace: mechMinigun

price: 7000
maxHp: 1200
mass: 12000

tags: units, 转向攻击

techLevel: 2
buildSpeed: 0.0006
#availableInDemo: true

fogOfWarSightRange: 16

radius: 23
#displayRadius: 11
isBio: false
softCollisionOnAll: 0

builtFrom_1_name: mechFactoryT2
builtFrom_1_pos: 8

maxShield: 800
shieldRegen: 0.25

transportSlotsNeeded: 2


[graphics]
total_frames: 2

image:        topMinigun.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2


#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6


#lock_shadow_rotation_with_main_turret: true
lock_body_rotation_with_main_turret: true



animation_attack_start: 0
animation_attack_end: 1
animation_attack_speed: 2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 240

shootDelay: 18
#shootDelay: 5

turretRotateWithBody: false

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_2.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 2.9
turnSpeedAcceleration: 0.3

canShoot: false

recoilOffset: -1
recoilOutTime: 2
recoilReturnTime: 4

[turret_2]
#
x: 8
y: 26
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_sound:gun_fire
shoot_sound_vol:0.3
shoot_flame:small, CUSTOM:shellThrowing
shoot_light:#ffffcc

canShoot: true

size: 0

#energyUsage: 1

warmup: 150

warmupCallDownRate: 0.5

warmupNoReset: true
warmupShootDelayTransfer: 13

[projectile_1]
tags= T-projectile
life: 160
speed: 11

directDamage: 44

deflectionPower: 1

image: 金弹.png
drawSize: 0.8

lightColor: #ffffcc
lightSize: 0.4

explodeEffect: CUSTOM:explodeSmall

[leg_1]



[leg_2]


[effect_explodeSmall]
life: 30
fadeOut: false
attachedToUnit: true

image: explode_big2.png
scaleFrom: 0.7
scaleTo: 0.7

total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5

[effect_shellThrowing]
priority: verylow
image: 弹壳.png

life: 100
attachedToUnit: false

atmospheric: true
physics: true

hSpeed: 1.0
hOffsetRandom: 0.75
dirOffsetRandom:30
xOffsetRelative: 7
yOffsetRelative: -28
xSpeedRelative: 1.2
ySpeedRelative: -0.4
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.1

[movement]

moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


reverseSpeedPercentage:1


[hiddenAction_AI走位]
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_mapMustBeReachable: true
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true