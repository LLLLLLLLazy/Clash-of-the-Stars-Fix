[core]



name: 帝国地雷
maxHp: 50
mass: 1000
tags: units, 地雷
price: 200
radius: 7
selfRegenRate: 0.3
nanoBuildSpeed: 10
buildSpeed: 4s
disableAllUnitCollisions: true
displayDescription: 王炸
showOnMinimapToEnemies: false
fogOfWarSightRange: 0
transportSlotsNeeded: 999999

explodeOnDeath: false

fireTurretXAtSelfOnDeath: 2

[hiddenAction_位置锁定]
autoTriggerOnEvent: created
whenBuilding_cannotMove: true
alsoQueueAction: 位置锁定
buildSpeed: 9999s

[hiddenAction_deleteSelf]
requireConditional: if numberOfUnitsInTeam(withTag='地雷', greaterThan=199, factoryQueue=true)
autoTriggerOnEvent: created
addResources: 150
deleteSelf: true
showMessageToPlayer: 数量限制: 200

[hiddenAction_deleteSelf2]
@copyFromSection: hiddenAction_deleteSelf
requireConditional: if numberOfUnitsInTeam(withTag='地雷', greaterThan=0, withinRange=10, incompleteBuildings=true)
addResources: 150

[placementRule_1]
searchTags: 地雷
searchTeam: ally
searchDistance: 10
excludeIncompleteBuildings: false
excludeNonBuildings: false
minCount: 0
maxCount: 0
blocksPlacement: true
cannotPlaceMessage: [与其他地雷重叠]

[action_reclaim]
id: 自我回收
text: 自我回收
description: -只退还50%资金(${core.price * 0.5})
displayType: action
pos: 1
ai_isDisabled: true
allowMultipleInQueue: false
whenBuilding_cannotMove: true
highPriorityQueue: true
buildSpeed: 5s
addResources: credits=${core.price * 0.5}
deleteSelf: true

[animation_1]
onActions: idle
pingPong: true
scale_start: 1
scale_end: 1.01
speed: 75

[graphics]
image: SHARED:blank.png
isVisibleToEnemies: false
image_turret: NONE
splastEffect: true
image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1

showQueueBar: false

[decal_1]
layer: beforeBody
image: 地雷.png
onlyTeam: ally
teamColors: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 1
shootDelay: 100
isMelee: true
dieOnAttack: true
canOnlyAttackUnitsWithoutTags: 空形

[turret_1]
x: 0
y: 0
invisible: true
projectile: 1
turnSpeedAcceleration: 99

[projectile_1]
tags= T-projectile
areaDamage: 0
areaRadius: 0
life: 0
invisible: true
explodeEffect:NONE
explodeEffectOnShield:NONE

[turret_2]
x: 0
y: 0
invisible: true
warmup: 30
projectile: 2
altProjectile: 3
altProjectileCondition: if attacking.tags(includes='梦幻')
turnSpeedAcceleration: 99

[projectile_2]
tags= T-projectile
areaDamage: 300
areaRadius: 40
areaRadiusFromEdge: true

largeHitEffect: true
life: 50
instant: true

explodeEffect: CUSTOM:explodeCore, CUSTOM:sparks*5, CUSTOM:shockwave, 土溅
explodeEffectOnShield: CUSTOM:sparks*5, CUSTOM:shockwave, CUSTOM:hitLightFlash, 土溅

[projectile_3]
@copyFromSection: projectile_2
pushVelocity: 2

[effect_explodeCore]
priority: veryhigh
life: 30
attachedToUnit: true
stripIndex: explode_big
scaleFrom: 1.2
scaleTo: 1.2
alpha: 0.9
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
alsoPlaySound: missile_hit

[effect_sparks]
attachedToUnit: false
life: 100
physics: true
xSpeedRelativeRandom: 1.7
ySpeedRelativeRandom: 1.7
hSpeed: 2.6
image: SHARED:spark.png
color: #311919
priority: verylow

[effect_shockwave]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 1
alpha: 0.9

[effect_hitLightFlash]
priority: high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #FFFFFF

scaleFrom: 1.7
scaleTo: 1.7
alpha: 0.6
drawUnderUnits: false

[effect_土溅]
priority: high
life: 60
lifeRandom: 15
image:dust.png
scaleFrom: 0.3
scaleTo: 1.2
alpha: 0.8
ySpeedRelativeRandom: 0.2
xSpeedRelativeRandom: 0.2
createWhenOverLand: true
createWhenOverLiquid: false
imageShadow: SHADOW:spray.png
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false

[movement]
movementType: BUILDING
moveSpeed: 0
maxTurnSpeed: 0
targetHeight: -10
ignoreMoveOrders: true

[ai]
buildPriority: 0.8
