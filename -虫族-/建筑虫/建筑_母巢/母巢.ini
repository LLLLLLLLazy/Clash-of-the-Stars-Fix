[core]



name: 母巢
maxHp: 4000
mass: 1000
price: 8000
tags: units, 虫族, 虫建筑, 腐蚀蔓延, 主母巢, 母巢, 基地, 资源池建筑
radius: 30
selfRegenRate: 0.15
isBuilding: true
isBug:true
isBio:true
footprint: -1,-1,1,1
constructionFootprint: -1,-1,1,1
placeOnlyOnResPool: false
isPickableStartingUnit: true
buildSpeed: 15s
generation_credits: 40
generation_resources: 腐蚀=1
fogOfWarSightRange: 28
displayDescription: -虫族阵营 \n -产出资源与腐蚀 \n -被毁后会对己方造成小范围击退|对建筑造成大量伤害 \n -起始基地被毁会损失资源 \n -腐蚀的开始

effectOnDeath: CUSTOM:shockwaveLarge, CUSTOM:explosionFlashLarge, CUSTOM:motherLight
soundOnDeath: bug_die:1

autoTriggerCooldownTime: 0.1s

energyMax: 1
energyRegen: 0
energyStartingPercentage: 0

[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语, 赛法草(offsetHeight=-8, addResources=setFlag:1)

[resource_起始基地]
displayName: 起始基地

[hiddenAction_主母巢]
autoTriggerOnEvent: newMessage(withTag='主母巢')
temporarilyAddTags: 主母巢

[hiddenAction_主母巢移除]
autoTrigger: if globalSearchForFirstUnit(withTag='主母巢', relation='own')!=self and globalSearchForFirstUnit(withTag='主母巢', relation='own')!=null
temporarilyRemoveTags: 主母巢


[hiddenAction_起始建造者+]
highPriorityQueue: true
id: 起始建造者+
produceUnits: bugSpore
buildSpeed: 0s



[hiddenAction_trigger]
autoTrigger: if self.energy(greaterThan=0) and self.globalTeamTags(includes='衍黎')
addResources: energy=-1
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 衍黎塔
alsoTriggerAction: 腐蚀塔

[hiddenAction_腐蚀塔]
requireConditional: if self.globalTeamTags(includes='衍黎') and self.globalTeamTags(includes='狂猎')
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 腐蚀塔

[hiddenAction_衍黎蔓延]
autoTrigger: if self.globalTeamTags(includes='衍黎') and not self.hasFlag(id=5) and self.hasResources(起始基地=1)
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 衍黎塔
fireTurretXAtGround_count: 3
addResources: setFlag=5

[hiddenAction_狂猎]
autoTrigger:if self.globalTeamTags(includes='狂猎')
convertTo: 母巢[狂猎]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}


[canBuild_设置集结点]
name: setRally
pos:  -1

[canBuild_建造虫制造]
name: bugSpore
pos: 1
isVisible: if not self.globalTeamTags(includes='AI系统') or numberOfUnitsInTeam(withTag='建造虫', greaterThan=5)

[canBuild_3]
name: 蚊子, 巡林者
pos: 2
isVisible: if not self.globalTeamTags(includes='AI系统') or self.tags(includes='初蚊') and (numberOfUnitsInTeam(withTag='蚊子', greaterThan=1) or self.globalTeamTags(includes='开端{I}'))


[action_普拉克勒斯]
isVisible: if numberOfUnitsInTeam(withTag='天神草', lessThan=1, incompleteBuildings=true) and not self.globalTeamTags(includes='天神草初唤')
isGuiBlinking: if not self.globalTeamTags(includes='天神草初唤')
displayType: queueUnit
@define units: 天神草
textAddUnitName: ${units}
descriptionAddFromUnit: ${units}
descriptionAddUnitStats: ${units}
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: summon
fireTurretXAtGround_onlyOverPassableTileOf: BUILDING
allowMultipleInQueue: false
highPriorityQueue: true
onlyOneUnitAtATime: true
unitShownInUI: 天神草
buildSpeed: 0s
pos: 10

[action_普拉克勒斯2]
isVisible: if numberOfUnitsInTeam(withTag='天神草', lessThan=1, incompleteBuildings=true) and self.globalTeamTags(includes='天神草初唤')
@copyFromSection: action_普拉克勒斯
textPostFix: (腐蚀: 500)
price: 腐蚀=500
pos: 10

[action_快捷选择-衍黎]
autoTrigger: if self.globalTeamTags(includes='选择衍黎') and not self.globalTeamTags(includes='天神草初唤')
removeGlobalTeamTags: 选择衍黎
isVisible: if numberOfUnitsInTeam(withTag='天神草', lessThan=1, incompleteBuildings=true) and not self.globalTeamTags(includes='天神草初唤')
displayType: queueUnit
text: 快捷选择·衍黎
description: -快速放置普拉克勒斯并选择分支[衍黎]
iconExtraImage: 虫矿.png
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 天神草衍黎
fireTurretXAtGround_withOffset: 0, 80
onlyOneUnitAtATime: true
allowMultipleInQueue: false
highPriorityQueue: true
alwaysSinglePress: true
buildSpeed: 0s
pos: 10.1
[action_快捷选择-狂猎]
@copyFromSection: action_快捷选择-衍黎
autoTrigger: if self.globalTeamTags(includes='选择狂猎') and not self.globalTeamTags(includes='天神草初唤')
removeGlobalTeamTags: 选择狂猎
text: 快捷选择·狂猎
description: -快速放置普拉克勒斯并选择分支[狂猎]
iconExtraImage: 虫矿[狂猎].png
fireTurretXAtGround_withProjectile: 天神草狂猎
pos: 10.2


[action_erosion]
@copyFromSection: template_腐蚀蔓延简介
isActive: if ${HalfCorrosion}
isGuiBlinking: if ${HalfCorrosion}
text: 腐蚀蔓延
#description: -请见复制自全局代码
descriptionAddUnitStats: ${section.convertTo}
displayType: infoOnly
convertTo: 母巢T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentTags: true
addResources: hp=5000
isVisible: true
buildSpeed: 0s
pos: -1
ai_isHighPriority: true
allowMultipleInQueue: false
temporarilyAddTags: 主母巢, 母巢T2
temporarilyRemoveTags: 狂猎时刻生产加速
#showMessageToAllPlayers: 扩散……达成
alsoTriggerAction: 属性变化, 狂猎时刻, 首次半腐
spawnEffects: 黑影胞, 腐蚀胞波
playSoundAtUnit: Darkness5.ogg:0.1

[hiddenAction_首次半腐]
requireConditional: if not self.globalTeamTags(includes='首次半腐')
addGlobalTeamTags: 首次半腐
showMessageToPlayer: 腐蚀……
spawnUnits: 普拉克勒斯之眼

[hiddenAction_狂猎时刻]
requireConditional: if not self.globalTeamTags(includes='半腐狂猎') and self.globalTeamTags(includes='狂猎')
addGlobalTeamTags: 半腐狂猎
sendMessageTo: globalSearchForFirstUnit(withTag='单位系统', relation='own')
sendMessageWithTags: 狂猎时刻激活
sendMessageWithData: 时间=20, 色幕=1
addResources: 腐蚀=500

[hiddenAction_半腐提示]
autoTrigger: if ${HalfCorrosion} and not self.globalTeamTags(includes='半腐提示')
addGlobalTeamTags: 半腐提示
showQuickWarLogToPlayer: 腐蚀蔓延中段条件已达成


[effect_黑影胞]
attachedToUnit: true
createWhenOffscreen: true
priority: critical
image: 模糊神经元胞B.png
life: 40
fadeInTime: 2
scaleFrom: 1
scaleTo: 0.1
alpha: 0.8
color: #000000
dirOffsetRandom: 180
dirSpeed: 16
trailEffect: 随影胞
trailEffectRate: 2

[effect_随影胞]
attachedToUnit: false
createWhenOffscreen: true
priority: critical
image: 模糊神经元胞B.png
life: 15
lifeRandom: 5
fadeInTime: 2
scaleFrom: 0.6
scaleTo: 0.1
alpha: 0.3
color: #3BFF00
ySpeedRelative: 3
yOffsetRelativeRandom: 1
drawUnderUnits: true

[effect_腐蚀胞波]
attachedToUnit: false
createWhenOffscreen: true
priority: critical
stripIndex: shockwave_large
life: 150
fadeInTime: 2
scaleFrom: 0
scaleTo: 4
alpha: 0.5
color: #3BFF00
dirOffsetRandom: 180
dirSpeed: 8
drawUnderUnits: true

#--------------------
[action_沙盒-获取腐蚀蔓延]
isVisible: if substring(str(createMarker(x=-1000,y=-1000).nearestUnit),0,15) == "editorOrBuilder"
displayType: action
id: ${section.text}
text: 沙盒-获取腐蚀蔓延
description: -沙盒特供 \n -300范围内随机位置生成8个赛法草+1个星核
iconImage: SHARED:cone_inverted_normal_128.png
spawnUnits: 赛法草*8(offsetRandomXY=300, falling=true), 星核(offsetRandomXY=300, falling=true)
highPriorityQueue: true
buildSpeed: 0.05s
#--------------------


[hiddenAction_阵营]
autoTrigger: if not self.globalTeamTags(includes='虫族')
addGlobalTeamTags: 虫族


[hiddenAction_顶点之处]
autoTrigger: if self.globalTeamTags(includes="顶点") and not self.tags(includes="顶点之处")
temporarilyAddTags: 顶点之处

[hiddenAction_落下顶点]
autoTrigger: if not self.globalTeamTags(includes="顶点") and self.tags(includes="顶点之处")
temporarilyRemoveTags: 顶点之处

[animation_1]
onActions:idle, move, attack
pingPong: true
scale_start: 1
scale_end: 1.01
speed: 80

[graphics]
image: 母巢.png
image_back: 母巢_back.png
scaleImagesTo: 60
showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 280
shootDelay: 50
[movement]
movementType: BUILDING
[turret_1]
x: 0
y: 25
invisible: true
projectile: 1
turnSpeedAcceleration: 1.0
shoot_light:#FF00CCCC
[projectile_1]
tags= T-projectile
directDamage: 70
life: 100
speed: 6
frame: 6
drawSize: 1.2
largeHitEffect:true

[projectile_衍黎塔]
tags= T-projectile
life: 50
speed: 100
invisible: true
deflectionPower: -1
flameWeapon: true

targetGround:true
targetGroundSpread: 250

areaDamage: 0
areaRadius: 0

explodeEffect:NONE
spawnUnit: 虫塔(gridAlign=true, addResources=野性:1)

[resource_野性]
displayName: 野性

[projectile_腐蚀塔]
@copyFromSection: projectile_衍黎塔
spawnUnit: 毒蚀塔(spawnChance=0.1, gridAlign=true, addResources=野性:1)

[projectile_summon]
tags= T-projectile
life: 60
instant: true
areaDamage: 0
spawnUnit: 天神草(alwayStartDirAtZero=true)
explodeEffect: CUSTOM:毒雾3*4

[projectile_天神草衍黎]
@copyFromSection: projectile_summon
spawnUnit: 天神草(alwayStartDirAtZero=true, addResources=setFlag:1)

[projectile_天神草狂猎]
@copyFromSection: projectile_summon
spawnUnit: 天神草(alwayStartDirAtZero=true, addResources=setFlag:2)

[effect_毒雾3]
#死亡喷射
stripIndex: effects
frameIndex: 0
priority:low

life: 200
fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:5
hSpeed: 0.8
scaleFrom: 1.0
scaleTo: 2.5
alpha: 0.4
drawUnderUnits:false
#yOffsetRelative:-7
xSpeedRelativeRandom:0.2
ySpeedRelativeRandom:0.2

shadow: true
atmospheric: true


[effect_shockwaveLarge]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 1.7
life: 36
alpha: 0.4
color: #FF3BFF00

[effect_explosionFlashLarge]
image: SHARED:light_50.png
scaleFrom: 4
scaleTo: 4
life: 20
fadeOut: true
priority: critical
color: #FF3BFF00

[effect_motherLight]
image: SHARED:light_50.png
life: 45
fadeOut: true
color: #FF3BFF00
scaleFrom: 1
scaleTo: 1




#————联动-未来科技:皎红————

@global JiaohongYanli: (self.globalTeamTags(includes='衍黎') and self.globalTeamTags(includes='皎红'))

[hiddenAction_虚红感染区]
autoTrigger: if ${JiaohongYanli} and not self.tags(includes='虚红感染区')
temporarilyAddTags: 虚红感染区

[hiddenAction_虚红感染雾]
autoTrigger: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<3 and ${JiaohongYanli}
spawnEffects: 感染

[effect_感染]
priority: verylow
life: 300
fadeInTime: 30
image: fog.png
color:#ff0000
scaleFrom:2
scaleTo:2.5
attachedToUnit:false
drawUnderUnits: true
alpha:0.1
atmospheric: true
ySpeedAbsolute:-0.2
xSpeedRelativeRandom:0.1
delayedStartTimerRandom:60
hSpeed:0.3
hSpeedRandom:0.1
dirSpeedRandom: 0.1
dirOffsetRandom: 180
xOffsetRelativeRandom:420
yOffsetRelativeRandom:420
spawnChance: 0.3


[template_提取目标]
takeResources_includeUnitsWithinRange: 600
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: units
takeResources_discardCollected: true
takeResources_maxUnits: 9999

[template_提取目标2]
@copyFromSection: template_提取目标
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=0, withinRange=${section.takeResources_includeUnitsWithinRange}) and ${JiaohongYanli}

[hiddenAction_虚红感染附中检测]
@copyFromSection: template_提取目标2
autoTriggerOnEvent: newMessage(withTag='虚红感染更新')
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=0, withinRange=${section.takeResources_includeUnitsWithinRange}) and ${JiaohongYanli} and numberOfUnitsInTeam(withTag='虚红感染附停系统激活')<1 and self.resource.虚红感染计时<=0
requireConditional: if numberOfUnitsInTeam(withTag="units", greaterThan=0, withinRange=${section.takeResources_includeUnitsWithinRange}) and ${JiaohongYanli} and numberOfUnitsInTeam(withTag='虚红感染附停系统激活')<1 and self.resource.虚红感染计时<=0
takeResources: hp=0
takeResources_excludeUnitsWithTheseResources: 虚红感染附中=10
takeResources_triggerActionForEach: 虚红感染附中
takeResources_triggerActionIfAnyCollected: 虚红感染计时+

[hiddenAction_虚红感染附中]
requireConditional: if thisActionTarget.resource.虚红感染附停<1
takeResources: 虚红感染附中=-2, 虚红感染附停=-1
takeResources_includeReference: thisActionTarget
takeResources_discardCollected: true
sendMessageTo: globalSearchForFirstUnit(withTag='单位系统', relation='own')
sendMessageWithTags: 虚红感染附停激活

fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 虚红感染特效
fireTurretXAtGround_withTarget: thisActionTarget.getOffsetAbsolute(y=-thisActionTarget.height)


[hiddenAction_虚红感染附加检测]
@copyFromSection: template_提取目标2
takeResources: hp=0
takeResources_excludeUnitsWithTheseResources: 虚红感染=2
takeResources_triggerActionForEach: 虚红感染时间

[hiddenAction_虚红感染时间]
requireConditional: if thisActionTarget.resource.虚红感染附中>=10
takeResources: 虚红感染=-1
takeResources_includeReference: thisActionTarget
takeResources_discardCollected: true


[hiddenAction_虚红感染负面检测]
@copyFromSection: template_提取目标2
takeResources: hp=0
takeResources_triggerActionForEach: 虚红感染负面恢复

[hiddenAction_虚红感染负面恢复]
requireConditional: if thisActionTarget.resource.虚红感染负面状态>=1
takeResources: 虚红感染负面状态=1, 负虚红感染=1
takeResources_includeReference: thisActionTarget
takeResources_discardCollected: true

fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 虚红感染特效2
fireTurretXAtGround_withTarget: thisActionTarget.getOffsetAbsolute(y=-thisActionTarget.height)


[hiddenAction_虚红感染计时-]
autoTrigger: if self.resource.虚红感染计时>0
addResources: 虚红感染计时=-10

[hiddenAction_虚红感染计时+]
addResources: 虚红感染计时=100


[resource_虚红感染附中]
displayName: 虚红感染附中
hidden: true

[resource_虚红感染附停]
displayName: 虚红感染附停
hidden: true

[resource_虚红感染]
displayName: 虚红感染
hidden: true

[resource_虚红感染负面状态]
displayName: 虚红感染负面状态
hidden: true

[resource_负虚红感染]
displayName: 负虚红感染
hidden: true

[resource_虚红感染计时]
displayName: 虚红感染计时
hidden: true


[turret_magic]
x: 0
y: 0
invisible: true
canShoot: false

[projectile_虚红感染特效]
directDamage: 0
invisible: true
life: 10
instant: true
targetGround_includeTargetHeight: true
explodeEffect: 虚红感染标, 虚红感染光, 虚红感染散

[projectile_虚红感染特效2]
@copyFromSection: projectile_虚红感染特效
explodeEffect: 虚红感染标, 弱虚红感染光, 弱虚红感染散


[effect_虚红感染标]
priority: low
life: 25
fadeInTime: 2
scaleFrom: 0.2
scaleTo: 0.25
alpha: 0.6
image: 皎红icon.png
attachedToUnit: true
alwayStartDirAtZero: true

[effect_虚红感染光]
priority: low
life: 30
scaleFrom: 1.3
scaleTo: 2.6
alpha: 1
image: SHARED:light_50.png
color: #FF0000
attachedToUnit: true
dirSpeedRandom: 3
dirOffsetRandom: 180

[effect_虚红感染散]
priority: low
life: 160
fadeOut: true
fadeInTime: 5
scaleFrom: 0.08
scaleTo: 0.2
alpha: 0.4
image: 红曜散裂.png
color: #FF0000
attachedToUnit: true

[effect_弱虚红感染光]
@copyFromSection: effect_虚红感染光
alpha: 0.8

[effect_弱虚红感染散]
@copyFromSection: effect_虚红感染散
life: 80
scaleTo: 0.16


[arm_1]
x: 0
y: 0
image_end: SHARED:blank.png
spinRate: 0.1

[arm_2]
@copyFromSection: arm_1
spinRate: 0.3

[arm_3]
@copyFromSection: arm_1
spinRate: -0.01

[decal_虚红感染区]
isVisible: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<20 and ${JiaohongYanli}
alwaysStartHeightAtZero: true
layer: shadow
image: 红光圈2.png
basePositionFromLegEnd: arm1
imageScale: 2.7
alpha: 0.05

[decal_感染显示圈]
isVisible: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=80)<3 and ${JiaohongYanli}
alwaysStartHeightAtZero: true
alwaysStartDirAtZero: true
layer: beforeUI
image: 红范围圈1200.png
imageScale: ${600/600}
alpha: 0.4
onlyWhenSelectedByAnyPlayer: true

[decal_感染红区]
isVisible: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<15 and ${JiaohongYanli}
alwaysStartHeightAtZero: true
layer: beforeUI
image: 红范围底.png
imageScale: ${600/600}
alpha: 0.05 / max( (numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600) /2), 1 )

[decal_感染环圈]
@copyFromSection: decal_虚红感染区
isVisible: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<3 and ${JiaohongYanli}and not self.globalTeamTags(includes='关闭感染区高级效果')
basePositionFromLegEnd: arm2
image: 红外光圈2.png
imageScale: ${2.7 * 0.73}

[decal_黑感染环圈]
@copyFromSection: decal_感染环圈
image: 黑红外光圈2.png
dirOffset: 60

[decal_感染裂面]
isVisible: if numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<4 and ${JiaohongYanli} and not self.globalTeamTags(includes='关闭感染区高级效果')
alwaysStartHeightAtZero: true
layer: shadow
image: 红散裂.png
imageScale: ${2.7 * 0.15} * (0.95 + cos( ${timer_10s} * 360 - ${b}) * 0.05)
basePosition: getOffsetRelative(x=0, y=0, dirOffset=self.timeAlive-self.dir)
onlyWithZoomLevelOrMore: 0.7

@define timer_10s: ((self.timeAlive() % 10) / 10)
alpha: 0.05+cos( ${timer_10s} * 360 - ${b}) * 0.04
@define b: 0

[decal_感染裂面2]
@copyFromSection: decal_感染裂面
imageScale: ${2.7 * 0.2} * (0.95 + cos( ${timer_10s} * 360 - ${b}) * 0.05)
@define b: 72

[decal_感染裂面3]
@copyFromSection: decal_感染裂面
imageScale: ${2.7 * 0.3} * (0.95 + cos( ${timer_10s} * 360 - ${b}) * 0.05)
@define b: 144

[decal_感染裂面4]
@copyFromSection: decal_感染裂面
imageScale: ${2.7 * 0.45} * (0.95 + cos( ${timer_10s} * 360 - ${b}) * 0.05)
alpha: 0.04+cos( ${timer_10s} * 360 - ${b}) * 0.03
@define b: 216

[decal_感染裂面5]
@copyFromSection: decal_感染裂面
imageScale: ${2.7 * 0.65} * (0.95 + cos( ${timer_10s} * 360 - ${b}) * 0.05)
alpha: 0.04+cos( ${timer_10s} * 360 - ${b}) * 0.03
@define b: 288


[decal_感染缠乱线]
isVisible: if (numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<3 or self.tags(includes='主母巢')) and ${JiaohongYanli} and not self.globalTeamTags(includes='关闭感染区高级效果')
alwaysStartHeightAtZero: true
layer: shadow
image: 红缠乱线.png
imageScale: ${2.7 * 0.5} * (0.8 + cos( ${timer_20s} * 360 - ${b}) * 0.2)
basePosition: getOffsetRelative(x=0, y=0, dirOffset=-self.timeAlive*2 -self.dir)
onlyWithZoomLevelOrMore: 0.5

@define timer_20s: ((self.timeAlive() % 20) / 20)
alpha: 0.35+cos( ${timer_20s} * 360 - ${b}) * 0.25
@define b: 0

[decal_感染缠乱线2]
@copyFromSection: decal_感染缠乱线
dirOffset: 90
@define b: 90

[decal_感染缠乱线3]
@copyFromSection: decal_感染缠乱线
dirOffset: 180
@define b: 180

[decal_感染缠乱线4]
@copyFromSection: decal_感染缠乱线
dirOffset: 270
@define b: 270

[decal_内感染缠乱线]
@copyFromSection: decal_感染缠乱线
isVisible: if (numberOfUnitsInTeam(withTag='虚红感染区', withinRange=600)<2 or self.tags(includes='主母巢')) and ${JiaohongYanli} and not self.globalTeamTags(includes='关闭感染区高级效果')
imageScale: ${2.7 * 0.5} * (0.4 + cos( ${timer_20s} * 360 - ${b}) * 0.2)
alpha: 0.45+sin( ${timer_20s} * 360 - ${b}) * 0.25
dirOffset: 45
@define b: 45

[decal_内感染缠乱线2]
@copyFromSection: decal_内感染缠乱线
dirOffset: 135
@define b: 135

[decal_内感染缠乱线3]
@copyFromSection: decal_内感染缠乱线
dirOffset: 225
@define b: 225

[decal_内感染缠乱线4]
@copyFromSection: decal_内感染缠乱线
dirOffset: 315
@define b: 315

[action_感染区高级效果]
isVisible: if ${JiaohongYanli} and not self.globalTeamTags(includes='关闭感染区高级效果')
id: 感染区高级效果开
text: {感染区高级效果:开}
description: -关闭后可立即隐藏自身感染区的特殊贴花特效 \n -可用于缓解卡顿
buildSpeed: 0s
pos: 20
iconExtraImage: icon_on.png
iconExtraColor: #64FFFFFF
displayType: infoOnly
highPriorityQueue: true
allowMultipleInQueue: false
addGlobalTeamTags: 关闭感染区高级效果

[action_感染区高级效果2]
@copyFromSection: action_感染区高级效果
isVisible: if ${JiaohongYanli} and self.globalTeamTags(includes='关闭感染区高级效果')
id: 感染区高级效果关
text: {感染区高级效果:关}
iconExtraImage: icon_off.png
addGlobalTeamTags: IGNORE
removeGlobalTeamTags: 关闭感染区高级效果


[hiddenAction_AI普拉克勒斯]
autoTrigger: if self.isControlledByAI and numberOfUnitsInTeam(withTag='天神草', lessThan=1, incompleteBuildings=true) and not self.globalTeamTags(includes='天神草初唤')
spawnUnits: 天神草(skipIfOverlapping=true, offsetRandomY=280, offsetRandomX=280)

[action_AI建造虫征集]
isVisible: if self.globalTeamTags(includes='AI系统') and not numberOfUnitsInTeam(withTag='建造虫', greaterThan=5)
unitShownInUI: bugSpore
textAddUnitName: bugSpore
descriptionAddFromUnit: bugSpore
descriptionAddUnitStats: bugSpore
produceUnits: bugSpore
buildSpeed: 0.005
price: 100
pos: 1

[action_AI蚊子征集]
isVisible: if self.globalTeamTags(includes='AI系统') and (not self.tags(includes='初蚊') or not numberOfUnitsInTeam(withTag='蚊子', greaterThan=1) and not self.globalTeamTags(includes='开端{I}'))
@define units: 蚊子
unitShownInUI: ${units}
textAddUnitName: ${units}
descriptionAddFromUnit: ${units}
descriptionAddUnitStats: ${units}
produceUnits: ${units}
buildSpeed: 4.5s
price: 380
pos: 2

[hiddenAction_AIbuildbugSpore]
autoTrigger:if self.globalTeamTags(includes='AI系统') and self.hasResources(100) and not numberOfUnitsInTeam(withTag='建造虫', greaterThan=5) and self.queueSize(empty=true) and not self.globalTeamTags(includes='战隙{I}')
alsoQueueAction: AI建造虫征集
addResources: credits=-100

[hiddenAction_AIbuildMosquito]
autoTrigger:if self.globalTeamTags(includes='AI系统') and self.hasResources(760) and (numberOfUnitsInTeam(withTag='建造虫', greaterThan=2) or numberOfUnitsInEnemyTeam(greaterThan=0, withTag='苍蓝出场')) and not self.tags(includes='初蚊')
alsoQueueAction: AI蚊子征集, AI蚊子征集
addResources: credits=-760
temporarilyAddTags: 初蚊

[hiddenAction_AIMosquito+]
autoTrigger:if self.globalTeamTags(includes='AI系统') and self.tags(includes='初蚊') and numberOfUnitsInEnemyTeam(withTag='蚊子', greaterThan=1) and numberOfUnitsInEnemyTeam(withTag='拦截机', lessThan=1) and not self.globalTeamTags(includes='开端{I}') and not self.tags(includes='初蚊2')
temporarilyAddTags: 初蚊2
temporarilyRemoveTags: 初蚊