
[core]
name: 虫族资源抽取器T2
displayDescription: -窃取地脉能源\n -只能建造在资源池上
class: CustomUnitMetadata
price: 2600
maxHp: 1000
mass: 9000

@define CorrosionMode: 0
generation_resources: 腐蚀=${0.75 + CorrosionMode}
generation_credits: 24
generation_delay: 40

fogOfWarSightRange: 16

techLevel: 1
buildSpeed: 0.002

radius: 18

isBio: true
isBug: true

isBuilding: true
isBuilder: true

placeOnlyOnResPool: true

selfRegenRate:0.1
selfBuildRate:0.002

softCollisionOnAll: 3

energyMax:1

tags: units, 虫族, 虫建筑, 虫筑系T2, 资源提取器
showActionsWithMixedSelectionIfOtherUnitsHaveTag:资源提取器

[hiddenAction_erosions]
requireConditional: if self.globalTeamTags(includes='衍黎')
autoTriggerOnEvent: created
autoTrigger: if self.customTimer(laterThanSeconds=60)
spawnEffects: custom:curewave
resetCustomTimer: true

[effect_curewave]
priority: critical
liveAfterAttachedDies: false
fadeOut: false
attachedToUnit: true
drawUnderUnits: true
image: SHARED:light_50.png
color: #AEFF00
life: 3660
scaleFrom: 5.0
scaleTo: 5.0
alpha: 0.1

[hiddenAction_狂猎]
autoTrigger:if self.globalTeamTags(includes='狂猎')
convertTo: 虫族资源抽取器T2[狂猎]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
alsoTriggerAction: 狂猎升级队列

[action_1]
convertTo: 虫族资源抽取器T3
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  2400
text: 进化 - T3
displayType: upgrade
buildSpeed: 40s
addResources: energy=1
pos: 0.1
ai_isHighPriority: true
descriptionAddUnitStats: ${section.convertTo}

[action_trigger]
autoTrigger: if self.isEnergyFull() and self.globalTeamTags(includes='衍黎')
addResources: energy=-1
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 1
isVisible: false

[action_trigger2]
autoTrigger: if self.globalTeamTags(includes='衍黎')
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 2
isVisible: false

[hiddenAction_狂猎升级队列]
requireConditional: if self.queueSize(withActionTag='1', greaterThan=0)
addResources: setFlag=1


[hiddenAction_AIupgrade]
autoTrigger: if ( self.globalTeamTags(includes='AI系统') or self.hasUnitInTeam(withTag="腐蚀-蔓延") and self.hasUnitInTeam(withTag="腐蚀之意") ) and self.hasResources(${action_1.price}) and self.queueSize(empty=true)
alsoQueueAction: 1
addResources: credits=-${action_1.price}


[hiddenAction_顶点之处]
autoTrigger: if self.globalTeamTags(includes="顶点") and not self.tags(includes="顶点之处")
temporarilyAddTags: 顶点之处

[hiddenAction_落下顶点]
autoTrigger: if not self.globalTeamTags(includes="顶点") and self.tags(includes="顶点之处")
temporarilyRemoveTags: 顶点之处

[graphics]
total_frames: 1

image:        虫矿.png
image_wreak:  NONE

imageScale: 1.1

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1

showEnergyBar: false

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 100
animation_idle_scale_start:1
animation_idle_scale_end:1.05
animation_idle_pingPong: true


[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 100
shootDelay: 50

[turret_1]
x:0
y:0

[projectile_1]
tags= T-projectile
life: 50
speed: 1000

image: null.png
deflectionPower: -1
flameWeapon: true

targetGround:true
targetGroundSpread: 100

areaDamage: 0
areaRadius: 0

explodeEffect:NONE
spawnUnit:虫塔(gridAlign=true, addResources=野性:1)

[projectile_2]
tags= T-projectile
areaDamage:-3
areaRadius:100
areaDamageNoFalloff:true
areaHitAirAndLandAtSameTime:true
areaHitUnderwaterAlways:true
life:50
instant: true
targetGround:true
friendlyFire:only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0
explodeEffect:NONE

[resource_野性]
displayName: 野性

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
buildPriority:1.0
recommendedInEachBasePriorityIfUnmet:0.55
recommendedInEachBaseNum:2
noneInBaseExtraPriority:0.43
maxEachBase:99
ai_upgradePriority:1
upgradedFrom:虫族资源抽取器




