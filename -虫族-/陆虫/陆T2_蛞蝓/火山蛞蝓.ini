
[core]
name: 火山蛞蝓
displayText: 火山蛞蝓
displayDescription: -攻击地面单位 \n -移动留下岩浆 \n -死亡产生较大岩浆 \n -岩浆可对敌方造成伤害 \n -岩浆对建筑伤害较低 \n -巡逻时不会攻击 \n -岩浆: [伤害:50/0.5s]

copyFrom: 蛞蝓.ini

price: credits=3200, 腐蚀=${corrode}

maxHp: 2900

armour: 20
armourMinDamageToKeep: 20

unitsSpawnedOnDeath: 资源返还(addResources=ammo:800|energy:${int(corrode*0.25)}), 岩浆(addResources=setFlag:2)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 火山蛞蝓[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 300
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[action_Upgrade]
isVisible: false

[hiddenAction_自动腐蚀]
@copyFrom_skipThisSection:true

[hiddenAction_mucus]
autoTrigger: if (self.isMoving or self.hasTakenDamage<3 or self.isAttacking) and numberOfUnitsInTeam(withTag='小岩浆', withinRange=40) < 1
spawnUnits: 岩浆(offsetY=5)

[hiddenAction_黏液补充]
autoTrigger: if (self.isMoving or self.hasTakenDamage<3 or self.isAttacking) and numberOfUnitsInTeam(withTag='小岩浆', withinRange=40) > 0
takeResources_excludeUnitsWithoutTags: 小岩浆

[graphics]
image: 火山蛞蝓.png

[turret_1]
resourceUsage: hp=0

[projectile_1]
directDamage: 50
explodeEffect: 咬击岩浆粒子*3

[effect_咬击岩浆粒子]
priority: verylow
attachedToUnit: false
life: 60
image: 白粒.png
color: #B02C00
scaleFrom: 1.5
scaleTo: 1.5
alpha: 0.9
hSpeed: 0.2
hSpeedRandom: 0.1
dirSpeedRandom: 1
xSpeedRelativeRandom: 0.4
ySpeedRelativeRandom: 0.4