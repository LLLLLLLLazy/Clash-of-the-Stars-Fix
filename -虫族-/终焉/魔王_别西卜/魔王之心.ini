
[core]
showInEditor:false
name: 魔王之心
displayDescription:  -控制着你的所有混沌蝇至此聚集 \n -每只混沌蝇可为别西卜的复活提供100生命 \n -当周围的混沌蝇数量寥寥无几时便会消散 \n "祂终将卷土而来"
tags: 魔王之心, 虚无
maxHp:1
price: 600000, 腐蚀=${corrode}
mass: 100000
armour:	999999
armourMinDamageToKeep: 0

fogOfWarSightRange: 44

buildSpeed: 1200s
experimental: true

energyMax: 200
energyRegen: 0.01667
energyStartingPercentage: 0

radius: 10
displayRadius: 0
showOnMinimap: false
disableAllUnitCollisions: true
canNotBeDirectlyAttacked: true
#showInEditor: false

numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

fireTurretXAtSelfOnDeath: siloTop

[hiddenAction_腐蚀价格]
@global corrode: 60000
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_卷土而来]
spawnUnits: 别西卜(addResources=setFlag:2)
price: energy=200
text: 归来
description: "神明是无法被杀死的,你能做到的唯有驱逐"
displayType: infoOnly
buildSpeed: 0
pos: 0
deleteSelf: true

[hiddenAction_created]
#requireConditional: if self.isControlledByAI()
autoTriggerOnEvent: created
spawnUnits: 混沌蝇[锋势]*400(offsetRandomX=400,offsetRandomY=400)
spawnEffects:CUSTOM:面纱*30, 面纱元纹, 面纱云*3, 面纱云快, 疫命神晕, 疫命神晕闪, 启心圆曲, 面纱元纹曲, 震动
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 2

[hiddenAction_death]
autoTrigger: if not numberOfUnitsInTeam(greaterThan=20, withinRange=1000, withTag='混沌蝇') and self.timeAlive(laterThanSeconds=5)
setResourcesWithLogic: hp=-99999

[effect_面纱]
#烟雾
priority: critical

life: 500
lifeRandom: 100
fadeOut: true
attachedToUnit: false
image: 模糊闪雾.png
color: #AEFF00
fadeInTime: 10
scaleFrom: 1.2
scaleTo: 1.6
alpha: 0.6
drawUnderUnits:false
#ySpeedRelative:-1
#atmospheric:true

dirOffsetRandom:180

xOffsetRelativeRandom:360
yOffsetRelativeRandom:360

xSpeedAbsoluteRandom: 2
ySpeedAbsoluteRandom: 2

delayedStartTimerRandom: 60

[effect_面纱元纹]
priority: critical
life: 120
fadeOut: true
image: 模糊神经元胞.png
color: #AEFF00
scaleFrom: 5
scaleTo: 5.2
alpha: 0.6
drawUnderUnits: false
attachedToUnit: false
dirOffsetRandom: 180
dirSpeed: 0.1
alsoEmitEffects: 面纱元纹痕

[effect_面纱元纹痕]
priority: critical
life: 1000
fadeOut: true
image: 模糊神经元胞.png
color: #AEFF00
scaleFrom: 5
scaleTo: 4.8
alpha: 0.15
drawUnderUnits: true
attachedToUnit: false

[effect_面纱云]
priority: critical
life: 600
lifeRandom: 200
fadeInTime: 15
image: 云圈.png
color: #AEFF00
scaleFrom: 1
scaleTo: 8
alpha: 0.3
attachedToUnit: false
dirOffsetRandom: 180
dirSpeedRandom: 0.5
delayedStartTimerRandom: 30

[effect_面纱云快]
@copyFromSection: effect_面纱云
life: 300
lifeRandom: 0
fadeInTime: 30

[effect_疫命神晕]
priority: critical
life: 400
fadeOut: true
attachedToUnit: false
image: Corona.png
color: #AEFF00
fadeInTime: 30
scaleFrom: 1
scaleTo: 6
alpha: 0.5
drawUnderUnits: false
dirOffsetRandom: 180
dirSpeedRandom: 0.1

[effect_疫命神晕闪]
@copyFromSection: effect_疫命神晕
life: 60
fadeInTime: 0
scaleFrom: 4
scaleTo: 5
alpha: 0.8

[effect_启心圆曲]
priority: critical
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 40
fadeOut: true
attachedToUnit: false
scaleFrom: 10
scaleTo: 10
alpha: 0.3
dirSpeed: 5
dirOffsetRandom: 180

[effect_面纱元纹曲]
@copyFromSection: effect_面纱元纹
drawType: displacement
life: 60
alpha: 0.6

[effect_震动]
priority: critical
drawType: displacement
image: what.png
life: 30
fadeOut: true
attachedToUnit: false
scaleFrom: 100
scaleTo: 100
alpha: 0.05
drawUnderUnits: false
alwayStartDirAtZero: true
total_frames: 2
animateFrameStart: 0
animateFrameEnd: 1
animateFrameSpeed: 0.4
animateFrameLooping: true


[graphics]
image:        毒雾.png
image_wreak: NONE
image_turret:NONE

icon_zoomed_out_neverShow: true
isVisibleToEnemies: false

[decal_疫之环]
onlyWhileAlive: true
layer: onTop
alpha: 0.3
image: Corona.png
imageScale: 0.1
color: #7AB200

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
maxAttackRange: 1000

[turret_1]
x: 0
y: 0
projectile: 1

[projectile_1]
areaDamage:0
areaRadius:0
life:50
instant:true
explodeEffect:NONE
explodeEffectOnShield:NONE

[projectile_2]
life: 0
speed: 0
explodeOnEndOfLife:true
explodeEffect:CUSTOM:displacement

areaDamage: 0
areaRadius: 600

areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true

pushForce: 10000
pushVelocity: 30

[effect_displacement]
priority:critical
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 50
fadeOut: true

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 12
alpha: 0.5
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeed: 5

[movement]
movementType: AIR
moveSpeed: 4.5
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.1

targetHeight: 0
targetHeightDrift: 0

maxTurnSpeed: 10
turnAcceleration: 0.5

moveSlidingMode :true
moveIgnoringBody: true


#镇魂星————————————

[turret_siloTop]
#nuke turret
canShoot: false

x: 0
y: 0
idleDir:0

invisible: true

shoot_flame: CUSTOM:镇魂*5
shoot_light:#FFEECCCC
projectile: nukeProjectile
size: 0

[projectile_nukeProjectile]
life: 99999
speed: 2.5

areaDamage: 1000
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
alwaysVisibleInFog: true
nukeWeapon:true

areaRadius: 400
areaExpandTime:100

deflectionPower:-1

shouldRevealFog:true
spawnUnit: 镇魂

hitSound: false

trailEffect: CUSTOM:镇魂
trailEffectRate: 1

spawnProjectilesOnExplode: 镇魂爆炸效果(recursionLimit=99)
[projectile_镇魂爆炸效果]
areaDamage: 0
life: 0
explodeOnEndOfLife: true
explodeEffect: CUSTOM:shockwave, CUSTOM:恶地, CUSTOM:stripIndex*8

[effect_shockwave]
stripIndex: shockwave
priority:critical
color: #AEFF00
life: 150
scaleFrom: 0
scaleTo: 15.0

[effect_stripIndex]
stripIndex: effects
frameIndex: 0
priority:critical
showInFog: true
createWhenOffscreen: true

life: 3000
fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:100
dirSpeedRandom: 0.1
scaleFrom: 24.0
scaleTo: 32.0
alpha: 0.2
drawUnderUnits:false
#yOffsetRelative:-7
xOffsetRelativeRandom:350
yOffsetRelativeRandom:350
xSpeedRelativeRandom:0.1
ySpeedRelativeRandom:0.1

shadow: true

[effect_恶地]
priority:critical
image: mudPool.png
life: 9999
scaleFrom: 1.0
scaleTo: 1.0
alpha: 1.0
drawUnderUnits:true
showInFog: true
createWhenOffscreen: true

[effect_镇魂]
#雾
stripIndex: effects
frameIndex: 0
priority:low

life: 120
fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:3
hSpeed: 0.5
scaleFrom: 0.8
scaleTo: 3.2
alpha: 0.4
drawUnderUnits:false
xOffsetRelativeRandom:5
xSpeedRelativeRandom:0.5
ySpeedRelative:0.5
ySpeedRelativeRandom:0.5

shadow: true
atmospheric: true