
[core]
showInEditor: false
name: 修复虫
displayDescription: -可治疗或回收己方单位 \n-可以回收资源 \n-死亡时治疗周围友军 \n-被回收可恢复血量
class: CustomUnitMetadata
price: 5
maxHp: 300
mass: 1000
reclaimPrice: hp=300

techLevel: 1
buildSpeed: 13.9s

radius: 8
displayRadius: 10
softCollisionOnAll: 12

isBio: true
isBug: true
isBuilder: true
tags: units, 虫族, 小型虫, 修复虫, 召唤物

selfRegenRate: 0.06

autoRepair: true
canRepairBuildings: true
canRepairUnits : true

nanoRange: 200
nanoBuildSpeed: 0.25
nanoRepairSpeed: 0.11
resourceReclaimMultiplier: 0.5

canReclaimResources: true

fireTurretXAtSelfOnDeath: nano

autoTriggerCooldownTime: 0.1s

[hiddenAction_自毁]
autoTrigger: if self.parent == nullUnit
setResourcesWithLogic: hp=-9999

[hiddenAction_附从维修]
autoTrigger: if parent.hasActiveWaypoint(type='repair') and (not self.hasActiveWaypoint(type='repair') or activeWaypointTarget!=parent.activeWaypointTarget) and distanceBetween(self, parent.activeWaypointTarget) <= 200
clearAllWaypoints: true
addWaypoint_type: repair
addWaypoint_prepend: true
addWaypoint_target_fromReference: parent.activeWaypointTarget

[hiddenAction_附从回收]
autoTrigger: if parent.hasActiveWaypoint(type='reclaim') and (not self.hasActiveWaypoint(type='reclaim') or activeWaypointTarget!=parent.activeWaypointTarget) and distanceBetween(self, parent.activeWaypointTarget) <= 200
clearAllWaypoints: true
addWaypoint_type: reclaim
addWaypoint_prepend: true
addWaypoint_target_fromReference: parent.activeWaypointTarget

[canBuild_1]
name: reclaim
pos:  -1

[graphics]
image:        修复虫.png
image_wreak: NONE
image_turret: NONE
#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 60
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true

lock_body_rotation_with_main_turret: true

[attack]
turretRotateWithBody: false

canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 2.5

maxAttackRange: 200
shootDelay: 85

[turret_nano]
#nano turret (nano must be slot 1)
x: 0
y: 0
invisible: true
isMainNanoTurret:true
warmup:30

turnSpeedAcceleration: 0.12

canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

projectile: nano

[projectile_nano]
tags= T-projectile
areaDamage: -200
areaRadius: 85
areaRadiusFromEdge: true
areaHitAirAndLandAtSameTime: true
friendlyFire: only-ignoreEnemy
shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0

mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

life: 120
instant: true
invisible: true

explodeEffect: 愈波, 愈光, 愈中光, 碎愈光*3


[effect_愈波]
image: bubble.png
life: 30
scaleFrom: 0
scaleTo: 3.5
alpha: 1
color: #3BFF00

[effect_愈光]
stripIndex: light_50
life: 25
scaleFrom: 0
scaleTo: 3.5
alpha: 0.6
color: #3BFF00

[effect_愈中光]
stripIndex: light_50
life: 40
fadeInTime: 5
scaleFrom: 0.8
scaleTo: 0.6
alpha: 0.8
color: #3BFF00

[effect_碎愈光]
stripIndex: light_50
priority: low
life: 40
lifeRandom: 20
fadeOut: true
attachedToUnit: false
color: #3BFF00
hSpeed: 0.01
scaleFrom: 0.5
scaleTo: 0.3
alpha: 0.5
xSpeedRelativeRandom: 1
ySpeedRelativeRandom: 1

[movement]
movementType: LAND
moveSpeed: 0.8
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.12

maxTurnSpeed: 99
turnAcceleration: 99

reverseSpeedPercentage:0

[ai]
useAsBuilder: true