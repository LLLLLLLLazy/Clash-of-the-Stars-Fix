[core]

copyFrom: turret_common_land.ini

name:虫高塔T3

price:19300
maxHp:1900

techLevel:3
buildSpeed:0.001

generation_credits:-2

tags: units, 虫族, 虫建筑, 炮塔

selfRegenRate:0.2

displayDescription:-仅对空\n-射程很远\n-攻击时释放空中范围击退\n-祂抓住那颗星辰……
fogOfWarSightRange:26

energyMax: 1
energyRegen: 0.0003

[action_击退]
price:energy=1
pos:0.1
text: 群星尖啸
description:-笼罩星空下的扭曲之音……\n-击退范围内的空中敌人\n-扭曲之手将捕获天空\n-拉取最近的远方空中目标并造成伤害\n-对价值极高的目标拉力较低
buildSpeed:0.1s
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: dreadAura2
onlyOneUnitAtATime: true
highPriorityQueue: true
#addResources: setFlag=1
alsoTriggerAction: 扭曲
[hiddenAction_扭曲]
fireTurretXAtGround: 4
fireTurretXAtGround_withOffset: 0, 0
[effect_curewave]
image: shockwave.png
life: 85
scaleFrom: 0
scaleTo: 11
alpha: 0.9
color: #94B072
alsoPlaySound: large_gun_fire2
[graphics]
image:cccc3.png
scaleImagesTo:40

[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:false
canAttackUnderwaterUnits:false

maxAttackRange:460
shootDelay:350
[turret_1]
x:0
y:0
barrelHeight: 33
shoot_light:#FF00CCCC
projectile: 1
[turret_2]
x:-14
y:0
barrelHeight: 10
copyFrom: 1
projectile: 2
delay: 30
idleDir: -100
turnSpeed: 0
canAttackMaxAngle: 181
[turret_3]
x:15
y:0
barrelHeight: 15
copyFrom: 2
warmup:	15
idleDir: -60

[turret_4]
x:0
y:0
barrelHeight: 33
copyFrom: 1
projectile: 3
delay: 0
shoot_flame: CUSTOM:扭曲波
resourceUsage: unsetFlag=1
canAttackCondition:	if self.hasFlag(id=1)
canAttackMaxAngle: 181

[projectile_1]
directDamage:600
life:170
speed:10
frame:6
color: #00FF00
lightColor: #FFBF00
lightSize: 0.6
trailEffect: CUSTOM:绿光, CUSTOM:projectileTrail
trailEffectRate: 1
deflectionPower: 4
explodeEffect: CUSTOM:explode
explodeEffectOnShield: CUSTOM:explode
autoTargetingOnDeadTarget: true
spawnProjectilesOnCreate: dreadAura
spawnProjectilesOnExplode:1-2*10(offsetRandomXY=60)

[projectile_1-2]
directDamage: 10
life: 100
speed: 6
frame: 11
drawSize: 0.8
color: #ff3bff00
lightColor: #ff3bff00
lightSize: 0.4
deflectionPower: -1
autoTargetingOnDeadTarget: true

[projectile_2]
directDamage:80
life:70
speed:9
frame:6
turnSpeed: 15
color: #00FF00
lightColor: #00FF00
lightSize: 0.4
trailEffect: CUSTOM:projectileTrail2
trailEffectRate: 3
explodeEffect: CUSTOM:explodeSmall
wobbleAmplitude: 0.6
wobbleFrequency: 0.12s
autoTargetingOnDeadTarget: true

[projectile_3]
directDamage:0
life:10
speed:4
turnSpeed:5
invisible:true
explodeEffect: CUSTOM:扭曲波
explodeEffectOnShield: CUSTOM:扭曲波
spawnProjectilesOnEndOfLife: 3(yOffsetRelative=0, recursionLimit=30), 扭曲波(recursionLimit=99, offsetHeight=20)
spawnProjectilesOnExplode: 3(offsetRandomXY=200, recursionLimit=30), 扭曲波(recursionLimit=99, offsetHeight=20)
deflectionPower: -1
retargetingInFlight: true
retargetingInFlightSearchDelay: 0
retargetingInFlightSearchRange: 1500
wobbleAmplitude:8
wobbleFrequency:120

[projectile_扭曲波]
areaDamage: 1
areaRadius: 50
pushForce: -1
pushVelocity: -4
life: 0
speed: 0
invisible: true
deflectionPower: -1
explodeOnEndOfLife:true
explodeEffect: CUSTOM:扭曲波
explodeEffectOnShield: CUSTOM:扭曲波
#spawnProjectilesOnExplode: 扭曲波(recursionLimit=30)
#explodeEffect: NONE
#explodeEffectOnShield: NONE
spawnUnit: 扭曲魂灵(offsetHeight=20)

[projectile_dreadAura]
life: 1
speed: 0
invisible: true
targetGround: true
targetGroundHeightOffset: 35
explodeOnEndOfLife: true
explodeEffect: CUSTOM:curewave
deflectionPower: -1
areaDamage: 10
areaRadius: 320
areaExpandTime:75
pushForce:1
pushVelocity:8

[projectile_dreadAura2]
@copyFromSection: projectile_dreadAura
areaDamage: 100
areaRadius: 450
areaExpandTime:105
pushForce:10000
pushVelocity:16
explodeEffect: CUSTOM:curewave1, CUSTOM:curewave2, CUSTOM:curewave3

[effect_curewave1]
image: shockwave.png
life: 95
scaleFrom: 0
scaleTo: 16
alpha: 0.9
color: #94B072
alsoPlaySound: large_gun_fire2

[effect_curewave2]
@copyFromSection: effect_curewave1
color: #5FC761
alsoPlaySound: laser_deflect
delayedStartTimer: 1

[effect_curewave3]
@copyFromSection: effect_curewave1
color: #41B571
alsoPlaySound: large_gun_fire2
delayedStartTimer: 2


[effect_explode]
color: #ff3bff00
life: 20
attachedToUnit: true
image: 白爆.png
scaleFrom: 0.9
scaleTo: 0.9
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
yOffsetRelative: 0
xOffsetRelative: 0

[effect_explodeSmall]
@copyFromSection: effect_explode
life: 20
image: explode_big2.png
scaleFrom: 0.6
scaleTo: 0.6


[effect_扭曲波]
image: shockwave.png
attachedToUnit: false
life: 20
scaleFrom: 0
scaleTo: 2
alpha: 0.5
color: #ff3bff00
alsoEmitEffects: CUSTOM:扭曲波2

[effect_扭曲波2]
@copyFromSection: effect_扭曲波
scaleFrom: 2
scaleTo: 0

[effect_绿光]
color: #00FFAA
createWhenZoomedOut: false
priority:low
image: 白光.png
life: 60
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #00FFAA
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:false

[effect_projectileTrail2]
@copyFromSection: effect_projectileTrail
alpha: 0.5
scaleFrom: 0.3
scaleTo: 0.3


[ai]
upgradedFrom: 虫高塔T2

[hiddenAction_AIreclaim]
autoTrigger: if self.isControlledByAI and self.hp(lessThan=240) and self.queueSize(empty=true)
alsoQueueAction: reclaim