
[core]
name: 航灵刺[亡灵]
displayDescription: -追踪穿刺
price: 0
maxHp: 1
mass: 500
tags: 航灵刺

techLevel: 1
buildSpeed: 0.001

fogOfWarSightRange: 3

#隐藏单位本身
showInEditor: false
radius: 0
showOnMinimap: false
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

energyMax: 6
energyRegen: -0.01666
dieOnZeroEnergy: true

autoTriggerCooldownTime: 5
autoTriggerCooldownTime_allowDangerousHighCPU: true

@memory 锁定目标:unit

[hiddenAction_创建时]
autoTriggerOnEvent: created
addWaypoint_type: move
addWaypoint_maxTime: 0.2s
addWaypoint_position_relativeOffsetFromSelf: 0, 150
setUnitMemory: 属性[3]=customTarget1.readUnitMemory("属性", type='float', index=3)
alsoTriggerAction: 属性变化

[hiddenAction_锁定目标]
autoTrigger: if customTarget1!=null and customTarget1.attacking!=null and memory.锁定目标!=customTarget1.attacking and self.timeAlive>0.1
setUnitMemory: 锁定目标=customTarget1.attacking
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_target_fromReference: customTarget1.attacking

[hiddenAction_锁定攻击]
autoTrigger: if memory.锁定目标!=null and self.timeAlive>0.1
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_target_fromReference: memory.锁定目标

[hiddenAction_归随]
autoTrigger: if (memory.锁定目标==null or memory.锁定目标.hp<=0) and customTarget1.attacking==null and customTarget1!=null
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_target_fromReference: customTarget1


[hiddenAction_穿刺]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='units', withinRange=70)+numberOfUnitsInEnemyTeam(withTag='可承伤单位', withinRange=70)>0 or nearestUnit(withinRange=70, relation='enemy', incompleteBuildings=true).maxHp>5
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0

[hiddenAction_散爆]
autoTriggerOnEvent: destroyed
requireConditional: if not self.isAttacking
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0

[graphics]
image: 航灵刺[亡灵].png
image_wreak: NONE
image_turret: NONE
imageScale: 1.1

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0

showEnergyBar: false

icon_zoomed_out_neverShow: true

movementEffect: CUSTOM:projectileTrail, CUSTOM:散绿光, 线光
movementEffectRate: 3

[decal_光芒]
layer: afterBody
image: 亡灵光.png
imageScale: 0.8
alpha: 0.4
teamColors: true

[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 45
shootDelay: 5

turretMultiTargeting: true

[turret_1]
x: 0
y: 0
projectile: 1
canShoot: false

[turret_2]
x: 0
y: 0
projectile: 2
canAttackMaxAngle: 181

[projectile_1]
areaDamage: 115
areaRadius: 45
life: 0

deflectionPower: -1
explodeOnEndOfLife: true

largeHitEffect: true
speed: 0
turnSpeed: 0

areaHitAirAndLandAtSameTime: true

explodeEffect: CUSTOM:hitLightFlash, 绿爆, 冲击波, 震击波

explodeEffectOnShield: CUSTOM:hitLightFlash, 绿爆, 冲击波, 震击波

[projectile_2]
directDamage: 0
life: 10
deflectionPower: -1
explodeOnEndOfLife: true
speed: 999

targetGround: true
targetGround_includeTargetHeight: true

explodeEffect: 烁刺光, 烁散粒*3, 烁散子*5
explodeEffectOnShield: 烁刺光, 烁散粒*3, 烁散子*5


[projectile_null]
directDamage: 0
life: 0
speed: 0
invisible: true


[effect_绿爆]
priority: veryhigh
life: 25
fadeOut: false
attachedToUnit: true
image: 白爆.png
color: #80FFFF
scaleFrom: 1.2
scaleTo: 1.2
alpha: 0.6
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
alsoPlaySound: missile_hit

[effect_hitLightFlash]
priority: high
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 2
scaleTo: 2
alpha: 0.6

[effect_冲击波]
stripIndex: shockwave_large
life: 30
fadeInTime: 3
color: #80FFFF
scaleFrom: 0
scaleTo: 1
alpha: 1

[effect_震击波]
priority: high
image: 冲击散.png
life: 20
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 0
scaleTo: 0.6
alpha: 0.6
drawUnderUnits:true


[effect_烁刺光]
priority: high
image: 烁闪光.png
life: 25
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 0.6
scaleTo: 1
alpha: 0.7

[effect_烁散粒]
priority: verylow
image: SHARED:light_50.png
life: 30
lifeRandom: 7
fadeInTime: 6
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 0.4
scaleTo: 0.2
alpha: 0.7
ySpeedRelative: -3
ySpeedRelativeRandom: 2
xSpeedRelativeRandom: 2
dirOffsetRandom: 360
spawnChance: 0.8

[effect_烁散子]
priority: verylow
image: 拖尾弹.png
life: 30
lifeRandom: 12
fadeInTime: 6
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 0.6
scaleTo: 0.1
alpha: 0.8
ySpeedRelative: 3
ySpeedRelativeRandom: 1
pivotOffset: -180
pivotOffsetRandom: 35
spawnChance: 0.8


[effect_projectileTrail]
priority: verylow
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #80FFFF
fadeInTime:2
scaleFrom: 0.3
scaleTo: 0.2
alpha: 0.6
teamColorRatio: 1

[effect_散绿光]
priority: verylow
image: SHARED:light_50.png
life: 45
fadeOut: true
attachedToUnit: false
color: #80FFFF
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.7
teamColorRatio: 1
ySpeedRelativeRandom: 2
xSpeedRelativeRandom: 2
dirOffsetRandom: 360

[effect_线光]
createWhenZoomedOut: false
priority: low
image: 一线光.png
life: 50
fadeOut: true
attachedToUnit: false
scaleFrom: 0.3
scaleTo: 0.2
alpha: 0.4
color: #80FFFF
teamColorRatio: 1
ySpeedRelative: -0.4
atmospheric: true


[movement]
movementType: AIR
moveSpeed: 7
moveAccelerationSpeed: 1
moveDecelerationSpeed: 0.005

maxTurnSpeed: 12
turnAcceleration: 0.12

targetHeight: 3

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0

