[core]


copyFrom: ROOT:/-帝国-/建筑_帝国前哨站/技能/黑障_建筑/黑障之护.template
tags: units, 帝国前哨站, 基地, 步兵塔, 资源池建筑
name: 帝国远征军前哨站
maxHp: 4000
mass: 100
price: 10000
radius: 50
generation_credits: 36
borrowResourcesWhileAlive: 支配值=-10
isBuilding: true
isBio: false
buildSpeed: 50s
footprint: -2,-1,2,1
constructionFootprint: -2,-1,2,1
buildingToFootprintOffsetY: 17
#maxShield: 1000
#shieldRegen: 0.2
fogOfWarSightRange: 28
fogOfWarSightRangeWhileNotBuilt: 15
maxTransportingUnits: 3
transportUnitsRequireTag: 步兵
isPickableStartingUnit: true
displayDescription: -帝国阵营\n-良好视野\n-生产资金\n-不自带攻击能力\n-可驻守三名步兵\n-提升驻守步兵的30攻击范围\n-起始基地被毁会损失资源
numBitsOnDeath: 20
effectOnDeath: CUSTOM:shockwaveLarge, largeExplosion, CUSTOM:explosionFlashLarge, CUSTOM:黑碎光*5
soundOnDeath: buiding_explode: 1

canBuild_1_name: 帝国建造者
canBuild_2_name: 帝国侦察坦克

[canBuild_Rally]
name: setRally

[hiddenAction_破碎之星]
autoTriggerOnEvent: destroyed
requireConditional: if self.hasResources(起始基地=1)
spawnUnits: 碎星核, 基地亡语

[resource_起始基地]
displayName: 起始基地

[hiddenAction_起始基地驻守士兵]
autoTrigger: if self.hasResources(起始基地=1) and not self.hasFlag(id=2)
addUnitsIntoTransport: 帝国士兵*3
addResources: setFlag=2

[action_upgrade]
convertTo: T2 - 帝国远征军前哨站
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 12000
text: 升级 - T2
description: -装甲增强 \n -更多资源产出 \n -视野提升 \n -可使用强大的帝国技能(共用冷却时间)
descriptionAddUnitStats: ${section.convertTo}
displayType: Upgrade
buildSpeed: 120s
pos: 0
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
#addGlobalTeamTags: 高级权限
ai_isHighPriority: true
isLocked: if self.globalTeamTags(includes="战役科技1")
isLockedMessage: -当前战役被限制等级

[action_前哨训练营]
isVisible: if not self.globalTeamTags(includes='前哨训练营')
addGlobalTeamTags: 前哨训练营
id: ${section.text}
pos: 10
price: 1000
text: 前哨训练营
description: -解锁后帝国前哨站可生产T1步兵
displayType: upgrade
buildSpeed: 16.7s
allowMultipleInQueue: false

[canBuild_3]
isVisible: if self.globalTeamTags(includes='前哨训练营')
name: 帝国斥候, 再生战士, 帝国士兵, 帝国掷弹兵, 帝国机枪兵, 帝国狙击手, 帝国防空兵


[hiddenAction_阵营]
autoTrigger: if not self.globalTeamTags(includes='帝国')
addGlobalTeamTags: 帝国


[attachment_1]
x: 0
y: 0
height: 15
isVisible: false
addTransportedUnits: true
prioritizeParentsMainTarget: true
#keepAliveWhenParentDies: true
#alwaysAllowedToAttackParentsMainTarget: true
canBeAttackedAndDamaged: false
isUnselectable: true
[attachment_2]
x: 7
y: 0
height: 14
@copyFromSection: attachment_1
[attachment_3]
x: -7
y: 0
height: 14
@copyFromSection: attachment_1


[hiddenAction_支配度1]
autoTriggerOnEvent: destroyed
autoTrigger: if self.resource(type='支配值', greaterThan=0) or self.resource(type='支配值', lessThan=10) and self.resource(type='支配度', greaterThan=0)
requireConditional: if self.resource(type='支配值', lessThan=101) and  self.numberOfUnitsInAllyNotOwnTeam(withTag="支配满", lessThan=1) and numberOfUnitsInEnemyTeam(withTag="支配满", lessThan=1) and numberOfUnitsInNeutralTeam(withTag="支配满", lessThan=1)
setResourcesWithLogic: 支配度=max(self.resource.支配值, 0)

[hiddenAction_支配度上限100]
autoTrigger: if self.resource(type='支配值', greaterThan=100) and (self.resource(type='支配度', greaterThan=100) or self.resource(type='支配度', lessThan=91)) and self.numberOfUnitsInAllyNotOwnTeam(withTag="支配满", lessThan=1) and numberOfUnitsInEnemyTeam(withTag="支配满", lessThan=1) and numberOfUnitsInNeutralTeam(withTag="支配满", lessThan=1)
resourceAmount: 支配度
resourceAmount_setValue: 100

[hiddenAction_支配度2]
requireConditional: if self.resource(type='支配值', lessThan=91) and  (self.numberOfUnitsInAllyNotOwnTeam(withTag="支配满", greaterThan=0) or numberOfUnitsInEnemyTeam(withTag="支配满", greaterThan=0) or numberOfUnitsInNeutralTeam(withTag="支配满", greaterThan=0))
@copyFromSection: hiddenAction_支配度1

[hiddenAction_支配度上限90]
autoTrigger: if self.resource(type='支配值', greaterThan=90) and self.resource(type='支配度', greaterThan=90) and  (self.numberOfUnitsInAllyNotOwnTeam(withTag="支配满", greaterThan=0) or numberOfUnitsInEnemyTeam(withTag="支配满", greaterThan=0) or numberOfUnitsInNeutralTeam(withTag="支配满", greaterThan=0))
resourceAmount: 支配度
resourceAmount_setValue: 90

[graphics]
image: 帝前.png
image_back: 帝前_back.png

imageScale: 1.2

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 0

maxAttackRange: 350
shootDelay: 60

showRangeUIGuide: false

[turret_fogOfWarSight]
x: 0
y: 0
#canShoot: false
invisible: true
#limitingRange: ${core.fogOfWarSightRange * 20 - 40}
projectile: 1

[projectile_1]
tags= T-projectile
directDamage: 0
life: 0
invisible: true
targetGround: true

explodeEffect: NONE

[effect_shockwaveLarge]
stripIndex: shockwave_large
scaleFrom: 0.2
scaleTo: 2
life: 40
color: #FFB0B0B0

[effect_explosionFlashLarge]
image: SHARED:light_50.png
scaleFrom: 8
scaleTo: 4
life: 20
fadeOut: true
priority: critical
color: #FFB0B0B0

[effect_黑碎光]
image: SHARED:light_50.png
life: 45
lifeRandom: 10
scaleFrom: 0.4
scaleTo: 0.2
color: #323232
fadeOut: true
atmospheric: true
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2

[movement]
movementType: BUILDING

[hiddenAction_黑障之境]
convertTo: 黑障_帝国远征军前哨站
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[global_resource_支配度]
hidden: false
displayName: 支配度
displayNameShort: 支配度
displayColor: #1E002B
priority: 0.8

[global_resource_支配值]
hidden: true
displayName: 支配值
displayNameShort: 支配值
priority: 0.8

[hiddenAction_AIempty]
autoTrigger: if self.transportingCount(empty=true)
temporarilyAddTags: 步兵堡垒空

[hiddenAction_AIfull]
autoTrigger: if self.transportingCount(equalTo=3)
temporarilyRemoveTags: 步兵堡垒空
