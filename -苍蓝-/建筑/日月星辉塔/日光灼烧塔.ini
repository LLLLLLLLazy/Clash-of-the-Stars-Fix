[core]


tags: units, 赤, 炮塔
name: 日光灼烧塔
maxHp: 640
mass: 1000
price: 2000, 日耀=10
maxShield: 360
shieldRegen: 0.2
radius: 18
buildSpeed: 0.0008
displayDescription: -阳光放大镜\n-攻击地面与空中\n-对目标的持续灼烧\n-视目标耀痕数量提升伤害\n-微弱的光芒在照耀着迷雾\n-耀痕:使目标逐渐累积耀痕\n-热流涌出:被摧毁后灼伤周围的敌人
isBuilding: true
fogOfWarSightRange: 18
footprint: 0,0,0,0
constructionFootprint: 0,0,0,0
buildingToFootprintOffsetY: -1
fireTurretXAtSelfOnDeath: explode

autoTriggerCooldownTime: 0.13s
autoTriggerCooldownTime_allowDangerousHighCPU:true


[hiddenAction_曜痕光透]
autoTrigger: if self.isAttacking and attacking.resource.曜痕>8 and attacking.resource.曜痕状态<1.5
takeResources: 曜痕=0.06
takeResources_includeReference: attacking
takeResources_includeUnitsWithinRange_team: enemy
takeResources_includeUnitsWithinRange: ${attack.maxAttackRange}
takeResources_discardCollected: true

[hiddenAction_曜痕状态给予]
autoTrigger: if self.isAttacking and attacking.resource.曜痕状态<1
takeResources: 曜痕状态=-0.2
takeResources_includeReference: attacking
takeResources_includeUnitsWithinRange_team: enemy
takeResources_includeUnitsWithinRange: ${attack.maxAttackRange}
takeResources_discardCollected: true


[hiddenAction_日曜灼烧]
autoTrigger: if self.isAttacking and not self.tags(includes="日曜灼烧")
temporarilyAddTags: 日曜灼烧
resetCustomTimer: true

[hiddenAction_日曜灼烧停止]
autoTrigger: if not self.isAttacking and self.customTimer>0.2 and self.tags(includes="日曜灼烧")
temporarilyRemoveTags: 日曜灼烧

[resource_曜痕]
displayName: 曜痕

[resource_曜痕状态]
hidden: true

[graphics]
image: 日光灼烧塔.png
image_shield: yellow_shield.png

[attack]
canAttack:true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits:false
maxAttackRange: 250
shootDelay: 8
aimOffsetSpread: 0
turretSize: 0

[turret_0]
x: 0
y: 16
canShoot: false
turnSpeed: 3
shouldResetTurret: false

[turret_1.0]
x: 0
y: 0
attachedTo: 0
slave: true
projectile: 1.0
shoot_flame: CUSTOM:projectileLight

altProjectile: 1.1
altProjectileCondition: if attacking.hasResources(曜痕=1) and not attacking.hasResources(曜痕=2)
canAttackCondition: if not attacking.hasResources(曜痕=2)

[turret_1.2]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=1.9) and not attacking.hasResources(曜痕=4)
projectile: 1.2
altProjectile: 1.3
altProjectileCondition: if attacking.hasResources(曜痕=3) and not attacking.hasResources(曜痕=4)

[turret_1.4]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=3.9) and not attacking.hasResources(曜痕=6)
projectile: 1.4
altProjectile: 1.5
altProjectileCondition: if attacking.hasResources(曜痕=5) and not attacking.hasResources(曜痕=6)

[turret_1.6]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=5.9)
projectile: 1.6

[projectile_1.0]
tags= T-projectile
life: 20
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 1.5
sweepOffsetFromTargetRadius:0.4
sweepSpeed:10
explodeEffect: CUSTOM:projectileLight
explodeEffectOnShield: CUSTOM:projectileLight
directDamage: 8
color: #FF8000

mutatorX_ifUnitWithoutTags: ◝(⑅•ᴗ•⑅)◜..°♡
mutatorX_addResourcesDirectHit: 曜痕=0.05

[projectile_1.1]
@copyFromSection:projectile_1.0
directDamage: 12
[projectile_1.2]
@copyFromSection:projectile_1.0
directDamage: 16
[projectile_1.3]
@copyFromSection:projectile_1.0
directDamage: 20
[projectile_1.4]
@copyFromSection:projectile_1.0
directDamage: 24
[projectile_1.5]
@copyFromSection:projectile_1.0
directDamage: 28
[projectile_1.6]
@copyFromSection:projectile_1.0
directDamage: 32
sweepOffsetFromTargetRadius:0.2
beamImageOffsetRate: 2
color: #FF2A00

mutatorX_addResourcesDirectHit: 曜痕=0.005

[turret_explode]
x:0
y:0
canShoot:false
projectile:explode

[projectile_explode]
tags= T-projectile
life:99
instant: true
speed: 1
largeHitEffect: true
frame: 0
shadowFrame:1
drawType:1
targetGround: true
areaDamage: 200
areaRadius: 75
areaExpandTime: 30
deflectionPower:-1
lightColor: #FF9000
lightSize: 1
spawnUnit: 灼烧

explodeEffect: CUSTOM:shockwave
explodeEffectOnShield: CUSTOM:shockwave
[effect_shockwave]
stripIndex: shockwave
life: 40
scaleFrom: 0
scaleTo: 2
color: #FFD500
dirSpeed: 5
[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: true
color: #E8773A
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[movement]
movementType: BUILDING
targetHeight: 0
moveSpeed: 0
maxTurnSpeed: 0

[ai]
upgradedFrom: 自然飞矢塔
buildPriority: 0.22
noneInBaseExtraPriority: 0.17
maxEachBase: 3

#[action_upgrade]
#isVisible: false
#convertTo: 日光灼烧塔
#sendMessageTo: ${ConvertUpdate1}
#sendMessageWithTags: ${ConvertUpdate2}
#displayType: upgrade
#price: 16000
#text: 日炎
#description: -烧
#buildSpeed: 55.6s
#iconExtraImage: SHARED:icon_upgrade_top.png
#iconExtraColor: #AAFFFFFF


[global_resource_日耀]
hidden: false
displayName: 日耀
displayColor: #A0FF9500
priority: 0.3

[global_resource_月曜]
hidden: false
displayName: 月曜
displayColor: #A04060FF
priority: 0.3


[attachment_AI打击定位]
x:0
y:0
isUnselectable: false
keepAliveWhenParentDies: false
canBeAttackedAndDamaged: true
redirectDamageToParent: true

[hiddenAction_AIUnfinished]
autoTriggerOnEvent: created
attachments_addNewUnits: 未建成全能塔定位

[hiddenAction_AIAccomplish]
autoTriggerOnEvent: completeAndActive
attachments_deleteNumUnits: 1
