
[core]
name: 帝步虫
displayDescription: 滑稽又可怕的融合……\n-隐秘的致命杀手
class: CustomUnitMetadata
price: 15000, 基因种子=5, 腐蚀=1000
maxHp: 1500
mass: 11000
maxShield: 600
shieldRegen:0.25
shieldRenderRadius:23

tags: units, 固定射击, 帝步虫, 中型虫, 星际步兵, 坚韧意志

armour:8
armourMinDamageToKeep:8

fogOfWarSightRange: 20

techLevel: 1
buildSpeed: 30s
#availableInDemo: true

radius: 16
displayRadius: 20
isBio: true
isBug: true

numBitsOnDeath: 10

selfRegenRate:0.2

softCollisionOnAll: 12

showOnMinimapToEnemies: false

autoTriggerCooldownTime: 0.11s

[hiddenAction_shadow]
autoTrigger: if self.shield(full=true) and numberOfUnitsInEnemyTeam(withTag='真视之眼', lessThan=1)
convertTo: 帝步虫[暗影]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
spawnEffects:CUSTOM:blackwave
clearAllWaypoints:true
[effect_blackwave]
stripIndex: shockwave
life: 80
scaleFrom: 0
scaleTo: 10
alpha: 1.0
color: #000000
alsoPlaySound: large_gun_fire2

[action_影遁]
isActive: false
id: ${section.text}
text: 影遁
description: -护盾为满时进入暗影状态 \n -期间无视地形移动且不会被攻击 \n -对建筑伤害降低25%
pos: 0
displayType: infoOnly
buildSpeed: 0s
addResources: hp=1
isLocked: if numberOfUnitsInEnemyTeam(withTag='真视之眼', greaterThan=0)
isLockedMessage: 你正被注视着... \n -真视之眼- \n

[action_swallow]
isActive: false
autoTriggerOnEvent: killedAnyUnit
id: ${section.text}
text: 渊食
description: -击杀目标回复200护盾\n-不包括召唤物单位\n-CD:15秒
pos: 0.1
displayType: infoOnlyStockpile
buildSpeed: 0s
addResources: shield=200
spawnEffects: CUSTOM:windwave2
playSoundAtUnit: weaponEatTree.ogg
requireConditional: if self.customTimer(laterThanSeconds=15) and not eventSource.self.tags(includes="召唤物")
addActionCooldownTime: 15s
resetCustomTimer: true

[hiddenAction_swallow附属]
autoTrigger: if self.ammo(greaterThan=0)
addResources: ammo=-1
alsoTriggerAction: swallow

[effect_windwave2]
stripIndex: shockwave
life: 20
scaleFrom: 5
scaleTo: 0
alpha: 1.0
color:#000000

[hiddenAction_附属飞刀]
autoTrigger: if self.numberOfAttachedUnits(withTag='附属_飞刀', lessThan=1)
attachments_addNewUnits: 附属_飞刀
attachments_onlyOnSlots: 2

[attachment_1]
onCreateSpawnUnitOf:附属_刺剑
x:0
y:0
canAttack:true
rotateWithParent:true
keepAliveWhenParentDies:false
canBeAttackedAndDamaged:false
setDrawLayerOnBottom:true
lockRotation:true
idleDir:0
alwaysAllowedToAttackParentsMainTarget:false

[attachment_2]
@copyFromSection: attachment_1
onCreateSpawnUnitOf:附属_飞刀

[graphics]
total_frames: 3
imageScale: 1
image:        铁甲虫.png
image_wreak:  bug_dead.png
image_turret:   NONE
image_shield: black_shield.png
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0


animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 3
#animation_moving_pingPong: true

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 120
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true


lock_body_rotation_with_main_turret: true

[animation_attack]
#onActions:attack
pingPong:false
arm1_0.05s:{x:0, y:0, dir:0}
arm1_0.1s:{x:0, y:0, dir:-40}
arm1_0.15s:{x:0, y:0, dir:-90}
arm1_0.25s:{x:0, y:0, dir:-50}
arm1_0.3s:{x:0, y:0, dir:-20}
arm1_0.35s:{x:0, y:0, dir:-10}
arm1_0.4s:{x:0, y:0, dir:0}

arm2_0.05s:{x:0, y:0, dir:0}
arm2_0.1s:{x:0, y:0, dir:40}
arm2_0.15s:{x:0, y:0, dir:90}
arm2_0.25s:{x:0, y:0, dir:50}
arm2_0.3s:{x:0, y:0, dir:20}
arm2_0.35s:{x:0, y:0, dir:10}
arm2_0.4s:{x:0, y:0, dir:0}

[arm_1]
x:7
y:3
image_end:帝刃.png
image_end_teamColors:true
drawOverBody:false
drawDirOffset:70
moveSpeed:18
[arm_2]
x:-7
y:3
image_end:帝刃.png
image_end_teamColors:true
drawOverBody:false
drawDirOffset:-70
moveSpeed:18

[attack]

isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 10
turretTurnSpeed: 3

maxAttackRange: 20
shootDelay: 30
aimOffsetSpread: 0

[turret_0]
x:0
y:0
turnSpeedAcceleration:0.5
turnSpeed:8.5
canShoot:false

[turret_1]
x: 0
y: 0
attachedTo: 0
slave: true
onShoot_playAnimation: attack
shoot_sound:large_gun_fire2
shoot_sound_vol:0.15
projectile: 1
canAttackFlyingUnits: false

[turret_2]
x:0
y:0
canShoot:false
limitingRange:200
showRangeUIGuide:true

[projectile_1]
tags= T-projectile
directDamage:90
areaDamage:80
areaRadius:40
areaDamageNoFalloff:true
pushForce:1
pushVelocity:-2
life: 50
instant: true

[movement]
movementType: OVER_CLIFF
moveSpeed: 1.7
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.12


maxTurnSpeed: 8.5
turnAcceleration: 0.5

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181



reverseSpeedPercentage:0


[ai]
lowPriorityTargetForOtherUnits:true

[action_熔化]
isActive:false
isVisible: if self.isOverLiquid and not self.isOverwater
autoTrigger: if self.isOverLiquid and not self.isOverwater
isGuiBlinking: if self.isOverLiquid and not self.isOverwater
addResources: hp=-200
pos:2
text: 熔岩
description: -在岩浆上持续损失生命值
buildSpeed:0s