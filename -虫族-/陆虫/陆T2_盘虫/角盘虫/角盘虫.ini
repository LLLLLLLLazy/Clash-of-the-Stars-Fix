
[core]
name: 角盘虫
displayText: 角盘虫
displayDescription: -坚实可靠\n-强力冲锋\n-跨越山岭

class: CustomUnitMetadata
price: 2600, 腐蚀=${corrode}
maxHp: 3000
mass: 30000

armour: 8
armourMinDamageToKeep: 8

techLevel: 2
buildSpeed: 18.5s

fogOfWarSightRange:16

radius: 20
displayRadius: 22

isBio: true
isBug: true
tags: units, 虫族, 中型虫+, 角盘虫, 固定射击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 角盘虫

selfRegenRate:0.2

softCollisionOnAll: 12

energyMax: 1
energyRegen: 0.001

unitsSpawnedOnDeath: 资源返还(addResources=ammo:650|energy:100)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits:角盘虫[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 400
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2


[action_冲锋]
isActive: false
id: ${section.text}
text: 角盘冲锋
description: -附近有敌人时加速冲向目标 \n -造成自身[当前血量10%+最大血量10%]x2的大范围群体伤害 \n 冲锋基础伤害: %{int((self.hp+self.maxHp)*0.1)} (%{int(self.hp*0.1)}+%{self.maxHp*0.1})
pos: 0
displayType: infoOnly
buildSpeed: 0s
addResources: hp=1


[hiddenAction_charge]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="units", greaterThan=0, withinRange=200, incompleteBuildings=true) and self.isEnergyFull() and self.isAttacking()
playSoundAtUnit:冲锋.ogg:0.4
convertTo: 角盘虫[冲锋]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
setUnitMemory: 属性[19]=((self.hp*0.1+self.maxHp*0.1)/600)-1

[hiddenAction_notCharge]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="units", greaterThan=0, withinRange=200, incompleteBuildings=true) and not self.isEnergyFull() and self.isAttacking()
addResources: energy=-1

[graphics]
total_frames: 1

image:        角盘虫.png
image_wreak:  NONE
image_turret: NONE

#AUTO
image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true


animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 80
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true

animation_attack_start: 0
animation_attack_end: 0
animation_attack_speed: 15
animation_attack_scale_start:1
animation_attack_scale_end:0.97
animation_attack_pingPong: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 30
turretTurnSpeed: 9

maxAttackRange: 15
shootDelay: 100

isMelee: true
meleeEngangementDistance: 150

isFixedFiring: true

[turret_base]
invisible:true
x: 0
y: 0

canShoot: false
canAttackMaxAngle: 10

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
attachedTo: base
slave: true

canAttackMaxAngle: 10

recoilOffset: 8
recoilOutTime: 5
recoilReturnTime: 35

projectile: 1

aimOffsetSpread: 0

[turret_2]
x: 0
y: 0
invisible: true
linkDelayWithTurret: 1
attachedTo: base
slave: true

canAttackMaxAngle: 10

projectile: 1

aimOffsetSpread: 0.6

[projectile_1]
tags= T-projectile
directDamage: 100

life: 50
instant: true
largeHitEffect: true

[leg_1]
x: -28
y: -5
attach_x: 0
attach_y: 0
moveSpeed: 3.6
resetAngle:20

heightSpeed: 0.7

image_leg:  角盘虫脚.png
image_foot: NONE

drawLegWhenZoomedOut: true

dust_effect: false

holdDisMin: 18
holdDisMax: 26

[leg_2]
x: 28
y: -5
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -24
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_4]
x: 24
y: 10
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_5]
x: -24
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1

[leg_6]
x: 24
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1




[movement]
movementType: OVER_CLIFF

moveSpeed: 0.8
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.12

maxTurnSpeed: 2.5
turnAcceleration: 0.5

targetHeight: 0
targetHeightDrift: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45

[ai]
upgradedFrom: 盘虫