
[core]
showInEditor:false
name: 蓝星
displayDescription: -双子星之蓝星 \n -与红星旋转时释放能量波
price: 400000
maxHp: 10000
maxShield: 3600
shieldRegen: 3
mass: 500000
armour: 10
armourMinDamageToKeep: 10
buildSpeed: 600s

selfRegenRate: 0.6

tags: units, 蓝星, 双子星

availableInDemo: true
experimental: true

radius: 5
softCollisionOnAll: 10
numBitsOnDeath: 0

fogOfWarSightRange: 44

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

disableDeathOnZeroHp: true

canNotBeGivenOrdersByPlayer: true

transportSlotsNeeded: 999999

[hiddenAction_恒星曲引]
autoTrigger: if not self.tags(includes='暂停属性')
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 引力
fireTurretXAtGround_withOffset: 0, 0
spawnEffects: CUSTOM:引力扭曲

[hiddenAction_move]
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 5s
addWaypoint_target_nearestUnit_tagged: 红定位
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 9999
#autoTrigger: if self.isControlledByAI() and self.isAttacking() and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=195) and not self.hasActiveWaypoint(type='touchTarget') and not self.hasFlag(id=1)
autoTrigger: if not self.hasActiveWaypoint(type='touchTarget') and numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动')

[hiddenAction_clear]
clearAllWaypoints: true
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasFlag(id=1)
addResources: setFlag=1
[hiddenAction_clear2]
clearAllWaypoints: true
autoTrigger: if numberOfUnitsInTeam(greaterThan=0, withinRange=100, withTag='双星移动') and self.hasFlag(id=1)
addResources: unsetFlag=1

[hiddenAction_move2]
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 5s
addWaypoint_target_nearestUnit_tagged: 双星移动
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 9999
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasActiveWaypoint(type='touchTarget') 

[hiddenAction_wave]
autoTrigger: if ( numberOfUnitsInTeam(greaterThan=0, withinRange=60, withTag='红星') and self.customTimer(laterThanSeconds=1) and numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasFlag(id=1) or numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=15) and self.customTimer(laterThanSeconds=0.5) ) and not self.tags(includes='暂停属性')
resetCustomTimer: true
fireTurretXAtGround: wave
fireTurretXAtGround_withProjectile: wave
fireTurretXAtGround_withOffset: 0,20
playSoundAtUnit:电磁.ogg

[action_HP0]
autoTrigger: if self.hp(lessThan=100) and not self.queueSize(greaterThan=0)
temporarilyAddTags: 蓝星0
alsoQueueAction: HP恢复
#
isActive: false
displayType: infoOnlyStockpile
buildSpeed: 0s
pos: 1
text: 共生
description: -
isGuiBlinking: if numberOfUnitsInTeam(greaterThan=0, withTag='蓝星0') or numberOfUnitsInTeam(greaterThan=0, withTag='红星0')
isAlsoViewableByEnemies: true

[hiddenAction_HP恢复]
buildSpeed: 1.5s
addResources: hp=10000
temporarilyRemoveTags: 蓝星0

[hiddenAction_death0]
autoTrigger: if ( (numberOfUnitsInTeam(greaterThan=0, withTag='蓝星0') and numberOfUnitsInTeam(greaterThan=0, withTag='红星0') or numberOfUnitsInTeam(lessThan=1, withTag='红星')) and self.timeAlive(laterThanSeconds=5) ) and not self.tags(includes='暂停属性') and self.resource(type='虚空')<1
deleteSelf: true
fireTurretXAtGround: death
fireTurretXAtGround_withProjectile: death
fireTurretXAtGround_withOffset: 0,0
spawnUnits: 蘑菇云

[hiddenAction_death1]
autoTrigger: if self.timeAlive(laterThanSeconds=1) and self.hasFlag(id=2)
deleteSelf: true
fireTurretXAtGround: death
fireTurretXAtGround_withProjectile: death
fireTurretXAtGround_withOffset: 0,0
spawnUnits: 蘑菇云

[hiddenAction_星遥]
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=500, withTag='红星') and self.timeAlive(laterThanSeconds=5) and self.customTimer(laterThanSeconds=1) and not self.tags(includes='暂停属性')
addResources: hp=-1000
resetCustomTimer: true
fireTurretXAtGround: wave
fireTurretXAtGround_withProjectile: wave
fireTurretXAtGround_withOffset: 0,20

[attachment_1]
x:0
y:-40
isUnselectable: false
canBeAttackedAndDamaged: false
keepAliveWhenParentDies: false
setDrawLayerOnTop: false
addTransportedUnits: 1
lockRotation: true
deattachIfWantingToMove: false
onCreateSpawnUnitOf: 蓝定位

[graphics]

total_frames: 1
image:        蓝.png
image_wreak: NONE
image_turret: NONE
#image_shield: 


image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

splastEffect: true

movementEffect: CUSTOM:projectileTrail
movementEffectRate: 6

disableLowHpFire: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: true

turretSize: 0
turretTurnSpeed: 4.5


maxAttackRange: 300
shootDelay: 5


[turret_1]
x: 0
y: 0
idleDir:0

shouldResetTurret: true
aimOffsetSpread: 0

[projectile_1]
tags= T-projectile
life: 10
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

explodeEffect:CUSTOM:lightningShock*1, CUSTOM:sparks*3
explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash

shieldDamageMultiplier: 5
buildingDamageMultiplier: 0.25

#=== others ===

directDamage: 75

color: #63FFFE

[turret_wave]
x:0
y:0
canShoot:false
invisible:true
projectile: wave

[projectile_wave]
tags= T-projectile
areaDamage: 1000
areaRadius: 400
areaExpandTime: 35
life: 0
speed: 0
largeHitEffect: true
explodeOnEndOfLife: true
areaHitUnderwaterAlways: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:curewave, CUSTOM:displacement

shieldDamageMultiplier: 3
shieldDefectionMultiplier: 0.75
buildingDamageMultiplier: 0.1
armourIgnoreAmount: 999
deflectionPower: -1

[effect_curewave]
image: shockwave.png
life: 60
scaleFrom: 0
scaleTo: 10
alpha: 0.9
#alsoPlaySound: 
color: #33E8E8
priority: veryhigh

[effect_displacement]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 60
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 8
alpha: 0.6
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1

[projectile_引力]
tags= T-projectile
areaDamage: 0
life: 0
invisible: true
explodeEffect: NONE
spawnProjectilesOnCreate: 引力远距(spawnChance=0.15), 引力中距(spawnChance=0.25), 引力近距(spawnChance=0.3), 引力中心(spawnChance=0.5)

[projectile_引力远距]
tags= T-projectile
areaDamage: -1
areaRadius: 10000
life: 0
speed: 0
invisible: true
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
deflectionPower: -1

pushForce: -50
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_areaDamageMultiplier: 0.0001

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_引力中距]
@copyFromSection: projectile_引力远距
areaRadius: 2000
pushForce: -100

[projectile_引力近距]
@copyFromSection: projectile_引力远距
areaRadius: 1000
pushForce: -300

[projectile_引力中心]
@copyFromSection: projectile_引力远距
areaRadius: 400
pushForce: -1000

[effect_引力扭曲]
priority: verylow
drawType: displacement
createWhenOffscreen: true
createWhenZoomedOut: true
showInFog: true

image: SHARED:shockwave_normal_128.png
life: 12
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 15
scaleTo: 15
alpha: 0.025
drawUnderUnits:false
alwayStartDirAtZero: true

[turret_death]
x:0
y:0
canShoot:false
invisible:true
projectile: death

[projectile_death]
tags= T-projectile
areaDamage: 10000
areaRadius: 500
areaExpandTime: 50
life: 0
speed: 0
largeHitEffect: true
explodeOnEndOfLife: true
areaHitUnderwaterAlways: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:curewave, CUSTOM:displacement
nukeWeapon: true
friendlyFire: true

shieldDamageMultiplier: 5
shieldDefectionMultiplier: 0.75
buildingDamageMultiplier: 0.1
armourIgnoreAmount: 999
deflectionPower: -1

[effect_projectileTrail]

createWhenZoomedOut: false
priority:low
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.5
scaleTo: 0.7
alpha: 0.4
drawUnderUnits:true
#ySpeedRelative:-0.4
atmospheric: true


[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightningShock]
life: 60

xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom:180

fadeInTime: 0
fadeOut: false

attachedToUnit: false


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2

alpha:0.6

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.1
ySpeedRelativeRandom: 1.1
hSpeed: 1.5
image: SHARED:spark.png
priority: verylow



[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1

ySpeedRelative:2

image: SHARED:spark.png
priority: verylow

[effect_lightSlowFade]

image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8

scaleFrom: 0.3
scaleTo: 0.2

alpha: 1.7

[movement]
movementType: AIR
moveSpeed: 2.55
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.00

targetHeight: 50
targetHeightDrift: 5

maxTurnSpeed: 10
turnAcceleration: 0.5

moveSlidingMode :true
#moveSlidingDir:  181
moveIgnoringBody: true



