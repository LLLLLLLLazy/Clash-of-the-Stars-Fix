
[core]
showInEditor:false

name: 大巫师
displayText: 大巫师
displayDescription: -它的内核乃是整个巫师协会的智慧结晶 \n -以元素洪流摧毁敌军 \n -可切换四元素攻击 \n -利用魔力短距离传送 \n “元素之力蕴藏其中”

class: CustomUnitMetadata
price: 20000, 苍蓝能量=1
maxHp: 3000
maxShield: 2000
shieldRegen: 0
startShieldAtZero:true
mass: 70000

@memory 镜影:string
@global element: 火
tags: units, 大巫师
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 大巫师

techLevel: 3
buildSpeed: 83.3s

selfRegenRate: 0.1

fogOfWarSightRange: 23

radius: 25
isBio: false
softCollisionOnAll: 0

energyMax: 100
energyRegen: 0.1
energyNeedsToRechargeToFull: true

transportSlotsNeeded: 4

autoTriggerCooldownTime: 0.016s
autoTriggerCooldownTime_allowDangerousHighCPU:true

[action_Legend]
isActive: false
isVisible: true
id: ${section.text}
text: 《剑与魔法的传奇》
description: “最危险的时刻，传说的骑士与巫师将以最强大的姿态挺身而出”
displayType: infoOnly
autoTrigger: if numberOfUnitsInTeam(withTag="units", lessThan=2) and self.numberOfUnitsInAllyNotOwnTeam(withTag="units", lessThan=1) and self.hasResources(苍蓝能量=7) and self.resource.传说时刻>=60 and not self.hasFlag(id=1)
isGuiBlinking: if self.hasFlag(id=1)
addResources: setFlag=1
spawnEffects: custom:苍, custom:苍2, custom:星
buildSpeed: 0s
pos: -1

[hiddenAction_传说时刻]
autoTrigger: if numberOfUnitsInTeam(withTag="units", lessThan=2) and self.resource(type="传说时刻", lessthan=60) and not self.hasFlag(id=1)
addResources: 传说时刻=1

[hiddenAction_传说结束]
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=1) and self.resource(type="传说时刻", greaterThan=0) and not self.hasFlag(id=1)
setResourcesWithLogic: 传说时刻=0

[resource_传说时刻]
displayName: 传说时刻
hidden: true

[effect_苍]
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
image: ROOT:/素材/hit.png
life: 999999
scaleFrom: 4
scaleTo: 4
alpha: 0.2
dirSpeed: 3
color: #294C8A
priority: critical
alsoPlaySound: laser_deflect
[effect_苍2]
@copyFromSection:effect_苍
dirSpeed: -3
color: #3351E8
scaleFrom: 3
scaleTo: 3

[effect_星]
image: ROOT:/素材/light.png
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: false
life: 120
scaleFrom: 1
scaleTo: 1
alpha: 0.9
color: #8733E8

[hiddenAction_energyUp]
autoTrigger: if self.hasFlag(id=1)
addResources: energy=0.2, shield=1

[hiddenAction_created]
autoTriggerOnEvent: created
setUnitMemory: 镜影="${element}"


[resource_自动触发计时]
displayName: 自动触发计时
hidden: true

[hiddenAction_自动触发计时1s]
autoTrigger: if self.resource(type="自动触发计时", lessthan=60)
addResources: 自动触发计时=1

#——大巫师-纯粹魔体——

[resource_离子加速]
displayName:离子加速
hidden:false

displayRoundedDown:true


[action_作战效果_离子加速]
buildSpeed: 100000s
id: 纯粹魔体效果
text: 效果:纯粹魔体(%{self.resource.离子加速}s)
description: 单位的移动速度临时+2

isActive: false
isVisible: if self.resource(type="离子加速", greaterThan=0)
autoTrigger: if self.resource(type="离子加速", greaterThan=0)
requireConditional: if not self.tags(includes='离子加速')

setUnitMemory: 属性[24]=2
alsoTriggerAction: 属性变化
temporarilyAddTags: 离子加速

isAlsoViewableByAllies: true
isAlsoViewableByEnemies: true

[hiddenAction_作战效果_离子加速解除]
buildSpeed: 1

#autoTrigger: if self.resource(type="离子加速", lessThan=1) and not self.tags(includes='离子加速')
requireConditional: if self.resource(type="离子加速")<=0

setUnitMemory: 属性[24]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 离子加速

[hiddenAction_作战效果_离子加速上限]
autoTrigger: if self.resource(type="离子加速",greaterThan=2009)
addResources: 离子加速=-10

[hiddenAction_作战效果_离子加速上限1]
autoTrigger: if self.resource(type="离子加速", greaterThan=0) and self.resource(type="自动触发计时", equalto=60)
addResources: 离子加速=-1, 自动触发计时=-60
alsoTriggerAction: 作战效果_离子加速解除


[resource_恢复冷却时间]
displayName: 恢复冷却时间
hidden: true

[resource_加速冷却时间]
displayName: 加速冷却时间
hidden: true

[hiddenAction_恢复冷却时间]
autoTrigger: if self.resource(type="恢复冷却时间", greaterThan=0)
addResources: 恢复冷却时间=-0.016

[hiddenAction_加速冷却时间]
autoTrigger: if self.resource(type="加速冷却时间", greaterThan=0)
addResources: 加速冷却时间=-0.016

[action_恢复]
isVisible: if self.hasFlag(id=1)
id: ${section.text}
text: 五芒星阵
description: -回复500生命
pos: 0.1
displayType: infoOnlyStockpile
buildSpeed: 0s
alwaysSinglePress: true
addActionCooldownTime: 40s
addResources: hp=500, 恢复冷却时间=40
isLocked: if self.resource(type="恢复冷却时间", greaterThan=0)
isLockedMessage: 技能冷却中
spawnEffects: CUSTOM:愈星, CUSTOM:愈球*16

[action_加速]
@copyFromSection: action_恢复
id: ${section.text}
text: 纯粹魔体
description: -化为元素态 高速移动
addResources: 离子加速=4, 加速冷却时间=40
isLocked: if self.resource(type="加速冷却时间", greaterThan=0)
spawnEffects: CUSTOM:离子*8

[hiddenAction_离子加速移动效果]
autoTrigger: if self.resource(type="离子加速", greaterThan=0) and self.isMoving
spawnEffects: CUSTOM:曲粒, CUSTOM:离子, CUSTOM:离子罩, CUSTOM:微扭曲, CUSTOM:光星

[effect_愈星]
life: 120
image: 愈星.png
scaleFrom: 1.2
scaleTo: 1.2
alpha: 5
dirSpeed: 1
drawUnderUnits: true

[effect_愈球]
image: SHARED:light_50.png
life: 120
fadeOut: true
attachedToUnit: false
color: #AA33FE66
fadeInTime: 50
scaleFrom: 0.2
scaleTo: 0.2
alpha: 5
hSpeed: 0.4
hSpeedRandom: 0.25
xOffsetRelativeRandom: 40
yOffsetRelativeRandom: 40
delayedStartTimerRandom: 15

[effect_离子]
image: SHARED:light_50.png
life: 35
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime: 5
scaleFrom: 0.4
scaleTo: 0.1
alpha: 0.5
dirSpeedRandom: 5
yOffsetRelative: 25
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2
xOffsetRelativeRandom: 25
yOffsetRelativeRandom: 10
priority: verylow

[effect_曲粒]
priority:high
image: SHARED:light_50.png
life: 18
lifeRandom:5

fadeOut: true
attachedToUnit: false
color: #07eef2
scaleFrom: 0.2
scaleTo: 0.5
alpha: 0.8
drawUnderUnits:false

yOffsetRelative: -20
xOffsetRelativeRandom: 25

delayedStartTimer: 30
delayedStartTimerRandom: 30

physics:true
physicsGravity:-0.4

[effect_离子罩]
priority: low
image: circle_50.png
scaleTo: 2
scaleFrom: 0
color: #3507eef2
life: 10

[effect_光星]
image: light.png
life: 45
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.6
scaleTo: 0.5
alpha: 0.2
yOffsetRelative: 25
dirSpeedRandom: 20
dirOffsetRandom: 30
drawUnderUnits: false

[effect_微扭曲]
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 20
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 1.95
scaleTo: 1.95
alpha: 0.028
dirOffsetRandom: 360
drawUnderUnits: false




[action_energy]
autoTrigger: if not self.isEnergyFull
addResourcesWithLogic: energy=self.energy/1000
price: energy=1
id: 能量剩余
text: 能量剩余: 
displayType: infoOnly
buildSpeed: 0s
pos: 0
description: -
displayRemainingStockpile: true
isActive:false

[action_元素切换]
isVisible: if not self.hasFlag(id=2)
addResources: setFlag=2
pos: 1
id: ${section.text}
text: 元素转换
description: -转换四种元素
displayType: infoOnlyStockpile
buildSpeed: 0s
alwaysSinglePress: true

[action_元素切换2]
@copyFromSection: action_元素切换
isVisible: if self.hasFlag(id=2)
addResources: unsetFlag=2
id: ${section.text}2
isGuiBlinking: true

[template_X]
isVisible: if self.hasFlag(id=2)
isActive: true

isLockedMessage: 不能适应当前环境

displayType: action
price: energy=25

convertTo_keepCurrentTags: true
alsoTriggerAction: 属性变化

buildSpeed: 1s

alwaysSinglePress: true

addActionCooldownTime: 3s

setUnitMemory: 镜影="${element}"


[action_X1]
@copyFromSection: template_X
isLocked: if self.isOverwater
convertTo: 大巫师[火]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 切换火
text: 切换 - 火
description: -仅对地\n -强大群体伤害\n -无视护甲\n -射程较短\n -排斥水盾
pos: 1.1
spawnEffects: CUSTOM:切换火

[action_X2]
@copyFromSection: template_X
isLocked: if self.isOverLiquid
convertTo: 大巫师[雷]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 切换雷
text: 切换 - 雷
description: -对地对空\n -穿盾单体伤害\n -对建筑伤害减半
pos: 1.2
spawnEffects: CUSTOM:切换雷

[action_X3]
@copyFromSection: template_X
isLocked: if self.isOverLiquid
convertTo: 大巫师[风]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 切换风
text: 切换 - 风
description:-对地对空\n -群体伤害并击退\n -移速与视野提升\n -自我修复速度更快
pos: 1.3
spawnEffects: CUSTOM:切换风

[action_X4]
@copyFromSection: template_X
isLocked: if self.isOverLiquid and not self.isOverwater
convertTo: 大巫师[水]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 切换水
text: 切换 - 水
description:-对地对空\n -在水中伤害更高并能攻击水下\n -可以在水中快速移动\n -在水中缓慢回复护盾\n -在水中回能速度加快20%
pos: 1.4
spawnEffects: CUSTOM:切换水


[action_wuhu]
@define number: 1
isVisible: if not self.tags(includes="[爆裂精灵]")
id: ${section.text}
tags=四象空间
price: energy=50
isLocked: if self.isInWater()
text: 四象空间
description: -短距离传送\n -根据元素形态造成特殊效果\n (能量消耗:50)
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 环瞬${element}
displayType: infoOnlyStockpile
buildSpeed: 0.5s
pos: 2
highPriorityQueue: true
onlyOneUnitAtATime: true
whenBuilding_cannotMove: true
whenBuilding_playAnimation: blink
addActionCooldownTime: 7s
addActionCooldownApplyToActions: wuhu

[action_四象空间2]
@copyFromSection: action_wuhu
isVisible: if self.tags(includes="[爆裂精灵]")
id: ${section.text}2
addActionCooldownTime: 0.1s
spawnUnits: 爆裂精灵(addResources=setFlag:${number})

[action_镜影双锋-火]
@define color:火
isVisible: if self.hasFlag(id=1) and memory.镜影=="${color}" and not self.tags(includes="[爆裂精灵]")
id: 镜影双锋-${color}
text: 镜影双锋
description: -根据上一个元素 向指定位置释放元素攻击 \n (能量消耗:50)
displayType: infoOnlyStockpile
buildSpeed: 0.5s
pos: 3
price: energy=50
highPriorityQueue: true
onlyOneUnitAtATime: true
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 镜影${color}
addActionCooldownTime: 7s
spawnEffects: CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkEnter_displacement

[action_镜影双锋-雷]
@copyFromSection: action_镜影双锋-火
@define color:雷

[action_镜影双锋-风]
@copyFromSection: action_镜影双锋-火
@define color:风

[action_镜影双锋-水]
@copyFromSection: action_镜影双锋-火
@define color:水

[template_镜影爆裂]
isVisible: if memory.镜影=="${color}" and self.tags(includes="[爆裂精灵]")
id: 镜影双锋2-${color}
addActionCooldownTime: 0.1s
spawnUnits: 爆裂精灵(addResources=setFlag:${number})

[action_镜影双锋2-火]
@copyFromSection: action_镜影双锋-火, template_镜影爆裂
@define number: 2

[action_镜影双锋2-雷]
@copyFromSection: action_镜影双锋-雷, template_镜影爆裂
@define number: 3

[action_镜影双锋2-风]
@copyFromSection: action_镜影双锋-风, template_镜影爆裂
@define number: 1

[action_镜影双锋2-水]
@copyFromSection: action_镜影双锋-水, template_镜影爆裂
@define number: 4


[action_爆裂精灵]
isVisible: if self.hasFlag(id=1)
id: ${section.text}
text: 爆裂精灵
description: -使用后的7s内，你的其它技能无冷却时间 \n -期间每使用一次技能则在原地留下一个元素三角 \n -技能持续结束后，所有三角会根据元素形态而原地释放元素效果 \n (能量消耗:25)
displayType: infoOnlyStockpile
buildSpeed: 0.1s
pos: 4
price: energy=25
isGuiBlinking: if self.tags(includes="[爆裂精灵]")
alwaysSinglePress: true
highPriorityQueue: true
addActionCooldownTime: 50s
temporarilyAddTags: [爆裂精灵]
addResources: 爆裂精灵剩余时间=7
spawnEffects: CUSTOM:三角风, CUSTOM:三角火, CUSTOM:三角雷, CUSTOM:三角水

[resource_爆裂精灵剩余时间]
displayName: 爆裂精灵剩余时间
hidden: true

[hiddenAction_爆裂精灵倒计时]
autoTrigger: if self.resource(type="爆裂精灵剩余时间", greaterThan=0) and not numberOfUnitsInTeam(withTag="素之苍蓝神殿", withinRange=350, greaterThan=0)
addResources: 爆裂精灵剩余时间=-0.01666

[hiddenAction_爆裂精灵持续结束]
autoTrigger: if self.resource(type="爆裂精灵剩余时间", lessThan=0.01) and self.tags(includes="[爆裂精灵]") and not numberOfUnitsInTeam(withTag="素之苍蓝神殿", withinRange=350, greaterThan=0)
temporarilyRemoveTags: [爆裂精灵]
resourceAmount: 爆裂精灵剩余时间
resourceAmount_setValue: 0

[effect_留迹火焰]
priority: low
frameIndex: 3
stripIndex: projectiles
life: 40
fadeOut: true
attachedToUnit: false
color: #fdc14d
scaleFrom: 1
scaleTo: 1.2
alpha: 0.8
drawUnderUnits: true
physics: true
hSpeed: 0.3
xOffsetRelativeRandom: 23
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2
ySpeedRelative: -0.5


[effect_三角风]
@copyFromSection: template_elementColor风
image: 三角形.png
life: 25
scaleFrom: 0
scaleTo: 1.2
alpha: 2

[effect_三角火]
@copyFromSection: effect_三角风, template_elementColor火
dirOffset: 90
delayedStartTimer: 10

[effect_三角雷]
@copyFromSection: effect_三角风, template_elementColor雷
dirOffset: 180
delayedStartTimer: 20

[effect_三角水]
@copyFromSection: effect_三角风, template_elementColor水
dirOffset: 270
delayedStartTimer: 30


[action_水自动转变]
autoTrigger: if self.overWater() and self.energy(greaterThan=75)
alsoTriggerAction: X4
addResources: energy=-25
isVisible: false

[action_火自动转变]
autoTrigger: if self.isOverLiquid and not self.isOverwater and self.energy(greaterThan=75)
alsoTriggerAction: X1
addResources: energy=-25
isVisible: false

[action_burn]
autoTrigger:if self.isOverLiquid and not self.isOverwater
addResources: hp=-1.6
isVisible: false


[action_深渊之息]
description: -每秒损失50+最大血量1% \n -所有火元素滞留效果会立即消散

[graphics]
teamColorsOnTurret: true
total_frames: 1

image: null.png
image_wreak: 大巫师残骸.png
image_turret: NONE

image_shield: 水魔晶.png

shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretTurnSpeed: 4
turretRotateWithBody: false

aimOffsetSpread: 0

[turret_magic]
x: 0
y: 0
canShoot: false
invisible:true

turnSpeed: 2.9
turnSpeedAcceleration: 0.07

limitingRange: 300

[template_elementColor]
@define color:
color: #07eef2

[template_elementColor风]
@define color:风
color: #7AD93E

[template_elementColor火]
@define color:火
color: #FF6E00

[template_elementColor雷]
@define color:雷
color: #63e6e8

[template_elementColor水]
@define color:水
color: #2C9FFF

[effect_light风]
@copyFromSection: effect_light, template_elementColor风

[effect_light火]
@copyFromSection: effect_light, template_elementColor火

[effect_light雷]
@copyFromSection: effect_light, template_elementColor雷

[effect_light水]
@copyFromSection: effect_light, template_elementColor水

[projectile_chakram]
@define color:
teleportSource:true
life: 60
speed: 5
drawSize: 0
hitSound: true
largeHitEffect: true
targetGround:true
instant:true
areaDamage: 100
areaRadius: 70
explodeEffect: CUSTOM:light${color}, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
effectOnCreate: CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkEnter_displacement

[effect_light]
image: light.png
alsoPlaySound: chakram.ogg:0.6

[projectile_环瞬风]
@copyFromSection: projectile_chakram
@define color:风
areaDamage: 100
areaRadius: 150
pushForce: 1000
pushVelocity: 10
areaExpandTime: 30
areaHitAirAndLandAtSameTime: true
instant: false
speed: 99
deflectionPower: -1
explodeEffect: CUSTOM:light${color}, CUSTOM:风素波, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
#spawnProjectilesOnExplode: wind(offsetHeight=5, recursionLimit=10), 风闪, 光3
spawnProjectilesOnExplode: 风闪, 光3
spawnUnit: 风团(offsetY=5)

[projectile_环瞬火]
@copyFromSection: projectile_chakram
@define color:火
spawnUnit: 火花Z2*2(offsetRandomX=15, offsetRandomY=15)
spawnProjectilesOnExplode:岩浆效果*2, 爆炸效果

[projectile_环瞬雷]
@copyFromSection: projectile_chakram
@define color:雷
spawnUnit: 落雷区*3

[projectile_环瞬水]
@copyFromSection: projectile_chakram, template_elementColor水
@define color:水
shieldDamageMultiplier: 2
explodeEffect: CUSTOM:light${color}, CUSTOM:水遁, CUSTOM:水复, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
spawnUnit: 潮湿, 潮湿(offsetRandomX=50, offsetRandomY=50)


[projectile_wind]
tags= T-projectile
#已转移至效果单位
areaDamage: 2
areaRadius: 200
life: 6
speed: 0
largeHitEffect:true
areaHitAirAndLandAtSameTime: true
drawUnderUnits: true
pushForce: 500
pushVelocity: 1
deflectionPower: -1
explodeOnEndOfLife: true
explodeEffect: CUSTOM:windwave
spawnProjectilesOnEndOfLife: wind(recursionLimit=10)

[effect_windwave]
stripIndex: shockwave_large
life: 80
scaleFrom: 0
scaleTo: 5
alpha: 0.9
dirSpeed: -5

[projectile_光3]
tags= T-projectile
directDamage: 0
life: 0
explodeOnEndOfLife: true
explodeEffect: CUSTOM:光
explodeEffectOnShield: CUSTOM:光

[projectile_风闪]
tags= T-projectile
areaDamage: 0
areaRadius: 40
life: 60
speed: 0
invisible: true
deflectionPower: -1
explodeOnEndOfLife: true
explodeEffect: CUSTOM:风中波, CUSTOM:中光
explodeEffectOnShield: CUSTOM:风中波, CUSTOM:中光

[effect_光]
createWhenZoomedOut: false
priority:low
image: SHARED:light_50.png
life: 112
fadeOut: true
attachedToUnit: false
color: #ffffff
fadeInTime:2
scaleFrom: 1
scaleTo: 0.5
alpha: 0.8
atmospheric: true

[effect_中光]
priority: low
image: SHARED:light_50.png
life: 60
fadeOut: true
attachedToUnit: false
scaleFrom: 0.3
scaleTo: 0.0
alpha: 0.6

[effect_风中波]
stripIndex: shockwave
life: 30
scaleFrom: 1.0
scaleTo: 0.3
dirSpeed: 5
alpha: 0.9
attachedToUnit: false

[effect_风素波]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 3.5
color: #7AD93E


[projectile_岩浆效果]
tags= T-projectile
directDamage: 0
life: 10
instant: true
explodeOnEndOfLife:true
explodeEffect: CUSTOM:岩浆*7, CUSTOM:attachedLight
explodeEffectOnShield: CUSTOM:岩浆*7, CUSTOM:attachedLight

[projectile_爆炸效果]
tags= T-projectile
areaDamage: 0
life: 0
invisible: true
explodeOnEndOfLife: true
largeHitEffect: true
explodeEffectOnShield: NONE

[effect_岩浆]
attachedToUnit: false
life: 300
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 3
scaleFrom: 3
scaleTo: 3
image: SHARED:spark.png
color: #FF6E00

[effect_attachedLight]
priority:veryhigh
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: true
color: #fdc14d
fadeInTime:4
scaleFrom: 1.2
scaleTo: 0.4
alpha: 0.5
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_attachedLight1]
@copyFromSection: effect_attachedLight
color: #EB5D0C
scaleFrom: 0.4


[effect_水复]
priority:high
image: hit.png
life: 12
fadeOut: true
attachedToUnit: false
color: #2C9FFF
scaleFrom: 2
scaleTo: 0.1
alpha: 1
drawUnderUnits:false

[effect_水遁]
image: star_shield.png
life: 30
scaleFrom: 2
scaleTo: 2
alpha: 0.6
dirSpeed: 5



[effect_切换火]
life: 20
image: SHARED:light_50.png
scaleFrom: 0.4
scaleTo: 0.4
alpha: 1
color: #FF6E00
xOffsetRelative: 14
yOffsetRelative: -12

[effect_切换雷]
@copyFromSection: effect_切换火
color: #63e6e8

[effect_切换风]
@copyFromSection: effect_切换火
color: #7AD93E

[effect_切换水]
@copyFromSection: effect_切换火
color: #2C9FFF




[projectile_镜影风]
@define color:风
life: 300
speed: 0
targetSpeed: 20
drawSize: 3
color: #7AD93E
trailEffectRate: 2
trailEffect: CUSTOM:风圈, CUSTOM:风光星, CUSTOM:风环, CUSTOM:风球光, CUSTOM:风旋, CUSTOM:风团扭曲
lightColor: #7AD93E
lightSize: 1.5
deflectionPower: -1
explodeEffect: CUSTOM:light${color}, CUSTOM:风素波, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
explodeEffectOnShield: CUSTOM:light${color}, CUSTOM:风素波, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
shouldRevealFog: true
areaDamage: 100
areaRadius: 150
pushForce: 1000
pushVelocity: 10
areaExpandTime: 30
areaHitAirAndLandAtSameTime: true
spawnProjectilesOnExplode: 风闪, 光3
spawnUnit: 风团(offsetY=5)

[effect_风圈]
priority: veryhigh
stripIndex: shockwave
life: 10
fadeInTime: 5
scaleFrom: 1.8
scaleTo: 2.2
alpha: 0.4
dirSpeed: 3
dirOffsetRandom: 180
color: #7AD93E

[effect_风光星]
@copyFromSection: effect_电光星
color: #7AD93E

[effect_风球光]
@copyFromSection: effect_电球光
life: 10
color: #7AD93E
scaleFrom: 1
scaleTo: 0
alpha: 0.2
dirSpeed: 25

[effect_风环]
@copyFromSection: effect_电球hit
life: 20
scaleFrom: 4
scaleTo: 0
alpha: 0.3
color: #7AD93E

[effect_风旋]
priority: veryhigh
image: 旋波.png
life: 50
fadeOut: false
fadeInTime: 5
scaleFrom: 2
scaleTo: 0.1
alpha: 0.2
dirSpeed: -5
color: #ffffff

[effect_风团扭曲]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 50
fadeOut: true
fadeInTime: 40

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.6
scaleTo: 0
alpha: 0.08
drawUnderUnits:false

alwayStartDirAtZero: true


[projectile_镜影火]
@define color:火
areaDamage: 100
areaRadius: 70
life: 300
speed: 6
frame: 9
drawSize: 1.25
color: #FF6E00
trailEffectRate: 1
trailEffect: CUSTOM:火光星, CUSTOM:炎烟, CUSTOM:焰光散
lightColor: #ff0000
lightSize: 1.5
deflectionPower: -1
effectOnCreate: CUSTOM:火球光, CUSTOM:火球环, CUSTOM:火球环2, CUSTOM:火圈
explodeEffect: CUSTOM:light${color}, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
explodeEffectOnShield: CUSTOM:light${color}, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
shouldRevealFog: true
spawnUnit: 火花Z2*2(offsetRandomX=15, offsetRandomY=15)
spawnProjectilesOnExplode:岩浆效果*2, 爆炸效果

[effect_火圈]
priority: veryhigh
image: shockwave2.png
life: 80
scaleFrom: 2
scaleTo: 1
alpha: 0.4
dirSpeed: 3
dirOffsetRandom: 180
color: #FF6E00

[effect_火光星]
@copyFromSection: effect_电光星
life: 30
color: #FF6E00

[effect_火球光]
@copyFromSection: effect_电球光
image: SHARED:light_50.png
life: 300
color: #FF6E00
scaleFrom: 1.5
scaleTo: 1.5
alpha: 1

[effect_火球环]
@copyFromSection: effect_电球hit
stripIndex: shockwave
image: NONE
scaleFrom: 1.5
scaleTo: 1.5
alpha: 0.5
color: #FF6E00

[effect_火球环2]
@copyFromSection: effect_火球环
image: shockwave2.png
scaleFrom: 1.2
scaleTo: 1.2

[effect_焰光散]
priority: veryhigh
attachedToUnit: true
image: SHARED:light_50.png
life: 50
alpha: 0.7
scaleFrom: 0.4
scaleTo: 0.1
color: #FF6E00
fadeOut: true
atmospheric: true
drawUnderUnits: false
xSpeedRelativeRandom: 1.8
ySpeedRelativeRandom: 1.8
ySpeedRelative: -2
yOffsetRelative: 5

[effect_炎烟]
frameIndex: 3
stripIndex: projectiles
priority: low
life: 60
fadeOut: true
attachedToUnit: false
fadeInTime: 5
hSpeed: 0.3
scaleFrom: 0.6
scaleTo: 0.8
alpha: 0.8
drawUnderUnits:false
atmospheric: true
yOffsetAbsoluteRandom: 5
xOffsetAbsoluteRandom: 5
xSpeedAbsoluteRandom: 1.5
ySpeedAbsoluteRandom: 1.5


[projectile_镜影雷]
@define color:雷
areaDamage: 100
areaRadius: 70
life: 10
speed: 8
color: #AA63e6e8
drawSize: 1.25
trailEffectRate: 1
trailEffect: CUSTOM:电光星
deflectionPower: -1
image: lighting_charge2.png
effectOnCreate: CUSTOM:电球光, CUSTOM:电球hit, CUSTOM:电hitLightFlash, CUSTOM:电圈
explodeEffect: CUSTOM:light${color}, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
explodeEffectOnShield: CUSTOM:light${color}, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
lightColor: #63e6e8
lightSize: 1.5
spawnProjectilesOnCreate: 电线*2(recursionLimit=99)
spawnProjectilesOnEndOfLife: 镜影雷(recursionLimit=99)
shouldRevealFog: true
spawnUnit: 落雷区*3(addResources=setFlag:1)

[projectile_电线]
tags= T-projectile
directDamage: 0
life: 10
instant: true
lightingEffect: true

explodeEffect: CUSTOM:弱电散, CUSTOM:镜电粒子*5

[effect_电hitLightFlash]
priority: high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.8
drawUnderUnits:false

[effect_弱电散]
life: 25
fadeOut: false
scaleFrom: 1.5
scaleTo: 1.5
alpha: 0.5
color: #63e6e8

image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

xOffsetRelativeRandom: 25
yOffsetRelativeRandom: 25

[effect_电圈]
priority: veryhigh
image: shockwave2.png
life: 15
scaleFrom: 2.1
scaleTo: 2
alpha: 0.6
dirSpeed: 3
dirOffsetRandom: 180
color: #63e6e8

[effect_电光星]
image: light.png
life: 45
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.6
scaleTo: 0.5
alpha: 0.2
ySpeedRelative: -1
dirSpeedRandom: 20
dirOffsetRandom: 30
drawUnderUnits: false

[effect_镜电粒子]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 3
ySpeedRelativeRandom: 3
hSpeed: 2
scaleTo: 3
color: #63e6e8
image: SHARED:spark.png
priority: low
alpha: 0.6

[effect_电球光]
priority:veryhigh
image: light.png
life: 300
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime: 2
scaleFrom: 1
scaleTo: 1
alpha: 0.8
liveAfterAttachedDies: false

[effect_电球hit]
@copyFromSection: effect_电球光
image: hit.png
life: 300
color: #63e6e8
scaleFrom: 2
scaleTo: 2
alpha: 0.7
dirSpeed: 2



[projectile_镜影水]
@define color:水
areaDamage: 100
areaRadius: 70
life: 5
speed: 6
color: #AA2C9FFF
image: SHARED:light_50.png
drawSize: 1.25
trailEffectRate: 1
trailEffect: CUSTOM:电光星
deflectionPower: -1
shieldDamageMultiplier: 2
effectOnCreate: CUSTOM:水球光, CUSTOM:水球环, CUSTOM:水圈, CUSTOM:水散
explodeEffect: CUSTOM:light${color}, CUSTOM:水遁, CUSTOM:水复, CUSTOM:水散*10, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
explodeEffectOnShield: CUSTOM:light${color}, CUSTOM:水遁, CUSTOM:水复, CUSTOM:水散*10, CUSTOM:blinkFlash${color}, CUSTOM:blinkGlow${color}, CUSTOM:blinkChargeOut_displacement
lightColor: #2C9FFF
lightSize: 1.5
spawnProjectilesOnCreate: 水束(recursionLimit=1)
spawnProjectilesOnEndOfLife: 镜影水(recursionLimit=99), 水球(recursionLimit=99, offsetDir=150, offsetRandomDir=15), 水球(recursionLimit=99, offsetDir=170, offsetRandomDir=15), 水球(recursionLimit=99, offsetDir=-150, offsetRandomDir=15), 水球(recursionLimit=99, offsetDir=-170, offsetRandomDir=15)
spawnProjectilesOnExplode: 水盾(recursionLimit=99)
shouldRevealFog: true
spawnUnit: 潮湿, 潮湿(offsetRandomX=50, offsetRandomY=50)

[projectile_水盾]
tags= T-projectile
areaDamage: -300
areaRadius: 70
life: 0
speed: 0
friendlyFire: only-ignoreEnemy
explodeOnEndOfLife: true
hullDamageMultiplier: 0
explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_水束]
tags= T-projectile
life: 50
instant: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 1.5

explodeEffect: CUSTOM:水幕, CUSTOM:水幕光, CUSTOM:水柱*25
explodeEffectOnShield: CUSTOM:水幕, CUSTOM:水幕光, CUSTOM:水柱*25

directDamage: 0
color: #602C9FFF

[projectile_水球]
tags= T-projectile
areaDamage: 0
life: 80
speed: 2
targetSpeed: 0.1
targetSpeedAcceleration: 0.03
turnSpeed: 1.2
color: #AA2C9FFF
image: SHARED:light_50.png
drawSize: 0.65
deflectionPower: -1
explodeOnEndOfLife: true
explodeEffect: CUSTOM:水粒*2, CUSTOM:水波, CUSTOM:水球尽
explodeEffectOnShield: CUSTOM:水粒*2, CUSTOM:水波, CUSTOM:水球尽
#lightColor: #2C9FFF
#lightSize: 0.7

[effect_水圈]
image: shockwave2.png
life: 100
scaleFrom: 0.1
scaleTo: 2
alpha: 0.6
color: #2C9FFF
dirSpeed: 1
dirSpeedRandom: 2
dirOffsetRandom: 180
attachedToUnit: false
atmospheric: true

[effect_水光星]
@copyFromSection: effect_电光星
color: #2C9FFF

[effect_水球光]
@copyFromSection: effect_电球光
image: SHARED:light_50.png
life: 60
color: #2C9FFF
scaleFrom: 2
scaleTo: -2
alpha: 0.8
liveAfterAttachedDies: true

[effect_水球环]
@copyFromSection: effect_电球hit
stripIndex: shockwave
image: NONE
scaleFrom: 1.5
scaleTo: 0
alpha: 0.5
color: #2C9FFF
liveAfterAttachedDies: true
life: 100

[effect_水幕]
image: circle_50.png
life: 60
scaleFrom: 0
scaleTo: 5
alpha: 0.4
dirSpeed: 1
color: #2C9FFF
drawUnderUnits: true

[effect_水幕光]
@copyFromSection: effect_水幕
image: SHARED:light_50.png
life: 75
alpha: 1
scaleTo: 6

[effect_水柱]
stripIndex: light_50
life: 140
lifeRandom: 25
fadeOut: true
attachedToUnit: false
color: #2C9FFF
fadeInTime: 5
scaleFrom: 0.6
scaleTo: 0.8
alpha: 0.7
xSpeedRelativeRandom: 0.6
ySpeedRelativeRandom: 0.6
xOffsetRelativeRandom: 50
yOffsetRelativeRandom: 50

hSpeed: 2.5
hSpeedRandom: 1
physics: true
physicsGravity: 0.3
delayedStartTimer: 45
delayedStartTimerRandom: 10

[effect_水散]
stripIndex: light_50
life: 60
fadeOut: true
attachedToUnit: false
color: #2C9FFF
fadeInTime: 5
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.8
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2
xOffsetRelativeRandom: 15
yOffsetRelativeRandom: 15

[effect_水粒]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.2
ySpeedRelativeRandom: 1.2
hSpeed: 2
alpha: 0.9
scaleFrom: 1.2
scaleTo: 1
image: SHARED:spark.png
priority: verylow
color: #2C9FFF

[effect_水波]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1
alpha: 0.8
color: #2C9FFF
dirSpeed: 1

[effect_水球尽]
stripIndex: light_50
life: 25
fadeOut: true
attachedToUnit: false
color: #2C9FFF
scaleFrom: 0.3
scaleTo: 0
alpha: 0.8



[effect_blinkFlash]
@copyFromSection: template_elementColor
priority:high
image: SHARED:light_50.png
life: 78
fadeOut: true
attachedToUnit: false
scaleFrom: 3.8
scaleTo: 1.0
alpha: 0.8
drawUnderUnits:false


[effect_blinkGlow]
@copyFromSection: effect_blinkFlash
life: 148
scaleFrom: 2.8
scaleTo: 5.0
alpha: 0.5



[effect_blinkChargeIn_displacement]

#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:cone_inverted_normal_128.png
life: 23
fadeOut: true
fadeInTime: 20

attachedToUnit: true
color: #FFFFFF
scaleFrom: 1.5
scaleTo: 1.0
alpha: 1.0
drawUnderUnits:false

#dirOffsetRandom: 180
#dirSpeed: 1
#delayedStartTimer: 0
alwayStartDirAtZero: true

[effect_blinkChargeOut_displacement]
#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 80
fadeOut: true
fadeInTime: 5

attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.0
scaleTo: 4.0
alpha: 0.3
drawUnderUnits:false

alwayStartDirAtZero: true

[effect_blinkEnter_displacement]

#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 40
fadeOut: true
fadeInTime: 20

attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.3
scaleTo: 0.5
alpha: 0.7
drawUnderUnits:false

#dirOffsetRandom: 180
#dirSpeed: 1
#delayedStartTimer: 0
alwayStartDirAtZero: true


[effect_blinkSpark]
@copyFromSection: template_elementColor
priority:high
image: SHARED:light_50.png
life: 10

fadeOut: false
attachedToUnit: false
scaleFrom: 0.3
scaleTo: 0.5
alpha: 0.8
drawUnderUnits:false

xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30

xSpeedAbsoluteRandom: 1.4
ySpeedAbsoluteRandom: 1.4

delayedStartTimerRandom: 10

physics: true
physicsGravity: -0.4

alsoEmitEffectsOnDeath: blinkSparkDisappear${color}

[effect_blinkSparkDisappear]
@copyFromSection: template_elementColor
priority: high
image: SHARED:light_50.png
life: 10

fadeOut: true
attachedToUnit: false
scaleFrom: 0.5
scaleTo: 0
alpha: 0.5
drawUnderUnits:false

hSpeed: 1

[effect_blinkFlash风]
@copyFromSection: effect_blinkFlash, template_elementColor风

[effect_blinkGlow风]
@copyFromSection: effect_blinkGlow, template_elementColor风

[effect_blinkSpark风]
@copyFromSection: effect_blinkSpark, template_elementColor风

[effect_blinkSparkDisappear风]
@copyFromSection: effect_blinkSparkDisappear, template_elementColor风


[effect_blinkFlash火]
@copyFromSection: effect_blinkFlash, template_elementColor火

[effect_blinkGlow火]
@copyFromSection: effect_blinkGlow, template_elementColor火

[effect_blinkSpark火]
@copyFromSection: effect_blinkSpark, template_elementColor火

[effect_blinkSparkDisappear火]
@copyFromSection: effect_blinkSparkDisappear, template_elementColor火


[effect_blinkFlash雷]
@copyFromSection: effect_blinkFlash, template_elementColor雷

[effect_blinkGlow雷]
@copyFromSection: effect_blinkGlow, template_elementColor雷

[effect_blinkSpark雷]
@copyFromSection: effect_blinkSpark, template_elementColor雷

[effect_blinkSparkDisappear雷]
@copyFromSection: effect_blinkSparkDisappear, template_elementColor雷


[effect_blinkFlash水]
@copyFromSection: effect_blinkFlash, template_elementColor水

[effect_blinkGlow水]
@copyFromSection: effect_blinkGlow, template_elementColor水

[effect_blinkSpark水]
@copyFromSection: effect_blinkSpark, template_elementColor水

[effect_blinkSparkDisappear水]
@copyFromSection: effect_blinkSparkDisappear, template_elementColor水

[animation_blink]
effect_0.01s: {x:0, y:0, name:CUSTOM|blinkSpark${element}*3}
effect_0.1s: {x:0, y:0, name:CUSTOM|blinkSpark${element}*5}

effect_0.2s: {x:0, y:0, name:CUSTOM|blinkSpark${element}*10}

effect_0.25s: {x:0, y:0, name:CUSTOM|blinkChargeIn_displacement}

effect_0.5s: {x:0, y:0, name:CUSTOM|blinkSpark${element}*16}


[leg_1]
x: -20
y: 0
attach_x: -13
attach_y: 0
moveSpeed: 1.9
moveWarmUp:0.1s


rotateSpeed: 7

heightSpeed: 0.7
resetAngle:25

image_leg:  leg.png
image_foot: foot.png

#draw_foot_on_top: true
#dust_effect: false

holdDisMin: 22
holdDisMax: 42

[leg_2]
x: 20
y: 0
attach_x: 13
attach_y: 0
copyFrom: 1

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.6
moveAccelerationSpeed: 0.15
moveDecelerationSpeed: 0.20

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage: 1







