
[core]
name:毒刃
displayText: 毒刃
displayDescription:-帝国超级地面武器\n-超复材质装甲\n-六门重炮遍布其身\n-正面机枪哨口\n-一台反物质炮\n-先进雷达系统\n-能在水上移动\n-死亡后核爆炸

class: CustomUnitMetadata

price:225000
maxHp:22500
mass:260000

tags: units, 毒刃, 坦克

fogOfWarSightRange: 35

radius:65

armour: 40
armourMinDamageToKeep: 40

techLevel: 2
buildSpeed: 500s
experimental: true

transportSlotsNeeded:20

selfRegenRate:0.3

numBitsOnDeath:100

nukeOnDeath:true
nukeOnDeathRange:200
nukeOnDeathDamage:4400

[hiddenAction_completeAndActive]
autoTriggerOnEvent: completeAndActive
offsetSelfAbsolute: 0, 0, 3000
fireTurretXAtGround: AttackDictate
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 出场
spawnEffects: CUSTOM:出场音效
#落地时间约为100

[projectile_出场]
delayedStartTimer: 100
life: 50
speed: 20
instant: true

targetGround: true
areaDamage: 5000

areaRadius: 150

mutatorX_ifUnitWithTags: 毒刃
mutatorX_areaDamageMultiplier: 0

deflectionPower:-1

friendlyFire: true

explodeEffect: CUSTOM:烟尘*8, CUSTOM:土粒飞溅*20, CUSTOM:落地音效

[effect_烟尘]
stripIndex: effects
frameIndex: 0

#delayedStartTimer: 100
life: 400
fadeOut: true
attachedToUnit: false

color: #9D7565
fadeInTime: 2
scaleFrom: 8
scaleTo: 15
alpha: 0.7
drawUnderUnits:false
#ySpeedRelative:-1
#atmospheric:true

dirOffsetRandom:180

xOffsetRelativeRandom:50
yOffsetRelativeRandom:60

xSpeedAbsoluteRandom: 0.3
ySpeedAbsoluteRandom: 0.3

[effect_土粒飞溅]
attachedToUnit: false
priority: low
#delayedStartTimer: 100
life: 100
physics: true
xOffsetRelativeRandom:50
yOffsetRelativeRandom:60
xSpeedRelativeRandom: 2.0
ySpeedRelativeRandom: 2.0
hSpeed: 4
scaleFrom: 4.0
scaleTo: 4.0
image: particle.png
color: #9D7565

[effect_出场音效]
life:0
alsoPlaySound:出场.wav:0.8

[effect_落地音效]
life:0
alsoPlaySound:地裂.ogg:1.0

[action_mainAttack]
displayType: action
iconImage: beam1.png
iconExtraImage: 黑洞.png
text: [反物质炮]
description: -主炮攻击指示点 \n -主炮只能攻击前方 \n -攻击点不可超出范围 \n -主炮预热时无法被击退 \n -移动会中断开火
buildSpeed: 0s
pos: 0
highPriorityQueue: true
addActionCooldownTime: 2s
fireTurretXAtGround: AttackDictate
fireTurretXAtGround_onlyOverPassableTileOf: AIR

[hiddenAction_指定冷却]
addActionCooldownTime: 3s
addActionCooldownApplyToActions: mainAttack

[hiddenAction_主炮冷却]
addActionCooldownTime: 16.66s
addActionCooldownApplyToActions: mainAttack


[hiddenAction_攻击锁定]
autoTriggerOnEvent: newMessage(withTag='攻击标记')
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_fromReference: eventData(name='攻击', type='unit')

[hiddenAction_固定位置]
requireConditional: if activeWaypointTarget.tags(includes='毒刃主炮指示') and activeWaypointTarget.hasFlag(id=1)
buildSpeed: 0.01s
alsoQueueAction: 固定位置
whenBuilding_cannotMove: true

[graphics]
total_frames:3
image:       战争堡垒.png
image_turret: 炮.png

scaleImagesTo:100

teamColorsOnTurret:true

dustEffect: true
dustEffectReverse: true

animation_moving_start:0
animation_moving_end:2
animation_moving_speed:5

image_shadow:AUTO
shadowOffsetX:4
shadowOffsetY:4

[attack]
canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:true
canAttackUnderwaterUnits:false

turretTurnSpeed:3

maxAttackRange:390

turretMultiTargeting:true

[turret_1]
#反物质炮
x: 0
y: 40
barrelY:50
image:毒刃.png
attachedTo: 1A
slave: true

delay: 1000

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:plasma_fire
shoot_sound_vol:1.5
shoot_flame:CUSTOM:散华*8,CUSTOM:噬光*1,CUSTOM:大暗幕*1,CUSTOM:黑团*1
#shoot_light:#000000

warmupStartEffect:CUSTOM:黑洞*1,CUSTOM:暗幕*1

canShoot: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canOnlyAttackUnitsWithTags: 毒刃主炮指示

onShoot_triggerActions: 主炮冷却

warmup: 200
warmupCallDownRate: 1

recoilOffset: -7
recoilOutTime: 10
recoilReturnTime: 90

[turret_AttackDictate]
x: 0
y: 0
canShoot: false
invisible: true
projectile: AttackDictate

[projectile_AttackDictate]
directDamage: 0
invisible: true
life: 100
instant: true
spawnUnit: 毒刃主炮指示
explodeEffect: NONE

[turret_1Aiming]
x: 0
y: 0
delay: 10
invisible: true
projectile: 1Aiming
limitingAngle: 35
turnSpeed: 99
canOnlyAttackUnitsWithTags: 毒刃主炮指示
onShoot_triggerActions: 指定冷却, 固定位置

[projectile_1Aiming]
directDamage: 0
invisible: true
life: 100
instant: true
explodeEffect: NONE
mutatorX_ifUnitWithTags: 毒刃主炮指示
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: setFlag=1



[turret_1A]
#turret
x: 0
y: 0
image:毒刃底座.png

canShoot: false
canOnlyAttackUnitsWithTags: 毒刃主炮指示

turnSpeed: 0.5
turnSpeedAcceleration: 0.05
turnSpeedDeceleration: 0.25

limitingAngle:35

recoilOffset: -3
recoilOutTime: 14
recoilReturnTime: 40

[turret_2]
#炮
x:-28
y:40
barrelY:30

barrelX: -4
barrelOffsetX_onOddShots: 8

image:炮.png

projectile:2

delay:35

turnSpeed:2

canOnlyAttackUnitsWithoutTags: 毒刃主炮指示

shoot_sound:large_gun_fire2
shoot_sound_vol:0.7
shoot_flame:CUSTOM:散华*3
shoot_light:#000000

recoilOffset:-5
recoilOutTime:2
recoilReturnTime:40

idleDir:-20
limitingAngle:60

[turret_3]
x:28
y:40
copyFrom: 2

idleDir:20

[turret_4]
x:37
y:0
copyFrom: 2

idleDir:90
limitingAngle:80

[turret_5]
x:-37
y:0
copyFrom: 2

idleDir:-90
limitingAngle:80

[turret_7]
x:-28
y:-35
copyFrom: 2

idleDir:-160

[turret_8]
x:28
y:-35
copyFrom: 2

idleDir:160

[projectile_1]
areaDamage:10800
areaRadius:250
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
life:60
largeHitEffect:true
instant:true
laserEffect:true
#color:#000000

beamImage: beam1.png

nukeWeapon:true

mutatorX_ifUnitWithTags: 毒刃主炮指示
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: setFlag=0

[projectile_2]
life:360
directDamage:100
areaDamage:100
areaRadius:50
areaRadiusFromEdge:true
largeHitEffect:true
frame:8
color:#000000
speed:6
trailEffect:CUSTOM:毒雾
trailEffectRate:1
spawnProjectilesOnExplode:爆炸效果

[projectile_爆炸效果]
directDamage:0
life:0
explodeOnEndOfLife:true
explodeEffect:CUSTOM:散华*2
explodeEffectOnShield:CUSTOM:散华*2

[turret_6]
#机枪
invisible:true
x:-12
y:24

barrelOffsetX_onOddShots:3

canAttackFlyingUnits:false
canAttackLandUnits:true
canOnlyAttackUnitsWithoutTags: 毒刃主炮指示

delay: 3

barrelY:0
turnSpeed:10

projectile:3

shoot_sound:tank_firing
shoot_sound_vol:0.4
shoot_flame:NONE

limitingAngle:45

[projectile_3]
life:360
areaDamage:40
areaRadius:15
areaDamageNoFalloff:true
areaRadiusFromEdge:true
targetGround:true
targetGroundSpread:40
frame:5
color:#FF3BFF00
speed:10
explodeEffect:CUSTOM:毒雾2

[movement]
movementType:OVER_CLIFF_WATER
moveSpeed:0.3
moveAccelerationSpeed:0.03
moveDecelerationSpeed:0.03

reverseSpeedPercentage:0.95

maxTurnSpeed:0.4
turnAcceleration:0.02

fallingAcceleration: 0.2

moveSlidingMode:false
moveIgnoringBody:false

[effect_黑洞]
alsoPlaySound:warning.ogg:1.5
priority:veryhigh
image: 黑洞.png
fadeOut: false
fadeInTime:200
life: 200
scaleFrom: 0.1
scaleTo: 0.8
#alpha: 1.0
dirSpeed: 10

[effect_散华]
priority:low
attachedToUnit:true
life:120
alpha:0.3
scaleFrom:0.6
scaleTo:1.2
image:SHARED:light_50.png
color: #000000
drawUnderUnits:false
atmospheric:true
xSpeedRelativeRandom:1.2
ySpeedRelativeRandom:1.2

[effect_黑团]
priority:critical
attachedToUnit:false
life:300
alpha:1.0
scaleFrom:1.0
scaleTo:1.0
image:SHARED:light_50.png
color: #000000
drawUnderUnits:false

[effect_噬光]
image:glow_sharp.png
priority:critical

life: 50
fadeOut: true
attachedToUnit: false
scaleFrom: 10.0
scaleTo: 10.0
color: #000000
drawUnderUnits:false

[effect_暗幕] 
priority:critical
alwayStartDirAtZero: true
image: 黑.png
life: 200
fadeOut: false
alpha: 0.5
scaleFrom: 5.0
scaleTo: 5.0
drawUnderUnits: false
createWhenOffscreen: true
showInFog: true
color: #000000
fadeInTime: 200

[effect_大暗幕] 
priority:critical
alwayStartDirAtZero: true
image: 黑.png
life: 50
#fadeOut: false
alpha: 1
scaleFrom: 5.0
scaleTo: 5.0
drawUnderUnits: false
createWhenOffscreen: true
showInFog: true
color: #000000
#fadeInTime: 200

[effect_毒雾]
#烈性酸液
stripIndex: effects
frameIndex: 0
priority:low

life: 20
#fadeOut: true
attachedToUnit: false
color: #AEFF00
scaleFrom: 0.9
scaleTo: 0.3
alpha: 0.3
drawUnderUnits:false

shadow: true
atmospheric: true

[effect_毒雾2]
#死亡喷射
stripIndex: effects
frameIndex: 0
priority:low

life: 100
#fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:5
hSpeed: 0.8
scaleFrom: 0.6
scaleTo: 1.8
alpha: 0.2
drawUnderUnits:false
#yOffsetRelative:-7
xSpeedRelativeRandom:0.3
ySpeedRelativeRandom:0.3

shadow: true
atmospheric: true