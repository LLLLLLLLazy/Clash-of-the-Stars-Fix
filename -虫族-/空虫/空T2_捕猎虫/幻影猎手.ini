[core]


name: 幻影猎手
displayText: 幻影猎手
maxHp: 600
mass: 7000
price: 1200, 腐蚀=${corrode}
radius: 14
softCollisionOnAll: 14
isBug: true
isBio: true
techLevel: 3
selfRegenRate: 0.15
displayDescription: -虫族空军拦截\n-破空撕裂:穿透护盾与装甲\n-超音速?也许不太听你指挥…
fogOfWarSightRange:20
buildSpeed: 16.7s
energyMax: 6.6
energyRegen: 0.0016
autoTriggerCooldownTime: 0.1s

tags: units, 虫族, 中型虫, 捕猎虫, 幻影猎手, AI仅对空
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 捕猎虫

unitsSpawnedOnDeath: 资源返还(addResources=ammo:300|energy:200)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 幻影猎手[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 800
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[action_闪避大师]
isActive: false
id: ${section.text}
text: 幻闪
description: -每4s可闪避一次1000以下的伤害
pos: 0
displayType: infoOnly
buildSpeed: 0s
addResources: hp=1

[hiddenAction_幻闪]
autoTrigger: if self.customTimer(laterThanSeconds=4)
convertTo: 幻影猎手[闪]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
resetCustomTimer: true
addResources: unsetFlag=2

[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点

[animation_1]
onActions:idle, move, attack
pingPong: true
scale_start: 1
scale_end: 1.04
speed: 70
[graphics]
image: 幻影猎手.png
scaleImagesTo: 40
image_turret: NONE
splastEffect: true
image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1
movementEffect: CUSTOM:残影2
movementEffectRate: 5
[effect_残影2]
createWhenZoomedOut: false
priority:low
image: 幻影猎手.png
life: 30
fadeOut: true
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 1.0
alpha: 0.5
drawUnderUnits: true
atmospheric: true
[action_magic]
displayType: action
id: ${section.text}
text: 幻杀阵
description:-对目标地点瞬间发动多次斩击\n-发送信息素带动所有幻影猎手行动一次\n-CD:66s
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: magic
fireTurretXAtGround_onlyOverPassableTileOf: AIR
allowMultipleInQueue: false
price: energy=6.6
buildSpeed: 0s
pos: 1
convertTo: 幻影猎手[幻]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
ai_isDisabled: true
#isLocked: if not numberOfUnitsInTeam(withTag='幻影猎手',greaterThan=5,withinRange=150)
#isLockedMessage: -与五个幻影猎手协同攻击

[action_switch1]
isVisible: if not self.hasFlag(id=3)
addResources: setFlag=3
displayType: action
id: ${section.text}
text: 幻杀突袭
description: -启用时攻击自动发动幻杀阵
buildSpeed: 0s
pos: 2
iconImage: glow_black.png
allowMultipleInQueue: false

[action_switch2]
@copyFromSection: action_switch1
isVisible: if self.hasFlag(id=3)
addResources: unsetFlag=3
id: ${section.text}2
iconImage: glow_green.png
isGuiBlinking: true

[hiddenAction_幻杀开斩]
autoTrigger: if numberOfUnitsInAggressiveTeam(withTag='幻杀阵',greaterThan=0,withinRange=400) and self.energy(full=true)
convertTo: 幻影猎手[幻]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
addEnergy: -6.6
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_maxTime: 1s
addWaypoint_target_nearestUnit_tagged: 幻杀阵
addWaypoint_target_nearestUnit_maxRange: 400
addWaypoint_target_nearestUnit_team: any


[hiddenAction_附件传送]
requireConditional: if self.hasParent(withTag='附件单位')
sendMessageTo: parent
sendMessageWithTags: 传送
sendMessageWithData: 目标=attacking

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: false
canAttackUnderwaterUnits: false
turretTurnSpeed: 99
maxAttackRange: 170
shootDelay: 19
isMelee: true
attackMovement: bomber

[turret_1]
x: 0
y: 0
invisible: true
projectile: 1
shoot_sound: NONE
shoot_sound_vol: 0
#shoot_flame: small
shoot_light: #ffffff
onShoot_triggerActions: 附件传送

[turret_2]
x: 0
y: 0
invisible: true
projectile:2
shoot_sound: lighting_burst
shoot_sound_vol: 0.3
shoot_flame:CUSTOM:残影
delay: 100
onShoot_triggerActions: 附件传送

[projectile_1]
tags= T-projectile
directDamage: 60
life:50
instant: true
teleportSource:true
explodeEffect:CUSTOM:lightningShock
explodeEffectOnShield:CUSTOM:lightningShock

[projectile_2]
tags= T-projectile
directDamage:190
armourIgnoreAmount:190
shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0.1
life:50
instant:true
teleportSource:true
explodeEffect:CUSTOM:lightningShock
explodeEffectOnShield:CUSTOM:lightningShock

[turret_magic]
x: 0
y: 0
canShoot:true
canAttackFlyingUnits: if self.globalTeamTags(includes='AI系统') or self.hasFlag(id=3)
canAttackCondition: if self.energy(full=true)
attachedTo: 2
slave: true
delay: 50
projectile: magic
limitingRange: 300
showRangeUIGuide: false
[projectile_magic]
tags= T-projectile
life: 60
instant: true
areaDamage: 0
areaRadius: 0
spawnUnit: 幻杀阵
explodeEffect: CUSTOM:shockwave
explodeEffectOnShield: CUSTOM:shockwave
[effect_shockwave]
stripIndex: shockwave
life: 70
scaleFrom: 7
scaleTo: 7
color: #000000
dirSpeed: 5
alpha: 2

[movement]
movementType: air
moveSpeed: 2.9
moveAccelerationSpeed: 0.2
moveDecelerationSpeed: 0.1

maxTurnSpeed: 5
turnAcceleration: 0.5

moveSlidingMode :true
moveIgnoringBody:true

[effect_残影]
priority:critical
attachedToUnit: false
image:幻影猎手.png
life:100
scaleFrom: 1.0
scaleTo: 1.2
alpha:0.8

[effect_残影3]
@copyFromSection: effect_残影
life: 30
scaleTo: 1.0
alpha: 1
xSpeedRelativeRandom: 5
ySpeedRelativeRandom: 5
dirOffsetRandom: 360

[effect_lightningShock]
life: 30

xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom:180

fadeInTime: 0
fadeOut: false

attachedToUnit: false

color: #FF3BFF00
image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 1

alpha:0.3

[ai]
upgradedFrom: 捕猎虫

[hiddenAction_AIretreat]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 修复点
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='touchTarget') and self.hasFlag(id=1)
[hiddenAction_AIsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.hp(lessThan=100)
addResources: setFlag=1
[hiddenAction_AIunsetFlag]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.hp(full=true)
addResources: unsetFlag=1

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 群虫成体
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasFlag(id=1) and not self.hasActiveWaypoint(type='guard') and self.globalTeamTags(includes='开端{I}') and not self.globalTeamTags(includes='战隙{I}')

[hiddenAction_AI集群进攻2]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasFlag(id=1) and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')
