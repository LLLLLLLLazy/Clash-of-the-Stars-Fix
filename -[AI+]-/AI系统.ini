
[core]
name: AI系统
tags: AI系统
maxHp: 1
price: 0
mass: 0

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
showOnMinimap: false
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true
isUnrepairableUnit:	true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

generation_delay: 60
generation_resources: 时点=1
generation_active: if self.isControlledByAI and self.timeAlive(laterThanSeconds=15)

[hiddenAction_AITimePointT1]
autoTrigger: if self.hasResources(时点=180)
addGlobalTeamTags: 开端{I}

[hiddenAction_AITimePointT2]
autoTrigger: if self.hasResources(时点=260)
addGlobalTeamTags: 战隙{I}

[hiddenAction_AITimePointT3]
autoTrigger: if self.hasResources(时点=390)
addGlobalTeamTags: 中刻{I}

[hiddenAction_AITimePointT4]
autoTrigger: if self.hasResources(时点=1200)
addGlobalTeamTags: 后界{I}

[hiddenAction_AISystem]
autoTriggerOnEvent: created
addGlobalTeamTags: AI系统

[hiddenAction_AIClose]
autoTrigger: if self.hasFlag(id=0)
removeGlobalTeamTags: AI系统, 开端{I}, 战隙{I}, 中刻{I}, 后界{I}, 家危, 开端计攻2, 攻路2确定, 攻路受阻, AI有修复点, AI有修复点T2, AI屯兵, AI爆发
resourceAmount: 时点
resourceAmount_setValue: 0
setResourcesWithLogic: 战术节拍=0
deleteSelf: true

[hiddenAction_删除系统]
autoTrigger: if numberOfUnitsInTeam(lessThan=2) and self.timeAlive(laterThanSeconds=30)
deleteSelf: true

[hiddenAction_AI{家危}]
autoTrigger: if numberOfUnitsInEnemyTeam(withinRange=1000, greaterThan=1)
addGlobalTeamTags: 家危

[hiddenAction_AI{家安}]
autoTrigger: if numberOfUnitsInEnemyTeam(withinRange=1000, lessThan=2) and self.globalTeamTags(includes='家危')
removeGlobalTeamTags: 家危

[hiddenAction_AI虫{开端计攻路}]
autoTrigger: if (numberOfUnitsInEnemyTeam(withTag='地震塔T2', greaterThan=0) or numberOfUnitsInEnemyTeam(withTag='地震T2升级中', greaterThan=0)) and self.hasResources(时点=160) and not self.globalTeamTags(includes='战隙{I}') and numberOfUnitsInTeam(withTag='寻攻路筛选', lessThan=1) and (not self.tags(includes='开端计攻路') or self.customTimer(laterThanSeconds=20))
temporarilyAddTags: 开端计攻路
spawnUnits: 寻攻路筛选
resetCustomTimer: true

[hiddenAction_AI虫{重置计攻路}]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='地震塔T2', lessThan=1) and numberOfUnitsInEnemyTeam(withTag='地震T2升级中', lessThan=1) and (self.tags(includes='开端计攻路') or self.globalTeamTags(includes='攻路受阻'))
temporarilyRemoveTags: 开端计攻路
removeGlobalTeamTags: 攻路受阻
resetCustomTimer: true

[hiddenAction_AI虫{开端计攻2}]
autoTrigger: if (numberOfUnitsInEnemyTeam(withTag='地震塔T2', greaterThan=0) or numberOfUnitsInEnemyTeam(withTag='地震T2升级中', greaterThan=0)) and not self.globalTeamTags(includes='开端计攻2') and numberOfUnitsInTeam(withTag='自爆飞虫', greaterThan=20)
addGlobalTeamTags: 开端计攻2

[hiddenAction_AI虫{开端计攻2兜底}]
autoTrigger: if (numberOfUnitsInEnemyTeam(withTag='地震塔T2', greaterThan=0) or numberOfUnitsInEnemyTeam(withTag='地震T2升级中', greaterThan=0)) and not self.globalTeamTags(includes='开端计攻2') and self.hasResources(时点=220)
addGlobalTeamTags: 开端计攻2

[hiddenAction_AI虫{受阻重试}]
autoTrigger: if self.globalTeamTags(includes='攻路受阻') and self.globalTeamTags(includes='开端计攻2') and not self.globalTeamTags(includes='攻路2确定') and numberOfUnitsInTeam(withTag='寻攻路筛选', lessThan=1) and self.customTimer(laterThanSeconds=12)
spawnUnits: 寻攻路筛选
resetCustomTimer: true

# AI节奏：屯兵->爆发（减少无效送兵，形成波次压制）
[hiddenAction_AI战术{屯兵1}]
autoTrigger: if self.globalTeamTags(includes='开端{I}') and self.resource(type='战术节拍', equalTo=0) and self.hasResources(时点=205)
addGlobalTeamTags: AI屯兵
removeGlobalTeamTags: AI爆发
addResources: 战术节拍=1

[hiddenAction_AI战术{爆发1}]
autoTrigger: if self.resource(type='战术节拍', equalTo=1) and self.hasResources(时点=245)
addGlobalTeamTags: AI爆发
removeGlobalTeamTags: AI屯兵
addResources: 战术节拍=1

[hiddenAction_AI战术{屯兵2}]
autoTrigger: if self.resource(type='战术节拍', equalTo=2) and self.hasResources(时点=300)
addGlobalTeamTags: AI屯兵
removeGlobalTeamTags: AI爆发
addResources: 战术节拍=1

[hiddenAction_AI战术{爆发2}]
autoTrigger: if self.resource(type='战术节拍', equalTo=3) and self.hasResources(时点=340)
addGlobalTeamTags: AI爆发
removeGlobalTeamTags: AI屯兵
addResources: 战术节拍=1

[hiddenAction_AI战术{屯兵3}]
autoTrigger: if self.resource(type='战术节拍', equalTo=4) and self.hasResources(时点=405)
addGlobalTeamTags: AI屯兵
removeGlobalTeamTags: AI爆发
addResources: 战术节拍=1

[hiddenAction_AI战术{爆发3}]
autoTrigger: if self.resource(type='战术节拍', equalTo=5) and self.hasResources(时点=450)
addGlobalTeamTags: AI爆发
removeGlobalTeamTags: AI屯兵
addResources: 战术节拍=1

[hiddenAction_AI战术{屯兵4}]
autoTrigger: if self.resource(type='战术节拍', equalTo=6) and self.hasResources(时点=560)
addGlobalTeamTags: AI屯兵
removeGlobalTeamTags: AI爆发
addResources: 战术节拍=1

[hiddenAction_AI战术{爆发4}]
autoTrigger: if self.resource(type='战术节拍', equalTo=7) and self.hasResources(时点=620)
addGlobalTeamTags: AI爆发
removeGlobalTeamTags: AI屯兵
addResources: 战术节拍=1

[hiddenAction_AI战术{屯兵5}]
autoTrigger: if self.resource(type='战术节拍', equalTo=8) and self.hasResources(时点=760)
addGlobalTeamTags: AI屯兵
removeGlobalTeamTags: AI爆发
addResources: 战术节拍=1

[hiddenAction_AI战术{爆发5}]
autoTrigger: if self.resource(type='战术节拍', equalTo=9) and self.hasResources(时点=830)
addGlobalTeamTags: AI爆发
removeGlobalTeamTags: AI屯兵
addResources: 战术节拍=1

[hiddenAction_AI战术{防守打断屯兵}]
autoTrigger: if self.globalTeamTags(includes='AI屯兵') and numberOfUnitsInEnemyTeam(withinRange=700, greaterThan=3)
removeGlobalTeamTags: AI屯兵
addGlobalTeamTags: AI爆发


[hiddenAction_AI有|修复点|吗]
autoTrigger: if numberOfUnitsInTeam(withTag='修复点', greaterThan=0)
addGlobalTeamTags: AI有修复点
[hiddenAction_AI没|修复点|吗]
autoTrigger: if numberOfUnitsInTeam(withTag='修复点', lessThan=1) and self.globalTeamTags(includes='AI有修复点')
removeGlobalTeamTags: AI有修复点

[hiddenAction_AI有|修复点T2|吗]
autoTrigger: if numberOfUnitsInTeam(withTag='修复点T2', greaterThan=0)
addGlobalTeamTags: AI有修复点T2
[hiddenAction_AI没|修复点T2|吗]
autoTrigger: if numberOfUnitsInTeam(withTag='修复点T2', lessThan=1) and self.globalTeamTags(includes='AI有修复点T2')
removeGlobalTeamTags: AI有修复点T2


[global_resource_时点]
hidden: false
displayName: 时点{I}
displayColor: #ffffff
priority: 0.5

[resource_战术节拍]
hidden: true
displayName: 战术节拍

[graphics]
isVisible: false
image: SHARED:blank.png
disableLowHpSmoke: true
disableLowHpFire: true
icon_zoomed_out_neverShow: true
showHealthBar: false

[attack]
canAttack: false

[movement]
movementType: AIR
targetHeight: 0
targetHeightDrift: 0
