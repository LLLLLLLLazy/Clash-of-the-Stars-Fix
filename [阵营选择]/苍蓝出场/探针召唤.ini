
[core]
name: 探针召唤
displayText: 苍蓝出场
price: 0
maxHp:1
mass: 0
isBuilding: true
isBuilder: true
tags: 苍蓝出场
#placeOnlyOnResPool: true
#isPickableStartingUnit: true

energyMax: 500
energyRegen: 0

@memory 光弦角度:float
updateUnitMemory: 光弦角度=memory.光弦角度+0.8
updateUnitMemoryRate: 0.01

autoTriggerCooldownTime: 0.02s
autoTriggerCooldownTime_allowDangerousHighCPU:true

#隐藏单位本身
#showInEditor: false
radius: 0
fogOfWarSightRange: 0
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable: true
canNotBeDamaged: true
canOnlyBeAttackedByUnitsWithTags: 不可被攻击

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

[action_1]
autoTrigger: if not self.tags(includes='初始创建')
temporarilyAddTags: 初始创建
resourceAmount: energy
resourceAmount_setValue: 5
addResources: T=1
setUnitMemory: 光弦角度=rnd(0, 360)
spawnEffects: 魔力光

[action_2]
autoTrigger: if self.timeAlive(laterThanSeconds=4) and self.lastConverted(laterThanSeconds=4)
fireTurretXAtGround_withProjectile: 2
fireTurretXAtGround_withOffset: 0,1000
fireTurretXAtGround: 1
spawnEffects: custom:curewave, CUSTOM:苍临, 苍蓝星阵, 苍蓝星阵开
alsoTriggerAction:2附,3,s
playSoundToPlayer: plasma_fire

[action_2附]
fireTurretXAtGround_withProjectile: 2附
fireTurretXAtGround_withOffset: 0,1000
fireTurretXAtGround: 1

[action_3]
fireTurretXAtGround_withProjectile: 3
fireTurretXAtGround_withOffset: 0,1000
fireTurretXAtGround: 1

[action_s]
#fireTurretXAtGround_withProjectile: s
#fireTurretXAtGround_withOffset: 0,0
#fireTurretXAtGround: 1
convertTo: 贝露前哨探针
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
alsoTriggerAction: 能源站生成

[hiddenAction_能源站生成]
sendMessageTo: nearestUnit(withinRange=360, withTag='可生成能源站', relation='any')
sendMessageWithTags: 生成能源站
sendMessageWithData: 能源站归属=self.teamId

[action_d]
#autoTrigger: if numberOfUnitsInTeam(withTag='贝露之眼',greaterThan=0)
deleteSelf:true


[hiddenAction_光弦]
autoTrigger: if self.timeAlive(withinSeconds=3.83) or self.lastConverted(withinSeconds=3.83)
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 光弦
fireTurretXAtGround_withTarget: getOffsetRelative(x=sin( (self.timeAlive+0.62 % 1) * 360) * 75, y=cos( (self.timeAlive+0.62 % 1) * 360) * 200, dirOffset=memory.光弦角度)

[hiddenAction_光弦圆]
autoTrigger: if self.timeAlive(withinSeconds=0.93) or self.lastConverted(withinSeconds=0.93)
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 光弦2
fireTurretXAtGround_withTarget: getOffsetRelative(x=sin( (self.timeAlive % 1) * 360) * 135, y=cos( (self.timeAlive % 1) * 360) * 135, dirOffset=memory.光弦角度)


[projectile_光弦]
directDamage: 0
life: 10
instant: true
invisible: true
deflectionPower: -1
explodeEffect: NONE
spawnUnit: 附属光点(addResources=setFlag:2)

[projectile_光弦2]
@copyFromSection: projectile_光弦
spawnUnit: 附属光点(addResources=setFlag:2|ammo=1)

[effect_光弦]
image: SHARED:light_50.png
life: 240
fadeOut: true
attachedToUnit: false
color: #18FFFF

scaleFrom: 0.5
scaleTo: 0.5
alpha: 25
drawUnderUnits: true
alwayStartDirAtZero:true
createWhenOffscreen: true

[effect_光弦2]
@copyFromSection: effect_光弦
life: 420


[effect_curewave]
image: hit.png
life: 30
scaleFrom: 0
scaleTo: 20
alpha: 1.0
color: #33E8E8
priority: veryhigh
alsoPlaySound: laser_deflect:2

[resource_T]
displayName: T


[graphics]
isVisible: false
image:     贝露前哨探针.png
image_wreak: NONE
image_turret: NONE

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

disableLowHpSmoke: true
disableLowHpFire: true
icon_zoomed_out_neverShow: true
showHealthBar: false
showEnergyBar: false

[arm_1]
x: 0
y: 0
spinRate: 0.2

[decal_法阵]
layer: afterBody
order: 0.3
image: 法阵.png
imageScale: 0.31
alpha: 0.8 + ${timerCos_5s}
@define timerCos_5s: cos( ((self.timeAlive % 5) / 5) * 360) * 0.3
basePositionFromLegEnd: arm_1

[decal_水晶烁光]
layer: afterBody
order: 0.6
image: 蓝烁星光.png
imageScale: 0.6
alpha: 0.2 + ${timerCos_8s}
@define timerCos_8s: cos( ((self.timeAlive % 8) / 8) * 360) * 0.05
basePositionFromLegEnd: arm_1

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 20

maxAttackRange: 0
shootDelay: 0

[turret_1]
x: 0
y: 0
canShoot: false
shoot_flame:shockwave
shoot_light:#FFccCCEE

[turret_magic]
x: 0
y: 0
canShoot: false

[projectile_2]
directDamage: 220
laserEffect: true
instant: true
life: 20
speed: 10
lightColor: #ffffff
lightSize: 0.3
trailEffect:true
trailEffectRate:2
color: #42f2f5
[projectile_2附]
directDamage: 0
instant: true
lightingEffect: true
life: 20
speed: 10
lightColor: #ffffff
lightSize: 0.3
trailEffect:true
trailEffectRate:2
[projectile_3]
armourIgnoreAmount:9999
areaDamage: 3000
areaRadius: 0
life: 10
instant: true
lightingEffect: true
[projectile_s]
directDamage: 0
spawnUnit:贝露前哨探针
explodeOnEndOfLife: true
life: 0

[effect_魔力光]
createWhenOffscreen: true
priority: veryhigh
stripIndex: light_50
life: 240
fadeInTime: 240
scaleFrom: 8
scaleTo: 8
alpha: 0.25
color: #33E8E8
dirSpeed: 3
alsoEmitEffectsOnDeath: 魔力光消

[effect_魔力光消]
priority: veryhigh
stripIndex: light_50
life: 150
scaleFrom: 8
scaleTo: 8.1
alpha: 0.3
color: #33E8E8

[effect_苍蓝星阵]
priority: critical
image: 五芒星泡.png
life: 40
fadeInTime: 10
scaleFrom: 3
scaleTo: 3
alpha: 0.8
color: #18FFFF
drawUnderUnits: true

[effect_苍蓝星阵开]
priority: critical
image: 五芒星泡.png
life: 20
scaleFrom: 3
scaleTo: 3.5
alpha: 0.5
color: #18FFFF

[effect_苍临]
priority: critical
image: 白色光圈.png
life: 50
alpha: 0.8
scaleFrom: 0
scaleTo: 10
dirSpeed: 15
drawUnderUnits: true
color: #18FFFF

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0

targetHeight: 3
targetHeightDrift: 1
