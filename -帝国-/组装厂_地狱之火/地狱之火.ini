
[core]
name: 地狱之火
tags: units, 重型机甲
maxHp: 3000
maxShield: 1000
shieldRegen: -1
startShieldAtZero: true
mass: 30000
price: 12000

armour: 5
armourMinDamageToKeep: 5

radius: 30
shieldRenderRadius: 25
selfRegenRate: 0.2
techLevel: 2
buildSpeed: 35s
transportSlotsNeeded: 2
displayDescription: -不稳定火焰\n-穿透护甲\n-也许会误伤到己方单位\n-射程较短\n-狱火护体
energyMax: 6
energyRegen: 0.06
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 0.1s

[action_again]
isActive: false
isVisible: if self.customTimer>5
isGuiBlinking: if self.customTimer>5
autoTrigger: if self.customTimer>5
text: 重燃
description: -脱离战斗五秒后快速回复血量
pos: 2
displayType: infoOnlyStockpile
buildSpeed: 0s
addResources: hp=2
iconImage: 燃能icon.png

[hiddenAction_战斗状态]
autoTrigger: if self.isAttacking
resetCustomTimer: true

[action_狱火护体]
isActive: false
autoTrigger: if not self.Shield(lessThan=100)
isGuiBlinking: if not self.Shield(lessThan=100)
text: 狱火护体
description: -血量不足95%时开启狱火护盾 \n -护盾持续期间回血速度提升 \n -血量完全回复后狱火可再次触发 \n -血量不足80%或有护盾时血量受损会获得等量护盾
pos: 1
displayType: infoOnly
buildSpeed: 0s
addResources: hp=2
iconImage: 地狱之火[红侧].png
spawnEffects: CUSTOM:影


[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_血盾狱火转化]
autoTriggerOnEvent: tookDamage
requireConditional: if self.resource.受击前血量>self.hp and (self.hp<self.maxHp*0.8 or self.shield>=100)
setResourcesWithLogic: shield=self.shield+(self.resource.受击前血量-self.hp), 受击前血量=self.hp

[hiddenAction_受伤记录]
autoTriggerOnEvent: tookDamage
setResourcesWithLogic: 受击前血量=self.hp

[resource_受击前血量]
hidden: true

[resource_受击前护盾]
hidden: true


[hiddenAction_shield]
autoTrigger: if self.hp<self.maxHp*0.95 and not self.hasFlag(id=1)
addResources: setFlag=1, shield=1000
setResourcesWithLogic: 受击前血量=self.hp
spawnEffects: CUSTOM:烈焰之形

[hiddenAction_shieldRecover]
autoTrigger: if self.hp(full=true) and self.hasFlag(id=1)
addResources: unsetFlag=1





[effect_烈焰之形]
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
scaleFrom: 2.5
scaleTo: 1.0
alpha: 0.9
drawUnderUnits: false
alsoPlaySound: fire_shoot.wav: 1.0

[effect_影]
priority: low
image: SHARED:light_50.png
life: 50
fadeOut: true
fadeInTime: 3
attachedToUnit: false
color: #ff0000
alpha: 0.3
scaleFrom: 0.8
scaleTo: 0.3
drawUnderUnits: false
xOffsetRelativeRandom: 15
yOffsetRelativeRandom: 8
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[graphics]
image: 地狱之火.png
image_wreak: 龙骑士残骸.png
image_shield: 地狱之火[红].png
#scaleImagesTo: 50
lock_body_rotation_with_main_turret: true
image_shadow: AUTO
shadowOffsetX: 2
shadowOffsetY: 2

[attack]
canAttack: true
canAttackLandUnits: true
canAttackFlyingUnits: false
canAttackUnderwaterUnits: false
maxAttackRange: 150
aimOffsetSpread: 0.1

[turret_1]
turnSpeed: 2
x: 0
y: 0
canShoot: false
invisible: true
delay: 0.02s
projectile: 3
recoilOffset: -1
recoilOutTime: 2
recoilReturnTime: 0.

[turret_2]
turnSpeed: 2
x: -21
y: 31
invisible: true
delay: 0.01s
projectile: 3

barrelX: -1.5
barrelOffsetX_onOddShots: 3

recoilOffset: -1
recoilOutTime: 2
recoilReturnTime: 3

attachedTo: 1

energyUsage: 0.1

shoot_flame: CUSTOM:lightSlowFade
#shoot_flame: CUSTOM:fire
shoot_light: #AAff9224

resourceUsage: hp=-1

[turret_3]
x: 21
y: 31
copyFrom: 2

[projectile_3]
tags= T-projectile
areaDamage: 25
areaRadius: 25
life: 50
armourIgnoreAmount: 33
targetGround: true
targetGroundSpread: 25
largeHitEffect: true
trailEffect: true
speed: 3
frame: 3
drawSize: 0.9
friendlyFire: true
explodeOnEndOfLife: true
spawnProjectilesOnExplode: fl
deflectionPower: -1

[projectile_fl]
tags= T-projectile
areaDamage: 3
flameWeapon: true
areaRadius: 44
life: 0
frame: 5
explodeOnEndOfLife: true
friendlyFire: true
armourIgnoreAmount: 20

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.8
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17
maxTurnSpeed: 1.5
turnAcceleration: 0.3
moveSlidingMode: false
moveIgnoringBody: true
reverseSpeedPercentage: 1

[leg_1]
x: 15
y: 0
moveSpeed: 2.2
moveWarmUp: 15
attach_x: 10
attach_y: 0
rotateSpeed: 30
heightSpeed: 1
resetAngle: 0.00000001
image_foot: 脚耶.png
image_leg: 大腿.png
dust_effect: true
holdDisMin: 9
holdDisMax: 14
estimatingPositionMultiplier: 1

[leg_2]
x: -15
y: 0
attach_x: -10
attach_y: 0
copyFrom: 1

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: true
color: #ff9224
scaleFrom: 0.25
scaleTo: 0.25
alpha: 0.6

[effect_fire]
priority: high
image: fire.png
atmospheric: true
life: 150
#xSpeedRelative: 0
ySpeedRelative: 6
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.5
scaleFrom: 2.0
scaleTo: 2.0
total_frames: 4
animateFrameStart: 0
animateFrameEnd: 3
animateFramePingPong: true
animateFrameSpeed: 0.1
animateFrameSpeedRandom: 0.02
