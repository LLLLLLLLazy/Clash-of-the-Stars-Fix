
[core]
name: 贝露陆海工厂
price: 3000
maxHp: 1800
mass: 9000
tags: units
displayDescription:-构建贝露陆军与海军\n-在水中构建海军，在陆地构建陆军

#footprint used for collisions with units (left, up, right, down)
footprint: -1,0,1,0

#used for placement, and placement of other buildings
constructionFootprint: -2,-1,2,1

displayFootprint: -1,-1,1,0

buildingToFootprintOffsetY: -2

techLevel: 1
buildSpeed: 0.0004
#availableInDemo: true

radius: 30
#displayRadius: 25
isBio: false
isBuilding: true

explodeTypeOnDeath: building

exit_x: 0
exit_y: 15
exit_moveAwayAmount: 50


canBuild_1_name: setRally
canBuild_1_pos:  0.1

autoTriggerCooldownTime: 1
autoTriggerCooldownTime_allowDangerousHighCPU:true

[canBuild_T1隐式]
name: 隐式侦察机
pos:  1

[canBuild_T1小机器人]
name: 小机器人
pos:  1
isVisible: if not getOffsetAbsolute(y=15).isOverwater()

[canBuild_T1]
name: 自然和弦, 磐岩坦克, 守星铳, 含光, 涡流, 赤血战蝎, 梦雨总控车DX, 弩车, 脉冲机甲[对地], 幻影两栖舰[陆], 反击坦克, 四面神
pos:  1
isVisible: if not getOffsetAbsolute(y=15).isOverwater()

[canBuild_T1水]
name: 冲锋快艇, 黑箭潜艇, 幻影两栖舰[海], 乌贼治愈者, 三叶螺
pos:  1
isVisible: if getOffsetAbsolute(y=15).isOverwater()

[canBuild_T1两栖]
name: 蒸腾气垫坦克
pos:  1

[canBuild_帝步虫]
name: 帝步虫
pos:  1.5
isVisible: if not getOffsetAbsolute(y=15).isOverwater and self.globalTeamTags(includes='基因工程') and self.globalTeamTags(includes='腐蚀之物')
addResources: setFlag=5

[hiddenAction_帝步虫出场]
autoTrigger: if self.hasFlag(id=5)
spawnEffects: CUSTOM:curewave虫, CUSTOM:curewave帝
addResources: unsetFlag=5

[effect_curewave虫]
@copyFromSection: effect_curewave
color: #ff3bff00
alpha: 0.7
dirSpeed: 3
delayedStartTimer: 4
[effect_curewave帝]
@copyFromSection: effect_curewave
color: #000000
alpha: 0.7
dirSpeed: -3
delayedStartTimer: 4

[action_upgrade]
convertTo: 贝露陆海工厂T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  10000
text: 升级 - T2
description: -制造更多单位\n -首次被摧毁会在一段时间后重构 \n -生产速度+50%
descriptionAddUnitStats: ${section.convertTo}

displayType: upgrade
buildSpeed: 0.0004
pos: 0.2

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF


[hiddenAction_b]
autoTriggerOnEvent: queuedUnitFinished
spawnEffects: CUSTOM:curewave, CUSTOM:displacement_ripples, 传送漩涡, 传送漩涡心

[hiddenAction_传送门开启]
autoTrigger: if self.queueSize > 0 and not self.hasFlag(id=2)
addResources: setFlag=2
spawnEffects: CUSTOM:蓝光, CUSTOM:蓝烁光, CUSTOM:门扩光, CUSTOM:门扩光2, CUSTOM:门扩波, CUSTOM:蓝扩波, CUSTOM:传送门展开, CUSTOM:扭曲波

[hiddenAction_传送门关闭]
autoTrigger: if self.queueSize <= 0 and self.hasFlag(id=2)
addResources: unsetFlag=2
setResourcesWithLogic: 传送门启动=0
spawnEffects: CUSTOM:门收光, CUSTOM:门收光2, CUSTOM:门收波, CUSTOM:蓝收波, CUSTOM:扭曲回波

[hiddenAction_传送门特效]
autoTrigger: if self.hasFlag(id=2)
spawnEffects: 传送门涡流

[hiddenAction_传送门启动计时]
autoTrigger: if self.hasFlag(id=2) and self.resource.传送门启动 < 35
addResources: 传送门启动=1

[resource_传送门启动]
displayName: 传送门启动

[effect_蓝光]
stripIndex: light_50
life: 60
scaleFrom: 0.7
scaleTo: 0.6
alpha: 2
color: #33E8E8
yOffsetAbsolute: -3
dirOffsetRandom: 180

[effect_蓝烁光]
@copyFromSection: effect_蓝光
life: 30
scaleFrom: 0.8
scaleTo: 0.8
alpha: 1.7
delayedStartTimer: 60

[effect_门扩光]
@copyFromSection: effect_蓝光
scaleFrom: 0
scaleTo: 1.5

[effect_门扩光2]
@copyFromSection: effect_蓝光
scaleFrom: 0
scaleTo: 0.66

[effect_门扩波]
@copyFromSection: effect_门扩光
stripIndex: shockwave
scaleFrom: 0
scaleTo: 0.65

[effect_蓝扩波]
@copyFromSection: effect_门扩波
scaleTo: 1
alpha: 1.4

[effect_传送门展开]
image: 苍蓝传送门.png
life: 60
fadeInTime: 60
scaleFrom: 0
scaleTo: 1
alpha: 0.6
dirSpeed: 1
yOffsetAbsolute: -3

[effect_传送门涡流]
priority: verylow
image: 涡流光球.png
life: 40
fadeInTime: 3
scaleFrom: 1.6
scaleTo: 0
alpha: 0.2
color: #33E8E8
dirSpeed: 1.5
dirOffset: -10
yOffsetAbsolute: -3

[template_传送收回]
fadeInTime: 5
scaleTo: 0
life: 45
alpha: 0.8

[effect_门收光]
@copyFromSection: effect_门扩光, template_传送收回
scaleFrom: 1.2

[effect_门收光2]
@copyFromSection: effect_门扩光2, template_传送收回
scaleFrom: 0.66
alpha: 0.5

[effect_门收波]
@copyFromSection: effect_门扩波, template_传送收回
scaleFrom: 0.65

[effect_蓝收波]
@copyFromSection: effect_蓝扩波, template_传送收回
scaleFrom: 1
alpha: 0.3

[effect_displacement_ripples]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 60
fadeOut: true
fadeInTime: 2
scaleFrom: 1
scaleTo: 0
alpha: 0.3
drawUnderUnits: false
yOffsetAbsolute: -3

dirOffsetRandom: 180
dirSpeedRandom: 1

[effect_扭曲波]
@copyFromSection: effect_displacement_ripples
scaleFrom: 0
scaleTo: 0.4

[effect_扭曲回波]
@copyFromSection: effect_displacement_ripples
scaleFrom: 0.4
scaleTo: 0
life: 45


[effect_curewave]
priority: veryhigh
image: 白流环.png
life: 50
scaleFrom: 0.6
scaleTo: 0
alpha: 0.9
color: #33E8E8
dirSpeed: 10
alsoPlaySound: ROOT:/素材/电磁.ogg

[effect_传送漩涡]
priority: veryhigh
image: 魔力凝聚.png
life: 50
fadeInTime: 10
color: #63e6e8
scaleFrom: 0.6
scaleTo: 0
alpha: 0.6
dirSpeed: 10

[effect_传送漩涡心]
@copyFromSection: effect_传送漩涡
fadeInTime: 0
scaleFrom: 0.3
scaleTo: 0.3
alpha: 0.8

[graphics]
total_frames: 1

image:        苍蓝陆海工厂上.png
image_back:   NONE
image_wreak:  NONE

#AUTO
image_shadow: NONE
shadowOffsetX: 1
shadowOffsetY: 1

[decal_苍蓝工厂预览]
onlyInPreview: true
order: 0.2
layer: afterBody
image: 苍蓝陆海工厂.png

[decal_苍蓝底盘预览]
onlyInPreview: true
order: 0.2
layer: shadow
image: 苍蓝底盘.png


[decal_苍蓝柱]
isVisible: if not getOffsetAbsolute(y=20).isOverwater
order: 0.1
layer: beforeBody
image: 苍蓝陆海工厂下.png

[decal_苍蓝底盘]
isVisible: if not getOffsetAbsolute(y=20).isOverwater
order: 0
layer: shadow
image: 苍蓝底盘.png

[decal_水下苍蓝柱]
isVisible: if getOffsetAbsolute(y=20).isOverwater
order: 0.1
layer: shadow
image: 苍蓝陆海工厂下.png
alpha: 0.5

[decal_水下苍蓝底盘]
isVisible: if getOffsetAbsolute(y=20).isOverwater
order: 0
layer: shadow
image: 苍蓝底盘.png
alpha: 0.5


[arm_3]
x: 0
y: 3
spinRate: 1
image_end: 苍蓝传送门.png
hidden: if self.resource.传送门启动 < 35

[animation_符文闪烁]
onActions: idle
effect_0s: {name:NONE}
effect_0.15s: {name:CUSTOM|符文1}
effect_0.3s: {name:CUSTOM|符文2}
effect_0.45s: {name:CUSTOM|符文3}
effect_0.6s: {name:CUSTOM|符文4}
effect_1.5s: {name:NONE}

[effect_符文1]
image: 符文1.png
life: 12
alpha: 0.9
fadeOut: false
color: #D1FFFC
priority: verylow

[effect_符文2]
@copyFromSection: effect_符文1
image: 符文2.png

[effect_符文3]
@copyFromSection: effect_符文1
image: 符文3.png

[effect_符文4]
@copyFromSection: effect_符文1
image: 符文4.png

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0


[movement]
movementType: HOVER
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1



[ai]

buildPriority: 0.8

noneInBaseExtraPriority: 0.05

noneGlobalExtraPriority: 0.15

ai_upgradePriority:0.36

maxEachBase:1




