
[core]
name: A_mammothTank
#overrideAndReplace: c_mammothTank
displayLocaleKey: c_mammothTank
displayText: 初式-猛犸坦克
displayDescription: -重型装甲 \n -能电击地面与空中单位 \n -对接地的建筑物伤害较低 \n -在蓄能完成后自动消耗能量以增加攻击速度 \n -自我修复 \n -对虫族建筑造成全额伤害

class: CustomUnitMetadata
price: 14200
maxHp: 8000
armour: 30
mass: 14000
tags: units, 坦克

experimental: true

techLevel: 2
buildSpeed: 0.00019
#availableInDemo: true

radius: 22
displayRadius: 20

isBio: false
softCollisionOnAll: 0

selfRegenRate: 0.1

shieldDisplayOnlyDeflection: true
shieldDeflectionDisplayRate: 50

builtFrom_1_name: A_landFactory
builtFrom_1_pos:  8

energyMax: 5
energyRegen: 0.0045

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

[hiddenAction_满能]
convertTo: mammothTank2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
autoTrigger: if self.energy(full=true) 

[action_armor]
text: 完美装甲
description: -装甲覆盖
pos: 1
price: 0
buildSpeed: 12.5s
displayType: infoOnly
requireConditional: if self.hp(full=true)
isLocked: if not self.hp(full=true)
isLockedMessage: 主体受损……
isLockedAlt: if not self.energy(full=true) and self.resource(type="armor", lessThan=1)
isLockedAltMessage: 蓄能完成后可覆盖完美装甲
whenBuilding_cannotMove: true
iconExtraImage: shockwave_large.png
addResources: armor=300
convertTo: mammothTank[完美装甲]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
spawnEffects: CUSTOM:armorwave
resourceAmount: shield
resourceAmount_setValue: 1

[graphics]
total_frames: 3

image:        mammoth_tank.png
image_wreak:  mammoth_tank_dead.png
image_turret: mammoth_tank_turret.png
image_shield: shockwave_large.png

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2


animation_moving_start: 0
animation_moving_end: 2
animation_moving_speed: 2.85


dustEffect: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 210

shootDelay:140

aimOffsetSpread: 0.1

[turret_1]
#coil
x: 0
y: 0
attachedTo: 2
slave: true

projectile: 1

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:lighting.wav
shoot_sound_vol:0.5
shoot_flame:CUSTOM:sparks2*5, CUSTOM:hitLightFlash2
shoot_light:#FFcceeee

canShoot: true

warmup:30

image: mammoth_tank_coil.png

chargeEffectImage: SHARED:lighting_charge.png

recoilOffset: -1.5
recoilOutTime: 3
recoilReturnTime: 17


[turret_2]
#turret
x: 0
y: 0

canShoot: false

turnSpeed: 2.5
turnSpeedAcceleration: 0.18
turnSpeedDeceleration: 0.35

recoilOffset: -0.75
recoilOutTime: 3
recoilReturnTime: 17

[turret_3]
#显示额外伤害数据
x: 0
y: 0
invisible: true
canAttackCondition:	false

projectile: 1

[projectile_1]
tags= T-projectile
directDamage: 150
areaDamage: 150
areaRadius:	25
areaRadiusFromEdge: true

life: 25
instant: true
lightingEffect: true
largeHitEffect: true


shieldDamageMultiplier: 2
shieldDefectionMultiplier: -0.1

buildingDamageMultiplier: 0.1

mutatorX_ifUnitWithTags: 虫建筑
mutatorX_directDamageMultiplier: 10
mutatorX_areaDamageMultiplier: 10

spawnProjectilesOnCreate: 1(recursionLimit=1)

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*12, CUSTOM:hitLightFlash2*2, CUSTOM:shockwave, CUSTOM:displacement

explodeEffectOnShield:CUSTOM:lightningShock, CUSTOM:hitLightFlash, CUSTOM:hitLightFlash2*2, CUSTOM:shockwave, CUSTOM:displacement

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_hitLightFlash2]
priority:high

image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.0
scaleTo: 0.5
alpha: 1.0
drawUnderUnits:false


[effect_lightningShock]
life: 60


hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

scaleFrom: 1.2
scaleTo: 1.4

attachedToUnit: true


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5



[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.8
ySpeedRelativeRandom: 1.8
hSpeed: 3
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 120
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow

[effect_shockwave]
stripIndex: shockwave
life: 30

hOffset: -1
dirOffset: 0

fadeOut: true

scaleFrom: 0
scaleTo: 1.5

alpha: 0.8
color: #63e6e8

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 20
fadeOut: true
fadeInTime: 5

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 1.0
alpha: 0.2
drawUnderUnits:false


[effect_armorwave]
image: wave3.png
life: 30
scaleFrom: 0.4
scaleTo: 0.39
alpha: 1.0
dirSpeed: 2
alsoPlaySound: laser_deflect

[movement]
movementType: LAND
moveSpeed: 0.5
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.06

reverseSpeedPercentage:1.0

maxTurnSpeed: 1.4
turnAcceleration: 0.15

moveSlidingMode :false
moveIgnoringBody:false


[resource_armor]
displayName: 重型装甲

