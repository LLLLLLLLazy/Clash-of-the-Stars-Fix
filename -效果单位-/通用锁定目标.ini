[core]
name: 锁定目标
maxHp: 1
price: 0
mass: 0
tags: 通用锁定目标

isBuilding: true
footprint: 1,1,-1,-1
constructionFootprint: 1,1,-1,-1

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
showOnMinimap: false
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable: true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

@memory 锁定目标:unit

[hiddenAction_锁定目标]
setUnitMemory: 锁定目标=attacking
teleportTo: memory.锁定目标
alsoTriggerAction: 单一存在, 标记完成

[hiddenAction_单一存在]
requireConditional: if nearestUnit(withTag='通用锁定目标').readUnitMemory("锁定目标", type='unit') == memory.锁定目标
deleteSelf: true

[hiddenAction_标记完成]
requireConditional: if nearestUnit(withTag='通用锁定目标').readUnitMemory("锁定目标", type='unit') != memory.锁定目标
addResources: setFlag=1

[hiddenAction_传送目标]
autoTrigger: if distanceBetween(memory.锁定目标, self)>1
teleportTo: memory.锁定目标
setHeight: memory.锁定目标.height

[hiddenAction_消失]
autoTrigger: if (memory.锁定目标.hp<=0 or memory.锁定目标==null) and self.hasFlag(id=1) or self.timeAlive>0.1 and not self.hasFlag(id=1)
deleteSelf: true

#--------------------------------

[hiddenAction_锁咒荆棘]
autoTriggerOnEvent: created
requireConditional: if self.hasFlag(id=2)
addResources: setFlag=1
setUnitMemory: 锁定目标=customTarget1.readUnitMemory("锁咒锁定", type='unit')
setUnitStats: maxAttackRange=360
switchToAggressiveTeam: true
addWaypoint_type: attack
addWaypoint_target_fromReference: customTarget1

[hiddenAction_锁咒断开]
autoTrigger: if self.hasFlag(id=2) and customTarget1.readUnitMemory("锁咒锁定", type='unit')==null
deleteSelf: true

#--------------------------------

[graphics]
image: SHARED:blank.png
icon_zoomed_out_neverShow: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: true
turretTurnSpeed: 1000
turretSize: 0

maxAttackRange: 10
shootDelay: 2
isMelee: true

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
projectile: 1
canAttackCondition: if not self.hasFlag(id=1)
onShoot_triggerActions: 锁定目标

[projectile_1]
directDamage: 0
invisible: true
life: 0
speed: 0
explodeEffect: NONE

#--------------------------------

[turret_锁咒链]
x: 0
y: 0
delay: 0.2s
projectile: 锁咒链
canAttackCondition: if self.hasFlag(id=2) and attacking==customTarget1

[projectile_锁咒链]
life: 14

instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      beamRecharge.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 0.5

explodeEffect: NONE
explodeEffectOnShield: NONE

directDamage: -1
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_directDamageMultiplier: 0.00001

color: #CC63e6e8

#--------------------------------

[movement]
movementType: NONE
fallingAcceleration: 0
heightChangeRate: 0
