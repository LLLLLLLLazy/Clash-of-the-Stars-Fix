
[core]
name: 凤鸽组合攻击机
displayText: 组合攻击机
displayDescription: [魔焰震电]\n -带有防护盾\n -四挺对地穿甲机枪\n -装备火焰礼花\n -发射雷火毁灭地面目标\n -可配载两个单位\n -自我修复\n -稍远视野\n -高速\n “王之巡礼”

class: CustomUnitMetadata
price: 11000, 苍蓝能量=1
maxHp: 1700
mass: 14000
tags: units, PhoenixPigeon, 转向攻击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: PhoenixPigeon

autoTriggerCooldownTime: 0.1s

selfRegenRate: 0.08

maxShield: 200
shieldRegen: 0.3

energyMax: 30
energyRegen: 0.05

fogOfWarSightRange: 17

techLevel: 3
buildSpeed: 100s

radius: 20
softCollisionOnAll: 16

isBio: false

transportSlotsNeeded: 2
maxTransportingUnits: 2

unitsSpawnedOnDeath: 凤凰攻击机(addResources=setFlag:1)

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径

[decal_运输范围]
@copyFromSection: template_运输范围

[action_转换]
isVisible: false
convertTo: 凤鸽组合攻击机2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
autoTrigger: if self.energy(lessThan=1)
addResources: energy=30, shield=200

[action_selfRegenRate]
isActive: false
isGuiBlinking: if self.hp<self.maxHp*0.5
autoTrigger: if self.hp<self.maxHp*0.5
addResources: hp=2
id: ${section.text}
text: 向死而生
description: -当血量低于50%时提升回血能力\n -死亡后转化为凤凰攻击机涅槃重生
displayType: infoOnly
buildSpeed: 0
pos: 0.1

[graphics]
total_frames: 1

image:        凤鸽组合攻击机.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

lock_body_rotation_with_main_turret: true

movementEffect: CUSTOM:凤舞
movementEffectRate: 1

[effect_凤舞]
createWhenZoomedOut: false
priority:low
image: 凤舞.png
life: 30
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1
scaleTo: 1
alpha: 0.3
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[attack]
turretRotateWithBody: true

canAttack: true
canAttackFlyingUnits: if self.flying
canAttackLandUnits:   if self.flying
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 4
maxAttackRange: 200
shootDelay: 240

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_2.warmupShootDelayTransfer} / ${turret_2.delay})

[turret_1]
invisible: true
canShoot: false
x: 0
y: 0

[turret_2]
canShoot: true
x: 0
y: 0
barrelY: 8
barrelX: -12
attachedTo: 1

shoot_sound:firing4
shoot_sound_vol:0.2

canAttackFlyingUnits: false
canAttackLandUnits:   true

delay: 30

warmup: 3s
warmupCallDownRate: 2
warmupNoReset: true
warmupShootDelayTransfer: 22

energyUsage: 0.5

projectile:1

[turret_3]
x: 0
y: 0
barrelY: 8
barrelX: 12
copyFrom: 2

projectile:1

[turret_4]
x: 0
y: 0
barrelY: 8
barrelX: -16
copyFrom: 2

projectile:1

[turret_5]
x: 0
y: 0
barrelY: 8
barrelX: 16
copyFrom: 2

projectile:1

[turret_6]
canShoot: true
x: 0
y: 0
barrelY: 8
barrelX: -14
attachedTo: 1

shoot_sound:missile_fire
shoot_sound_vol:0.4

limitingRange: 200

projectile:2

[turret_7]
x: 0
y: 0
barrelY: 8
barrelX: 14
copyFrom: 6

projectile:2

[projectile_1]
tags= T-projectile
directDamage:10
armourIgnoreAmount:10
life: 120
speed: 5
frame: 5
flameWeapon: true

[projectile_2]
tags= T-projectile
areaDamage: 45
areaRadius: 70
areaRadiusFromEdge: true
ballistic: true
ballistic_delaymove_height:0
ballistic_height: 3
wobbleAmplitude: 1.0
wobbleFrequency: 0.5s
life: 600
speed: 2
targetSpeed: 15
targetSpeedAcceleration: 0.02
trailEffect: true
trailEffectRate: 5
largeHitEffect: true

image: 礼花.png

autoTargetingOnDeadTarget: true
autoTargetingOnDeadTargetRange: 200

explodeOnEndOfLife: true

#unloadUpToXUnitsFromSource: 2
spawnUnit:礼花

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false


[effect_lightningShock]
life: 60


hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

attachedToUnit: true


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5



[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow


[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: AIR
moveSpeed: 1.9
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.05
slowDeathFall: true
landOnGround: onlyIdle
targetHeight: 25

maxTurnSpeed: 2.1
turnAcceleration: 0.2

moveSlidingMode :true
moveIgnoringBody:true

[ai]
useAsTransport: false


