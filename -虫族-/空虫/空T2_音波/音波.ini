
[core]
name:音波
price:1000
maxHp:220
mass:3000

radius:14
isBug:true
isBio:true

softCollisionOnAll: 12

tags: units, 虫族, 中型虫, 转向攻击

techLevel:2
buildSpeed:11.1s

selfRegenRate:0.1

energyMax: 15
energyRegen: 0.05
energyNeedsToRechargeToFull: true
energyRegenWhenRecharging: 0.15

displayDescription:-攻击地面单位\n-输出强力\n阴 波

[action_Upgrade]
convertTo: 音波回响
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:腐蚀=500
text:腐蚀 - 回响
displayType:upgrade
buildSpeed:23.8s
pos:1
description:-回阴\n-翼响
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
tags=腐蚀
setUnitMemory: 属性[24]=0
isLocked: if self.globalTeamTags(includes='AI系统') and ${HalfCorrosion} ${HalfCorrosionLimit}
isLockedMessage: AI:停用低级腐蚀

[hiddenAction_腐蚀中]
autoTrigger: if self.queueSize(withActionTag="腐蚀")>0 and not self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=-${movement.moveSpeed}*0.6
alsoTriggerAction: 属性变化
temporarilyAddTags: 腐蚀中

[hiddenAction_腐蚀停止]
autoTrigger: if self.queueSize(withActionTag="腐蚀")<1 and self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 腐蚀中

[hiddenAction_自动腐蚀]
autoTrigger: if (self.hasUnitInTeam(withTag="腐蚀-音波回响") and self.hasUnitInTeam(withTag="腐蚀之意")) and self.hasResources(${action_Upgrade.price}) and self.queueSize(empty=true) and not self.isAttacking
alsoQueueAction: Upgrade
addResourcesWithLogic: ${action_Upgrade.price}*-1


[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点

[graphics]
image:嘤波.png
image_turret:NONE

#scaleImagesTo:40

image_shadow: AUTO_ANIMATED
shadowOffsetX:1
shadowOffsetY:1

total_frames:4

animation_idle_start:0
animation_idle_end:3
animation_idle_speed:3

animation_moving_start:0
animation_moving_end:3
animation_moving_speed:3

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false

maxAttackRange: 140

shootDelay: 0.1

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
idleDir:0

turnSpeed: 4.0

canShoot: false

#recoilOffset: -2
#recoilOutTime: 5
#recoilReturnTime: 8

[turret_2]
#
x: 0
y: 14
attachedTo: 1
slave: true
invisible: true

projectile: 1

turnSpeed: 4.0
turnSpeedAcceleration: 1.0

shoot_flame: shockwave

energyUsage: 1.04

canShoot: true

aimOffsetSpread: 1.0

[projectile_1]
tags= T-projectile
#areaDamage:80
#areaRadius:8
#areaDamageNoFalloff:true
directDamage: 12
life: 60

speed: 5

frame: 6

#targetGround:true
#targetGroundSpread:20

explodeEffect: CUSTOM:explodeSmall

[effect_explodeSmall]
life: 25
fadeOut: false
attachedToUnit: false
image: explode_big2.png
scaleFrom: 0.5
scaleTo: 0.5
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.6

[movement]
movementType: AIR
moveSpeed: 1.7
moveAccelerationSpeed: 0.2
moveDecelerationSpeed: 0.1

maxTurnSpeed: 3
turnAcceleration: 0.5

targetHeight: 20
targetHeightDrift: 1




[hiddenAction_AIattack]
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 资源提取器
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: false
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.isAttacking() and numberOfUnitsInEnemyTeam(greaterThan=0, withTag='资源提取器') and not self.hasActiveWaypoint(type='attack') and self.globalTeamTags(includes='开端{I}') and not self.globalTeamTags(includes='中刻{I}')

[hiddenAction_AI集群进攻2]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')