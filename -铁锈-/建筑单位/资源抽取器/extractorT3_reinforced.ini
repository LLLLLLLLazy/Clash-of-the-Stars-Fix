
[core]
name: 资源抽取器T3守护
displayLocaleKey: extractor
copyFrom: extractor_common.ini
price: 9900
maxHp: 4700
techLevel: 3
buildSpeed: 0.0010

overrideAndReplace: extractorT3_reinforced
generation_credits: 35

maxShield: 2000
shieldRegen: 0.375
shieldRenderRadius: 24


selfRegenRate:0.25

[action_up]
convertTo: 资源抽取器T4守护
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  10100
#price per credit: $800 (+10)
id: ${section.text}
text: 升级至<T4>
description: -铁锈最高技术的资源抽取器\n-资源产出提升\n-防卫冲击波不再额外消耗护盾
descriptionAddUnitStats: ${section.convertTo}
displayType: upgrade
buildSpeed: 300s
isLocked: if not self.globalTeamTags(includes='资源研发')
isLockedMessage: 需要在供应站进行资源研发
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_defence]
autoTriggerOnEvent: tookDamage
requireConditional: if self.shield(greaterThan=100) and self.customTimer>1
isGuiBlinking: if self.hasTakenDamage(withinSeconds=1) and self.shield(greaterThan=100)
addActionCooldownTime: 1s
resetCustomTimer: true
addResources: shield=-50
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: shockwave
isActive: false
displayType: infoOnlyStockpile
buildSpeed: 0s
pos: 1
id: ${section.text}
text: 防卫冲击波
description: -遭遇来袭时展开护盾波冲击周围的敌人\n-每次减少50护盾值

[action_temp]
#Temp padding to not match up with T2->T3 upgrade when using upgradedFrom
isVisible:false
addResources: credits=0

[action_refund]
convertTo: 资源抽取器T3
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
ai_isDisabled: true
price:  0
addResources: 2250
text: 降级<守护>
description:-退回加强\n-返还升级成本的75%
displayType: action
buildSpeed: 16.6s

[animation_idle]
KeyframeTimeScale: 0.33

[graphics]
image:        extractor_t3_reinforced.png
image_offsetY: 0

[attack]
maxAttackRange: 200

[turret_1]
x:0
y:0
invisible:true

shoot_sound:plasma_fire
shoot_sound_vol:0.1

[projectile_shockwave]
tags= T-projectile
areaDamage: 0
areaRadius: 250
areaExpandTime: 40
life: 40
instant: true
areaHitAirAndLandAtSameTime: true
drawUnderUnits: true
pushForce: 1
pushVelocity: 6

explodeEffect: CUSTOM:shockwave

[effect_shockwave]
image: shield_mid.png
life: 40
scaleFrom: 0
scaleTo: 6
alpha: 1
alsoPlaySound: large_gun_fire2



[hiddenAction_AIup]
autoTrigger:if self.isControlledByAI() and self.hasResources(15400) and self.queueSize(empty=true)
alsoQueueAction: up
addResources: credits=-20400