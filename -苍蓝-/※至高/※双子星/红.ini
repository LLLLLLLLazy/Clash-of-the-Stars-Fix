
[core]
showInEditor:false
name: 红星
displayDescription: -双子星之红星 \n -与蓝星碰撞时释放能量爆发
price: 400000
maxHp: 10000
maxShield: 360
shieldRegen: 0.6
mass: 500000
armour: 50
armourMinDamageToKeep: 50
buildSpeed: 600s

selfRegenRate: 3

tags: units, 红星, 双子星

availableInDemo: true
experimental: true

radius: 5
softCollisionOnAll: 10
numBitsOnDeath: 0


fogOfWarSightRange: 33

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

disableDeathOnZeroHp: true

canNotBeGivenOrdersByPlayer: true

transportSlotsNeeded: 999999

[hiddenAction_恒星曲引]
autoTrigger: if not self.tags(includes='暂停属性')
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 引力
fireTurretXAtGround_withOffset: 0, 0
spawnEffects: CUSTOM:引力扭曲

[hiddenAction_move]
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 5s
addWaypoint_target_nearestUnit_tagged: 蓝定位
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 9999
#autoTrigger: if self.isControlledByAI() and self.isAttacking() and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=195) and not self.hasActiveWaypoint(type='touchTarget') and not self.hasFlag(id=1)
autoTrigger: if not self.hasActiveWaypoint(type='touchTarget') and numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动')

[hiddenAction_clear]
clearAllWaypoints: true
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasFlag(id=1)
addResources: setFlag=1
[hiddenAction_clear2]
clearAllWaypoints: true
autoTrigger: if numberOfUnitsInTeam(greaterThan=0, withinRange=100, withTag='双星移动') and self.hasFlag(id=1)
addResources: unsetFlag=1

[hiddenAction_move2]
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 双星移动
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 9999
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasActiveWaypoint(type='touchTarget') 

[hiddenAction_wave]
autoTrigger: if ( numberOfUnitsInTeam(greaterThan=0, withinRange=30, withTag='蓝星') and numberOfUnitsInTeam(greaterThan=0, withinRange=200, withTag='双星移动') and not self.hasFlag(id=1) or self.hasTakenDamage(withinSeconds=0.05) or numberOfUnitsInEnemyTeam(withTag='units', greaterThan=0, withinRange=15) ) and not self.tags(includes='暂停属性')
fireTurretXAtGround: wave
fireTurretXAtGround_withProjectile: wave
fireTurretXAtGround_withOffset: 0,20
playSoundAtUnit:HLT_explode.ogg

[action_HP0]
autoTrigger: if self.hp(lessThan=100) and not self.queueSize(greaterThan=0)
temporarilyAddTags: 红星0
alsoQueueAction: HP恢复
#
isActive: false
displayType: infoOnlyStockpile
buildSpeed: 0s
pos: 1
text: 共生
description: -
isGuiBlinking: if numberOfUnitsInTeam(greaterThan=0, withTag='蓝星0') or numberOfUnitsInTeam(greaterThan=0, withTag='红星0') 
isAlsoViewableByEnemies: true

[hiddenAction_HP恢复]
buildSpeed: 3s
addResources: hp=10000
temporarilyRemoveTags: 红星0

[hiddenAction_death0]
autoTrigger: if ( (numberOfUnitsInTeam(greaterThan=0, withTag='蓝星0') and numberOfUnitsInTeam(greaterThan=0 ,withTag='红星0') or numberOfUnitsInTeam(lessThan=1, withTag='蓝星')) and self.timeAlive(laterThanSeconds=5) ) and not self.tags(includes='暂停属性') and self.resource(type='虚空')<1
deleteSelf: true
fireTurretXAtGround: death
fireTurretXAtGround_withProjectile: death
fireTurretXAtGround_withOffset: 0,0
spawnUnits: 蘑菇云

[hiddenAction_death1]
autoTrigger: if self.timeAlive(laterThanSeconds=1) and self.hasFlag(id=2)
deleteSelf: true
fireTurretXAtGround: death
fireTurretXAtGround_withProjectile: death
fireTurretXAtGround_withOffset: 0,0
spawnUnits: 蘑菇云

[hiddenAction_星遥]
autoTrigger: if not numberOfUnitsInTeam(greaterThan=0, withinRange=500, withTag='蓝星') and self.timeAlive(laterThanSeconds=5) and self.customTimer(laterThanSeconds=0.5) and not self.tags(includes='暂停属性')
addResources: hp=-500
resetCustomTimer: true
fireTurretXAtGround: wave
fireTurretXAtGround_withProjectile: wave
fireTurretXAtGround_withOffset: 0,20

[attachment_1]
x:0
y:-40
isUnselectable: false
canBeAttackedAndDamaged: false
keepAliveWhenParentDies: false
setDrawLayerOnTop: false
addTransportedUnits: 1
lockRotation: true
deattachIfWantingToMove: false
onCreateSpawnUnitOf: 红定位

[graphics]

total_frames: 1
image:        红.png
image_wreak: NONE
image_turret: NONE
image_shield: red_shield.png


image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

splastEffect: true

movementEffect: CUSTOM:projectileTrail
movementEffectRate: 6

disableLowHpSmoke: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 4.5


maxAttackRange: 300
shootDelay: 20


[turret_1]
x: 0
y: 0
idleDir:0

shouldResetTurret: true
aimOffsetSpread: 0

[projectile_1]
tags= T-projectile
life: 15
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

explodeEffect: NONE
explodeEffectOnShield: NONE

shieldDamageMultiplier: 0.25
buildingDamageMultiplier: 1.5

#=== others ===

directDamage: 222

color: #FF6464

[turret_wave]
x:0
y:0
canShoot:false
invisible:true
projectile: wave

[projectile_wave]
tags= T-projectile
areaDamage: 200
areaRadius: 400
areaExpandTime: 35
life: 0
speed: 0
largeHitEffect: true
explodeOnEndOfLife: true
areaHitUnderwaterAlways: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:curewave, CUSTOM:displacement

shieldDamageMultiplier: 0
shieldDefectionMultiplier: 0.85
buildingDamageMultiplier: 3
armourIgnoreAmount: 999
deflectionPower: -1

[effect_curewave]
image: shockwave2.png
life: 80
scaleFrom: 0
scaleTo: 10
alpha: 0.9
#alsoPlaySound: 
color: #E73232
priority: veryhigh

[effect_displacement]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 60
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 8
alpha: 0.6
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1

[projectile_引力]
tags= T-projectile
areaDamage: 0
life: 0
invisible: true
explodeEffect: NONE
spawnProjectilesOnCreate: 引力远距(spawnChance=0.15), 引力中距(spawnChance=0.25), 引力近距(spawnChance=0.3), 引力中心(spawnChance=0.5)

[projectile_引力远距]
tags= T-projectile
areaDamage: -1
areaRadius: 10000
life: 0
speed: 0
invisible: true
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
deflectionPower: -1

pushVelocity: -0.02
mutatorX_ifUnitWithoutTags: ʚ♡⃛ɞ(ू•ᴗ•ू❁)
mutatorX_areaDamageMultiplier: 0.0001

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_引力中距]
@copyFromSection: projectile_引力远距
areaRadius: 2000

[projectile_引力近距]
@copyFromSection: projectile_引力远距
areaRadius: 1000

[projectile_引力中心]
@copyFromSection: projectile_引力远距
areaRadius: 400

[effect_引力扭曲]
drawType: displacement
createWhenOffscreen: true
createWhenZoomedOut: true
showInFog: true

image: SHARED:ripple_normal_128.png
life: 12
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 15
scaleTo: 15
alpha: 0.025
drawUnderUnits:false
alwayStartDirAtZero: true

[turret_death]
x:0
y:0
canShoot:false
invisible:true
projectile: death

[projectile_death]
tags= T-projectile
areaDamage: 10000
areaRadius: 600
areaExpandTime: 60
life: 0
speed: 0
largeHitEffect: true
explodeOnEndOfLife: true
areaHitUnderwaterAlways: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:curewave, CUSTOM:displacement
nukeWeapon: true
friendlyFire: true

shieldDamageMultiplier: 0.1
shieldDefectionMultiplier: 0.9
buildingDamageMultiplier: 3
armourIgnoreAmount: 999
deflectionPower: -1

[effect_projectileTrail]

createWhenZoomedOut: false
priority:low
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: false
color: #E86464
fadeInTime:2
scaleFrom: 0.5
scaleTo: 0.7
alpha: 0.4
drawUnderUnits:true
#ySpeedRelative:-0.4
atmospheric: true


[movement]
movementType: AIR
moveSpeed: 1.5
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.00

targetHeight: 50
targetHeightDrift: 5

maxTurnSpeed: 10
turnAcceleration: 0.5

moveSlidingMode :true
#moveSlidingDir:  181
moveIgnoringBody: true



