
[core]
name: 冲射虫
displayDescription: -仅对空\n-范围伤害强\n-前期的主要防空力量

price: 800
maxHp: 500
mass: 1500

radius: 12
softCollisionOnAll: 12

buildSpeed: 0.002
selfRegenRate: 0.06

isBug: true
isBio: true

tags: units, 虫族, 小型虫

[action_Upgrade]
convertTo: 重型冲射虫
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 腐蚀=120
text: 腐蚀 - 巨化
displayType: upgrade
buildSpeed: 12.8s
pos: 1
description: -更大,更好,更强
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
tags=腐蚀
setUnitMemory: 属性[24]=0

[hiddenAction_腐蚀中]
autoTrigger: if self.queueSize(withActionTag="腐蚀")>0 and not self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=-${movement.moveSpeed}*0.6
alsoTriggerAction: 属性变化
temporarilyAddTags: 腐蚀中

[hiddenAction_腐蚀停止]
autoTrigger: if self.queueSize(withActionTag="腐蚀")<1 and self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 腐蚀中

[hiddenAction_自动腐蚀]
autoTrigger: if (self.hasUnitInTeam(withTag="腐蚀-重型冲射虫") and self.hasUnitInTeam(withTag="腐蚀之意")) and self.hasResources(${action_Upgrade.price}) and self.queueSize(empty=true) and not self.isAttacking
alsoQueueAction: Upgrade
addResourcesWithLogic: ${action_Upgrade.price}*-1

[graphics]
total_frames: 4

image:        13.png
image_wreak:  NONE
image_turret: NONE

scaleImagesTo: 25
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO_ANIMATED
shadowOffsetX: 1
shadowOffsetY: 1

animation_moving_start: 0
animation_moving_end: 3
animation_moving_speed: 9

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 80
animation_idle_scale_start: 1
animation_idle_scale_end: 1.03
animation_idle_pingPong: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: false
canAttackUnderwaterUnits: false
maxAttackRange: 200
shootDelay: 120

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
invisible: true
projectile: 1
turnSpeedAcceleration: 1.0
shoot_sound: NONE
shoot_sound_vol: 0
shoot_flame: flame
shoot_light: #FFEECCCC

[projectile_1]
tags= T-projectile
areaDamage: 90
areaRadius: 35
largeHitEffect: true
life: 300
speed: 6
frame: 6
drawSize: 1.4
lightSize: 0.8
lightColor: #249900
explodeEffect: CUSTOM:explodeSmall, CUSTOM:shockwave, CUSTOM:particleBall*3

[effect_flame]
image: flame_large.png
life: 20
fadeInTime: 3
total_frames: 4
animateFrameStart: 0
animateFrameEnd: 3
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.1


[effect_explodeSmall]
priority: veryhigh
life: 25
fadeOut: false
attachedToUnit: false
image: 白爆.png
scaleFrom: 0.9
scaleTo: 0.9
color: #5FCC29
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
alsoPlaySound: missile_hit

[effect_shockwave]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 1.6
color: #5FCC29
attachedToUnit: false
drawUnderUnits: true

[effect_particleBall]
priority: verylow
image: 通用粒子.png
life: 25
scaleFrom: 0.1
scaleTo: 0.3
alpha: 1.7
color: #5FCC29
dirOffsetRandom: 180
xOffsetRelativeRandom: 5
yOffsetRelativeRandom: 5
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2
physics: true
hSpeed: 1
hSpeedRandom: 0.25
delayedStartTimerRandom: 5
attachedToUnit: false

[movement]
movementType: land
moveSpeed: 1.2
moveAccelerationSpeed: 0.5
moveDecelerationSpeed: 0.3
maxTurnSpeed: 2.5
turnAcceleration: 0.7

targetHeight: 0
targetHeightDrift: 0

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 群虫成体
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and self.globalTeamTags(includes='开端{I}')