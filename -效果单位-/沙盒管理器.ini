
[core]
name: 沙盒管理器
displayDescription: -沙盒特供 \n -多种管理选项 \n -随沙盒设置改变队伍
class: CustomUnitMetadata
price: 0
maxHp: 100
mass: 99999999
tags: 效果单位, 沙盒管理器

disableAllUnitCollisions: true
canNotBeDirectlyAttacked: true

fogOfWarSightRange: 0

radius: 15
displayRadius: 15

effectOnDeath: CUSTOM:shockwave*1, 曲化

autoTriggerCooldownTime: 0.1s

#——————————————————————

@memory 队伍:float

[template_1]
isVisible: true
displayType: action
id: ${section.text}
buildSpeed: 0s
pos: 1

highPriorityQueue: true
alwaysSinglePress: true
isAlsoViewableByAllies: true
isAlsoViewableByEnemies: true

[template_2]
isVisible: true
isActive: false
displayType: infoOnlyNoBox
id: ${section.text}
buildSpeed: 0s
pos: 1
highPriorityQueue: true
isAlsoViewableByAllies: true
isAlsoViewableByEnemies: true

[template_3]
isVisible: true
displayType: infoOnly
id: ${section.text}
buildSpeed: -1
pos: 1

isAlsoViewableByAllies: true
isAlsoViewableByEnemies: true

[template_资源]
@copyFromSection: template_1
@define resource: 
@define value: 
@define custom: 
id: ${resource}${value}
text: ${resource}${value}
description: 当前${resource}数量: %{self.resource.${resource}} ${custom}
addResources: ${resource}=${value}
iconImage: ROOT:/素材/button_more.png

[template_资源图]
@copyFromSection: template_1
iconImage: ROOT:/素材/button_more.png

#——————————————————————

[hiddenAction_队伍设定]
autoTrigger: if createMarker(x=-1000,y=-1000).nearestUnit.teamId != self.teamId and substring(str(createMarker(x=-1000,y=-1000).nearestUnit),0,15) == "editorOrBuilder"
switchToTeam: createMarker(x=-1000,y=-1000).nearestUnit.teamId

#[hiddenAction_队伍起始]
#autoTriggerOnEvent: created
#alsoQueueAction: 队伍
#setUnitMemory: 队伍=self.teamId

#[hiddenAction_队伍+]
#autoTriggerOnEvent: queueItemAdded(withActionTag='队伍')
#setUnitMemory: 队伍=memory.队伍+1
#switchToTeam: memory.队伍
#refundAllQueuedItems: true
#alsoQueueAction: 队伍

#[hiddenAction_队伍-]
#autoTriggerOnEvent: queueItemCancelled(withActionTag='队伍')
#setUnitMemory: 队伍=memory.队伍-1
#switchToTeam: memory.队伍
#refundAllQueuedItems: true

#[hiddenAction_队伍负数]
#autoTriggerOnEvent: queueItemCancelled(withActionTag='队伍')
#requireConditional: if self.queueSize(withActionTag='队伍') < 1
#alsoQueueAction: 队伍

#[action_队伍]
#@copyFromSection: template_3
#id: 队伍
#tags: ${section.id}
#text: <- ${section.id} = %{memory.队伍+1} ->\n
#description: -超过上下限的队伍设定无效

#[hiddenAction_队伍起始]
#autoTriggerOnEvent: created
#alsoQueueAction: 队伍
#setUnitMemory: 队伍=self.teamId

#[hiddenAction_队伍+]
#autoTriggerOnEvent: queueItemAdded(withActionTag='队伍')
#setUnitMemory: 队伍=memory.队伍+1
#switchToTeam: memory.队伍
#refundAllQueuedItems: true
#alsoQueueAction: 队伍

#[hiddenAction_队伍-]
#autoTriggerOnEvent: queueItemCancelled(withActionTag='队伍')
#setUnitMemory: 队伍=memory.队伍-1
#switchToTeam: memory.队伍
#refundAllQueuedItems: true

#[hiddenAction_队伍负数]
#autoTriggerOnEvent: queueItemCancelled(withActionTag='队伍')
#requireConditional: if self.queueSize(withActionTag='队伍') < 1
#alsoQueueAction: 队伍

#[action_队伍]
#@copyFromSection: template_3
#id: 队伍
#tags: ${section.id}
#text: <- ${section.id} = %{memory.队伍+1} ->\n
#description: -超过上下限的队伍设定无效

#——————————————————————

[action_z0]
@copyFromSection: template_1
text: 资金+10000000
addResources: 10000000
iconImage: ROOT:/素材/stats_button_income.png

[action_z-1]
@copyFromSection: template_1
text: 资金-100000000
addResources: -10000000
iconImage: ROOT:/素材/stats_button_loss.png

[action_z1]
@copyFromSection: template_资源
@define resource:腐蚀
@define value:+1000000

[action_z2]
@copyFromSection: template_资源
@define resource: 苍蓝能量
@define value: +100000

[action_z3]
@copyFromSection: template_资源
@define resource: 基因种子
@define value: +100000

[action_z4]
@copyFromSection: template_资源
@define resource: 新能魔素
@define value: +100000

[action_z5]
@copyFromSection: template_资源
@define resource: 废料
@define value: +100000

[action_z6]
@copyFromSection: template_资源
@define resource: 量子碳
@define value: +100000
@define custom: \n -解锁量子碳研究
addGlobalTeamTags: 未来科技

[action_z7]
@copyFromSection: template_资源
@define resource: 日耀
@define value: +100000

[action_z8]
@copyFromSection: template_资源
@define resource: 月曜
@define value: +100000

[action_z9]
@copyFromSection: template_资源
@define resource: 时光能量
@define value: +100000

[action_z10]
@copyFromSection: template_资源
@define resource: 混沌元素
@define value: +1

[action_z11]
@copyFromSection: template_资源
@define resource: 支配度
@define value: +100

[action_z12]
@copyFromSection: template_资源
@define resource: 支配值
@define value: +100

[action_z13]
@copyFromSection: template_资源
@define resource: 能源供应
@define value: +1000

[action_z14]
@copyFromSection: template_资源图
text: 狂猎时刻+10000
addResources: 狂猎时刻=10000
description: -激活狂猎时刻 \n -获取衍黎与狂猎效果
addGlobalTeamTags: 衍黎, 狂猎
sendMessageTo: globalSearchForFirstUnit(withTag='单位系统', relation='own')
sendMessageWithTags: 狂猎时刻
sendMessageWithData: 时间=10000, 色幕=1

[action_清空特殊资源]
@copyFromSection: template_1
text: 清空特殊资源
setResourcesWithLogic: 腐蚀=0, 苍蓝能量=0, 基因种子=0, 新能魔素=0, 废料=0, 量子碳=0, 日耀=0, 月曜=0, 时光能量=0, 混沌元素=0, 支配度=0, 支配值=0, 能源供应=0, 狂猎时刻=0
displayType: infoOnly
iconExtraImage: ROOT:/素材/button_subtract.png

#——————————————————————

[action_AI逻辑关闭]
@copyFromSection: template_1
text: AI逻辑关闭
description: -清除AI系统
iconExtraImage: ROOT:/素材/button_yes.png
iconExtraIsVisible: if numberOfUnitsInAllTeams(withTag='AI系统')<1
takeResources: setFlag=0
takeResources_includeUnitsWithinRange: 100000
takeResources_includeUnitsWithinRange_team: any
takeResources_excludeUnitsWithoutTags: AI系统
takeResources_triggerActionIfAnyCollected: 已关闭AI逻辑系统
takeResources_triggerActionIfNoneCollected: AI逻辑阵营选择
takeResources_maxUnits: 100000

[hiddenAction_AI逻辑阵营选择]
takeResources: setFlag=11
takeResources_includeUnitsWithinRange: 100000
takeResources_includeUnitsWithinRange_team: any
takeResources_excludeUnitsWithoutTags: 阵营选择
takeResources_triggerActionIfAnyCollected: 已关闭AI逻辑系统
takeResources_maxUnits: 100000

[hiddenAction_已关闭AI逻辑系统]
showMessageToAllPlayers: 已关闭AI逻辑系统

#——————————————————————

[action_AI系统]
@copyFromSection: template_1
text: 生成AI系统
spawnUnits: AI系统
description: -生成己方AI系统
iconExtraImage: ROOT:/素材/button_yes.png
iconExtraIsVisible: if numberOfUnitsInTeam(withTag='AI系统')>0

[action_单位系统]
@copyFromSection: template_1
text: 生成单位系统
spawnUnits: 单位系统
description: -生成己方单位系统
iconExtraImage: ROOT:/素材/button_yes.png
iconExtraIsVisible: if numberOfUnitsInTeam(withTag='单位系统')>0

[action_清除漂浮灵]
@copyFromSection: template_1
text: 清除漂浮灵
description: -击杀100000范围内的漂浮灵
iconExtraImage: ROOT:/素材/button_yes.png
iconExtraIsVisible: if numberOfUnitsInAllTeams(withTag='漂浮灵')<1
takeResources: hp=100000
takeResources_excludeUnitsWithoutAllResources: false
takeResources_includeUnitsWithinRange: 100000
takeResources_includeUnitsWithinRange_team: any
takeResources_excludeUnitsWithoutTags: 漂浮灵
takeResources_discardCollected: true
takeResources_maxUnits: 100000

#——————————————————————

[action_删除]
@copyFromSection: template_1
text: 移除沙盒管理器
buildSpeed: 1s
deleteSelf: true
displayType: infoOnly
iconImage: ROOT:/素材/no.png
allowMultipleInQueue: false
alwaysSinglePress: false

#——————————————————————

[action_单位数量显示]
@copyFromSection: template_2
id: 单位数量
text:单位数量: %{numberOfUnitsInAllTeams}
description:己队单位数量: %{numberOfUnitsInTeam+self.numberOfUnitsInAllyNotOwnTeam}\n己方单位数量: %{numberOfUnitsInTeam}\n盟友单位数量: %{self.numberOfUnitsInAllyNotOwnTeam}\n敌方单位数量: %{numberOfUnitsInEnemyTeam}\n中立单位数量: %{numberOfUnitsInNeutralTeam}\n敌对中立单位数量: %{numberOfUnitsInAggressiveTeam}\n群星之争-非效果单位数量: %{numberOfUnitsInAllTeams(withTag='units')}\n群星之争-单位系统数量: %{numberOfUnitsInAllTeams(withTag='单位系统')}\n最近单位: [%{nearestUnit(incompleteBuildings=true)} | %{str(nearestUnit(incompleteBuildings=true))}]

[action_地图大小显示]
@copyFromSection: template_2
id: 地图大小
text:地图宽度: %{game.mapWidth}\n地图高度: %{game.mapHeight}
description:格数宽度: %{game.mapWidth/20}\n格数高度: %{game.mapHeight/20}\n群星之争-矿点定位数量: %{numberOfUnitsInAllTeams(withTag='资源池')}

#——————————————————————

[hiddenAction_移动传送]
autoTriggerOnEvent: newWaypointGivenByPlayer
teleportTo: activeWaypointTarget.getAsMarker

#——————————————————————

[effect_shockwave]
stripIndex: shockwave
life: 60
scaleFrom: 0
scaleTo: 3
alpha: 1
color: #63e6e8

[effect_曲化]
drawType: displacement
life: 60
fadeOut: true
attachedToUnit: false
image: 量子结构.png
total_frames: 9
animateFrameStart: 0
animateFrameEnd: 8
animateFramePingPong: false
animateFrameSpeed: 0.5
scaleFrom: 0.5
scaleTo: 0.5
alpha: 1

[graphics]
total_frames: 9
imageScale: 0.5
image: 量子结构.png
drawLayer: top

animation_idle_start: 0
animation_idle_end: 8
animation_idle_speed: 4
animation_idle_pingPong: true

showEnergyBar: false

[global_resource_基因种子]
displayName: 基因种子

[global_resource_新能魔素]
displayName: 新能魔素

[global_resource_腐蚀]
displayName: 腐蚀

[global_resource_苍蓝能量]
displayName: 苍蓝能量

[global_resource_废料]
displayName: 废料

[global_resource_时光能量]
displayName: 时光能量

[global_resource_混沌元素]
displayName: 混沌元素

[global_resource_日耀]
displayName: 日耀

[global_resource_月曜]
displayName: 月曜

[global_resource_量子碳]
displayName: 量子碳

[global_resource_支配度]
displayName: 支配度

[global_resource_支配值]
displayName: 支配值

[global_resource_能源供应]
displayName: 能源供应

[global_resource_狂猎时刻]
displayName: [狂猎时刻
displayTextPostfix: s]

[attack]
canAttack: false

[movement]
movementType: AIR
moveSpeed: 2

targetHeight: 1
targetHeightDrift: 1

maxTurnSpeed: 0
moveIgnoringBody: true
