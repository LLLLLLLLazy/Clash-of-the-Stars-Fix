
[core]
name: 末日大骑士
displayText: 末日大骑士
displayDescription: [毁天灭地] \n -全副武装 \n -发射末日火箭大范围摧毁目标 \n -攻击结束时受到伤害会熄火 \n -阵亡时造成大范围伤害并击退\n -自我修复 \n -缓慢 \n “终末的征召”

class: CustomUnitMetadata
price: 15000, 苍蓝能量=1
maxHp: 5000
mass: 40000
tags: units, 大骑士与大巫师, 能量冷却

selfRegenRate: 0.2

armour: 15
armourMinDamageToKeep: 15

energyMax: 3
energyRegen: 0.005
energyNeedsToRechargeToFull: true
energyRegenWhenRecharging: 0.03

techLevel: 3
buildSpeed: 83.3s

radius: 28
#displayRadius: 11
isBio: false
softCollisionOnAll: 0

transportSlotsNeeded: 4

fireTurretXAtSelfOnDeath: sword


[action_trigger_legendary]
isActive: false
id: ${section.text}
text: 《剑与魔法的传奇》
description: 最危险的时刻，传说的骑士与巫师将以最强大的姿态挺身而出
displayType: infoOnly
convertTo: 末日大骑士[传奇]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
autoTrigger: if numberOfUnitsInTeam(withTag="units", lessThan=2) and self.numberOfUnitsInAllyNotOwnTeam(withTag="units", lessThan=1) and self.resource.传说时刻>=1 and not self.hasFlag(id=1)
addResources: hp=5000, setFlag=1
isGuiBlinking: if self.hasFlag(id=1)
isVisible: true
buildSpeed: 0s
pos: -1

[hiddenAction_传说时刻]
autoTrigger: if numberOfUnitsInTeam(withTag="units", lessThan=2) and self.resource(type="传说时刻", lessthan=1) and not self.hasFlag(id=1)
addResources: 传说时刻=1

[hiddenAction_传说结束]
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=1) and self.resource(type="传说时刻", greaterThan=0) and not self.hasFlag(id=1)
setResourcesWithLogic: 传说时刻=0

[resource_传说时刻]
displayName: 传说时刻
hidden: true

[action_1]
autoTrigger: if self.energy(lessThan=1) and self.hasTakenDamage(withinSeconds=0.05) and not self.hasFlag(id=3)
isVisible: false
convertTo: 末日大骑士[止]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
addEnergy: -3
playSoundAtUnit: shock.ogg
#ogg来源:AI复兴

[action_苍蓝升级]
displayType: upgrade
id: ${section.text}
text: 终焉之心
description: -受到攻击不再熄火\n-？
buildSpeed: 42.8s
pos: 1
price: 苍蓝能量=5
allowMultipleInQueue: false
canPlayerCancel: false
whenBuilding_triggerAction: 苍蓝特效
spawnEffects: custom:星
addResources=setFlag=3
iconImage: maw.png
isActive: if not self.hasFlag(id=3)
isGuiBlinking: if self.hasFlag(id=3)

[hiddenAction_苍蓝特效]
spawnEffects: 苍, 苍2

[effect_苍]
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
image: ROOT:/素材/hit.png
life: 2688
scaleFrom: 4.25
scaleTo: 4.25
alpha: 10
dirSpeed: 3
color: #294C8A
priority: high
alsoPlaySound: laser_deflect
[effect_苍2]
@copyFromSection:effect_苍
dirSpeed: -3
color: #3351E8
scaleFrom: 3
scaleTo: 3
[effect_星]
image: ROOT:/素材/light.png
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: false
life: 120
scaleFrom: 1
scaleTo: 1
alpha: 0.9
color: #8733E8

[graphics]
total_frames: 1
teamColorsOnTurret: true
image:  末日大骑士.png
image_wreak:  末日…….png
image_turret: NONE

image_shadow: SHADOW:真末日大骑士.png

shadowOffsetX:2
shadowOffsetY:2

#animation_moving_start: 0
#animation_moving_end: 7
#animation_moving_speed: 6

lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 250
shootDelay: 20

turretRotateWithBody: false

[turret_1]
#body
x: 0
y: 0
idleDir:0

turnSpeedAcceleration: 0.07

canShoot: false

recoilOffset: -2
recoilOutTime: 2
recoilReturnTime: 6


[turret_2]
#
x: 0
y: 0
barrelY: 37
barrelX: 16
attachedTo: 1
slave: true
invisible: false
image: 末日之剑.png
projectile: 1
canShoot: true

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:cannon_firing
shoot_sound_vol:0.2
shoot_flame:shockwave
shoot_light:#FFFFCC00

recoilOffset: -5
recoilOutTime: 2
recoilReturnTime: 6

energyUsage: 1

[turret_4]
#
x: 0
y: 0
barrelY: 37
barrelX: 16
attachedTo: 1
slave: 1
invisible: true
projectile: 4
canShoot: true
warmup:	39

shoot_sound:large_gun_fire2
shoot_sound_vol:0.3
shoot_flame:shockwave
shoot_light:#FFFFCC00

recoilOffset: -5
recoilOutTime: 2
recoilReturnTime: 6

energyUsage: 1

[turret_3]
#base
x: 0
y: 0
attachedTo: 1
slave: true
idleDir:0

turnSpeed: 0

canShoot: false
image: 末日之握.png

[projectile_1]
tags= T-projectile
directDamage: 100
areaDamage: 50
areaRadius: 90
areaRadiusFromEdge: true
life: 500
speed: 0.3
targetSpeed:8
targetSpeedAcceleration: 0.05
turnSpeed: 3
trailEffect: true
largeHitEffect: true
spawnProjectilesOnExplode: 2*5(offsetRandomXY=50)
lightSize: 1
lightColor: #FF0000
deflectionPower: 3

frame: 4
drawSize: 1.2

autoTargetingOnDeadTarget: true

[projectile_2]
tags= T-projectile
#directDamage: 110
areaDamage: 25
areaRadius: 20
areaRadiusFromEdge: true
life: 200
speed: 0.8
targetSpeed:8
targetSpeedAcceleration: 0.1
speedSpread: 12
turnSpeed: 6
trailEffect: true
largeHitEffect: true
spawnProjectilesOnExplode: 3(yOffsetRelative=20)
wobbleFrequency:0.5s
wobbleAmplitude:0.5

frame: 4
drawSize: 0.9

autoTargetingOnDeadTarget: true
autoTargetingOnDeadTargetRange: 200
explodeOnEndOfLife: true

[projectile_3]
tags= T-projectile
directDamage: 10
areaDamage: 30
areaRadius: 55
areaRadiusFromEdge: true
life: 200
speed: 0.3
targetSpeed:5
targetSpeedAcceleration: 0.1
speedSpread: 20
turnSpeed: 8
trailEffect: true
largeHitEffect: true
spawnProjectilesOnExplode: 2*3(offsetRandomXY=50)
spawnProjectilesOnEndOfLife: 6*5(offsetRandomXY=100, offsetHeight=40)
wobbleFrequency:0.5s
wobbleAmplitude:0.2
lightSize: 1
lightColor: #FF9000

frame: 4

autoTargetingOnDeadTarget: true
autoTargetingOnDeadTargetRange: 200
explodeOnEndOfLife: true

[projectile_4]
tags= T-projectile
areaDamage: 200
areaRadius: 120
areaRadiusFromEdge: true
life: 50
speed: 0.4
targetSpeed:8
targetSpeedAcceleration: 0.05
turnSpeed: 9
trailEffect: true
largeHitEffect: true
spawnProjectilesOnEndOfLife: 5(xOffsetRelative=20), 5(xOffsetRelative=-20), 5
spawnProjectilesOnCreate: 斩!
lightSize: 1
lightColor: #FFFF00
pushForce: 120
pushVelocity: 10
deflectionPower: 3

frame: 4
drawSize: 1.2

autoTargetingOnDeadTarget: true

[projectile_5]
tags= T-projectile
#directDamage: 110
areaDamage: 50
areaRadius: 40
areaRadiusFromEdge: true
life: 160
speed: 3
targetSpeed:8
trailEffect: true
largeHitEffect: true
pushForce: 70
pushVelocity: 3
lightSize: 1
lightColor: #8A00FF

frame: 4

autoTargetingOnDeadTarget: true
explodeOnEndOfLife: true

[projectile_6]
tags= T-projectile
#directDamage: 110
areaDamage: 10
areaRadius: 200
areaRadiusFromEdge: true
areaHitAirAndLandAtSameTime: true
life: 300
speed: 1
targetGround: true
targetGroundSpread:	200
targetGroundHeightOffset:0
targetGround_includeTargetHeight: true
trailEffect: true
largeHitEffect: true

drawSize: 3

explodeOnEndOfLife: true

[projectile_斩!]
tags= T-projectile
explodeOnEndOfLife:true
directDamage: 0
life: 0
spawnUnit: 末日斩
explodeEffect: NONE
explodeEffectOnShield: NONE


[turret_sword]
x: 0
y: 0
canShoot: false
projectile: sword

shoot_sound: WeaponLaserBladeHit.ogg
shoot_sound_vol: 0.5

[projectile_sword]
tags= T-projectile
areaDamage: 500
areaRadius: 250
areaExpandTime: 30
life: 50
instant: true
largeHitEffect: true
areaHitAirAndLandAtSameTime: true
drawUnderUnits: true
pushForce: 1
pushVelocity: 10


[leg_1]
x: -25
y: 0
attach_x: -13
attach_y: 0
moveSpeed: 1.6
rotateSpeed: 7

heightSpeed: 0.7
resetAngle: 30

image_leg:  leg.png
image_foot: foot.png
#draw_foot_on_top: true
#dust_effect: false
holdDisMin: 26
holdDisMax: 50


[leg_2]
x: 25
y: 0
attach_x: 13
attach_y: 0
copyFrom: 1


[movement]
movementType: OVER_CLIFF

moveSpeed: 0.4
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 3.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:1



