[core]
showInEditor: true
copyFrom: 融合之卵[完成].ini
name: 融合之卵[完成狂猎]

displayDescription: -孵化完成[狂猎] \n -破卵后释放大量滞留毒雾 \n -产生炮弹虫与部分小型虫 \n -可主动生产8格位的虫族T2陆军 \n -生产会消耗内部卵源退还总计1500资源

@memory 附属:unit

[attachment_1]
x: 0
y: 0
idleDir: 0
resetRotationWhenNotAttacking: true

showAllActionsFrom: true
keepAliveWhenParentDies: true

[resource_卵源]
displayName: 卵源

[hiddenAction_狂猎融合之卵]
autoTrigger: if not self.hasFlag(id=2)
addResources: 卵源=1500, setFlag=2
attachments_addNewUnits: 融合之卵装载
setUnitMemory: 附属=attachment

[hiddenAction_融合之卵源]
autoTriggerOnEvent: newMessage(withTag='卵源生产')
setResourcesWithLogic: 卵源=attachment.resource.卵源

[hiddenAction_狂猎]
autoTrigger: false


[hiddenAction_death]
#requireConditional: if self.resource.卵源>=1500
fireTurretXAtGround: explode
takeResources: setFlag=1
takeResources_includeReference: memory.附属
takeResources_discardCollected: true

#[hiddenAction_death-]
#@copyFromSection: hiddenAction_death
#requireConditional: if self.resource.卵源<1500
#fireTurretXAtGround: explode
#spawnUnits: bugMelee*4(maxSpawnLimit=5,spawnChance=0.25), 蚊子*4(maxSpawnLimit=5,spawnChance=0.25), bugMeleeSmall*4(maxSpawnLimit=5,spawnChance=0.25), 炮弹虫*4(maxSpawnLimit=5, addResources=setFlag:3)

#[turret_explode]
#altProjectile: explode-
#altProjectileCondition: if self.resource.卵源<1500

#[projectile_explode-]
#@copyFromSection: projectile_explode
#spawnProjectilesOnExplode: explode2-*5

#[projectile_explode2-]
#@copyFromSection: projectile_explode2
#spawnUnit: 炮弹虫(skipIfOverlapping=true, addResources=setFlag:3), 滞留毒雾


[projectile_explode2]
tags= T-projectile
image: 刺.png
drawSize: 1.1

trailEffect: CUSTOM:projectileTrail
trailEffectRate: 4

initialUnguidedSpeedHeight: 0
gravity: 0

[effect_projectileTrail]
image: 刺.png
life: 20
fadeOut: true
attachedToUnit: false
fadeInTime: 2
scaleFrom: 1.1
scaleTo: 0.6
alpha: 0.3
drawUnderUnits:true

[graphics]
image: 狂猎蛋.png

[movement]
movementType: LAND