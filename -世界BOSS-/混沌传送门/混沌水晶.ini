[core]
showInEditor: false

name: 混沌水晶
maxHp: 6666
mass: 100000
price: 混沌元素=-1
maxShield: 99
radius: 0
shieldRenderRadius: 9

tags: 混沌元素

isBuilding: true

footprint: 1,1,-1,-1
constructionFootprint: 1,1,-1,-1
createOnAggressiveTeam: true

fogOfWarSightRange: 0
disableAllUnitCollisions: true
canNotBeDirectlyAttacked: true
ignoreInUnitCapCalculation: true

numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

effectOnDeath: CUSTOM:红雾

[hiddenAction_dieAttack]
setResourcesWithLogic: hp=-99999

[hiddenAction_拾取停止]
autoTrigger: if (self.hasFlag(id=1) or self.hasFlag(id=2)) and not self.isAttacking
addResources: unsetFlag=1-2

[decal_1]
layer: beforeUI
image: 红圈.png
alpha: 0.6
imageScale: 0.4
alwaysStartHeightAtZero: true

[global_resource_混沌元素]
hidden: false
displayName: 混沌元素
displayColor: #FF1A00
priority: 1

[graphics]
image: 亚空间水晶.png
scaleImagesTo: 20
image_shadow: 亚空间水晶.png
image_shield: red_shield.png

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
aimOffsetSpread: 0
turretTurnSpeed: 1000
maxAttackRange: 100
shootDelay: 10
turretMultiTargeting: true

[turret_1]
#对地
x: 0
y: 0
onShoot_triggerActions: dieAttack
canAttackFlyingUnits: false
canAttackLandUnits: if not self.hasFlag(id=2)

warmup: 300
warmupCallDownRate: 300

[turret_2]
#对空
x: 0
y: 0
onShoot_triggerActions: dieAttack
canAttackLandUnits: false
canAttackFlyingUnits: if not self.hasFlag(id=1)

warmup: 300
warmupCallDownRate: 300

[turret_1拾]
x: 0
y: 0
canAttackFlyingUnits: false
canAttackLandUnits: if not self.hasFlag(id=2)
resourceUsage: setFlag=1

projectile: 3

[turret_2拾]
x: 0
y: 0
canAttackLandUnits: false
canAttackFlyingUnits: if not self.hasFlag(id=1)
resourceUsage: setFlag=2

warmup: 20
warmupCallDownRate: 20
warmupNoReset: true

projectile: 3

[projectile_1]
tags= T-projectile
life: 30
instant: true
moveWithParent: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2
explodeEffect: 红波, 红环, 混沌水晶, 扭曲混沌水晶
explodeEffectOnShield: 红波, 红环, 混沌水晶, 扭曲混沌水晶
directDamage: 0
color: #FF1A00
mutatorX_ifUnitWithoutTags: NONE任意
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: 混沌元素=1
spawnProjectilesOnCreate: 2

[projectile_2]
@copyFromSection: projectile_1
explodeEffect: 红环-
explodeEffectOnShield: 红环-
mutatorX_addResourcesDirectHit: 混沌元素=0

[projectile_3]
@copyFromSection: projectile_2
spawnProjectilesOnCreate: NONE
#instantReuseLast: true
#instantReuseLast_alsoChangeTurretAim: true
color: #60FF1A00
targetGround: true
targetGround_includeTargetHeight: true

[effect_红雾]
stripIndex: effects
life: 120
color: #ff0000
scaleFrom: 0.9
scaleTo: 1.5
alpha: 0.8
atmospheric: true
dirOffsetRandom: 180
hSpeed: 0.3

[effect_红波]
stripIndex: shockwave_large
life: 60
scaleFrom: 0
scaleTo: 1.25
alpha: 1.0
dirSpeed: 5
color: #FF0000

[effect_红环]
stripIndex: shockwave_large
life: 60
scaleFrom: 1.24
scaleTo: 1.25
alpha: 0.6
dirSpeed: -5
color: #FF0000

[effect_红环-]
stripIndex: shockwave_large
life: 30
lifeRandom: 10
fadeInTime: 6
scaleFrom: 0.74
scaleTo: 0.75
alpha: 0.3
dirSpeed: 3
color: #FF0000

[effect_混沌水晶]
image: 亚空间水晶.png
life: 60
scaleFrom: 1
scaleTo: 1
alpha: 0.6
hSpeed: 0.2
dirSpeed: 0.1
alwayStartDirAtZero: true
dirOffset: 90

[effect_扭曲混沌水晶]
drawType: displacement
image: 亚空间水晶.png
life: 60
scaleFrom: 1
scaleTo: 0.1
alpha: 0.6
hSpeed: 0.2
dirSpeed: 0.1
alwayStartDirAtZero: true
dirOffset: 90

[movement]
movementType: AIR
targetHeight: 1.5
