
[core]
name: 掘地虫
displayText: 掘地虫
displayDescription: -坚固甲壳 \n -攻击地面单位 \n -可钻入地底行动 \n -可以越过峭壁 \n -装载1格单位
class: CustomUnitMetadata

price: 3500
maxHp: 3000
mass: 20000

tags: units, 虫族, 中型虫

armour: 20
armourMinDamageToKeep: 20

techLevel: 2
buildSpeed: 20.8s

radius: 20
displayRadius: 22

softCollisionOnAll: 5

selfRegenRate: 0.15

isBug: true
isBio: true

energyMax: 10
energyRegen: 0.014

transportSlotsNeeded: 2
maxTransportingUnits: 1
transportUnitsCanUnloadUnits: if not self.isOverLiquid and self.isAtGroundHeight
transportUnitsKillOnDeath: false

exit_moveAwayAmount: 30
exit_dirOffset: 0

autoTriggerCooldownTime: 0.1s

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径

[decal_运输范围]
@copyFromSection: template_运输范围

[action_ground]
isLocked: if not self.energy(greaterThan=5)
isLockedMessage: 恢复中...
text: 掘地
description: -进入地底躲避攻击 \n -消耗能量 \n -不可攻击地面
buildSpeed: 1.6s
pos: 1
canPlayerCancel: false
alwaysSinglePress: true
whenBuilding_cannotMove: true
spawnEffectsOnQueue: CUSTOM:digGround*8
spawnEffects: CUSTOM:digGround*8, CUSTOM:裂痕, 土粒飞溅*4, 土粒飞溅2*4
playSoundAtUnit: 地裂.ogg:0.3

convertTo: 掘地虫[地底]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield

[hiddenAction_震地]
autoTrigger: if self.customTimer<2
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 2+

[graphics]
image: 掘地虫.png

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true

[animation_1]
onActions: idle, attack, move
pingPong: true
scale_start: 1
scale_end: 1.01
speed: 70

[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false


isFixedFiring: true

maxAttackRange: 9
shootDelay: 75



[turret_1]
x: 0
y: 0

turnSpeedAcceleration:1.0

projectile: 1

recoilOffset: 3
recoilOutTime: 5
recoilReturnTime: 30

[projectile_1]
tags= T-projectile
directDamage: 70
largeHitEffect: true
life: 50
instant: true

[projectile_2]
areaDamage: 15
areaRadius:	80
areaDamageNoFalloff: true
life: 50
instant: true
explodeEffect: CUSTOM:shockwave
spawnProjectilesOnExplode: 裂震(offsetDir=120, offsetRandomDir=30, offsetRandomXY=20), 裂震(offsetDir=240, offsetRandomDir=30, offsetRandomXY=20), 裂震(offsetRandomDir=30, offsetRandomXY=20)

[projectile_2+]
areaDamage: 15
areaRadius:	80
areaDamageNoFalloff: true
life: 50
instant: true
explodeEffect: CUSTOM:shockwave


[projectile_裂震]
tags= T-projectile
areaDamage:	20
areaRadius:	35
areaDamageNoFalloff: true
areaHitUnderwaterAlways: true
life: 4
speed: 2
turnSpeed: 0.5

lightColor: #9E8178
invisible: true

explodeEffect: CUSTOM:scoutTrail
explodeEffectOnShield: CUSTOM:scoutTrail

pushVelocity: -2
deflectionPower: -1
explodeOnEndOfLife: true
spawnProjectilesOnExplode: 裂震(recursionLimit=4, offsetRandomDir=15, yOffsetRelative=20)

[effect_digGround]
#priority:high
stripIndex:dust
life: 100
fadeOut: true
attachedToUnit: false
color: #FFFFFF
fadeInTime:5
scaleFrom: 3.0
scaleTo: 7.5
alpha: 0.9
drawUnderUnits:false
dirOffsetRandom:180
xSpeedRelativeRandom:0.3
ySpeedRelativeRandom:0.3
atmospheric: true

[effect_裂痕]
priority: veryhigh
alwayStartDirAtZero: true
life: 1000
fadeOut: true
attachedToUnit: false
image: scorch.png
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.8
hOffset: -2
drawUnderUnits: true
createWhenOverLiquid: false

[effect_土粒飞溅]
attachedToUnit: false
priority: verylow
life: 100
alpha: 0.9
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 3
scaleFrom: 2.5
scaleTo: 2.5
image: particle.png
color: #9D7565
spawnChance: 0.5
[effect_土粒飞溅2]
@copyFromSection: effect_土粒飞溅
color: #906857


[effect_shockwave]
stripIndex: shockwave_large
life: 35
scaleFrom: 0
scaleTo: 1.6
alpha: 0.7
color: #C26943
dirSpeedRandom: 3
drawUnderUnits: true


[effect_scoutTrail]
priority:low
stripIndex:dust

life: 50
fadeOut: true
attachedToUnit: false
color: #FFFFFF
fadeInTime:5
scaleFrom: 2.0
scaleTo: 5.0
alpha: 0.9
drawUnderUnits:false
xOffsetRelativeRandom:10
yOffsetRelativeRandom:10
ySpeedRelative:-0.1
xSpeedRelativeRandom:0.2

atmospheric: true

[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.6
moveAccelerationSpeed: 0.1
moveDecelerationSpeed: 0.1

maxTurnSpeed: 2.4
turnAcceleration: 0.5

[leg_1]
x:13
y:11
moveSpeed:3
moveWarmUp:1.5
rotateSpeed:50
heightSpeed:0.5
resetAngle:0.00000001
image_foot:小脚.png
dust_effect:true
holdDisMin:3
holdDisMax:3
estimatingPositionMultiplier:1
[leg_2]
x:-13
y:11
attach_x:0
attach_y:0
copyFrom:1
[leg_3]
x:13
y:-6
attach_x:0
attach_y:0
copyFrom:1
[leg_4]
x:-13
y:-6
attach_x:0
attach_y:0
copyFrom:1
