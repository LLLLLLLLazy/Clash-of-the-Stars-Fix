
[core]
name: 贝露天束模块[日]
displayText: 贝露天束模块
copyFrom: common_slot.ini

displayDescription: -激光射束模块 \n -以日月之射束攻击敌军 \n -日月轮换:在不同主模块领域中会切换日光灼烧塔或月影监察者的射束攻击 \n -在日月领域切换时释放大范围日&月塔喷发效果 \n -每1能源供应提供10攻击范围加成(范围上限:350, 基础:230) \n -附加的天束模块越多造价越高

price: 3000

energyMax: 6
energyRegen: -0.012
energyStartingPercentage: 0

autoTriggerCooldownTime: 0.13s
autoTriggerCooldownTime_allowDangerousHighCPU:true

tags: units, 贝露模块, 日月天束模块, 日月模块完成, 贝露中心单位

[action_权能升级]
textAddUnitName: ${section.convertTo}
descriptionAddFromUnit: ${section.convertTo}
descriptionAddUnitStats: ${section.convertTo}
isActive: if self.queueSize(empty=true)
buildSpeed: 300s
convertTo: 碎质合成
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 苍蓝能量=35
setUnitMemory: 属性[20]=0, 属性[19]=0

iconExtraImage: icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[hiddenAction_日月交替]
autoTrigger: if parent.tags(includes="月曜T1") or parent.tags(includes="月曜T2") or parent.tags(includes="月曜T3")
convertTo: 贝露天束模块[月]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
fireTurretXAtGround: explode
fireTurretXAtGround_withOffset: 0, 0
setUnitMemory: 属性[20]=0, 属性[19]=0


[hiddenAction_曜痕光透]
autoTrigger: if self.isAttacking and attacking.resource.曜痕>8
takeResources: 曜痕=0.1
takeResources_includeReference: attacking
takeResources_includeUnitsWithinRange_team: enemy
takeResources_includeUnitsWithinRange: 370
takeResources_discardCollected: true

[hiddenAction_曜痕状态给予]
autoTrigger: if self.isAttacking and attacking.resource.曜痕状态<1
takeResources: 曜痕状态=-0.2
takeResources_includeReference: attacking
takeResources_includeUnitsWithinRange_team: enemy
takeResources_includeUnitsWithinRange: 370
takeResources_discardCollected: true


[hiddenAction_日曜灼烧]
autoTrigger: if self.isAttacking and not self.tags(includes="日曜灼烧")
temporarilyAddTags: 日曜灼烧
resetCustomTimer: true

[hiddenAction_日曜灼烧停止]
autoTrigger: if not self.isAttacking and self.customTimer>0.2 and self.tags(includes="日曜灼烧")
temporarilyRemoveTags: 日曜灼烧

[resource_曜痕]
displayName: 曜痕

[resource_曜痕状态]
hidden: true


[hiddenAction_日耀T2]
autoTrigger: if parent.resource.日耀模块==2 and not self.tags(includes="日耀T2")
setUnitMemory: 属性[19]=0.5
temporarilyAddTags: 日耀T2
alsoTriggerAction: 属性变化

[resource_日耀模块]
displayName: 日耀模块

[global_resource_日耀]
displayName: 日耀
displayColor: #A0FF9500
priority: 0.3

[global_resource_月曜]
displayName: 月曜
displayColor: #A04060FF
priority: 0.3

[hiddenAction_月曜无效]
autoTrigger: true
setResourcesWithLogic: 月曜T1攻速=0.01, 月曜T2攻速=0.01


[action_reclaim]
description: -为另一种模块腾出空槽 \n -返还%{${core.price * 0.5} * parent.numberOfAttachedUnits(withTag="日月模块完成")}资金 \n -返还价值随数量变动
addResources: 0
addResourcesWithLogic: credits=${core.price * 0.5} * parent.numberOfAttachedUnits(withTag="日月模块完成")

[action_destroy]
description: -立即破坏此模块 \n -为另一种模块腾出空槽 \n -仅返还%{${core.price * 0.05} * parent.numberOfAttachedUnits(withTag="日月模块完成")}资金 \n -返还价值随数量变动
addResources: 0
addResourcesWithLogic: credits=${core.price * 0.05} * parent.numberOfAttachedUnits(withTag="日月模块完成")


[attack]
canAttack: true
canAttackFlyingUnits: if parent.tags(includes="日耀T1") or parent.tags(includes="日耀T2") or parent.tags(includes="日耀T3")
canAttackLandUnits: if parent.tags(includes="日耀T1") or parent.tags(includes="日耀T2") or parent.tags(includes="日耀T3")
canAttackUnderwaterUnits: false
maxAttackRange: 230
shootDelay: 8
aimOffsetSpread: 0
turretSize: 0

[turret_0]
x: 0
y: 50
canShoot: false
turnSpeed: 3

[turret_1.0]
x: 0
y: 0
attachedTo: 0
slave: true
shoot_flame: CUSTOM:projectileLight

projectile: 1.0
altProjectile: 1.1
altProjectileCondition: if attacking.hasResources(曜痕=1) and not attacking.hasResources(曜痕=2)
canAttackCondition: if not attacking.hasResources(曜痕=2)

[turret_1.2]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=1.9) and not attacking.hasResources(曜痕=4)
projectile: 1.2
altProjectile: 1.3
altProjectileCondition: if attacking.hasResources(曜痕=3) and not attacking.hasResources(曜痕=4)

[turret_1.4]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=3.9) and not attacking.hasResources(曜痕=6)
projectile: 1.4
altProjectile: 1.5
altProjectileCondition: if attacking.hasResources(曜痕=5) and not attacking.hasResources(曜痕=6)

[turret_1.6]
@copyFromSection: turret_1.0
canAttackCondition: if attacking.hasResources(曜痕=5.9)
projectile: 1.6

[hiddenAction_供应加成]
autoTrigger: if self.resource(type="能源供应", greaterThan=0) and memory.属性[20]!=min(self.resource.能源供应*10, 120)
#setUnitStats: maxAttackRange=250+min(self.resource.能源供应*25, 125)
setUnitMemory: 属性[20]=min(self.resource.能源供应*10, 120)
alsoTriggerAction: 属性变化

[hiddenAction_失去供应]
autoTrigger: if self.resource(type="能源供应", lessThan=1) and memory.属性[20]>0
#setUnitStats: maxAttackRange=250
setUnitMemory: 属性[20]=0
alsoTriggerAction: 属性变化


[projectile_1.0]
tags= T-projectile
life: 20
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 1.5
sweepOffsetFromTargetRadius:0.4
sweepSpeed:10
explodeEffect: CUSTOM:projectileLight
explodeEffectOnShield: CUSTOM:projectileLight
directDamage: 6
color: #FF8000

mutatorX_ifUnitWithoutTags: ◝(⑅•ᴗ•⑅)◜..°♡
mutatorX_addResourcesDirectHit: 曜痕=0.05

[projectile_1.1]
@copyFromSection:projectile_1.0
directDamage: 12
[projectile_1.2]
@copyFromSection:projectile_1.0
directDamage: 16
[projectile_1.3]
@copyFromSection:projectile_1.0
directDamage: 20
[projectile_1.4]
@copyFromSection:projectile_1.0
directDamage: 24
[projectile_1.5]
@copyFromSection:projectile_1.0
directDamage: 28
[projectile_1.6]
@copyFromSection:projectile_1.0
directDamage: 32
sweepOffsetFromTargetRadius:0.2
beamImageOffsetRate: 2
color: #FF2A00

[turret_explode]
x: 0
y: 0
canShoot: false
projectile: explode

[projectile_explode]
tags= T-projectile
life: 99
instant: true
targetGround: true
areaDamage: 400
areaRadius: 360
areaExpandTime: 40
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
deflectionPower: -1
lightColor: #42F8FF
lightSize: 1

pushForce: 1
pushVelocity: 5

explodeEffect: CUSTOM:shockwave*3, 大月*2
explodeEffectOnShield: CUSTOM:shockwave*3, 大月*2

[effect_shockwave]
image: 日月波.png
life: 30
fadeInTime: 2
scaleFrom: 0.4
scaleTo: 3.5
alpha: 0.6
#color: #FFD500
color: #42F8FF
dirSpeed: 10
dirSpeedRandom: 1.5
dirOffsetRandom: 180

[effect_大月]
image: 月.png
life: 40
scaleFrom: 1.3
scaleTo: 1.25
alpha: 1.0

[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: true
color: #E8773A
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[graphics]
image: 苍影日月塔.png




