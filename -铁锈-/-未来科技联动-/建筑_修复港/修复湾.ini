
[core]
name: 未来修复湾
class: CustomUnitMetadata
price: 1500, 量子碳=50
maxHp: 2500
mass: 4000
tags: units
displayText: 修复湾
displayDescription: -范围维修单位 \n -对墙4倍维修效果 \n -可储存三次维修能量 \n -没有建造能力

techLevel: 2

buildSpeed: 0.001
availableInDemo: false

canReclaimResources: true

#overrideAndReplace: repairBay

radius: 30
#displayRadius: 35

isBuilding:true
isBio: false

footprint: -1,-1,1,1
constructionFootprint:-1,-1,1,1

energyMax: 72
energyRegen: 0.1

[hiddenAction_1]
autoTrigger:if not self.hasFlag(id=1) and self.energy>=24
fireTurretXAtGround:1
fireTurretXAtGround_withOffset:0,0
addEnergy: -24
spawnEffects: 修复粒*20
takeResources: hp=-60
takeResources_includeUnitsWithinRange: 230
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources_discardCollected: true
takeResources_maxUnits: 999
alsoTriggerAction: 2

[hiddenAction_2]
takeResources: hp=-180
takeResources_includeUnitsWithinRange: 230
takeResources_includeUnitsWithinRange_team: allyNotOwn
takeResources_excludeUnitsWithoutTags: 墙
takeResources_discardCollected: true
takeResources_maxUnits: 999

[action_si]
text:关闭
displayType:action
buildSpeed:0s
addResources:unsetFlag=1
isVisible:if self.hasFlag(id=1)
iconImage:SHARED:icon_off.png
alwaysSinglePress:true

[action_wi]
text:开启
displayType:action
buildSpeed:0s
addResources:setFlag=1
isVisible:if not self.hasFlag(id=1)
iconImage:SHARED:icon_on.png
alwaysSinglePress:true

[hiddenAction_效果]
autoTrigger:true
spawnEffects:光

[effect_光]
life:40

stripIndex:shockwave
color:#00FF76

scaleFrom:0.6
scaleTo:1

yOffsetRelative:30
alpha:0.4
fadeInTime:10

[effect_修复粒]
priority: verylow
attachedToUnit: false
life: 100
lifeRandom: 30
image: 白粒.png
color: #00FF76
scaleFrom: 1
scaleTo: 2
hSpeed: 0.8
hSpeedRandom: 0.3
xOffsetRelativeRandom: 180
yOffsetRelativeRandom: 180
dirSpeedRandom: 1
drawUnderUnits: true
delayedStartTimerRandom: 30

[decal_绿]
onlyWhileActive: true
onlyWhileAlive: true
onlyOnNonPreview: true
onlyPlayersWithUnitControl: true
onlyWithZoomLevelOrMore: 0.7
alwaysStartDirAtZero: true
layer: beforeUI
#isVisible: if self.ammo==0

@define timer_2s: ((self.timeAlive() % 2) / 2)
alpha: 0.3+cos( ${timer_2s} * 360) * 0.4
yOffsetRelative:30
image:绿.png
teamColors: true
imageScale: 1

[graphics]

total_frames: 14
image: 修复港.png
image_wreak:  死.png
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:4
shadowOffsetY:1

imageScale:1.2

animation_idle_start: 1
animation_idle_end: 13
animation_idle_speed: 2
[attack]

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 1000


maxAttackRange: 230
shootDelay: 0

[turret_1]

x: 0
y: 0
invisible: true
#warmup:1
canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turnSpeedAcceleration: 0.08

[projectile_1]
tags= T-projectile
directDamage: 0
life: 70
speed: 7
frame: 11
areaDamage: -50
areaRadius: 230
areaDamageNoFalloff: true
friendlyFire:only-ignoreEnemy
#buildingDamageMultiplier: 10
explodeEffect:NONE
instant:true

shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0

mutatorX_ifUnitWithTags: 墙
mutatorX_areaDamageMultiplier: 4

mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0


[movement]
movementType:BUILDING
moveSpeed: 0

moveAccelerationSpeed: 0
moveDecelerationSpeed: 0

maxTurnSpeed: 0
turnAcceleration: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181


[ai]
useAsBuilder: true



[global_resource_量子碳]
hidden: false
displayName: 量子碳
displayColor: #00F8FF