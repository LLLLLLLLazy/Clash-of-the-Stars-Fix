
[core]
name: 贝露中空工厂
price: 3000
maxHp: 1300
mass: 9000
displayDescription:-构建贝露空军\n-空层建筑：可建造在地面阻挡之上
tags: units, 中空

#footprint used for collisions with units (left, up, right, down)
footprint: -1,-1,1,1

#used for placement, and placement of other buildings
constructionFootprint: -1,-1,1,1

techLevel: 1
buildSpeed: 0.0003
#availableInDemo: true

radius: 35
#displayRadius: 25
isBio: false
isBuilding: true

explodeTypeOnDeath: building

exit_x: 0
exit_y: 0
exit_heightOffset: 8
exit_moveAwayAmount: 0


canBuild_1_name: setRally
canBuild_1_pos:  0.1

autoTriggerCooldownTime: 1
autoTriggerCooldownTime_allowDangerousHighCPU:true

[placementRule_1]
#anyRuleInGroup:place
searchTags: 中空
searchTeam: own
searchDistance: 35
excludeIncompleteBuildings: false
excludeNonBuildings: true
minCount: 0
maxCount: 0
blocksPlacement: true
cannotPlaceMessage: [不能在此建造-与其他中空重叠]
checkEachTile: true

[canBuild_T1]
name: 解构者, 抑制剂, 椎碎, 信使, 「蓝鸽」礼花战机, 凤凰攻击机, 空间迁跃者, 闭幕式, 仙女灵火
pos:  1

[canBuild_喜庆战机]
name: 喜庆战机
pos:  1.1
price: 3000, 苍蓝能量=1


[action_upgrade]
convertTo: 贝露中空工厂T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  10000
text: 升级 - T2
description: -制造更多单位\n -首次被摧毁会在一段时间后重构 \n -生产速度+50%
descriptionAddUnitStats: ${section.convertTo}

displayType: upgrade
buildSpeed: 0.0004
pos: 0.2

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

resetCustomTimer: true


[hiddenAction_b]
autoTriggerOnEvent: queuedUnitFinished
spawnEffects: CUSTOM:curewave, CUSTOM:传送漩涡, CUSTOM:传送漩涡心, 扭曲传送


[hiddenAction_传送门开启]
autoTrigger: if self.queueSize > 0 and not self.hasFlag(id=2)
addResources: setFlag=2
spawnEffects: CUSTOM:蓝光, CUSTOM:蓝烁光, CUSTOM:门扩光, CUSTOM:门扩光2, CUSTOM:门扩波, CUSTOM:蓝扩波, CUSTOM:传送门展开, CUSTOM:扭曲波, CUSTOM:魔力旋转

[hiddenAction_传送门关闭]
autoTrigger: if self.queueSize <= 0 and self.hasFlag(id=2)
addResources: unsetFlag=2
setResourcesWithLogic: 传送门启动=0
spawnEffects: CUSTOM:门收光, CUSTOM:门收光2, CUSTOM:门收波, CUSTOM:蓝收波, CUSTOM:扭曲回波

[hiddenAction_传送门特效]
autoTrigger: if self.hasFlag(id=2)
spawnEffects: 传送门涡流

[hiddenAction_传送门启动计时]
autoTrigger: if self.hasFlag(id=2) and self.resource.传送门启动 < 35
addResources: 传送门启动=1

[resource_传送门启动]
displayName: 传送门启动

[hiddenAction_传送门特效束]
autoTrigger: if self.resource.传送门启动 >= 35
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 3
alsoTriggerAction: 传送门特效束2

[hiddenAction_传送门特效束2]
fireTurretXAtGround: 2
fireTurretXAtGround_withOffset: 0, 3

[effect_蓝光]
stripIndex: light_50
life: 60
scaleFrom: 0.7
scaleTo: 0.6
alpha: 2
color: #33E8E8
yOffsetAbsolute: -3
dirOffsetRandom: 180

[effect_蓝烁光]
@copyFromSection: effect_蓝光
life: 30
scaleFrom: 0.8
scaleTo: 0.8
alpha: 1.7
delayedStartTimer: 60

[effect_门扩光]
@copyFromSection: effect_蓝光
scaleFrom: 0
scaleTo: 1.5

[effect_门扩光2]
@copyFromSection: effect_蓝光
scaleFrom: 0
scaleTo: 0.66

[effect_门扩波]
@copyFromSection: effect_门扩光
stripIndex: shockwave
scaleFrom: 0
scaleTo: 0.65

[effect_蓝扩波]
@copyFromSection: effect_门扩波
scaleTo: 1
alpha: 1.4

[effect_传送门展开]
image: 苍蓝传送门.png
life: 60
fadeInTime: 60
scaleFrom: 0
scaleTo: 1
alpha: 0.6
dirSpeed: 1
yOffsetAbsolute: -3

[effect_传送门涡流]
priority: verylow
image: 涡流光球.png
life: 40
fadeInTime: 3
scaleFrom: 1.6
scaleTo: 0
alpha: 0.2
color: #33E8E8
dirSpeed: 1.5
dirOffset: -10
yOffsetAbsolute: -3

[effect_魔力旋转]
priority: high
image: 魔力凝聚.png
life: 70
fadeInTime: 60
color: #63e6e8
scaleFrom: 0.6
scaleTo: 0.2
alpha: 1.0
dirSpeed: 10
drawUnderUnits:false

[template_传送收回]
fadeInTime: 5
scaleTo: 0
life: 45
alpha: 0.8

[effect_门收光]
@copyFromSection: effect_门扩光, template_传送收回
scaleFrom: 1.2

[effect_门收光2]
@copyFromSection: effect_门扩光2, template_传送收回
scaleFrom: 0.66
alpha: 0.5

[effect_门收波]
@copyFromSection: effect_门扩波, template_传送收回
scaleFrom: 0.65

[effect_蓝收波]
@copyFromSection: effect_蓝扩波, template_传送收回
scaleFrom: 1
alpha: 0.3

[effect_displacement_ripples]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 60
fadeOut: true
fadeInTime: 2
scaleFrom: 1
scaleTo: 0
alpha: 0.3
drawUnderUnits: false
yOffsetAbsolute: -3

dirOffsetRandom: 180
dirSpeedRandom: 1

[effect_扭曲波]
@copyFromSection: effect_displacement_ripples
scaleFrom: 0
scaleTo: 0.4

[effect_扭曲回波]
@copyFromSection: effect_displacement_ripples
scaleFrom: 0.4
scaleTo: 0
life: 45
alpha: 0.2

[effect_扭曲传送]
@copyFromSection: effect_displacement_ripples
scaleFrom: 0
scaleTo: 1.5
life: 60
alpha: 0.1
alwayStartDirAtZero: true
dirSpeedRandom: 3



[effect_curewave]
priority: veryhigh
image: 白流环.png
life: 50
scaleFrom: 0.6
scaleTo: 0
alpha: 0.9
color: #33E8E8
dirSpeed: 10
alsoPlaySound: ROOT:/素材/电磁.ogg

[effect_传送漩涡]
priority: veryhigh
image: 魔力凝聚.png
life: 50
fadeInTime: 10
color: #63e6e8
scaleFrom: 0.6
scaleTo: 0
alpha: 0.6
dirSpeed: 10

[effect_传送漩涡心]
@copyFromSection: effect_传送漩涡
fadeInTime: 0
scaleFrom: 0.3
scaleTo: 0.3
alpha: 0.8


[graphics]
total_frames: 1
drawLayer: top
image:        空.png
image_back:    NONE
image_wreak:  NONE

#AUTO
image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1

[arm_1]
x: 10
y: 2
image_end: 苍蓝空工厂左.png
drawOverBody: true

[arm_2]
x: -10
y: 2
image_end: 苍蓝空工厂右.png
drawOverBody: true

[arm_3]
x: 0
y: 0
spinRate: 1
image_end: 苍蓝传送门.png
hidden: if self.resource.传送门启动 < 35
drawOverBody: true

[decal_arm1_shadow]
layer: shadow
image: SHADOW:苍蓝空工厂左.png
alpha: 0.5
hOffset: -8
alwaysStartHeightAtZero: true
basePositionFromLegEnd: arm_1

[decal_arm2_shadow]
@copyFromSection: decal_arm1_shadow
image: SHADOW:苍蓝空工厂右.png
basePositionFromLegEnd: arm_2

[animation_1]
onActions: queuedUnits
onActionsQueuedUnitPlayAt: 0
blendIn: 1s
blendOut: 1s
arm1_0s: {x: 0, dir: 0}
arm1_0.1s: {x: -1, dir: 29}
arm1_0.2s: {x: -2, dir: 62}
arm1_0.3s: {x: -3, dir: 100}
arm1_0.4s: {x: -4, dir: 139}
arm1_0.5s: {x: -5, dir: 180}
arm1_0.6s: {x: -6, dir: 221}
arm1_0.7s: {x: -7, dir: 260}
arm1_0.8s: {x: -8, dir: 298}
arm1_0.9s: {x: -9, dir: 331}
arm1_1.05s: {x: -10.5, dir: 365}
arm1_1.2s: {x: -10, dir: 360}
arm1_99s: {x: -10}

arm2_0s: {x: 0, dir: 0}
arm2_0.1s: {x: 1, dir: 29}
arm2_0.2s: {x: 2, dir: 62}
arm2_0.3s: {x: 3, dir: 100}
arm2_0.4s: {x: 4, dir: 139}
arm2_0.5s: {x: 5, dir: 180}
arm2_0.6s: {x: 6, dir: 221}
arm2_0.7s: {x: 7, dir: 260}
arm2_0.8s: {x: 8, dir: 298}
arm2_0.9s: {x: 9, dir: 331}
arm2_1.05s: {x: 10.5, dir: 365}
arm2_1.2s: {x: 10, dir: 360}
arm2_99s: {x: 10}


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false
maxAttackRange: 0

[turret_1]
x: -20
y: 1
projectile: 1

[turret_2]
x: 20
y: 1
projectile: 1

[projectile_1]
life: 10

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true

beamImage: 激光.png
beamImageEnd: SHARED:beam1_start.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2
color: #00FFEE

explodeEffect: NONE
explodeEffectOnShield: NONE

sweepOffset: 0
sweepSpeed: 0

directDamage: 0

[movement]
movementType: AIR
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

targetHeight: 2
startingHeightOffset: 0


[ai]

buildPriority: 0.8

noneInBaseExtraPriority: 0.05

noneGlobalExtraPriority: 0.15

ai_upgradePriority:0.36

maxEachBase:1





