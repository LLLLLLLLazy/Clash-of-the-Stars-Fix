
[core]
name: 漩涡
displayDescription: "噼里啪啦 惨绝人寰"
price: 50000
maxHp: 3000
mass: 99999
armour: 6
armourMinDamageToKeep: 6
tags: units, 星空舰载机
borrowResourcesWhileAlive: 星空舰载机=1
selfRegenRate:0.2

techLevel: 1
buildSpeed: 0.001

fogOfWarSightRange:33

canNotBeGivenOrdersByPlayer: true
transportSlotsNeeded: 99

radius: 18
softCollisionOnAll: 20

energyMax: 10
energyRegen: 10

autoTriggerCooldownTime: 0.11s

effectOnDeath: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:sparks*5, CUSTOM:sparks2*5
numBitsOnDeath: 0

[hiddenAction_$运输]
@copyFrom_skipThisSection:true

[hiddenAction_move]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 9999s
addWaypoint_target_nearestUnit_tagged: 星空
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 3000
autoTrigger: if not self.hasActiveWaypoint(type='guard')

[hiddenAction_wander]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInTeam(withinRange=1000, lessThan=1, withTag='星空')
resetCustomTimer:true
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:200,200
addWaypoint_target_mapMustBeReachable:true
addWaypoint_maxTime: 3s

[hiddenAction_invisible]
autoTrigger: if not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=350, withTag='units') and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=800) and numberOfUnitsInTeam(greaterThan=0, withTag='星空')
convertTo: 漩涡[隐]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
spawnEffects: CUSTOM:漩涡2*10, CUSTOM:大hitLightFlash2

[effect_白闪星]
createWhenZoomedOut: false
priority:low
image:白闪星.png
life: 60
fadeOut: true
attachedToUnit: false
color: #2BD9B0
fadeInTime:5
scaleFrom:1.5
scaleTo:0.5
alpha: 2
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_速白闪星]
@copyFromSection:effect_白闪星
life: 30

[hiddenAction_脱离卡死]
autoTrigger: if not self.isInMap
fireTurretXAtGround: 2
fireTurretXAtGround_withTarget: nearestUnit(withTag="星空", relation="own")
fireTurretXAtGround_withProjectile: 闪移

[projectile_闪移]
areaDamage:	100
areaRadius:	44
life: 5
speed: 10
teleportSource: true
explodeOnEndOfLife: true
explodeEffect: CUSTOM:光波, CUSTOM:大hitLightFlash
areaHitAirAndLandAtSameTime: true

[hiddenAction_消散]
autoTrigger: if self.timeAlive(laterThanSeconds=179)
spawnEffects: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:白幕
deleteSelf: true
[effect_白幕]
priority: veryhigh
fadeOut: false
image: 罩.png
life: 10
scaleFrom: 20
scaleTo: 0
alpha: 0.75
dirSpeed: -1
color: #2BD9B0
[effect_外光]
priority: veryhigh
image: SHARED:light_50.png
life: 85
fadeOut: true
attachedToUnit: false
color: #2BD9B0
scaleFrom: 2.4
scaleTo: 2.4
alpha: 0.6
drawUnderUnits:false
[effect_中光]
priority: veryhigh
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: true
color: #2BD9B0
scaleFrom: 0.5
scaleTo: 0.1
alpha: 2
[effect_光波]
priority: veryhigh
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2
color: #2BD9B0
fadeInTime: 3
alpha: 2

[graphics]
total_frames: 1
scaleImagesTo: 41
image:        b漩涡.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:白闪星
movementEffectRate: 4


[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

#isFixedFiring: true
meleeEngangementDistance: 700

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 500
shootDelay: 6
aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
projectile:1
#shoot_sound:shot_04.wav
#shoot_sound_vol:0.05
shoot_flame: CUSTOM:白闪星
#shoot_light: #ffffff
[turret_2]
x: 0
y: 0
projectile:2
delay:8s

[projectile_1]
directDamage: 20
areaDamage: 30
areaRadius: 50
areaRadiusFromEdge: true
life: 500
speed: 8
targetSpeed: 15
targetSpeedAcceleration: 0.07
image: lighting_charge2.png
drawSize: 0.3
drawUnderUnits: true

trailEffect: CUSTOM:速白闪星
trailEffectRate:2
explodeEffect: CUSTOM:projectilePassThough, smallExplosion, CUSTOM:hitLightFlash, CUSTOM:漩涡
explodeEffectOnShield: CUSTOM:projectilePassThough, shockwave, CUSTOM:hitLightFlash, CUSTOM:漩涡
effectOnCreate: CUSTOM:projectileLight

pushForce: 1
pushVelocity: -1

[projectile_2]
areaDamage:50
areaRadius:50
areaRadiusFromEdge: true
life:10
speed:0
invisible:true
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
deflectionPower:-1
pushForce: 1
pushVelocity: -1
autoTargetingOnDeadTarget:true
autoTargetingOnDeadTargetRange:400
explodeEffect: CUSTOM:大hitLightFlash, CUSTOM:漩涡
explodeEffectOnShield: CUSTOM:大hitLightFlash, CUSTOM:漩涡
spawnProjectilesOnExplode: 1(recursionLimit=40), 2(recursionLimit=30)

[effect_漩涡]
priority:veryhigh
image: 旋波.png
life: 80
fadeOut: true
attachedToUnit: true
scaleFrom: 1
scaleTo: 0.05
alpha: 0.8
drawUnderUnits:false
atmospheric:true
dirOffsetRandom:180
color: #2BD9B0

[effect_漩涡2]
@copyFromSection:effect_漩涡
life: 40
delayedStartTimerRandom: 20

[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #2BD9B0
fadeInTime:2
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.6
dirSpeedRandom:3
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #2BD9B0

scaleFrom: 1.8
scaleTo: 1.2
alpha: 0.6
drawUnderUnits:false
[effect_大hitLightFlash]
@copyFromSection:effect_hitLightFlash
scaleTo: 1.8
[effect_大hitLightFlash2]
@copyFromSection:effect_大hitLightFlash
life: 14
attachedToUnit: true

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #2BD9B0
scaleFrom: 0.8
scaleTo: 0.3
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #2BD9B0
scaleFrom: 1.5
scaleTo: 1.5

[effect_sparks2]
@copyFromSection:effect_sparks
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
ySpeedRelative:2

[movement]
movementType: AIR
moveSpeed: 5
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.0

maxTurnSpeed: 6
turnAcceleration: 0.01

targetHeight: 35

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0




[global_resource_星空舰载机]
hidden: true
displayName: 星空舰载机
displayColor: #ffffff
priority: 1