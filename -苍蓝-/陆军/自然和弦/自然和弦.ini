
[core]
name: 自然和弦
displayText: 自然和弦
displayDescription: -如同轻风拂过 \n -释放魔力飞矢 \n -攻击地面单位 \n -可在水面上行动 \n -范围内有磐岩坦克时HP+20

class: CustomUnitMetadata
price: 500
maxHp: 170
mass: 2000
tags: units, 转向攻击

techLevel: 1
buildSpeed: 6.2s

radius: 10
displayRadius: 12

isBio: false
softCollisionOnAll: 1

[hiddenAction_磐岩强化]
autoTrigger: if numberOfUnitsInTeam(withTag='磐岩坦克', withinRange=160)>0 and not self.tags(includes='磐岩强化')
setUnitMemory: 属性[14]=20
alsoTriggerAction: 属性变化
temporarilyAddTags: 磐岩强化

[hiddenAction_磐岩强化结束]
autoTrigger: if numberOfUnitsInTeam(withTag='磐岩坦克', withinRange=160)<1 and self.tags(includes='磐岩强化')
setUnitMemory: 属性[14]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 磐岩强化


[hiddenAction_magic]
autoTrigger: true
spawnEffects: 微量魔力流逝*3

[effect_微量魔力流逝]
priority: verylow
image: SHARED:spark.png
life: 80
fadeOut: true
fadeInTime:6
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.0
scaleTo: 1.0
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3

[graphics]
total_frames: 1
image:        自然和弦.png
image_wreak:  自然和弦残骸.png
image_turret: NONE

image_shadow: AUTO

splastEffect: true

lock_body_rotation_with_main_turret: true

[decal_和弦]
isVisible: if numberOfUnitsInTeam(withTag='磐岩坦克', withinRange=160)>0
onlyWithZoomLevelOrMore: 0.5
onlyWhenSelectedByAnyPlayer: true
onlyTeam: ally
layer: beforeUI
color: #63e6e8
alpha: 0.1
basePosition: self
drawLineTo: nearestUnit(withinRange=160, withTag='磐岩坦克', relation='own')

[attack]
turretRotateWithBody: false

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

maxAttackRange: 160
shootDelay: 20
isFixedFiring: false


[turret_1]
invisible: true
x: 0
y: 0
idleDir:0

projectile: 1
size: 0
turnSpeed: 4
turnSpeedAcceleration: 0.2

warmup: 7
warmupStartEffect: 魔力凝聚

shoot_sound:Cancel3.ogg
shoot_sound_vol:0.1
shoot_flame: 魔力迸发*2

recoilOffset: -1
recoilOutTime: 4
recoilReturnTime: 10

[projectile_1]
tags= T-projectile
life: 50
speed: 10

image: 弩箭.png
drawSize: 0.7

directDamage: 35

trailEffect: 魔力流逝
trailEffectRate: 4

explodeEffect: hitLightFlash*1, 魔力消散*3
explodeEffectOnShield: hitLightFlash*2, 魔力消散*2


[effect_魔力凝聚]
priority:high
image: 魔力凝聚.png
life: 35
fadeOut: true
fadeInTime:7
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.1
scaleTo: 0.1
alpha: 1.0
dirSpeed: 8
drawUnderUnits:false

[effect_魔力迸发]
priority: low
image: SHARED:spark.png
life: 80
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.2
ySpeedRelative: 0.4
xSpeedRelativeRandom: 1.2
ySpeedRelativeRandom: 1.2

[effect_魔力流逝]
priority: verylow
image: SHARED:spark.png
life: 80
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.2
ySpeedRelative: -0.2
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5

[effect_魔力消散]
priority: verylow
image: SHARED:spark.png
life: 80
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.5
scaleTo: 1.5
hSpeed: 0.2
ySpeedRelative: 1.8
xSpeedRelativeRandom: 0.4
ySpeedRelativeRandom: 0.4

[effect_hitLightFlash]
priority:low
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.8
drawUnderUnits:false

[movement]
movementType: HOVER
moveSpeed: 1.3
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.09

targetHeight: 4
targetHeightDrift: 1.5

heightChangeRate: 1000

maxTurnSpeed: 6
turnAcceleration: 0.2

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181



