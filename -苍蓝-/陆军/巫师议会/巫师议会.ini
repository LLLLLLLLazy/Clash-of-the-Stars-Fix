
[core]
name: 巫师议会
displayDescription: -被赋予生命概念的魔法屋 \n -刻印奥术飞弹 \n -状态危急时自动开启防护盾 \n -链导魔弹:击杀目标后追加攻击
class: CustomUnitMetadata

price: 65000, 苍蓝能量=1
maxHp: 8000
mass: 80000
tags: units

shieldRegen: 0

techLevel: 2
buildSpeed: 0.00016
availableInDemo: false

fogOfWarSightRange: 22

radius: 45
shieldRenderRadius:	50
#displayRadius: 11

isBio: false
softCollisionOnAll: 10

explodeTypeOnDeath: largeUnit

selfRegenRate: 0.1

energyMax: 3
energyRegen: 0.0167

transportSlotsNeeded: 7

[action_Interlocking]
isActive: false
requireConditional: if self.isEnergyFull()
autoTriggerOnEvent: killedAnyUnit
text: 链导魔弹
description: -击杀目标后追加攻击 \n CD:3s
pos: 0
displayType: infoOnly
buildSpeed: 3s
addResources: energy=-3
addActionCooldownTime: 3s
spawnUnits: 链导魔弹

[action_魔力屏障]
isVisible: true
isActive: false
text: 魔力屏障
description: -血量不足50%时获得血量上限50%的护盾 \n -血量完全回复后刷新
pos: 0
displayType: infoOnly
buildSpeed: 0s

[hiddenAction_shield]
autoTrigger: if self.hp<self.maxHp*0.5 and not self.hasFlag(id=1)
addResources: setFlag=1
resourceAmount: shield
resourceAmount_setValue: 8000
setUnitMemory: 属性[15]=4000
alsoTriggerAction: 属性变化
spawnEffects: CUSTOM:arcane, CUSTOM:purple

[hiddenAction_shieldRecover]
autoTrigger: if self.hp(full=true) and self.hasFlag(id=1)
addResources: unsetFlag=1
resourceAmount: shield
resourceAmount_setValue: 0
setUnitMemory: 属性[15]=0
alsoTriggerAction: 属性变化

[effect_arcane]
image: arcane_charge.png
life: 50
fadeOut: true
attachedToUnit: true
scaleFrom: 10
scaleTo: 8
alpha: 0.6
drawUnderUnits:false

[effect_purple]
image: purple_shield.png
life: 50
fadeOut: true
attachedToUnit: true
scaleFrom: 2.0
scaleTo: 1.5
alpha: 0.9
drawUnderUnits:false

[hiddenAction_brilliance]
autoTrigger: true
spawnEffects:CUSTOM:brilliance*10

[effect_brilliance]
priority: verylow
attachedToUnit: false
fadeInTime: 10
life: 100
lifeRandom: 20
xOffsetRelativeRandom:40
yOffsetRelativeRandom:40
xSpeedRelativeRandom: 0.3
ySpeedRelativeRandom: 0.3
hSpeed: 0.4
image: SHARED:spark.png
color: #7900F1

[animation_idle]
onActions : idle, move

arm1_0s:{alpha:0.3}
arm1_1s:{alpha:0.4}
arm1_2s:{alpha:0.5}
arm1_4s:{alpha:0.4}
arm1_5s:{alpha:0.3}

KeyframeTimeScale: 0.3

[arm_1]
x: 0
y: 0

image_end: 狂暴法术.png

drawOverBody: true

[action_blink]
fireTurretXAtGround: blink
fireTurretXAtGround_withProjectile: blink
fireTurretXAtGround_onlyOverPassableTileOf: OVER_CLIFF
whenBuilding_cannotMove: true

text: Blink
description: -天送之术
displayType: action
buildSpeed: 2s
pos: 0.1

highPriorityQueue: true
onlyOneUnitAtATime: true

iconImage: SHARED:icon_attack_point.png

allowMultipleInQueue: false
addActionCooldownTime: 30s

[turret_blink]
x: 0
y: 0
height: 10000
canShoot:false
invisible: true
size: 1
shoot_sound:plasma_fire
shoot_sound_vol:1.0
turnSpeed: 40
limitingRange: 500

[projectile_blink]
tags= T-projectile
teleportSource: true
laserEffect: true
instant: true
color: #791AFF
directDamage: 0
life: 60
#targetGround: true
deflectionPower:-1
shouldRevealFog:true
explodeEffect: CUSTOM:blinkFlash,CUSTOM:blinkGlow, CUSTOM:blinkChargeOut_displacement, CUSTOM:天送之术
effectOnCreate: CUSTOM:blinkFlash,CUSTOM:blinkGlow, CUSTOM:blinkEnter_displacement


[effect_blinkFlash]
priority:high
image: SHARED:light_50.png
life: 78
fadeOut: true
attachedToUnit: false
color: #791AFF
scaleFrom: 3.8
scaleTo: 1.0
alpha: 0.8
drawUnderUnits:false


[effect_blinkGlow]
priority:high
image: SHARED:light_50.png
life: 148
fadeOut: true
attachedToUnit: false
color: #791AFF
scaleFrom: 2.8
scaleTo: 5.0
alpha: 0.5
drawUnderUnits:false

[effect_blinkChargeOut_displacement]
#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 80
fadeOut: true
fadeInTime: 5

attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.0
scaleTo: 4.0
alpha: 0.3
drawUnderUnits:false

alwayStartDirAtZero: true

[effect_blinkEnter_displacement]

#displacement type ignored if postprocessing is not enabled
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 40
fadeOut: true
fadeInTime: 20

attachedToUnit: false
color: #FFFFFF
scaleFrom: 1.3
scaleTo: 0.5
alpha: 0.7
drawUnderUnits:false

#dirOffsetRandom: 180
#dirSpeed: 1
#delayedStartTimer: 0
alwayStartDirAtZero: true

[effect_天送之术]
priority:veryhigh
image: 五芒星阵.png
life: 100
attachedToUnit: false
color: #791AFF
scaleFrom: 2.0
scaleTo: 1.7
dirSpeed: 1

drawUnderUnits:true



[graphics]
total_frames: 1

imageScale: 1.5

image:      巫师议会.png
image_wreak:  巫师议会残骸.png
image_turret: NONE
image_shield: purple_shield.png

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 0

maxAttackRange: 260
shootDelay: 47

turretMultiTargeting: true
turretRotateWithBody: true

[turret_1]
x: 0
y: 0

turnSpeed: 0

canShoot: false

[turret_2]
x: 0
y: 35
attachedTo: 1

shoot_sound: plasma_fire
shoot_sound_vol: 0.1

projectile: 1

#limitingAngle:120
#idleSweepAngle:120
canAttackMaxAngle: 360

[turret_3]
x: -35
y: 0
attachedTo: 1
idleDir:-90

linkDelayWithTurret: 2
warmup:10

shoot_sound: plasma_fire
shoot_sound_vol: 0.1

projectile: 1

#limitingAngle:120
#idleSweepAngle:120
canAttackMaxAngle: 360

[turret_4]
x: 35
y: 0
attachedTo: 1
idleDir:90

linkDelayWithTurret: 2
warmup:20

shoot_sound: plasma_fire
shoot_sound_vol: 0.1

projectile: 1

#limitingAngle:120
#idleSweepAngle:120
canAttackMaxAngle: 360

[turret_5]
x: 0
y: -35
attachedTo: 1
idleDir:180

linkDelayWithTurret: 2
warmup:30

shoot_sound: plasma_fire
shoot_sound_vol: 0.1

projectile: 1

#limitingAngle:120
#idleSweepAngle:120
canAttackMaxAngle: 360

[projectile_1]
tags= T-projectile
directDamage: 125
life: 80
speed: 0.1
targetSpeed: 15
targetSpeedAcceleration: 0.5

turnSpeed: 6.5
turnSpeedWhenNear: 25

drawType:2
frame:4
drawSize: 1
color: #AC70FF
trailEffect: CUSTOM:奥术飞弹projectileTrail, CUSTOM:奥术飞弹projectileTrailParticle
trailEffectRate: 1

wobbleAmplitude: 1.0
wobbleFrequency: 0.3s

autoTargetingOnDeadTarget: true

explodeEffect: CUSTOM:奥术飞弹projectilePassThough, CUSTOM:奥术飞弹explodeSmall, CUSTOM:奥术飞弹hitLightFlash, CUSTOM:奥术飞弹lightSparks*2, CUSTOM:奥术飞弹lightSpot*3
explodeEffectOnShield: CUSTOM:奥术飞弹hitLightFlash
effectOnCreate: CUSTOM:奥术飞弹projectileLight, CUSTOM:奥术飞弹lightSlowFade*2, CUSTOM:奥术飞弹阵

spawnProjectilesOnEndOfLife: 1A

[projectile_1A]
@copyFromSection: projectile_1
spawnProjectilesOnEndOfLife: NONE
turnSpeed: 30

[leg_1]
x: -30
y: 30
attach_x: 0
attach_y: 0
moveSpeed: 2.4
moveWarmUp:0.05s

rotateSpeed: 7

heightSpeed: 0.5
resetAngle:25

dust_effect: true

image_leg:  议会腿.png
image_foot: 议会脚.png

holdDisMin: 22
holdDisMax: 52
endDirOffset:45

[leg_2]
x: 30
y: 30
attach_x: 0
attach_y: 0
copyFrom: 1
endDirOffset:-45

[leg_3]
x: -30
y: -30
attach_x: 0
attach_y: 0
copyFrom: 1
endDirOffset:-45

[leg_4]
x: 30
y: -30
attach_x: 0
attach_y: 0
copyFrom: 1
endDirOffset:45



[movement]
movementType: OVER_CLIFF
moveSpeed: 0.5
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 1.5
turnAcceleration: 0.3

moveSlidingMode :false
moveIgnoringBody:true

reverseSpeedPercentage:1


#——————————






[effect_奥术飞弹阵]
priority:veryhigh
image: 五芒星.png
life: 40
fadeInTime: 5
attachedToUnit: false
color: #791AFF
scaleFrom: 1.0
scaleTo: 0.7
dirSpeed: 2

drawUnderUnits:false

[effect_奥术飞弹lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #791AFF
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.8
drawUnderUnits:true
xOffsetRelativeRandom: 20
yOffsetRelativeRandom: 20
ySpeedRelative: 0.6
ySpeedRelativeRandom: 0.2
liveAfterAttachedDies: true


[effect_奥术飞弹projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #791AFF
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1

[effect_奥术飞弹projectileTrailParticle]
priority: low
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #791AFF
fadeInTime: 2
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.7
drawUnderUnits: true
dirSpeedRandom: 5
xOffsetRelativeRandom: 20
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2
spawnChance: 0.8


[effect_奥术飞弹projectileLight]
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #791AFF
fadeInTime: 2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.5
drawUnderUnits:false
liveAfterAttachedDies: false


[effect_奥术飞弹hitLightFlash]
priority:veryhigh
image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #791AFF
scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_奥术飞弹lightSparks]
priority: low
attachedToUnit: false
life: 60
xSpeedRelativeRandom: 2
ySpeedRelativeRandom: 2
hSpeed: 1
color: #791AFF
scaleFrom: 0.3
scaleTo: 0.3
alpha: 0.8
image: SHARED:light_50.png

dirSpeedRandom: 3
delayedStartTimerRandom: 6

[effect_奥术飞弹lightSpot]
priority: low
image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: false
color: #791AFF
scaleFrom: 1
scaleTo: 0
alpha: 1.2
fadeInTime: 20
delayedStartTimerRandom: 10
xOffsetRelativeRandom: 20
yOffsetRelativeRandom: 20
dirOffsetRandom: 180


[effect_奥术飞弹explodeSmall]
priority:veryhigh
color: #791AFF
life: 25
attachedToUnit: true
image: 白爆.png
scaleFrom: 1
scaleTo: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false

[effect_奥术飞弹projectilePassThough]
priority:veryhigh
frameIndex: 4
stripIndex: projectiles2
life: 40
fadeOut: true
attachedToUnit: false
color: #8859C9
scaleFrom: 1
scaleTo: 0.8
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true






