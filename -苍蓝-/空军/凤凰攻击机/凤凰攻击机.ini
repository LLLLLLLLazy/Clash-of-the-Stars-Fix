
[core]
name: 凤凰攻击机
displayText: 凤凰攻击机
displayDescription: [震雷离火]\n -带有防护盾\n -两挺对地机枪\n -喷射火焰，对地毁灭性打击\n -发射雷蛇对地对空\n -可运输两个单位\n -高速

class: CustomUnitMetadata
price: 3000
maxHp: 600
mass: 9000
tags: units, Phoenix, 转向攻击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: Phoenix

maxShield: 10
shieldRegen: 0.2

energyMax: 30
energyRegen: 0.05

techLevel: 2
buildSpeed: 21.7s

radius: 20
isBio: false
softCollisionOnAll: 12

transportSlotsNeeded: 2
maxTransportingUnits: 2
transportUnitsUnloadDelayBetweenEachUnit: 1s

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径

[decal_运输范围]
@copyFromSection: template_运输范围

[action_upgrade]
isVisible: if not self.hasFlag(id=1)
isLocked: if not numberOfUnitsInTeam(greaterThan=0, withTag='Pigeon') and not numberOfUnitsInAllyTeam(greaterThan=0, withTag='Pigeon')
isLockedMessage: 需要礼花战机在场
convertTo: 凤鸽组合攻击机
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  8000, 苍蓝能量=1
id: 升级
text: 升级 - 凤鸽组合攻击机
description: -极致的输出 \n 双 鸟 合 璧
descriptionAddUnitStats: ${section.convertTo}
displayType: upgrade
buildSpeed: 83.3s
addResources: setFlag=1
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

[action_upgrade2]
@copyFromSection: action_upgrade
isVisible: if self.hasFlag(id=1)
isLocked: false
price:  900
id: 涅槃
text: 涅槃 - 凤鸽组合攻击机
description: -再次归来
buildSpeed: 8.3s


[action_转换]
isVisible: false
convertTo: 凤凰攻击机2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
autoTrigger: if self.energy(lessThan=1)
addResources: energy=30


[graphics]
total_frames: 2

image:        凤凰攻击机.png
image_wreak:  凤凰攻击机残骸.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 6

animation_moving_start: 1
animation_moving_end: 1
animation_moving_speed: 6

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

lock_body_rotation_with_main_turret: true

movementEffect: CUSTOM:凤舞
movementEffectRate: 1

[effect_凤舞]
createWhenZoomedOut: false
priority:low
image: 凤舞.png
life: 30
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1
scaleTo: 1
alpha: 0.3
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[attack]
turretRotateWithBody: true

canAttack: true
canAttackFlyingUnits: if self.flying
canAttackLandUnits:   if self.flying
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 4
maxAttackRange: 180
shootDelay: 30

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_2.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_1]
invisible: true
canShoot: false
x: 0
y: 0

[turret_2]
canShoot: true
x: 0
y: 0
barrelY: 8
barrelX: -12
attachedTo: 1

shoot_sound:firing4
shoot_sound_vol:0.2

canAttackFlyingUnits: false
canAttackLandUnits:   if self.queueSize(empty=true)
#limitingMinRange: 50

warmup: 3.25s
warmupCallDownRate: 2
warmupNoReset: true
warmupShootDelayTransfer: 22

energyUsage: 1

projectile:1

[turret_3]
x: 0
y: 0
barrelY: 8
barrelX: 12
copyFrom: 2

projectile:1

[turret_4]
x: 0
y: 0
barrelY: 15
attachedTo: 1

canShoot: true
warmup: 1.2s
delay: 0.8s

shoot_sound: lighting_burst
shoot_sound_vol: 0.3

canAttackFlyingUnits: true
canAttackLandUnits:   true

limitingRange: 155

projectile:2

[projectile_1]
tags= T-projectile
directDamage: 10
life: 120
speed: 5
frame: 5
flameWeapon: true

[projectile_2]
tags= T-projectile
directDamage: 60
life: 60
instant: false
lightingEffect: true

deflectionPower: -1

shieldDefectionMultiplier: 0.1
buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*10
explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false


[effect_lightningShock]
life: 60


hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

attachedToUnit: true


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5



[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow


[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: AIR
moveSpeed: 2.0
moveAccelerationSpeed: 0.04
moveDecelerationSpeed: 0.05
slowDeathFall: true
landOnGround: onlyIdle
targetHeight: 25
joinsGroupFormations: true

maxTurnSpeed: 2.1
turnAcceleration: 0.2

moveSlidingMode :true
moveIgnoringBody:true

[ai]
useAsTransport: false
