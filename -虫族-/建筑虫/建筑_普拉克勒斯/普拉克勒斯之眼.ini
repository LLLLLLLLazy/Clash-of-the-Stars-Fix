
[core]
name: 普拉克勒斯之眼
displayDescription: -监视战场 \n -将地脉能量传输给天穹之上的伟大存在 \n -当资源低于腐蚀时会进入沉寂状态

class: CustomUnitMetadata

price: 0
maxHp: 100
mass: 10000
tags: 繁荣之眼, 明亮繁荣之眼

maxShield: 100
shieldRegen: 100
shieldDisplayOnlyDeflection: true

techLevel: 1
buildSpeed: 0.005
availableInDemo: false

fogOfWarSightRange: 22

generation_credits: -45

radius: 8
softCollisionOnAll: 8
shieldRenderRadius: 5

isBug: true
isBio: true

selfRegenRate: 100

isUnrepairableUnit: true
canNotBeDirectlyAttacked: true

@memory 坐标: unit

[hiddenAction_created]
autoTriggerOnEvent: completeAndActive
spawnEffects: CUSTOM:displacement
addResources: setFlag=0

[hiddenAction_已移动]
autoTrigger: if self.hasActiveWaypoint and self.hasFlag(id=0)
addResources: unsetFlag=0

[hiddenAction_调遣提示]
autoTrigger: if self.timeAlive>10 and self.hasFlag(id=0)
showQuickWarLogToPlayer: 普拉克勒斯之眼仍在母巢待命，请及时调遣
addResources: unsetFlag=0


[hiddenAction_沉寂]
autoTrigger: if self.resource.credits<self.resource.腐蚀
convertTo: 普拉克勒斯之眼[沉寂]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}



[effect_displacement]
drawType: displacement

image: SHARED:shockwave_normal_128.png
life: 80
fadeOut: true
fadeInTime: 5

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.1
scaleTo: 1.5
alpha: 0.5
drawUnderUnits:false

[hiddenAction_eyelid]
autoTrigger: true
spawnEffects:CUSTOM:eyelid*3

[effect_eyelid]
priority: verylow
stripIndex: effects
frameIndex: 0

life: 150
fadeOut: true
#attachedToUnit: false
#image: 毒雾.png
color: #AEFF00
fadeInTime: 20
scaleFrom: 0.5
scaleTo: 1
alpha: 0.3
teamColorRatio: 1
drawUnderUnits:false
#ySpeedRelative:-1
#atmospheric:true
showInFog: true

dirOffsetRandom:180

xOffsetRelativeRandom:3
yOffsetRelativeRandom:3

xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2

[action_锚定位置]
isVisible: if memory.坐标==null
text: 锚定位置
description: -当没有其他移动命令时持续接近锚定位置
buildSpeed: 0s
pos: 1
iconImage: icon_off.png
isGuiBlinking: if memory.坐标!=null
setUnitMemory: 坐标=thisActionTarget
fireTurretXAtGround: skill
fireTurretXAtGround_count: 0
highPriorityQueue: true
allowMultipleInQueue: false
onlyOneUnitAtATime: true
isAlsoViewableByAllies: true

[action_锚定位置关]
@copyFromSection: action_锚定位置
isVisible: if memory.坐标!=null
setUnitMemory: 坐标=null
iconImage: icon_on.png
fireTurretXAtGround: NONE
fireTurretXAtGround_count: IGNORE
onlyOneUnitAtATime: false

[hiddenAction_接近坐标]
requireConditional: if memory.坐标!=null
autoTrigger: if memory.坐标!=null and distanceBetween(self, memory.坐标)>5 and not self.hasActiveWaypoint
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_target_fromReference: memory.坐标

[decal_锚定线]
isVisible: if memory.坐标!=null
onlyWhenSelectedByAnyPlayer: true
onlyTeam: ally
layer: beforeUI
color: #00FFAC
alpha: 0.8
basePosition: self
drawLineTo: memory.坐标

#[action_reclaim]
#autoTrigger: if self.resource.credits < 20
#text: 离开
#description: -祂睡下了…
#displayType: action
#pos: 0
#deleteSelf: true
#allowMultipleInQueue: false

[graphics]
image: 大空.png
image_shield: green_bubble.png

[decal_1]
onlyWhileAlive: true
layer: onTop
image: 普拉克勒斯之眼.png
imageScale: 1.4
alpha: 0.5
teamColors: true
alwaysStartDirAtZero: true
basePosition: getOffsetRelative(y=min(distanceBetween(self, activeWaypointTarget), 1), dirOffset=directionBetween(self, activeWaypointTarget)-self.dir)

[decal_2]
onlyWhileAlive: true
layer: onTop
image: green_bubble.png
imageScale: 0.5
alpha: 0.5
teamColors: true


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: AIR
moveSpeed: 2
moveAccelerationSpeed: 0.03
moveDecelerationSpeed: 0.03

targetHeight: 30

reverseSpeedPercentage:0

maxTurnSpeed: 3.7
turnAcceleration: 0.3

moveSlidingMode :true
moveIgnoringBody:true