[core]
name: 闪电拦截机
displayText: 闪电拦截机
class: CustomUnitMetadata
price: 8000, 苍蓝能量=1
maxHp: 1000
maxShield: 100
shieldRegen: 2
mass: 5000
displayDescription: -电击空中单位 \n -超高速 \n -强韧合装甲 \n -蓄电:每隔一段时间强化一次攻击 \n “如闪电般到来”

tags: units, AI闪电拦截机, 转向攻击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: AI闪电拦截机

techLevel: 1

buildSpeed: 0.0015
#availableInDemo: true

radius: 14
displayRadius: 15
isBio: false

fogOfWarSightRange: 18

softCollisionOnAll: 3

energyMax: 1
energyRegen: 0.0033
energyNeedsToRechargeToFull: true

[hiddenAction_蓄电]
autoTrigger: if self.isEnergyFull
convertTo: 闪电拦截机[蓄电]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[hiddenAction_AIattack]
addWaypoint_type: follow
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 幻象
addWaypoint_target_nearestUnit_team: enemy
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_nearestUnit_maxRange: 2000
autoTrigger: if self.globalTeamTags(includes='AI系统') and numberOfUnitsInEnemyTeam(greaterThan=0, withTag='幻象') and not self.hasActiveWaypoint(type='follow')

[hiddenAction_环]
autoTriggerOnEvent: completeAndActive
spawnEffects: custom:苍, custom:苍2, custom:星
resetCustomTimer: true
playSoundAtUnit:lighting_burst:0.05
[effect_苍]
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
image: ROOT:/素材/hit.png
life: 120
scaleFrom: 1.5
scaleTo: 1.5
alpha: 1
dirSpeed: 5
color: #294C8A
priority: high
alsoPlaySound: laser_deflect
[effect_苍2]
@copyFromSection:effect_苍
dirSpeed: -5
color: #337EE8
scaleFrom: 1
scaleTo: 1
[effect_星]
image: ROOT:/素材/light.png
liveAfterAttachedDies: false
attachedToUnit: true
drawUnderUnits: true
life: 100
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.9
#color: #294C8A


[graphics]
total_frames: 1

image:        闪电拦截机.png
image_wreak:  闪电拦截机残骸.png
image_shield: 液态闪电.png

lock_body_rotation_with_main_turret: true
teamColorsOnTurret: true

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:Thunder
movementEffectReverse: CUSTOM:Thunder
movementEffectReverseFlipEffects: true
movementEffectRate: 3

[effect_Thunder]
createWhenZoomedOut: false
priority:low
image: 液态闪电.png
life: 40
fadeOut: true
attachedToUnit: false
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 0.6
drawUnderUnits: true
ySpeedRelative:-0.4
atmospheric: true

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

maxAttackRange: 170
shootDelay: 20

turretRotateWithBody: true

[turret_1]
invisible: true
x: 0
y: 0
idleDir:0

projectile: 1
size: 10
turnSpeed: 5.8

canShoot: false

recoilOffset: -2
recoilOutTime: 3
recoilReturnTime: 7



[turret_2]
x: 0
y: 0

projectile: 1
size: 9
attachedTo: 1
slave: true

turnSpeed: 0
turnSpeedAcceleration: 1

shoot_sound:lighting_burst
shoot_sound_vol:0.3
#shoot_flame:CUSTOM:sparks2*3, CUSTOM:lightSlowFade
shoot_flame:CUSTOM:lightSlowFade*2

warmup:10
chargeEffectImage: SHARED:lighting_charge2.png
warmupCallDownRate: 0.3

recoilOffset: -1
recoilOutTime: 3
recoilReturnTime: 7


[projectile_1]
tags= T-projectile
#directDamage: 310
directDamage: 200

life: 25
instant: true
lightingEffect: true
largeHitEffect: true


shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0.1

buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock*1, CUSTOM:sparks*3

explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash


[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightningShock]
life: 60

xOffsetRelative: 0
yOffsetRelative: 0
hOffset: 0
dirOffset: 0
dirOffsetRandom:180

fadeInTime: 0
fadeOut: false

attachedToUnit: false


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameStartRandomAdd: 2
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5
animateFrameSpeedRandom: 0.2

alpha:0.6

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.1
ySpeedRelativeRandom: 1.1
hSpeed: 1.5
image: SHARED:spark.png
priority: verylow



[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1

ySpeedRelative:2

image: SHARED:spark.png
priority: verylow

[effect_lightSlowFade]

image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8

scaleFrom: 0.4
scaleTo: 0.3

alpha: 0.7

[movement]
movementType: AIR
moveSpeed: 2.6
moveAccelerationSpeed: 0.1
moveDecelerationSpeed: 0.1

maxTurnSpeed: 5.7
turnAcceleration: 0.5

reverseSpeedPercentage: 0.75

targetHeight: 20
targetHeightDrift: 1

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181


slowDeathFall: true
