
[core]

dont_load:true

class: CustomUnitMetadata

mass: 9000

reclaimPrice: 0

tags: units, 虫族, 虫建筑, 炮塔

techLevel: 1
selfBuildRate: 0.001

radius: 16
softCollisionOnAll: 3

isBio: true
isBug: true
isBuilding: true


[action_reclaim]
requireConditional: if self.hp>0
id: 回归根系
text: 回归根系
description: """ -自我回收 \n -
%{select(self.resource.野性<1, str( "退还"+int( 75 * (self.hp/self.maxHp) )+"%资源($"+int( ${core.price * 0.75} * (self.hp/self.maxHp) )+")" ),
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), str( "[野性]: 退还"+int( 25 * (self.hp/self.maxHp) )+"%资源($"+int( ${core.price * 0.25} * (self.hp/self.maxHp) )+")＋"+int( ${core.price * 0.1} * (self.hp/self.maxHp) )+"腐蚀"), "[野性]: 不退还资源" ))}
 \n -退还资源量会随当前血量的降低减少
 """
pos: -1
ai_isDisabled: true
allowMultipleInQueue: false
buildSpeed: 5s
iconImage: icon_sell_top.png
addResourcesWithLogic: """ credits=
select(self.resource.野性<1, ${core.price * 0.75},
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), ${core.price * 0.25}, 0 ))
* (self.hp/self.maxHp), 
腐蚀=
select(self.resource.野性<1, 0,
select((${CompleteCorrosion} ${CompleteCorrosionLimit}), ${core.price * 0.1}, 0 ))
* (self.hp/self.maxHp), 
hp=-999999
"""
autoTrigger: if not self.isOverPassableTile(type="AIR")
isLockedAlt: if self.globalTeamTags(includes="虫塔自我回收限制[半腐]") and numberOfUnitsInTeam(withTag='母巢T2')<1
isLockedAltMessage: 地图限制:需求母巢T2

[global_resource_玩家总数]
displayName: 玩家总数

[hiddenAction_up]
autoTrigger: if self.globalTeamTags(includes='衍黎')
addResources: 生长=1


[template_衍黎进化]
price: 0
isGuiBlinking: true
setResourcesWithLogic: 野性=1

[resource_野性]
displayName: 野性

[resource_生长]
displayName: 生长


[graphics]
image_wreak: NONE

image_shadow: NONE
shadowOffsetX: 1
shadowOffsetY: 1

animation_idle_blendIn: 1s
animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 75
animation_idle_scale_start: 1
animation_idle_scale_end: 1.02
animation_idle_pingPong: true
animation_attack_scale_start: 1
animation_attack_scale_end: 1.02
animation_attack_pingPong: true

[animation_build]
onActions: underConstructionWithLinkedBuiltTime
blendOut: 2s
body_0: {scale:0}
body_1: {scale:1.2}


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 2
turretTurnSpeed: 6



[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 虫塔

buildPriority: 0.22
noneInBaseExtraPriority: 0.17

maxEachBase: 3

ai_upgradePriority: 0.24

