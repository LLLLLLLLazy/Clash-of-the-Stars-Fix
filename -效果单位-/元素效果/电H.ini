
[core]
name:电H
displayDescription: -单次闪电伤害
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 999999

tags=magic


techLevel: 1
buildSpeed: 2.7s

energyMax: 1

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
showOnMinimap: false
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable: true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 0.1s

[action_kill]
autoTrigger: if self.energy(empty=true)
deleteSelf: true
isVisible: false

[hiddenAction_Water]
autoTrigger:if self.isOverwater or numberOfUnitsInAllTeams(withTag="沉渊之海")>0
convertTo: 电H2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[hiddenAction_timeAlive]
autoTrigger: true
addResources: time=1
[hiddenAction_discharge]
autoTrigger: if self.hasResources(time=70)
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 1-2
deleteSelf: true

[action_元素融合]
text: 元素反应
description: 与火花G相遇时融合为电火花H2 \n 与火花Z1.5相遇时发生爆炸
displayType: infoOnly
pos: 0
isActive: false
autoTrigger: if numberOfUnitsInTeam(greaterThan=0, withTag='火花G', withinRange=50)
takeResources: hp=1
takeResources_includeUnitsWithinRange: 50
takeResources_excludeUnitsWithoutTags: 火花G
takeResources_triggerActionIfAnyCollected: 变！
takeResources_maxUnits: 1

[hiddenAction_雷火爆]
autoTrigger: if numberOfUnitsInTeam(greaterThan=0, withTag='火花Z1.5', withinRange=100)
takeResources: hp=1
takeResources_includeUnitsWithinRange: 100
takeResources_excludeUnitsWithoutTags: 火花Z1.5
takeResources_maxUnits: 1
fireTurretXAtGround: 2
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: 2

[hiddenAction_雷火爆2]
@copyFromSection: hiddenAction_雷火爆
autoTrigger: if numberOfUnitsInTeam(greaterThan=0, withTag='火花Z2', withinRange=100)
takeResources: hp=0.25
takeResources_excludeUnitsWithoutTags: 火花Z2

[hiddenAction_变！]
convertTo: 电火花H2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}

[graphics]
total_frames: 1
#imageScale: 0.8
image:        null.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: true

turretTurnSpeed: 999

maxAttackRange: 200
shootDelay: 0.01s


[turret_1]
x: 0
y: -30

shoot_sound:lighting_burst
shoot_sound_vol:0.2

warmup: 10
chargeEffectImage: SHARED:lighting_charge.png
canAttackCondition: if not numberOfUnitsInTeam(greaterThan=0, withTag='火花Z1.5', withinRange=100) and not numberOfUnitsInTeam(greaterThan=0, withTag='火花Z2', withinRange=100) and not numberOfUnitsInTeam(greaterThan=0, withTag='潮湿', withinRange=150)

energyUsage: 1


[turret_1+]
x: 0
y: 0
projectile: 1+
energyUsage: 1

shoot_sound: Paralyze1.ogg
shoot_sound_vol: 0.3

warmup: 10
warmupStartEffect: CUSTOM:弱蓄电
canAttackCondition: if numberOfUnitsInTeam(greaterThan=0, withTag='潮湿', withinRange=150)

[turret_2]
x: 0
y: 0
canShoot: false
shoot_flame: CUSTOM:smoke

[projectile_1]
directDamage: 25

life: 20
instant: true
lightingEffect: true
largeHitEffect: true

shieldDefectionMultiplier: 0.1

buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*10

explodeEffectOnShield:CUSTOM:lightningShock*1, CUSTOM:hitLightFlash

[projectile_1-2]
@copyFromSection: projectile_1
areaDamage:	25
areaRadius:	25
areaRadiusFromEdge: true
targetGroundSpread: 200

[projectile_1+]
@copyFromSection: projectile_1
life: 10
spawnUnit: 电H2(offsetRandomXY=70)
effectOnCreate: CUSTOM:水光
explodeEffect: CUSTOM:lightningShock水, CUSTOM:sparks*2


[projectile_2]
areaDamage:	60
areaRadius:	200
areaHitAirAndLandAtSameTime: true
life: 10
instant: true
targetGroundSpread: 5
explodeEffect: CUSTOM:炽雷, CUSTOM:炽粒子*8, CUSTOM:炙热, CUSTOM:炎爆光*2, CUSTOM:雷爆光*2, CUSTOM:火光*6, CUSTOM:explodeCore, CUSTOM:explodeSpread*5, CUSTOM:shockwaveLarge, CUSTOM:shockwave
explodeEffectOnShield: CUSTOM:炽雷, CUSTOM:炽粒子*8, CUSTOM:炙热, CUSTOM:炎爆光*2, CUSTOM:雷爆光*2, CUSTOM:火光*6, CUSTOM:explodeCore, CUSTOM:explodeSpread*5, CUSTOM:shockwaveLarge, CUSTOM:shockwave
spawnProjectilesOnCreate: 2D(recursionLimit=1)
[projectile_2D]
@copyFromSection: projectile_2
delayedStartTimer: 12
targetGroundSpread: 30

[effect_hitLightFlash]
priority: verylow

image: SHARED:light_50.png
life: 17
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_弱蓄电]
priority: verylow
image: SHARED:lighting_charge.png
life: 10
scaleFrom: 0
scaleTo: 1
alpha: 0.5


[effect_lightningShock]
priority: verylow
life: 60


hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

attachedToUnit: true


image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_lightningShock水]
@copyFromSection: effect_lightningShock
color: #C7DEEB
alpha: 0.4
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30


[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
image: SHARED:spark.png
priority: verylow



[effect_炎爆光]
@copyFromSection: effect_hitLightFlash
life: 30
color: #ff9224
xOffsetRelativeRandom: 45
yOffsetRelativeRandom: 45

[effect_雷爆光]
@copyFromSection: effect_hitLightFlash
life: 20
color: #E864E5
alpha: 0.4

[effect_炽雷]
@copyFromSection: effect_lightningShock
color: #ff9224

[effect_炽粒子]
@copyFromSection: effect_sparks
color: #ff9224
scaleFrom: 2
scaleTo: 2

[effect_explodeCore]
priority: veryhigh
color: #E864E5
life: 30
attachedToUnit: true
stripIndex: explode_big2
scaleFrom: 1.7
scaleTo: 1.7
alpha: 1
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false
alsoPlaySound: missile_hit:2

[effect_explodeSpread]
@copyFromSection: effect_explodeCore
scaleFrom: 1
scaleTo: 1
alpha: 0.8
color: #ff9224

delayedStartTimerRandom: 10
xOffsetRelativeRandom: 50
yOffsetRelativeRandom: 50

[effect_shockwaveLarge]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 3
alpha: 0.5

[effect_shockwave]
@copyFromSection: effect_shockwaveLarge
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 3
color: #E864E5

[effect_smoke]
priority: verylow
frameIndex: 0
stripIndex: smoke_black
spawnChance: 0.3
life: 90
fadeOut: true
attachedToUnit: false
#color: #fdc14d
color: #FFFFFF
fadeInTime:15
scaleFrom: 0.3
scaleTo: 0.9
alpha: 0.8
drawUnderUnits:false
liveAfterAttachedDies: false
hSpeed: 0.2
dirOffsetRandom:180
atmospheric: true

[effect_火光]
priority: verylow
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: true
color: #ff9224
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
xOffsetRelativeRandom: 90
yOffsetRelativeRandom: 90

[effect_炙热]
priority: verylow
image: ROOT:/-效果单位-/light.png
life: 40
scaleTo: 1
alpha: 0.5
fadeOut: true



[effect_水光]
priority: verylow
image: SHARED:light_50.png
scaleTo: 1
scaleFrom: 1
color: #80D1FF
alpha: 0.4
life: 10


[movement]
movementType: AIR
moveSpeed: 0
moveAccelerationSpeed: 0.0
moveDecelerationSpeed: 0.0
targetHeight:-1
reverseSpeedPercentage:0.8

maxTurnSpeed: 0.0
turnAcceleration: 0.25

moveSlidingMode :false
moveIgnoringBody:false



[ai]
disableUse:true

[resource_time]
displayName: 存在时间