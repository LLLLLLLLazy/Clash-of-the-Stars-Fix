[core]
showInEditor: false

name:结网魔蛛
displayDescription: -攻击地面与空中\n-蛛丝牵引
class:CustomUnitMetadata
price:1400, 腐蚀=${corrode}
maxHp:480
mass:5000

techLevel:2
buildSpeed:0.0015
#availableInDemo: true

fogOfWarSightRange:18

radius:14
displayRadius:17
isBio:true
isBug:true
tags: units, 虫族, 中型虫, 蜘蛛, 固定射击

selfRegenRate:0.1

softCollisionOnAll:12

autoTriggerCooldownTime: 0.11s

unitsSpawnedOnDeath: 资源返还(addResources=ammo:350|energy:50)

[hiddenAction_腐蚀价格]
@global corrode: 200
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}


[graphics]
total_frames:1

image:结网魔蛛.png
image_wreak:NONE
image_turret:NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9
imageScale:1
#AUTO
image_shadow:AUTO
shadowOffsetX:2
shadowOffsetY:2


lock_body_rotation_with_main_turret:true

animation_moving_start:0
animation_moving_end:0
animation_moving_speed:3

animation_idle_start:0
animation_idle_end:0
animation_idle_speed:80
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong:true


animation_attack_start:0
animation_attack_end:0
animation_attack_speed:15
animation_attack_scale_start:1
animation_attack_scale_end:0.97
animation_attack_pingPong:true

[attack]

#turretRotateWithBody: true


canAttack:true
canAttackFlyingUnits:true
canAttackLandUnits:true
canAttackUnderwaterUnits:false

isFixedFiring:true

turretSize:18
turretTurnSpeed:9

maxAttackRange:270
shootDelay:0

aimOffsetSpread: 0

[turret_1]
x:0
y:0




#shoot_flame: smoke

[projectile_1]
tags= T-projectile
directDamage:0
life:100
speed:9
image:蛛丝.png
pushForce: -0.1
pushVelocity: -0.1
deflectionPower: -1
explodeEffect:CUSTOM:蛛网
explodeEffectOnShield:CUSTOM:蛛网

[effect_蛛网]
priority:veryhigh
#attachedToUnit:false
life:5
image:蛛网.png
drawUnderUnits:false

[leg_1]
x:-18
y:0
attach_x:0
attach_y:0
moveSpeed:4.1
resetAngle:20


heightSpeed:0.8

image_leg:leg.png
image_foot:NONE

drawLegWhenZoomedOut:true

dust_effect:false

holdDisMin:15
holdDisMax:24

[leg_2]
x:18
y:0
attach_x:0
attach_y:0
copyFrom:1

[leg_3]
x:-15
y:13
attach_x:0
attach_y:2
copyFrom:1

[leg_4]
x:15
y:13
attach_x:0
attach_y:2
copyFrom:1

[leg_5]
x:-15
y:-13
attach_x:0
attach_y:-2
copyFrom:1

[leg_6]
x:15
y:-13
attach_x:0
attach_y:-2
copyFrom:1




[movement]
#movementType: LAND
movementType:OVER_CLIFF



moveSpeed:1
moveAccelerationSpeed:0.04
moveDecelerationSpeed:0.12


maxTurnSpeed:2.6
turnAcceleration:0.5

moveSlidingMode:true
moveIgnoringBody:true
moveSlidingDir:181


[hiddenAction_AI走位]
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_maxTime: 3s
addWaypoint_target_mapMustBeReachable: true
addWaypoint_target_fromReference: attachment.getOffsetRelative(y=-80)
autoTrigger: if self.isControlledByAI() and self.isAttacking and numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange -5}, withTag='units') and attachment.isAttacking and (not self.hasActiveWaypoint(type='move') or distanceBetween(self, activeWaypointTarget) < 20)
[hiddenAction_AIclearWaypoints]
clearAllWaypoints: true
autoTrigger: if self.isControlledByAI() and self.isAttacking and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=${attack.maxAttackRange +1}, withTag='units') and self.hasActiveWaypoint(type='move')

[attachment_AI向定位]
x: 0
y: 0
onCreateSpawnUnitOf: AI单位向定位
alwaysAllowedToAttackParentsMainTarget: true