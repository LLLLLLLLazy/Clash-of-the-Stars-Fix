
[core]
name: repairBay
altNames: 修复湾
displayText: 修复湾
displayDescription:-维修单位\n-3倍建造速度\n-可建造部分建筑\n-可以回收自己的单位

class: CustomUnitMetadata
price: 1500
maxHp: 1300
mass: 4000
tags: units

techLevel: 1

overrideAndReplace: repairBay

buildSpeed: 0.001
availableInDemo: false
radius: 25
displayRadius: 25
isBuilding:true
isBio: false
footprint: -1,-1,1,1
#used for placement, and placement of other buildings
constructionFootprint:-1,-1,1,1

canRepairBuildings: true
#selfBuildRate:0.0008
canRepairUnits : true
canReclaimResources:true
nanoRange: 230
nanoBuildSpeed: 3
autoRepair: true
nanoRepairSpeed: 0.25

@memory 指定坐标:unit

[canBuild_1]
name: reclaim
pos:  -1

[canBuild_2]
name: repair
pos:  0

[canBuild_3]
name: 资源抽取器T1, 墙, 哨炮, c_turret_t1, c_antiAirTurret
pos:  1

[canBuild_4]
isVisible: if self.globalTeamTags(includes='铁锈') or self.globalTeamTags(includes='传奇炮塔师')
name: 供应站
pos:  2
isLocked: if numberOfUnitsInTeam(withTag='供应站', greaterThan=0, incompleteBuildings=true)
isLockedMessage: 只能建造一个供应站


[action_范围回收]
@copyFromSection: template_范围回收

[hiddenAction_回收路径]
@copyFromSection: template_回收路径

[decal_回收范围]
@copyFromSection: template_回收范围


[action_upgradeT2]
convertTo: repairBayT2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:  2500
text: 升级
description: -拥有防护盾 \n -少量自我修复 \n -更远的范围(270) \n -维修效率提升150% \n -建造效率提升66.7% \n -更多防御建筑建造
displayType: Upgrade
buildSpeed: 0.0006
pos: 0.1
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
descriptionAddUnitStats: ${section.convertTo}

[action_未来科技]
isVisible: if self.globalTeamTags(includes='未来科技')
convertTo: 未来修复湾
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 量子碳=50
text: 升级 - 未来科技
descriptionAddFromUnit: ${section.convertTo}
descriptionAddUnitStats: ${section.convertTo}
displayType: upgrade
buildSpeed: 0.0006
pos: 0.2
iconExtraImage: icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

spawnEffects: CUSTOM:light, CUSTOM:displacement

[effect_light]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #ffffff
scaleFrom: 2.0
scaleTo: 2.0
alpha: 1.0
drawUnderUnits:false

[effect_displacement]
drawType: displacement
image: SHARED:shockwave_normal_128.png
life: 30
fadeOut: true
fadeInTime: 5
attachedToUnit: false
color: #ffffff
scaleFrom: 0.1
scaleTo: 2.0
alpha: 0.5
drawUnderUnits:false

[graphics]

total_frames: 1
image: repair_bay.png
image_wreak:  repair_bay_dead.png
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1




[attack]

canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits: false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 20

maxAttackRange: 230
shootDelay: 50


[turret_1]
#nano turret (nano must be slot 1)
x: 0
y: 25
invisible: true
warmup: 30
canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turnSpeedAcceleration: 0.08

[movement]
movementType:BUILDING
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0
maxTurnSpeed: 0
turnAcceleration: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181

[ai]
useAsBuilder: true
buildPriority: 0.055
noneInBaseExtraPriority: 0.02
maxEachBase: 2


[global_resource_量子碳]
hidden: false
displayName: 量子碳
displayColor: #00F8FF