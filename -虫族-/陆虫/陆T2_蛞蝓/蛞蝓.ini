
[core]
name: 蛞蝓
displayText: 蛞蝓
displayDescription: -攻击地面单位 \n -移动产生黏液 \n -死亡产生较大黏液 \n -黏液可对敌方造成剧毒 \n -攻击回复等量生命值 \n -巡逻时不会攻击 \n -蛞蝓黏液: [毒素:35/0.5s]
class: CustomUnitMetadata
price: 3200
maxHp: 2700
mass: 30000

techLevel: 2
buildSpeed: 0.0007
#availableInDemo: true

radius: 24
displayRadius: 24
isBio: true
isBug: true
tags: units, 虫族, 中型虫, 固定射击

numBitsOnDeath: 5

selfRegenRate:0.1

softCollisionOnAll: 12

transportSlotsNeeded: 1

unitsSpawnedOnDeath: 蛞蝓黏液(addResources=setFlag:2)

autoTriggerCooldownTime: 0.5s

[hiddenAction_mucus]
autoTrigger: if (self.isMoving or self.hasTakenDamage<3 or self.isAttacking) and numberOfUnitsInTeam(withTag='小蛞蝓黏液', withinRange=40) < 1
spawnUnits: 蛞蝓黏液(offsetY=5)

[hiddenAction_黏液补充]
autoTrigger: if (self.isMoving or self.hasTakenDamage<3 or self.isAttacking) and numberOfUnitsInTeam(withTag='小蛞蝓黏液', withinRange=40) > 0
takeResources: energy=-8
takeResources_includeUnitsWithinRange: 40
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: 小蛞蝓黏液
takeResources_discardCollected: true
takeResources_maxUnits: 1

[action_Upgrade]
convertTo: 火山蛞蝓
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price:腐蚀=300
text:腐蚀 - 熔渣
displayType: Upgrade
buildSpeed: 20.8s
pos: 1
description: -产生黏液变为岩浆 \n -岩浆对建筑伤害-50% \n -血量小幅度提升 \n -获得护甲 \n -咬合力强化
descriptionAddUnitStats: ${section.convertTo}
iconExtraImage:SHARED:icon_upgrade_top.png
iconExtraColor:#AAFFFFFF
tags=腐蚀
setUnitMemory: 属性[24]=0

[hiddenAction_腐蚀中]
autoTrigger: if self.queueSize(withActionTag="腐蚀")>0 and not self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=-${movement.moveSpeed}*0.6
alsoTriggerAction: 属性变化
temporarilyAddTags: 腐蚀中

[hiddenAction_腐蚀停止]
autoTrigger: if self.queueSize(withActionTag="腐蚀")<1 and self.tags(includes='腐蚀中')
setUnitMemory: 属性[24]=0
alsoTriggerAction: 属性变化
temporarilyRemoveTags: 腐蚀中

[hiddenAction_自动腐蚀]
autoTrigger: if (self.hasUnitInTeam(withTag="腐蚀-火山蛞蝓") and self.hasUnitInTeam(withTag="腐蚀之意")) and self.hasResources(${action_Upgrade.price}) and self.queueSize(empty=true) and not self.isAttacking
alsoQueueAction: Upgrade
addResourcesWithLogic: ${action_Upgrade.price}*-1

[graphics]
total_frames: 8

image:        蛞蝓.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO_ANIMATED
shadowOffsetX:2
shadowOffsetY:2

animation_moving_start: 0
animation_moving_end: 3
animation_moving_speed: 13
#animation_moving_pingPong: true

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 120
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong: true

animation_attack_start: 4
animation_attack_end: 7
animation_attack_speed: 8



[attack]

isMelee: true
meleeEngangementDistance: 150

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   if not self.hasActiveWaypoint(type='patrol')
canAttackUnderwaterUnits: false

isFixedFiring: true

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 25
shootDelay: 50

aimOffsetSpread: 0

[turret_1]
x: 0
y: 0

shoot_sound: bug_attack
shoot_sound_vol: 0.3

recoilOffset: 3
recoilOutTime: 6
recoilReturnTime: 18

resourceUsage: hp=-40


[projectile_1]
tags= T-projectile
directDamage: 40
life: 50
instant: true
explodeEffect: NONE

[movement]
movementType: LAND
moveSpeed: 0.9
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.03

maxTurnSpeed: 3.0
turnAcceleration: 0.1

targetHeight: 0
targetHeightDrift: 0

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181

reverseSpeedPercentage:0

