
[core]
name: 聚能光核
displayDescription: -不太稳定
price: 0
maxHp: 1
mass: 500

techLevel: 1
buildSpeed: 0.001

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

energyMax: 6
energyRegen: 0.02
energyNeedsToRechargeToFull: false

autoTriggerCooldownTime: 0.1s

[hiddenAction_初始移动]
autoTriggerOnEvent: completeAndActive
requireConditional: if not self.hasFlag(id=2)
addWaypoint_prepend: true
addWaypoint_type: move
addWaypoint_maxTime: 0.5s
addWaypoint_position_relativeOffsetFromSelf: 0, 50
alsoTriggerAction: 攻击目标

[hiddenAction_攻击目标]
addWaypoint_type: attack
addWaypoint_target_fromReference: customTarget1.attacking

[hiddenAction_攻击目标追踪]
@copyFromSection: hiddenAction_攻击目标
autoTrigger: if self.hasActiveWaypoint(type='attack') and self.attacking!=customTarget1.attacking
addWaypoint_prepend: true


[hiddenAction_小型创建]
autoTriggerOnEvent: created
requireConditional: if self.hasFlag(id=2)
setUnitStats: maxEnergy=0.9, energy=0.9

[hiddenAction_小型初始]
@copyFromSection: hiddenAction_初始移动
requireConditional: if self.hasFlag(id=2)
addWaypoint_maxTime: 1s
addWaypoint_position_relativeOffsetFromSelf: 0, 80

[hiddenAction_小型能量结束]
autoTrigger: if not self.isEnergyFull and self.maxEnergy>0 and self.hasFlag(id=2)
setUnitStats: maxEnergy=0


[hiddenAction_disappearance]
autoTrigger: if self.timeAlive(laterThanSeconds=5) or self.hasFlag(id=2) and self.timeAlive(laterThanSeconds=2.1)
deleteSelf: true

[hiddenAction_attack]
autoTrigger: if not self.hasFlag(id=2) and self.customTimer>=1
resetCustomTimer: true
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 2
spawnEffects: CUSTOM:hitLightFlash
alsoTriggerAction: attack2

[hiddenAction_attack2]
requireConditional: if self.energy > 5
fireTurretXAtGround: 1
fireTurretXAtGround_withTarget: attacking
fireTurretXAtGround_withProjectile: 3
addResources: energy=-0.5


[hiddenAction_attack小]
@copyFromSection: hiddenAction_attack
autoTrigger: if self.hasFlag(id=2) and self.customTimer>=1
fireTurretXAtGround_withProjectile: 2小
spawnEffects: CUSTOM:hitLightFlash小
alsoTriggerAction: NONE


[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FF0000

scaleFrom: 1
scaleTo: 1
alpha: 0.6
drawUnderUnits:false

[effect_hitLightFlash小]
@copyFromSection: effect_hitLightFlash
scaleFrom: 0.5
scaleTo: 0.5

[graphics]
image: 大空.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0

showEnergyBar: false

[decal_1]
layer: afterBody
image: laser_tank_charge.png
imageScale: select(not self.hasFlag(id=2), 1, 0.5)

[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false


meleeEngangementDistance: 300

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 1
shootDelay: 60

[turret_1]
x: 0
y: 0
canShoot: false
projectile: 1

[turret_2]
x: 0
y: 0
canShoot: false
limitingRange: 150
laserDefenceEnergyUse: 1

[projectile_1]
areaDamage: 220
areaRadius: 0
life: 50
instant: true

explodeEffect: NONE
explodeEffectOnShield: NONE

[projectile_2]
life: 50
speed: 5
drawSize: 0

targetGround: true
areaHitAirAndLandAtSameTime: true

areaDamage: 220
areaRadius: 50
areaRadiusFromEdge: true

deflectionPower: -1

explodeEffect: CUSTOM:shockwave
spawnProjectilesOnCreate: 3

[projectile_2小]
@copyFromSection: projectile_2
areaDamage: 90
areaRadius: 20
explodeEffect: CUSTOM:shockwave小
spawnProjectilesOnCreate: NONE


[effect_shockwave]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 1
alpha: 1.5
color: #FF0000

[effect_shockwave小]
@copyFromSection: effect_shockwave
scaleTo: 0.5


[projectile_3]
directDamage: 45
areaDamage: 45
areaRadius: 30
areaHitAirAndLandAtSameTime: true
life: 15
instant: true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage: SHARED:beam3.png
beamImageEnd: SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2
#explodeEffect: NONE
#explodeEffectOnShield: NONE
sweepOffsetFromTargetRadius: 0.4
sweepSpeed: 10
color: #ff0000
explodeEffect: CUSTOM:小光波
explodeEffectOnShield: CUSTOM:小光波

[effect_小光波]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 1.25
color: #FF0000

[arm_1]
x: 0
y: 0
image_end: 回收.png

drawUnderAllUnits: true
spinRate: 8

[arm_2]
x: 0
y: 0
copyFrom: 1

image_end: 回收.png
spinRate: 6
drawDirOffset: 90

[arm_3]
x: 0
y: 0
copyFrom: 1

image_end: 回收.png
spinRate: 4
drawDirOffset: 180

[arm_4]
x: 0
y: 0
copyFrom: 1

image_end: 回收.png
spinRate: 2
drawDirOffset: 270

[decal_arm1]
@copyFromSection: decal_1
image: 回收.png
basePositionFromLegEnd: arm1

[decal_arm2]
@copyFromSection: decal_arm1
basePositionFromLegEnd: arm2

[decal_arm3]
@copyFromSection: decal_arm1
basePositionFromLegEnd: arm3

[decal_arm4]
@copyFromSection: decal_arm1
basePositionFromLegEnd: arm4

[movement]
movementType: AIR
moveSpeed: 2
moveAccelerationSpeed: 0.1
moveDecelerationSpeed: 0

maxTurnSpeed: 20
turnAcceleration: 2

targetHeight: 3

moveSlidingMode :true
moveIgnoringBody:true

reverseSpeedPercentage:0

