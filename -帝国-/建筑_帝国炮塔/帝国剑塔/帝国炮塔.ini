
[core]
name: 帝国剑塔
displayText: 帝国剑塔
displayDescription: -攻击地面单位 \n -直线穿刺 \n -浮动装甲

class: CustomUnitMetadata
price: 6000
maxHp: 2700
mass: 9000
tags: units

armour: 15
armourMinDamageToKeep: 15

footprint: 0,0,1,1
constructionFootprint:0,0,1,1

buildingToFootprintOffsetX:20
buildingToFootprintOffsetY:20

techLevel: 1
buildSpeed: 30s

radius: 19
#displayRadius: 25

isBio: false
isBuilding: true

energyMax: 50
energyRegen: 0.05

autoTriggerCooldownTime: 0.1s

[action_浮动装甲]
isVisible: true
isActive: false
id: ${section.text}
text: 浮动装甲
description: -根据受到的单次伤害与每秒伤害进行减伤\n -受到伤害越高，减伤越高\n -无法减伤超过当前血量的单次伤害
pos: 0
iconImage: 浮甲icon.png
displayType: infoOnlyStockpile
buildSpeed: 0s

[hiddenAction_血量记录]
autoTrigger: if self.resource.受击前血量!=self.hp
setResourcesWithLogic: 受击前血量=self.hp

[hiddenAction_浮动装甲减伤]
@copyFromSection: template_浮动装甲减伤

[hiddenAction_浮动装甲复损]
autoTrigger: if self.resource.受损量>0
addResourcesWithLogic: 受损量=-select(self.resource.受损量>1, self.resource.受损量/2, self.resource.受损量)

[resource_受击前血量]
hidden: true

[resource_受到伤害]
hidden: true

[resource_受损量]
displayName: 受损量

[graphics]
total_frames: 1

image:        帝国炮塔底座.png
image_wreak:  帝国炮塔残骸.png
image_turret: 帝国炮塔.png

teamColorsOnTurret: true

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:2

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 15
turretTurnSpeed: 4

maxAttackRange: 165
shootDelay: 5

aimOffsetSpread: 0.1

[turret_1]
x: 0
y: 6

projectile: 1

shoot_flame: 光束, 黑光
shoot_sound: VividClarityBeamAppear.ogg
shoot_sound_vol: 0.2

turnSpeed: 4.0
turnSpeedAcceleration: 0.3
turnSpeedDeceleration: 0.5

shouldResetTurret: false

energyUsage: 1

canAttackMaxAngle: 40

canAttackLandUnits: if not attacking.tags(includes='墙') or self.energy(greaterThan=40)

idleSweepAngle: 30
idleSweepDelay: 250
idleSweepSpeed: 0.1

[projectile_1]
tags= T-projectile
spawnProjectilesOnCreate: 1(recursionLimit=10, yOffsetRelative=15)

areaDamage: 45
areaRadius: 15
areaDamageNoFalloff: true
explodeOnEndOfLife: true

life: 0
speed: 0
invisible: true

explodeEffect: 剑光子, 剑光子曲, 光波, 束光
explodeEffectOnShield: 剑光子, 剑光子曲, 光波, 束光

[effect_光束]
life: 45
image: 光束.png
scaleFrom: 1
scaleTo: 1
alpha: 0.4
yOffsetRelative: 75

[effect_黑光]
image: 烁闪光.png
life: 25
fadeOut: true
attachedToUnit: true
color: #000000
scaleFrom: 0.8
scaleTo: 0.8
alpha: 1.0
drawUnderUnits:false
yOffsetRelative: 9

[effect_剑光子]
priority: verylow
image: 一线光.png
life: 25
lifeRandom: 12
fadeInTime: 6
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0.3
scaleTo: 0.1
alpha: 0.9
ySpeedRelative: 4
ySpeedRelativeRandom: 1
pivotOffset: -180
pivotOffsetRandom: 35
spawnChance: 0.8

[effect_剑光子曲]
@copyFromSection: effect_剑光子
drawType: displacement
alpha: 0.03

[effect_光波]
life: 30
stripIndex: shockwave
scaleFrom: 0
scaleTo: 0.6
alpha: 0.6
color: #000000

[effect_束光]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: false
color: #000000
scaleFrom: 0.9
scaleTo: 0.9
alpha: 0.2
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
upgradedFrom: 帝国炮塔