

[core]
name:日耀赤星塔
maxHp:2500
mass:10000
price:24000, 日耀=300
radius:40
buildSpeed:150s
displayDescription:-更大的放大镜\n-距离越近光线越强\n-攻击造成强烈持续灼烧\n-炽炎领域:对周围造成无差别范围伤害\n-炽光聚焦:使目标累积更高上限的耀痕\n-光耀:大范围透视迷雾\n-烈日风:被摧毁后熔化周围的一切
tags: units, 赤, 赤星塔

maxShield:3600
shieldRegen:0.3
shieldDisplayOnlyDeflection: true

selfRegenRate:0.166

fogOfWarSightRange:21

isBuilding:true
footprint:-1,-1,1,1
constructionFootprint:-2,-2,2,2
buildingToFootprintOffsetY:-10

fireTurretXAtSelfOnDeath: explode

#autoTriggerCooldownTime:0.13s
#autoTriggerCooldownTime_allowDangerousHighCPU:true

[hiddenAction_炽炎]
autoTrigger: true
fireTurretXAtGround: explode
fireTurretXAtGround_withOffset: 0,0
fireTurretXAtGround_withProjectile: glow

[hiddenAction_光耀]
autoTrigger: if self.customTimer(laterThanSeconds=10)
convertTo: 日耀赤星塔[光耀]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
spawnEffects: CUSTOM:光波
resetCustomTimer: true

[hiddenAction_聚焦]
autoTrigger: if self.hasResources(日光=1)
addResources: 日光=-1

[hiddenAction_消聚]
autoTrigger: if self.hasResources(日光=3) and not self.isAttacking
resourceAmount: 日光
resourceAmount_setValue: 0


[hiddenAction_曜痕状态给予]
autoTrigger: if self.isAttacking and attacking.resource.曜痕状态<2
takeResources: 曜痕状态=-2
takeResources_includeReference: attacking
takeResources_includeUnitsWithinRange_team: enemy
takeResources_includeUnitsWithinRange: ${attack.maxAttackRange}
takeResources_discardCollected: true

[hiddenAction_日曜灼烧]
autoTrigger: if self.isAttacking and not self.tags(includes="日曜灼烧")
temporarilyAddTags: 日曜灼烧

[hiddenAction_日曜灼烧停止]
autoTrigger: if not self.isAttacking and self.tags(includes="日曜灼烧")
temporarilyRemoveTags: 日曜灼烧

[resource_日光]
displayName: 日光

[resource_曜痕]
displayName: 曜痕

[resource_曜痕状态]
hidden: true

[graphics]
image: 日耀赤星塔.png
image_back: 日耀灼烧底.png
image_shadow: red_shield.png
image_shield: yellow_shield.png
shadowOffsetX:0
shadowOffsetY:-40
#scaleImagesTo:16
[attack]
canAttack:true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits:false
maxAttackRange: 345
turretTurnSpeed: 3
shootDelay: 8

aimOffsetSpread: 0
turretSize: 0
turretMultiTargeting: true

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_1.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_0]
x:0
y:36
canShoot:false
shouldResetTurret:false

[turret_日光]
x:0
y:0
attachedTo:0
slave:true
projectile:null
delay: 0.01
warmup: 60
resourceUsage: 日光=-2

[turret_1]
x:0
y:0
attachedTo:0
slave:true
projectile:1
altProjectile:1.1
altProjectileCondition: if attacking.hasResources(曜痕=24)
warmup:500
warmupCallDownRate:200
warmupNoReset:true
warmupShootDelayTransfer:6
[turret_1.2]
@copyFromSection:turret_1
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=3) and not attacking.hasResources(曜痕=24)
warmupShootDelayTransfer:3
warmup:250
projectile:1.2
[turret_1.3]
@copyFromSection:turret_1.2
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=6) and not attacking.hasResources(曜痕=24)

[turret_2]
@copyFromSection:turret_1
slave: false
resourceUsage: energy=0
limitingRange:276
projectile:2
[turret_2.2]
@copyFromSection:turret_2
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=6) and not attacking.hasResources(曜痕=24)
warmupShootDelayTransfer:3
warmup:250
projectile:2.2
[turret_2.3]
@copyFromSection:turret_2.2
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=9) and not attacking.hasResources(曜痕=24)


[turret_3]
@copyFromSection:turret_1
slave: false
resourceUsage: energy=0
limitingRange:207
projectile:3
[turret_3.2]
@copyFromSection:turret_3
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=9) and not attacking.hasResources(曜痕=24)
warmupShootDelayTransfer:3
warmup:250
projectile:3.2
[turret_3.3]
@copyFromSection:turret_3.2
resourceUsage: energy=0
canAttackCondition: if self.hasResources(日光=12) and not attacking.hasResources(曜痕=24)

#[turret_4]
#@copyFromSection:turret_1
#resourceUsage: energy=0
#limitingRange:138
#projectile:1.1

[projectile_1]
tags= T-projectile
life: 100
instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2
sweepOffsetFromTargetRadius:0.4
sweepSpeed:10
explodeEffect: CUSTOM:projectileLight
explodeEffectOnShield: CUSTOM:projectileLight
directDamage: 5
areaDamage: 4
areaRadius: 15
color: #FDDA02
mutatorX_ifUnitWithoutTags: ◝(⑅•ᴗ•⑅)◜..°♡
mutatorX_addResourcesDirectHit: 曜痕=0.03
spawnUnit: 灼烧(spawnChance=0.1)
[projectile_1.1]
@copyFromSection:projectile_1
sweepOffsetFromTargetRadius:0.05
beamImageOffsetRate: 3
color: #FF0000
explodeEffect: CUSTOM:projectileLight1.1
explodeEffectOnShield: CUSTOM:projectileLight1.1
directDamage: 9
areaDamage: 12
areaRadius: 25
mutatorX_addResourcesDirectHit: 曜痕=0.01
[projectile_1.2]
@copyFromSection:projectile_1
life: 40
directDamage: 3
areaDamage: 2
color: #25FDDA02
spawnUnit: NONE
explodeEffect: CUSTOM:projectileLightTiny
explodeEffectOnShield: CUSTOM:projectileLightTiny

[projectile_2]
@copyFromSection:projectile_1
directDamage: 5
areaDamage: 5
areaRadius: 17
color: #FE7001
[projectile_2.2]
@copyFromSection:projectile_2
life: 40
directDamage: 3
areaDamage: 3
color: #25FF8B33
spawnUnit: NONE
explodeEffect: CUSTOM:projectileLightTiny
explodeEffectOnShield: CUSTOM:projectileLightTiny

[projectile_3]
@copyFromSection:projectile_1
directDamage: 6
areaDamage: 7
areaRadius: 20
color: #FD3602
#armourIgnoreAmount: 2
explodeEffect: CUSTOM:projectileLight3
explodeEffectOnShield: CUSTOM:projectileLight3
[projectile_3.2]
@copyFromSection:projectile_3
life: 40
directDamage: 3
areaDamage: 4
color: #25FC5B32
spawnUnit: NONE
explodeEffect: CUSTOM:projectileLight3Tiny
explodeEffectOnShield: CUSTOM:projectileLight3Tiny

[projectile_null]
tags= T-projectile
directDamage: 0
invisible: true
life: 0
speed: 0
explodeEffect: NONE

[turret_explode]
x: 0
y: 0
canShoot: false
projectile: explode
limitingRange: 160
showRangeUIGuide: true

[projectile_explode]
tags= T-projectile
life:99
instant: true
speed: 1
largeHitEffect: true
frame: 0
shadowFrame:1
drawType:1
targetGround: true
areaDamage: 1500
areaRadius: 200
areaExpandTime:20
areaHitAirAndLandAtSameTime: true
friendlyFire: true
deflectionPower:-1
lightColor: #FF9000
lightSize: 1

explodeEffect: CUSTOM:炽光, CUSTOM:炽卷*10, CUSTOM:shockwave
explodeEffectOnShield: CUSTOM:炽光, CUSTOM:炽卷*10, CUSTOM:shockwave

[projectile_glow]
tags= T-projectile
life:99
instant: true
invisible: true
areaDamage: 200
areaRadius: 160
areaDamageNoFalloff: true
deflectionPower:-1
lightColor: #FF9000
lightSize: 3
friendlyFire: true
areaHitAirAndLandAtSameTime: true
explodeEffect: CUSTOM:炽炎, CUSTOM:炽光, CUSTOM:炽圈, CUSTOM:炽圈散
explodeEffectOnShield: CUSTOM:炽炎, CUSTOM:炽光, CUSTOM:炽圈, CUSTOM:炽圈散
mutatorX_ifUnitWithTags: 赤
mutatorX_areaDamageMultiplier: 0
mutator1_ifUnitWithTags: 赤血
mutator1_areaDamageMultiplier: 0.5

[effect_shockwave]
stripIndex: shockwave
life: 120
scaleFrom: 0
scaleTo: 6
color: #FFD500
dirSpeed: 5

[effect_光波]
stripIndex: shockwave_large
life: 40
scaleFrom: 0
scaleTo: 21
color: #FFE5A7
dirSpeed: 5

[effect_炽炎]
image: 日shield.png
life: 80
scaleFrom: 3
scaleTo: 3
attachedToUnit: true
alpha: 3
#color: #FFD500
#dirSpeed: 5

[effect_炽卷]
delayedStartTimerRandom:30
image: yellow_shield.png
life: 100
scaleFrom: 4
scaleTo: 0
attachedToUnit: true
alpha: 3
dirOffsetRandom: 360
dirSpeed: 25

[effect_炽圈]
image: yellow_shield.png
life: 80
scaleFrom: 3
scaleTo: 3
attachedToUnit: true
alpha: 3
dirOffsetRandom: 360

[effect_炽圈散]
image: yellow_shield.png
life: 40
scaleFrom: 3
scaleTo: 4
attachedToUnit: true
alpha: 0.5
dirOffsetRandom: 360

[effect_炽光]
image: SHARED:light_50.png
life: 63
attachedToUnit: true
color: #E8773A
scaleFrom: 8
scaleTo: 8
alpha: 0.8
fadeOut: false

[effect_projectileLight]
priority:veryhigh
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: true
color: #E8773A
fadeInTime:2
scaleFrom: 0.8
scaleTo: 1.6
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false
[effect_projectileLightTiny]
@copyFromSection:effect_projectileLight
scaleFrom: 0.4
scaleTo: 0.8
alpha: 0.3
life: 10
[effect_projectileLight1.1]
@copyFromSection:effect_projectileLight
scaleFrom: 0.8
scaleTo: 2.0
color: #ff0000
[effect_projectileLight3]
@copyFromSection:effect_projectileLight
scaleFrom: 0.8
scaleTo: 2.0
color: #A5163B
[effect_projectileLight3Tiny]
@copyFromSection:effect_projectileLight3
scaleFrom: 0.4
scaleTo: 1
alpha: 0.3
life: 10
[movement]
movementType:BUILDING
targetHeight:0
moveSpeed:0
maxTurnSpeed:0
[ai]
buildPriority:0.2


[global_resource_日耀]
hidden: false
displayName: 日耀
displayColor: #A0FF9500
priority: 0.3

[global_resource_月曜]
hidden: false
displayName: 月曜
displayColor: #A04060FF
priority: 0.3