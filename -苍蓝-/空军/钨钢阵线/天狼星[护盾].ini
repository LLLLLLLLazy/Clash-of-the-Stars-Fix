
[core]
name: 天狼星[护盾]
copyFrom: 天狼星.ini
showInEditor:false

shieldRegen: 0.53

generation_credits: -5
generation_delay: 40

[action_defence]
isVisible: if not self.Shield(greaterThan=2999) or self.hasFlag(id=3)
isActive: if not self.hasFlag(id=3)
convertTo: 天狼星
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
price: 0
id: ${section.text}
text: 防护盾收回
description: -收回防护盾
buildSpeed: 3s
pos: 2
highPriorityQueue: true
playSoundAtUnit: NONE
spawnEffects: NONE
autoTrigger: if self.hasFlag(id=3) and not self.isAttacking() and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=600) or self.resource(type="credits",lessThan=5) and not self.Shield(greaterThan=2999)
ai_isDisabled: true

[action_defence2]
isVisible: if self.Shield(greaterThan=2999) and not self.hasFlag(id=3)
isActive:true
convertTo: 天狼星
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
price: 0
addResources:credits=500
id: ${section.text}2
text: 防护盾收回
description: -收回防护盾 \n-防护盾大于3000时收回可以返还500资金
buildSpeed: 3s
pos: 2
highPriorityQueue: true
autoTrigger: if self.isControlledByAI() and not self.isAttacking() and not numberOfUnitsInEnemyTeam(greaterThan=0, withinRange=600) or self.resource(type="credits",lessThan=5) and self.Shield(greaterThan=2999)
ai_isDisabled: true

[graphics]
showShieldBar: true

[movement]
moveSpeed: 0.85

[ai]
upgradedFrom: 天狼星
#炽星狼辉-灾苍 or 天狼灾律
[hiddenAction_AIshield]
autoTriggerOnEvent: killedAnyUnit
addResources: shield=2000, hp=1000
autoTrigger: if self.hasFlag(id=3) and not self.isAttacking and self.shield(lessThan=3500)
requireConditional: if self.hasFlag(id=3) and self.shield(lessThan=3500) and not eventSource.self.tags(includes="召唤物")

fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: 天束
fireTurretXAtGround_withOffset: 0, 0
spawnEffects: CUSTOM:星, CUSTOM:星波, CUSTOM:hitLightFlash