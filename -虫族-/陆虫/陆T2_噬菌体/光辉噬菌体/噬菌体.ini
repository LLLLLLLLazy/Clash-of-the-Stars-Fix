
[core]
name: 光辉噬菌体
displayText: 光辉噬菌体
displayDescription: -攻击地面单位 \n -可原地部署以提升射程并范围再生 \n -部署时回复防护盾 \n -攻击可引爆目标100毒素造成额外200伤害 \n -净化腐蚀... \n “子弹配方来自普拉克勒斯私房菜——加了地脉能量的核桃奶”
class: CustomUnitMetadata
price: 5500, 腐蚀=${corrode}
maxHp: 1800
mass: 6000

armour: 1
armourMinDamageToKeep: 1

techLevel: 2
buildSpeed: 0.0006
#availableInDemo: true

generation_resources: 腐蚀=-1

fogOfWarSightRange: 18

radius: 22

isBio: true
isBug: true

tags: units, 虫族, 中型虫

maxShield: 200
shieldRegen: 0
startShieldAtZero: true

selfRegenRate:0.1

transportSlotsNeeded: 2

unitsSpawnedOnDeath: 资源返还(addResources=ammo:1375|energy:150)

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits:光辉噬菌体[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 600
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[hiddenAction_light]
autoTrigger: true
addResources: hp=10
spawnEffects:CUSTOM:hitLightFlash

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #FFFFFF

scaleFrom: 1.4
scaleTo: 1.4
alpha: 0.4
drawUnderUnits:false

[effect_shockwave]
image: shockwave2.png
life: 30
scaleFrom: 0
scaleTo: 1.8
dirSpeed: 6
drawUnderUnits:true

[action_deploy]
isVisible: true
id: ${section.text}
tags=${section.text}
text: Deploy
description: -部署\n-在池虫上子弹伤害减半
convertTo: 光辉噬菌体[部署]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
displayType: action
price:  0
buildSpeed: 0.01
alwaysSinglePress: true
whenBuilding_cannotMove: true


[hiddenAction_自动部署]
autoTrigger: if self.hasParent and self.queueSize(withActionTag='Deploy')<1
alsoQueueAction: deploy

[graphics]
total_frames: 1

image:        壳.png
image_shield: 雾光盾.png
image_wreak:  NONE
image_turret: 虫炮.png
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

teamColorsOnTurret: true

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 80
animation_idle_scale_start: 1
animation_idle_scale_end: 1.03
animation_idle_pingPong: true

movementEffect: CUSTOM:trace
movementEffectRate: 10

[effect_trace]
priority: verylow
attachedToUnit: false
life: 100
image: SHARED:spark.png
color: #FFFFFF
scaleFrom: 2
scaleTo: 1
hSpeed: 1
hSpeedRandom: 0.2
xOffsetRelativeRandom: 18
yOffsetRelativeRandom: 18
drawUnderUnits: false

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 32
turretTurnSpeed: 4

maxAttackRange: 190
shootDelay: 30

[turret_1]
x: 0
y: 0

projectile: 1

shoot_sound:plasma_fire2
shoot_sound_vol:0.3
shoot_flame:CUSTOM:尾气雾*4
shoot_light:#FFFFFF

recoilOffset: -3
recoilOutTime: 6
recoilReturnTime: 18

[turret_部署范围]
invisible: true
x: 0
y: 0
canShoot: false
limitingRange: 320
showRangeUIGuide: true

[projectile_1]
tags= T-projectile
areaDamage: 55
areaRadius: 35
areaRadiusFromEdge: true
largeHitEffect:true
life:100
speed:0.2
#frame: 0
frame:6
color:#FFFFFF

lightColor:#FFFFFF
lightSize:0.6

wobbleAmplitude: 4
wobbleFrequency: 30
moveWithParent: true

effectOnCreate: CUSTOM:projectileLight
trailEffect: CUSTOM:尾气雾
trailEffectRate: 5
spawnProjectilesOnEndOfLife: 2
spawnProjectilesOnExplode: 毒爆

[projectile_2]
tags= T-projectile
areaDamage: 55
areaRadius: 35
areaRadiusFromEdge: true
largeHitEffect:true
life:300
speed:15
#frame: 0
frame:6
color:#FFFFFF

lightColor:#FFFFFF
lightSize:0.7

effectOnCreate: CUSTOM:projectileLight2
trailEffect: CUSTOM:尾气雾
trailEffectRate: 0.5

spawnProjectilesOnExplode: 毒爆

[projectile_毒爆]
tags= T-projectile
directDamage: 0
life: 100
speed: 999
invisible: true
targetGround: true
explodeEffect: NONE
spawnUnit: 额外伤害(addResources=energy:2)


[effect_projectileLight]
priority: low

image: SHARED:light_50.png
life: 500
fadeOut: false
attachedToUnit: true
color: #FFFFFF
fadeInTime: 100
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_projectileLight2]
@copyFromSection: effect_projectileLight
life: 100
fadeOut: true
fadeInTime: 2

[effect_尾气雾]
stripIndex: effects
frameIndex: 0
priority: low

life: 20
fadeOut: true
attachedToUnit: true
color: #FFFFFF
scaleFrom: 0.7
scaleTo: 0.1
alpha: 0.6
drawUnderUnits: false
ySpeedRelative: -2
xSpeedRelativeRandom: 0.5
atmospheric: true

[arm_1]
x: 0
y: 18
image_end: 虫头.png
drawOverBody: false

[arm_2]
x: 0
y: 0
image_end: 粘液.png
drawUnderAllUnits: true

[movement]
movementType: OVER_CLIFF

moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

maxTurnSpeed: 1.0
turnAcceleration: 0.5

#moveSlidingMode :false
#moveIgnoringBody:false

moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  181