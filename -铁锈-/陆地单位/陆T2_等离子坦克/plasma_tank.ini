
[core]
name: plasmaTank
displayText: Plasma Tank
displayText_zh: 等离子坦克
displayDescription: -Ground Attack \n -Can periodically launch an extended-range attack
displayDescription_zh: -拥有强大防御 \n-只能攻击陆上单位 \n-有防护盾(能被电击绕过)

overrideAndReplace: plasmaTank

class: CustomUnitMetadata
price: 1100
maxHp: 380
mass: 10000
maxShield: 520
shieldRegen: 0.12
tags: units, 坦克, 等离子坦克

techLevel: 2
buildSpeed:  0.0016
#availableInDemo: true

radius: 14
displayRadius: 15
shieldRenderRadius:15

isBio: false
softCollisionOnAll: 0

energyMax: 16
energyRegen: 0.0166

autoTriggerCooldownTime: 0.1s

[action_等离子射束]
autoTrigger: if self.isEnergyFull and not self.hasFlag(id=1)
setUnitMemory: 属性[20]=210-${attack.maxAttackRange}
alsoTriggerAction: 属性变化
addResources: setFlag=1
isVisible: true
isActive: false
text: Plasma beam
text_zh: 等离子射束
description: -CD:16s
description_zh: -每隔16秒可发射一次210射程光束
pos: 1
displayType: infoOnly
buildSpeed: 0s

[hiddenAction_发射结束]
autoTrigger: if not self.isEnergyFull and self.hasFlag(id=1)
setUnitMemory: 属性[20]=0
alsoTriggerAction: 属性变化
addResources: unsetFlag=1
addActionCooldownTime: 16s
addActionCooldownApplyToActions: 等离子射束

[graphics]
total_frames: 2
teamColorsOnTurret: true
image:        等离子坦克.png
image_wreak:  plasma_tank_dead.png
image_turret: 等离子炮.png

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2


animation_moving_start: 0
animation_moving_end: 1
animation_moving_speed: 2.0


dustEffect: true
lock_body_rotation_with_main_turret: false

showEnergyBar: false

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 21
turretTurnSpeed: 2.5


maxAttackRange: 175
shootDelay: 60
isFixedFiring: false

[turret_1]
x: 0
y: 3

turnSpeed: 4
turnSpeedAcceleration: 0.5

canShoot: false

recoilOffset: -2
recoilOutTime: 4
recoilReturnTime: 20

[turret_2]
x: 0
y: 0
invisible: true
projectile: 1
attachedTo: 1
slave: true

#shoot_sound:firing4
shoot_sound_vol: 0.8
shoot_flame: CUSTOM:lightSlowFade
shoot_light:#ffffff

canShoot: true
canAttackLandUnits: if not self.isEnergyFull or attacking == activeWaypointTarget or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>360

limitingRange: 175

#warmupStartEffect: CUSTOM:warmup
warmup:10

chargeEffectImage: SHARED:lighting_charge.png

[turret_3]
#等离子射束
x: 0
y: 0
invisible: true
attachedTo: 1
slave: true

projectile: 2
energyUsage: 16
canAttackCondition: if self.isEnergyFull
canAttackLandUnits: if attacking == activeWaypointTarget or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>360

shoot_sound: plasma_fire
shoot_sound_vol: 0.1
shoot_flame: CUSTOM:lightSlowFade
shoot_light: #ffffff

aimOffsetSpread: 0

warmup: 10
warmupStartEffect: CUSTOM:聚能光*5
chargeEffectImage: SHARED:lighting_charge.png

[projectile_1]
tags= T-projectile
directDamage: 100
life: 80
speed: 0
targetSpeed: 16
targetSpeedAcceleration: 0.7

drawType:2
frame:4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate:2

#trailEffectRate: true

#lightColor:#ffffff

explodeEffect: CUSTOM:projectilePassThough, smallExplosion, CUSTOM:hitLightFlash

#explodeEffectOnShield: CUSTOM:hitLightFlash

effectOnCreate: CUSTOM:projectileLight


[projectile_2]
tags= T-projectile
life: 20
instant: true

beamImage:      SHARED:beam3.png
beamImageEnd:   SHARED:beam1_end.png
beamImageStart: SHARED:beam1_start.png
beamImageOffsetRate: 2

directDamage: 90

color: #63e6e8
explodeEffect: CUSTOM:射束光, smallExplosion, CUSTOM:hitLightFlash, CUSTOM:lightSlowFade
explodeEffectOnShield: CUSTOM:hitLightFlash, CUSTOM:lightSlowFade

[effect_warmup]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.1
scaleTo: 0.1
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:3.9

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true

[effect_聚能光]
life: 10
scaleFrom: 0.8
scaleTo: 0
alpha: 0.5
color: #63e6e8
fadeOut: false
image: 远光.png
dirOffsetRandom: 180
delayedStartTimerRandom: 10


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.6
drawUnderUnits:true
#ySpeedRelative:-1


[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 1
scaleTo: 0.5
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true


[effect_射束光]
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.6
scaleTo: 0.6
alpha: 0.6
trailEffect: CUSTOM:射束碎光
trailEffectRate: 2.5

[effect_射束碎光]
priority: high
frameIndex: 4
stripIndex: projectiles2
life: 14
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 0.6
scaleTo: 0.4
alpha: 0.7
drawUnderUnits: false
ySpeedRelative: 2
pivotOffsetRandom: 180
atmospheric: true


[movement]
movementType: LAND
moveSpeed: 0.8
moveAccelerationSpeed: 0.05
moveDecelerationSpeed: 0.1

reverseSpeedPercentage:0.75

maxTurnSpeed: 3.4
turnAcceleration: 0.3

moveSlidingMode :true
moveIgnoringBody:false


[hiddenAction_生产跟随移动工厂]
@copyFromSection: template_生产跟随移动工厂
