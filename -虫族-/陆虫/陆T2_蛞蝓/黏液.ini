
[core]
name: 蛞蝓黏液
displayDescription: -造成范围毒素
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 999999

tags=magic, 蛞蝓黏液, 小蛞蝓黏液

fogOfWarSightRange: 0

disableAllUnitCollisions: true
isUnselectable:true

showInEditor:false
showOnMinimap:false

canNotBeDirectlyAttacked:true

techLevel: 1
buildSpeed: 3.33s
#availableInDemo: true

radius: 0
displayRadius: 0

isBio: false
isBuilding: true
footprint: 1,1,-1,-1
constructionFootprint: 1,1,-1,-1

softCollisionOnAll: 0

numBitsOnDeath: 0
explodeOnDeath: false
hideScorchMark: false

energyMax: 8
energyRegen: -${1/60}
dieOnZeroEnergy: true

autoTriggerCooldownTime: 0.5s

[hiddenAction_created]
autoTriggerOnEvent: completeAndActive
requireConditional: if not self.hasFlag(id=2)

[hiddenAction_created2]
autoTriggerOnEvent: completeAndActive
requireConditional: if self.hasFlag(id=2)
temporarilyAddTags: 大蛞蝓黏液
temporarilyRemoveTags: 小蛞蝓黏液
setUnitStats: maxEnergy=9, energy=9

[hiddenAction_毒雾赋予]
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='units', withinRange=40)>0
takeResources_includeUnitsWithinRange: 40
takeResources_includeUnitsWithinRange_team: enemy
takeResources_excludeUnitsWithoutTags: units
takeResources_triggerActionForEach: 毒雾生成
takeResources_searchOnly: true
takeResources_maxUnits: 999

[hiddenAction_大毒雾赋予]
@copyFromSection: hiddenAction_毒雾赋予
autoTrigger: if numberOfUnitsInEnemyTeam(withTag='units', withinRange=160)>0
takeResources_includeUnitsWithinRange: 160

[hiddenAction_毒雾生成]
requireConditional: if thisActionTarget.numberOfUnitsInEnemyTeam(withTag='毒素', withinRange=10)<1 and thisActionTarget.isAtGroundHeight
fireTurretXAtGround: 1
fireTurretXAtGround_withProjectile: 毒雾生成
fireTurretXAtGround_withTarget: thisActionTarget

[graphics]
drawLayer: bottom
image: 大空.png
image_wreak: NONE
image_turret: NONE

showEnergyBar: false

disableLowHpSmoke: true

[decal_黏液]
layer: shadow
alpha: 0.5 * min(self.timeAlive, 1) * min(self.energy, 1)
image: 黏液.png
imageScale: (0.166 * min(self.timeAlive, 1)) * select(self.hasFlag(id=2), 4, 1)

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretTurnSpeed: 999
maxAttackRange: 160
shootDelay: 0.5s

[turret_1]
x: 0
y: 0
limitingRange: 40
canAttackCondition: if not self.hasFlag(id=2)
projectile: 1

[turret_2]
x: 0
y: 0
canAttackCondition: if self.hasFlag(id=2)
projectile: 2

[projectile_1]
areaDamage: 0
areaRadius: 40
life: 0
speed: 0
invisible: true
explodeOnEndOfLife: true
explodeEffect: 毒粒子*3
explodeEffectOnShield: 毒粒子*3

mutatorX_ifUnitWithoutTags: 毒免疫, 效果免疫, 不会受伤
mutatorX_addResourcesAreaHit: 毒素=35

[projectile_2]
@copyFromSection: projectile_1
areaRadius: 160

explodeEffect: 毒粒子2*3

[resource_毒素]
displayName: 毒素


[projectile_毒雾生成]
directDamage: 0
invisible: true
instant: true
life: 5
spawnUnit: 有毒的雾
explodeEffect: NONE
explodeEffectOnShield: NONE

[effect_毒粒子]
priority: verylow
attachedToUnit: false
life: 100
lifeRandom: 30
fadeInTime: 20
image: 白粒.png
color: #2DA72D
scaleFrom: 2
scaleTo: 1
alpha: 0.8
hSpeed: 0.8
hSpeedRandom: 0.3
dirSpeedRandom: 1
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1
xOffsetRelativeRandom: 30
yOffsetRelativeRandom: 30
delayedStartTimerRandom: 30

[effect_毒粒子2]
@copyFromSection: effect_毒粒子
xOffsetRelativeRandom: 60
yOffsetRelativeRandom: 60

[movement]
movementType: LAND
moveSpeed: 0
targetHeight: -1


[ai]
disableUse:true