[core]

copyFrom: turret_common_land.ini

name: 地震塔

price: 2000
maxHp: 1700

techLevel: 2
buildSpeed: 0.002

tags: units, 虫族, 虫建筑, 虫筑系T2, 炮塔, 地震塔
selfRegenRate: 0.15

displayDescription: -范围对地对潜 \n-对建筑破坏力强 \n-引起地脉共鸣

[action_1]
isVisible: if self.resource(type="生长", lessThan=${action_1.price/10})
convertTo:地震塔T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: Upgrade
price:7000
id: 进化地震T2
text:进化 - T2
description:-大地深处在震动\n-不再击退敌人……\n……让敌人永远留在这里吧
descriptionAddUnitStats: ${section.convertTo}
buildSpeed:60s
iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF
whenBuilding_triggerAction: AI{AddTags}

[action_衍1]
@copyFromSection: action_1, template_衍黎进化
isVisible: if self.resource(type="生长", greaterThan=${action_1.price/10-1})
addResources: 生长=-${action_1.price/10}
id: 生长${action_1.id}
textPostFix: (生长: ${action_1.price/10})
buildSpeed: 6s

[hiddenAction_自生长1]
autoTrigger: if self.hasUnitInTeam(withTag="生长-地震塔T2") and self.hasResources(生长=${action_1.price/10}) and self.queueSize(empty=true)
alsoQueueAction: 衍1

[graphics]
image: ccc2.png

scaleImagesTo: 25

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: true

maxAttackRange: 200
shootDelay: 480
[turret_1]
x: 0
y: -5
shoot_sound:cannon_firing
shoot_sound_vol:0.4
shoot_flame:shockwave
warmup:	120
[projectile_1]
tags= T-projectile
life:50
instant:true
areaDamage:400
areaRadius:100
areaRadiusFromEdge:true
areaExpandTime:30
areaHitUnderwaterAlways:true
targetGround:true
largeHitEffect:true
buildingDamageMultiplier:2
pushForce:1
pushVelocity:8
deflectionPower:-1
explodeEffect:CUSTOM:shockwave
explodeEffectOnShield:CUSTOM:shockwave
[effect_shockwave]
stripIndex: shockwave
life:30
scaleFrom:0
scaleTo:4.0


[ai]
upgradedFrom: 虫塔

[hiddenAction_AI{AddTags}]
temporarilyAddTags: 地震T2升级中
requireConditional: if numberOfUnitsInTeam(withTag='炮塔', lessThan=3, withinRange=300) and numberOfUnitsInTeam(withTag='地震塔', lessThan=2, withinRange=300) and self.numberOfUnitsInAllyNotOwnTeam(withTag='地震塔', lessThan=1, withinRange=300) and self.numberOfUnitsInAllyNotOwnTeam(lessThan=3, withinRange=350)
[hiddenAction_AI{resetTags}]
autoTrigger: if self.tags(includes='地震T2升级中') and self.queueSize(empty=true)
temporarilyRemoveTags: 地震T2升级中


[hiddenAction_AIreclaim]
autoTrigger: if self.isControlledByAI and self.hp(lessThan=220) and self.queueSize(empty=true)
alsoQueueAction: reclaim