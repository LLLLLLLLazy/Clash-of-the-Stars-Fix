
[core]
name: 星尘
displayDescription: "培育最美丽的细胞传染病毒"
price: 50000
maxHp: 1750
mass: 99999
armour: 0
armourMinDamageToKeep: 0
tags: units, 星空舰载机, 星尘
borrowResourcesWhileAlive: 星空舰载机=1
selfRegenRate:0.2

techLevel: 1
buildSpeed: 0.001

fogOfWarSightRange:33

canNotBeGivenOrdersByPlayer: true
transportSlotsNeeded: 99

radius: 18
softCollisionOnAll: 20

energyMax: 3
energyRegen: 0.004
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 0.11s

effectOnDeath: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:sparks*5, CUSTOM:sparks2*5
numBitsOnDeath: 0

[hiddenAction_$运输]
@copyFrom_skipThisSection:true

[hiddenAction_move]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 9999s
addWaypoint_target_nearestUnit_tagged: 星空
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 3000
autoTrigger: if not self.hasActiveWaypoint(type='guard')

[hiddenAction_wander]
autoTrigger: if self.customTimer(laterThanSeconds=10) and numberOfUnitsInTeam(withinRange=1000, lessThan=1, withTag='星空')
resetCustomTimer:true
addWaypoint_type: move
addWaypoint_position_randomOffsetFromSelf:200,200
addWaypoint_target_mapMustBeReachable:true
addWaypoint_maxTime: 3s

[hiddenAction_星尘环绕]
autoTrigger: if numberOfUnitsInTeam(withTag='星尘环绕',lessThan=1,withinRange=800) and self.timeAlive(laterThanSeconds=0)
spawnUnits: 小星尘*4

[effect_白闪星]
createWhenZoomedOut: false
priority:low
image:白闪星.png
life: 60
fadeOut: true
attachedToUnit: false
color: #1DC3FE
fadeInTime:5
scaleFrom:1.5
scaleTo:0.5
alpha: 2
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric: true

[effect_速白闪星]
@copyFromSection:effect_白闪星
life: 30

[effect_白闪星A]
@copyFromSection:effect_白闪星
xOffsetRelative:9
yOffsetRelative:-13
ySpeedRelativeRandom:1
scaleFrom:1
scaleTo:0.25
image:强白闪星.png
[effect_白闪星B]
@copyFromSection:effect_白闪星A
xOffsetRelative:-9
yOffsetRelative:-13
[effect_白闪星C]
@copyFromSection:effect_白闪星A
xOffsetRelative:13
yOffsetRelative:-10
[effect_白闪星D]
@copyFromSection:effect_白闪星A
xOffsetRelative:-13
yOffsetRelative:-10
[effect_白闪星E]
@copyFromSection:effect_白闪星A
xOffsetRelative:16
yOffsetRelative:-6
[effect_白闪星F]
@copyFromSection:effect_白闪星A
xOffsetRelative:-16
yOffsetRelative:-6

[hiddenAction_脱离卡死]
autoTrigger: if not self.isInMap
fireTurretXAtGround: 1
fireTurretXAtGround_withTarget: nearestUnit(withTag="星空", relation="own")
fireTurretXAtGround_withProjectile: 闪移

[projectile_闪移]
areaDamage:	100
areaRadius:	44
life: 5
speed: 10
teleportSource: true
explodeOnEndOfLife: true
explodeEffect: CUSTOM:光波, CUSTOM:大hitLightFlash
areaHitAirAndLandAtSameTime: true

[hiddenAction_消散]
autoTrigger: if self.timeAlive(laterThanSeconds=179)
spawnEffects: CUSTOM:外光, CUSTOM:中光, CUSTOM:光波, CUSTOM:白幕
deleteSelf: true
[effect_白幕]
priority: veryhigh
fadeOut: false
image: 罩.png
life: 10
scaleFrom: 20
scaleTo: 0
alpha: 0.75
dirSpeed: -1
color: #1DC3FE
[effect_外光]
priority: veryhigh
image: SHARED:light_50.png
life: 85
fadeOut: true
attachedToUnit: false
color: #1DC3FE
scaleFrom: 2.4
scaleTo: 2.4
alpha: 0.6
drawUnderUnits:false
[effect_中光]
priority: veryhigh
image: SHARED:light_50.png
life: 80
fadeOut: true
attachedToUnit: true
color: #1DC3FE
scaleFrom: 0.5
scaleTo: 0.1
alpha: 2
[effect_光波]
priority: veryhigh
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 2
color: #1DC3FE
fadeInTime: 3
alpha: 2

[graphics]
total_frames: 1
scaleImagesTo: 41
image:        b星尘.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

movementEffect: CUSTOM:白闪星A, CUSTOM:白闪星B, CUSTOM:白闪星C, CUSTOM:白闪星D, CUSTOM:白闪星E, CUSTOM:白闪星F
movementEffectRate: 4


[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

#isFixedFiring: true
meleeEngangementDistance: 700

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 500
shootDelay: 40

[turret_1]
x: 0
y: 0
projectile:1
#shoot_sound:shot_04.wav
#shoot_sound_vol:0.05
shoot_flame: CUSTOM:白闪星
#shoot_light: #ffffff
energyUsage:1
#[turret_2]
#x: 0
#y: 0
#projectile:2
#delay:8s

[projectile_1]
spawnProjectilesOnCreate: 1*5(spawnChance=0.5,recursionLimit=1)
areaDamage:50
areaRadius:20
life:0
image:hit.png
speed:4
#speedSpread:1.5
targetSpeed:0
targetSpeedAcceleration:0.5
targetGround:true
targetGroundSpread:400
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime: true
deflectionPower:-1
explodeEffect: CUSTOM:hitLightFlash
explodeEffectOnShield: CUSTOM:hitLightFlash
#spawnUnit: 星细泡(maxSpawnLimit=1,spawnChance=0.6,addResources=setFlag:2), 星细泡2(maxSpawnLimit=1)
spawnUnit: 星细泡

[effect_hitLightFlash]
priority:high
image: SHARED:light_50.png
life: 14
fadeOut: true
attachedToUnit: false
color: #36C9FF
scaleFrom: 1.8
scaleTo: 1.2
alpha: 0.6
drawUnderUnits:false
[effect_大hitLightFlash]
@copyFromSection:effect_hitLightFlash
scaleTo: 1.8

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 2
image: SHARED:spark.png
priority: verylow
color: #1DC3FE
scaleFrom: 1.5
scaleTo: 1.5

[effect_sparks2]
@copyFromSection:effect_sparks
xSpeedRelativeRandom: 0.5
ySpeedRelativeRandom: 0.5
hSpeed: 1
ySpeedRelative:2

[movement]
movementType: AIR
moveSpeed: 3
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.0

maxTurnSpeed: 6
turnAcceleration: 0.01

targetHeight: 35

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0


[global_resource_星空舰载机]
hidden: true
displayName: 星空舰载机
displayColor: #ffffff
priority: 1