
[core]
name: 虫巢
displayText: 虫巢
displayDescription: -养育虫族战士 \n -T2可生产筑炼者以建造大虫巢
class: CustomUnitMetadata
price: 600
maxHp: 600
mass: 9000

footprint: -1,-1,1,1
constructionFootprint: -1,-1,1,2

techLevel: 1
buildSpeed: 0.002

radius: 18

isBio: true
isBug: true
isBuilding: true
tags: units, 虫族, 虫建筑, 虫筑系T1, 虫巢
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 虫巢

selfRegenRate: 0.06
selfBuildRate: 0.002

nanoFactorySpeed:1

softCollisionOnAll: 3

exit_x:0
exit_y:-1

overrideAndReplace:bugNest

[hiddenAction_狂猎]
autoTrigger:if self.globalTeamTags(includes='狂猎')
convertTo: 虫巢[狂猎]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
alsoTriggerAction: 狂猎升级队列

[canBuild_setRally]
name: setRally
pos: 1

[canBuild_builder]
name: bugSpore
pos: 2
isVisible: if not self.globalTeamTags(includes='AI系统') or not self.globalTeamTags(includes='战隙{I}')
isLocked: if self.globalTeamTags(includes='战隙{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:进入前期阶段,低级单位已停止建造

[canBuild_3]
name: bugMelee
pos: 3
isVisible: if not self.globalTeamTags(includes='AI系统') or not self.tags(includes='一号地巢')
isLocked: if self.globalTeamTags(includes='战隙{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:进入前期阶段,低级单位已停止建造

[canBuild_T1]
name: 独角仙, bugRanged, bugBed, 炮弹虫, 面包虫, 巡林者, 冲射虫
pos: 3.1
isLocked: if self.globalTeamTags(includes='战隙{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:进入前期阶段,低级单位已停止建造

[canBuild_3.3]
name: 毒气
pos: 3.3
isLocked: if self.globalTeamTags(includes='中刻{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:进入中期阶段,低级单位已停止建造

[action_up1]
tags=1
text: 进化 - T2
description: -更快的生产速度\n-可生产筑炼者|群虫幼体
descriptionAddUnitStats: ${section.convertTo}
price: 1200
buildSpeed: 20.8s
pos: -2
iconImage: icon_upgrade.png
convertTo: 虫巢T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: upgrade
isLocked: if not self.globalTeamTags(includes='开端{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:现在不进行进化

[hiddenAction_狂猎升级队列]
requireConditional: if self.queueSize(withActionTag='1', greaterThan=0)
addResources: setFlag=1

[graphics]
total_frames: 1

image:        虫巢.png
image_back:   虫巢_back.png
image_wreak:  NONE

#AUTO
image_shadow: NONE
shadowOffsetX:1
shadowOffsetY:1

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 150
animation_idle_scale_start:1
animation_idle_scale_end:1.05
animation_idle_pingPong: true

[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 10
shootDelay: 50

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0.01
moveDecelerationSpeed: 0.01

maxTurnSpeed: 0
turnAcceleration: 0.1

[ai]
buildPriority: 0.3
noneGlobalExtraPriority: 0.17
recommendedInEachBaseNum: 5
recommendedInEachBasePriorityIfUnmet: 0.7
ai_upgradePriority: 0.19

[action_AI噬咬虫征集]
isVisible: if self.globalTeamTags(includes='AI系统') and self.tags(includes='一号地巢')
unitShownInUI: bugMelee
textAddUnitName: bugMelee
descriptionAddFromUnit: bugMelee
descriptionAddUnitStats: bugMelee
produceUnits: bugMelee
buildSpeed: 3.3s
price: 300
pos: 3

[action_AI建造虫征集]
isVisible: if self.globalTeamTags(includes='AI系统') and self.globalTeamTags(includes='战隙{I}')
unitShownInUI: bugSpore
textAddUnitName: bugSpore
descriptionAddFromUnit: bugSpore
descriptionAddUnitStats: bugSpore
produceUnits: bugSpore
buildSpeed: 0.005
price: 100
pos: 2
isLocked: if self.globalTeamTags(includes='战隙{I}') and self.globalTeamTags(includes='AI系统')
isLockedMessage: AI:进入前期阶段,低级单位已停止建造

[hiddenAction_AI一号地巢]
autoTrigger: if self.globalTeamTags(includes='AI系统') and not numberOfUnitsInTeam(withTag='一号地巢', greaterThan=0) and self.hasResources(1800)
temporarilyAddTags: 一号地巢
alsoQueueAction: AI噬咬虫征集, AI噬咬虫征集, AI噬咬虫征集, AI噬咬虫征集
addResources: credits=-1800

[hiddenAction_AIupgrade]
autoTrigger:if self.globalTeamTags(includes='AI系统') and self.hasResources(2500) and self.queueSize(empty=true) and self.globalTeamTags(includes='开端{I}') and (self.globalTeamTags(includes='AI屯兵') or self.globalTeamTags(includes='战隙{I}')) and not self.tags(includes='一隙之巢')
alsoQueueAction: AI建造虫征集1, up1
addResources: credits=-2300
temporarilyAddTags: 一隙之巢, 中刻之巢

[hiddenAction_AI建造虫征集1]
buildSpeed: 0s
addResources: credits=-200
alsoQueueAction: AI建造虫征集
requireConditional: if self.timeAlive(laterThanSeconds=180)
