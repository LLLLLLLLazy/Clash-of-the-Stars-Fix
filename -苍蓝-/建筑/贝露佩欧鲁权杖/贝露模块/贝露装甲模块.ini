
[core]
name: 贝露装甲模块
copyFrom: common_slot.ini

displayDescription: -护盾屏蔽模块 \n -盾能存储 \n -护盾受损时消耗能量快速回复护盾(200/1s) \n -每1能源供应提供7能量恢复/每秒

price: 2000

energyMax: 2000
energyStartingPercentage: 0.25

autoTriggerCooldownTime: 6

tags: units, 贝露模块

[hiddenAction_shield]
requireConditional: if not self.hasParent(withTag="贝露之眼")
autoTrigger: if not self.parent.shield(full=true) and self.energy(greaterThan=${regen})

#20 / 6 = 3.33 per tick

@define regen: 20
addResourcesWithLogic: energy=-min(parent.maxShield-parent.shield, ${regen})
takeResources: shield=-${regen}
takeResources_includeParent: true
takeResources_discardCollected: true

[hiddenAction_能源供应]
autoTrigger: if not self.isEnergyFull
resourceAmount: 能源转化
resourceAmount_setValue: 0
resourceAmount_addOtherResource: 能源供应
alsoTriggerAction: 能源转化

[hiddenAction_能源转化]
convertResource_from: 能源转化
convertResource_to: energy
convertResource_maxAmount: 9999
convertResource_multiplyAmountBy: 1

[action_升级T2]
textAddUnitName: ${section.convertTo}
descriptionAddFromUnit: ${section.convertTo}
descriptionAddUnitStats: ${section.convertTo}
isActive: if self.queueSize(empty=true)

buildSpeed: 30s
convertTo: 贝露装甲模块T2
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 5000

iconExtraImage: SHARED:icon_upgrade_top.png
iconExtraColor: #AAFFFFFF

[action_升级T2β]
@copyFromSection: action_升级T2

buildSpeed: 20s
convertTo: 贝露装甲模块T2β
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 3500

alsoTriggerAction: 升级血量
[hiddenAction_升级血量]
sendMessageTo: parent
sendMessageWithTags: 血量强化
sendMessageWithData: 变值=1000

[hiddenAction_初始护盾]
autoTrigger: if not self.tags(includes="初始护盾")
temporarilyAddTags: 初始护盾
resourceAmount: energy
resourceAmount_setValue: 500

[graphics]
image: 苍影防护盾.png

