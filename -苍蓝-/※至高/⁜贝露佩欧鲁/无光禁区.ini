[core]
name:无光禁区
class: CustomUnitMetadata
price:0
maxHp: 0
armour:0
mass:3000
techLevel:1
buildSpeed:1
radius: -10
displayRadius: -10
isBuilding:false
numBitsOnDeath:8
isBio:false
isUnselectable:true
disableAllUnitCollisions:true
canOnlyBeAttackedByUnitsWithTags:alk
explodeOnDeath:true
isUnrepairableUnit:true
showInEditor:false
showOnMinimap:false
tags:无光禁区, 大雾
disableDeathOnZeroHp:true
autoTriggerCooldownTime: 0.05s
autoTriggerCooldownTime_allowDangerousHighCPU:true

[template_提取目标]
takeResources_includeUnitsWithinRange: 400
takeResources_includeUnitsWithinRange_team: enemy
takeResources_excludeUnitsWithoutTags: units
takeResources_maxUnits: 9999

[hiddenAction_状态时间]
@copyFromSection: template_提取目标
autoTrigger: if numberOfUnitsInEnemyTeam(withTag="units", greaterThan=0, withinRange=400)
takeResources: 大雾减速=-1
takeResources_excludeUnitsWithTheseResources: 大雾减速=2
#--------己方加速--------
[hiddenAction_状态时间2]
@copyFromSection: template_提取目标
takeResources_includeUnitsWithinRange_team: own
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=0, withinRange=250)
takeResources: 光雾速度=-1
takeResources_excludeUnitsWithTheseResources: 光雾速度=2

[resource_大雾减速]
hidden: true

[resource_光雾速度]
hidden: true


[graphics]
drawLayer:bottom
total_frames:1
imageScale:0.5
image:SHARED:blank.png
image_wreak:NONE
image_turret:SHARED:blank.png
image_shadow:NONE
disableLowHpFire:true
disableLowHpSmoke:true
showHealthBar:false
showEnergyBar:false
icon_zoomed_out:SHARED:blank.png

[attack]
canAttack:false
canAttackFlyingUnits: false
canAttackLandUnits:true
canAttackUnderwaterUnits:false
turretSize: 0
aimOffsetSpread: -0.01
turretTurnSpeed: 100
shootDelay:0.1
maxAttackRange:30

[movement]
movementType:AIR
moveSpeed: 0
moveAccelerationSpeed: 0.00001
moveDecelerationSpeed: 0.00001
maxTurnSpeed: 0
turnAcceleration: 0.00001
moveSlidingMode :false
moveIgnoringBody:false
targetHeight:0
startingHeightOffset:0

[hiddenAction_I]
autoTrigger:if self.ammo>300 and not self.hasFlag(id=1)
deleteSelf:true

[hiddenAction_I+]
autoTrigger:if self.ammo>600 and self.hasFlag(id=1)
deleteSelf:true

[hiddenAction_II]
autoTrigger:if not self.hasFlag(id=1)
addResources:ammo=1
fireTurretXAtGround:1

[hiddenAction_II+]
autoTrigger:if self.hasFlag(id=1)
addResources:ammo=1
fireTurretXAtGround:1
fireTurretXAtGround_withProjectile:雾2

[hiddenAction_IV]
autoTrigger:if self.numberOfUnitsInTeam(withTag='强积雨云',greaterThan=0,withinRange=400) or numberOfUnitsInAllTeams(withTag="沉渊之海")>0
addResources:setFlag=1

[turret_1]
x:0
y:0
image:SHARED:blank.png
turnSpeed:0
projectile:雾
canShoot:false
canAttackFlyingUnits:true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

[projectile_雾]
areaDamage: 0
areaRadius: 400
life:0
speed:0
drawSize:0
image:SHARED:blank.png
areaExpandTime:5
areaDamageNoFalloff:true
deflectionPower: -1
targetGround:true
targetGroundSpread:17
explodeEffect:CUSTOM:fog4,CUSTOM:onlySound
explodeEffectOnShield:CUSTOM:fog4,CUSTOM:onlySound
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime:true

[projectile_雾2]
areaDamage: 0
areaRadius: 400
life:0
speed:0
drawSize:0
image:SHARED:blank.png
areaExpandTime:5
areaDamageNoFalloff:true
deflectionPower: -1
targetGround:true
targetGroundSpread:17
explodeEffect:CUSTOM:fog4+,CUSTOM:onlySound
explodeEffectOnShield:CUSTOM:fog4+,CUSTOM:onlySound
explodeOnEndOfLife:true
areaHitAirAndLandAtSameTime:true

[effect_fog4]
priority: high
life:120
fadeInTime: 20
image:fog4.png
scaleFrom:1.0
scaleTo: 1.5
alpha: 0.1
hSpeed: 0.5
fadeOut: true
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom:250
yOffsetRelativeRandom:250
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect:CUSTOM:fog5
trailEffectRate:6.0
spawnChance:0.7

[effect_fog4+]
priority: high
life:120
fadeInTime: 20
image:fog4+.png
scaleFrom:1.0
scaleTo: 1.5
alpha: 0.2
hSpeed: 0.5
fadeOut: true
hSpeedRandom: 0.8
ySpeedRelativeRandom: 0.4
xSpeedRelativeRandom: 0.4
xOffsetRelativeRandom:250
yOffsetRelativeRandom:250
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits: false
trailEffect:CUSTOM:fog5
trailEffectRate:6.0
spawnChance:0.7

[effect_fog5]
priority: high
life: 100
fadeInTime: 20
image:fog4.png
scaleFrom:1.0
scaleTo: 1.5
alpha: 0.1
fadeOut: true
physics: true
physicsGravity: 0.4
createWhenOverLand: true
createWhenOverLiquid:false
dirOffsetRandom: 180
attachedToUnit: false
drawUnderUnits:false
spawnChance:0.2

[effect_onlySound]
attachedToUnit:false
life:0
alpha:0
image:SHARED:blank.png
fadeOut: true
scaleFrom:0
scaleTo:0
priority:low
showInFog:false
spawnChance:0.3
alsoPlaySound:重雾.ogg:0.05

