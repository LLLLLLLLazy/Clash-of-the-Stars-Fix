
[core]
showInEditor:false

name: 治疗精灵
displayText: 治疗精灵
displayDescription:-维修单位\n-也可以回收自己的单位

class: CustomUnitMetadata
price: 0
maxHp: 150
mass: 1000
maxShield: 150

selfRegenRate: 0.3

tags: 召唤物

techLevel: 1

buildSpeed: 0.001
availableInDemo: false

radius: 7
displayRadius: 15

#isBuilding: true

disableAllUnitCollisions: true

numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

isUnrepairableUnit: true

canRepairBuildings: true
#selfBuildRate:0.0008
canRepairUnits : true
nanoRange: 360
nanoBuildSpeed: 1.5
autoRepair: true
nanoRepairSpeed: 0.3

fireTurretXAtSelfOnDeath: 2

[action_reclaim]
autoTrigger: if self.timeAlive(laterThanSeconds=15)
text: 自毁
description: -治疗周围友军 \n 治疗: 240 | 范围: 120 | 随距离衰减 | 边缘计算
displayType: action
pos: 1
ai_isDisabled: true
allowMultipleInQueue: false
alwaysSinglePress: true
buildSpeed: 0.1s
addResources: hp=-1000

[hiddenAction_附从维修]
autoTrigger: if nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').hasActiveWaypoint(type='repair') and (not self.hasActiveWaypoint(type='repair') or activeWaypointTarget!=nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget) and distanceBetween(self, nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget) <= 360
clearAllWaypoints: true
addWaypoint_type: repair
addWaypoint_prepend: true
addWaypoint_target_fromReference: nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget

[hiddenAction_附从回收]
autoTrigger: if nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').hasActiveWaypoint(type='reclaim') and (not self.hasActiveWaypoint(type='reclaim') or activeWaypointTarget!=nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget) and distanceBetween(self, nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget) <= 360
clearAllWaypoints: true
addWaypoint_type: reclaim
addWaypoint_prepend: true
addWaypoint_target_fromReference: nearestUnit(withinRange=720, withTag='贝露佩欧鲁权杖', relation='own').activeWaypointTarget

[hiddenAction_hitLightFlash]
autoTrigger: true
spawnEffects:CUSTOM:hitLightFlash

[effect_hitLightFlash]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
fadeInTime: 30
attachedToUnit: false
color: #63e6e8

scaleFrom: 0.8
scaleTo: 0.7
alpha: 0.9
drawUnderUnits:false

[graphics]

total_frames: 1
image: null.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1

disableLowHpFire: true
disableLowHpSmoke: true

[attack]

canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits: false
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 20

maxAttackRange: 360
shootDelay: 50


[turret_1]
#nano turret (nano must be slot 1)
x: 0
y: 0
invisible: true
warmup: 30
canShoot: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turnSpeedAcceleration: 0.08

[turret_2]
x: 0
y: 0
invisible: true
canShoot: false
projectile: 1

[projectile_1]
areaDamage: -240
areaRadius: 120
areaRadiusFromEdge: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
life: 50
instant: true
targetGround: true
shieldDefectionMultiplier: 0
friendlyFire: only-ignoreEnemy
explodeEffect: CUSTOM:shockwave, hitLightFlashs

mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

[effect_shockwave]
stripIndex: shockwave
life: 30
scaleFrom: 0
scaleTo: 4
color: #63e6e8

[effect_hitLightFlashs]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8

scaleFrom: 2
scaleTo: 4
alpha: 0.6
drawUnderUnits:false

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0

maxTurnSpeed: 0
turnAcceleration: 0

ignoreMoveOrders: true

[ai]
useAsBuilder: true