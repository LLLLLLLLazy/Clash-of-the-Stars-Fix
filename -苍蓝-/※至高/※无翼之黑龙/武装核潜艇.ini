
[core]
name: 武装核潜艇
class: CustomUnitMetadata
displayText: 无翼之黑龙
displayDescription: -重型武装防御 \n -“水蛇”联装鱼雷 \n -六门弹道导弹发射井 \n -一挺重机枪 \n -可建造并发射远古瘟疫炸弹——“镇魂星” \n -自我修复 \n -死亡后核爆炸 \n “那场光辉的战役之后……封存在了不知名处……如今又为什么会苏醒呢” \n (未实装单位)

price: 150000
maxHp: 10000
mass: 300000

armour: 5
armourMinDamageToKeep: 5

tags: units, 指挥舰, 能量冷却

selfRegenRate: 0.2

techLevel: 3
experimental: true
buildSpeed: 0.0001
availableInDemo: false

radius: 70
isBio: false

transportSlotsNeeded: 5

fogOfWarSightRange:28

energyMax: 12
energyRegen: 0.03
energyNeedsToRechargeToFull: true

#nukeOnDeath: true
#nukeOnDeathRange: 400
#nukeOnDeathDamage: 3000
#nukeOnDeathDisableWhenNoNuke: true

fireTurretXAtSelfOnDeath: siloTop

[action_surface]
convertTo: 武装核潜艇[上浮]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
displayType: action
price:  0
text: Surface
description: -Surface unit
buildSpeed: 1.5s
pos:-1
alwaysSinglePress: true
highPriorityQueue: true

[action_dive]
isVisible: false
convertTo: 武装核潜艇
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
isActive: if self.isOverwater
displayType: action
price:  0
text: Dive
description: -Dive unit underwater
buildSpeed: 1.5s
pos:-1
alwaysSinglePress: true
highPriorityQueue: true

[action_buildNuke]
price: 苍蓝能量=2
text:建造镇魂星
description:-暗流涌动……
displayType: NONE
buildSpeed: 0.00012
pos: 0.2
isActive:if self.ammoIncludingQueued(lessThan=6)
addResources: ammo=1

iconImage: glow_green.png

[action_launchNuke]
fireTurretXAtGround: siloTop
price: ammo=1

text:发射镇魂星
description:-曾猎杀过某只巨兽……
displayType: action
buildSpeed: 0.01
pos: 0.1
displayRemainingStockpile: true
highPriorityQueue: true
onlyOneUnitAtATime: true

iconImage: SHARED:icon_attack_point.png

[graphics]
drawLayer: experimentals
total_frames: 1

image:        武装核潜艇.png
image_wreak: NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:1.5
shadowOffsetY:1.5

movementEffect:CUSTOM:splash
movementEffectRate: 8

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits:false

turretSize: 25
turretTurnSpeed: 3

maxAttackRange: 280
shootDelay: 60

[turret_1]
#gun turret (not in use)
x: 0
y: 27
idleDir:0
invisible: true
canShoot: false

[turret_2]
#missile turret
x: 25
y: 7
idleDir:0

invisible: true

shoot_flame:shockwave
shoot_light:#FFEECCCC

canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: true
canAttackNotTouchingWaterUnits: false

projectile: 2
size: 1
turnSpeed: 40

energyUsage: 1

[turret_3]
#back turret
copyFrom: 2

x: -25
y: 7
idleDir:0
warmup:20
projectile: 2
linkDelayWithTurret:2

[turret_4]
#back turret
copyFrom: 2

x: -25
y: 2
idleDir:0
warmup:40
projectile: 2
linkDelayWithTurret:2

[turret_5]
#back turret
copyFrom: 2

x: 25
y: 2
idleDir:0
warmup:60
projectile: 2
linkDelayWithTurret:2

[turret_6]
#back turret
copyFrom: 2

x: 25
y: -3
idleDir:0
warmup:80
projectile: 2
linkDelayWithTurret:2

[turret_7]
#back turret
copyFrom: 2

x: -25
y: -3
idleDir:0
warmup:100
projectile: 2
linkDelayWithTurret:2

[projectile_2]
tags= T-projectile
#torpedo
directDamage: 80

life: 30
speed: 0.15
targetSpeed: 1.5
drawSize: 1
color: #1E1E96
lightColor:#000000FF
trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:40
ballistic_height: -2

wobbleAmplitude: 3
wobbleFrequency: 3s

autoTargetingOnDeadTarget: true

spawnProjectilesOnEndOfLife: 2a

[projectile_2a]
tags= T-projectile
#torpedo
directDamage: 80

life: 300
speed: 0.15
targetSpeed: 1.5
drawSize: 1
color: #1E1E96
lightColor:#000000FF
trailEffect: true
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:40
ballistic_height: -2

wobbleAmplitude: 1
wobbleFrequency: 1s

autoTargetingOnDeadTarget: true

[projectile_3]
tags= T-projectile
#missile
directDamage: 35
drawSize: 0.8
life: 240
speed: 0.3
targetSpeed: 6
trailEffect: true
trailEffectRate: 1
largeHitEffect: true
ballistic: true
ballistic_delaymove_height:40
ballistic_height: 60
frame: 4

areaDamage: 180
areaRadius: 55

autoTargetingOnDeadTarget: true

[effect_splash]
life: 100
stripIndex: effects
frameIndex: 13
scaleFrom: 1.2
scaleTo: 1.5
alpha: 0.4
atmospheric:true
fadeInTime: 3
fadeOut:true
dirOffsetRandom:180
xSpeedAbsoluteRandom: 0.1
ySpeedAbsoluteRandom: 0.1
ySpeedRelative:-0.2
yOffsetRelative:-70
attachedToUnit: false
drawUnderUnits:true

[movement]
movementType: WATER
moveSpeed: 0.3
moveAccelerationSpeed: 0.015
moveDecelerationSpeed: 0.05

reverseSpeedPercentage:0.6
targetHeight:-8
targetHeightDrift: 0.1
maxTurnSpeed: 0.8
turnAcceleration: 0.05


[ai]
useAsTransport: false


#————————————————————
#核弹


[turret_siloTop]
#nuke turret
canShoot: false

x: 0
y: 0
idleDir:0

invisible: true

shoot_sound:nuke_launch
shoot_sound_vol:0.3
shoot_flame: CUSTOM:镇魂*5
shoot_light:#FFEECCCC

projectile: nukeProjectile
size: 1

turnSpeed: 40

limitingRange: 1500
limitingMinRange: 280

[projectile_nukeProjectile]
#nuke
tags= nuke

life: 99999
speed: 2.5

largeHitEffect: true
ballistic: true
ballistic_delaymove_height:80
ballistic_height: 110

image: glow_green.png

shadowFrame:1
drawType:1

targetGround: true
areaDamage: 3000

areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
alwaysVisibleInFog: true

nukeWeapon:true

areaRadius: 400

areaExpandTime:100

deflectionPower:-1

shouldRevealFog:true
spawnUnit:蘑菇云, 镇魂

friendlyFire: true

trailEffect: CUSTOM:镇魂
trailEffectRate:1

explodeEffect:CUSTOM:shockwave,CUSTOM:恶地,CUSTOM:stripIndex*8

[effect_shockwave]
stripIndex: shockwave
priority:critical
color: #AEFF00
life: 150
scaleFrom: 0
scaleTo: 15.0

[effect_stripIndex]
stripIndex: effects
frameIndex: 0
priority:critical

life: 3000
fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:100
dirSpeedRandom: 0.1
scaleFrom: 24.0
scaleTo: 32.0
alpha: 0.2
drawUnderUnits:false
#yOffsetRelative:-7
xOffsetRelativeRandom:350
yOffsetRelativeRandom:350
xSpeedRelativeRandom:0.1
ySpeedRelativeRandom:0.1

shadow: true

[effect_light]
image:glow_green.png
priority:critical

life: 50
fadeOut: true
attachedToUnit: false
scaleFrom: 40.0
scaleTo: 40.0
drawUnderUnits:false

[effect_恶地]
priority:critical
image: mudPool.png
life: 9999
scaleFrom: 1.0
scaleTo: 1.0
alpha: 1.0
drawUnderUnits:true

[effect_镇魂]
#雾
stripIndex: effects
frameIndex: 0
priority:low

life: 120
fadeOut: true
attachedToUnit: false
color: #AEFF00
fadeInTime:3
hSpeed: 0.5
scaleFrom: 0.8
scaleTo: 3.2
alpha: 0.4
drawUnderUnits:false
#yOffsetRelative:-7
xOffsetRelativeRandom:5
xSpeedRelativeRandom:0.5
ySpeedRelative:0.5
ySpeedRelativeRandom:0.5

shadow: true
atmospheric: true