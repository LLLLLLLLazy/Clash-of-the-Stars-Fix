[core]

name:群虫幼体
displayDescription: -拥有一定数量后可生长为成体 \n -幼体移动速度较快 \n -每次攻击增加5生命上限 \n -攻击成长最多提升300生命上限
class:CustomUnitMetadata
price:650
maxHp:100
mass:350
techLevel:2
buildSpeed:0.0045
#availableInDemo: true

tags: units, 虫族, 小型虫, 群虫, 群虫幼体, 固定射击
showActionsWithMixedSelectionIfOtherUnitsHaveTag: 群虫

radius:8
displayRadius:10
isBio:true
isBug:true

numBitsOnDeath:5



selfRegenRate:0.06


softCollisionOnAll:12

builtFrom_1_name:bugNest

[action_upgrade2]
isLocked: if not numberOfUnitsInTeam(greaterThan=19,withTag='群虫')
isLockedMessage: 需拥有至少二十只群虫或群虫幼体
convertTo: 群虫
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
price: 腐蚀=10
text: 成长
description: -完全体
descriptionAddUnitStats: ${section.convertTo}
displayType: upgrade
buildSpeed: 33.3s
alwaysSinglePress: true
whenBuilding_cannotMove: true
whenBuilding_rotateTo: 0
whenBuilding_rotateTo_orBackwards: true

[hiddenAction_自动成长]
autoTrigger: if (self.globalTeamTags(includes='AI系统') or self.hasUnitInTeam(withTag="成长-群虫") and self.hasUnitInTeam(withTag="腐蚀之意")) and numberOfUnitsInTeam(greaterThan=19,withTag='群虫') and self.hasResources(${action_upgrade2.price}) and self.queueSize(empty=true) and not self.isAttacking
alsoQueueAction: upgrade2
addResourcesWithLogic: ${action_upgrade2.price}*-1


[hiddenAction_战斗成长]
requireConditional: if memory.属性[14]<400
setUnitMemory: 属性[14]=memory.属性[14]+5
alsoTriggerAction: 属性变化


[action_扩散移动点开]
@copyFromSection: template_扩散移动点开

[action_扩散移动点关]
@copyFromSection: template_扩散移动点关

[hiddenAction_设置扩散移动点]
@copyFromSection: template_设置扩散移动点

[hiddenAction_清除当前非巡逻路径]
@copyFromSection: template_清除当前非巡逻路径

[hiddenAction_锁定扩散移动点]
@copyFromSection: template_锁定扩散移动点

[hiddenAction_执行扩散移动点]
@copyFromSection: template_执行扩散移动点

[graphics]
total_frames:5

image:bug_melee.png

image_turret:NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow:AUTO_ANIMATED
shadowOffsetX:0
shadowOffsetY:0


animation_moving_start:0
animation_moving_end:2
animation_moving_speed:3
#animation_moving_pingPong: true

animation_idle_start:0
animation_idle_end:0
animation_idle_speed:120
animation_idle_scale_start:1
animation_idle_scale_end:1.03
animation_idle_pingPong:true

animation_attack_start:2
animation_attack_end:4
animation_attack_speed:4


lock_body_rotation_with_main_turret:true


[attack]

isMelee:true
meleeEngangementDistance: 150

canAttack:true
canAttackFlyingUnits:false
canAttackLandUnits:true
canAttackUnderwaterUnits:false

isFixedFiring:true

turretSize:20
turretTurnSpeed:3

maxAttackRange:7
shootDelay:40

[turret_1]
x:0
y:0

recoilOffset:3
recoilOutTime:6
recoilReturnTime:18

onShoot_triggerActions: 战斗成长

[projectile_1]
tags= T-projectile
directDamage:20
life:50
instant:true


[movement]
movementType:LAND
moveSpeed:1.7
moveAccelerationSpeed:0.07
moveDecelerationSpeed:0.12


maxTurnSpeed:5.5
turnAcceleration:0.5

moveSlidingMode:true
moveIgnoringBody:true
moveSlidingDir:181



reverseSpeedPercentage:0


[hiddenAction_AIGather]
clearAllWaypoints: true
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 基地
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard')