
[core]
showInEditor:false
name: 君王[冲刺]
copyFrom:近战君王.ini

mass: 150000

armour: 20
armourMinDamageToKeep: 0

softCollisionOnAll: 23

autoTriggerCooldownTime: 0.1s

[action_chong]
@copyFrom_skipThisSection:true
autoTrigger: if getOffsetRelative(y=40).isOverLiquid or self.isOverLiquid or not getOffsetRelative(y=30).isInMap
convertTo: 君王
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
addResources: hp=-500
id: ${section.text}
text: 止
description: -强行停止会使身体受到一定伤害
buildSpeed: 0s
clearActiveWaypoint: true
whenBuilding_cannotMove: true
addActionCooldownTime: 100s
iconImage: 死神.png
pos: 1
spawnEffects: 震波
playSoundAtUnit: large_gun_fire2:0.2

[effect_震波]
stripIndex: shockwave_large
life: 15
scaleFrom: 0
scaleTo: 1.5
alpha: 0.8


[hiddenAction_冲刺路径]
autoTrigger: true
addWaypoint_type: move
addWaypoint_prepend: true
addWaypoint_target_mapMustBeReachable: false
addWaypoint_target_fromReference: getOffsetRelative(y=100)
clearActiveWaypoint: true

[action_Strong1]
displayType: infoOnlyStockpile
isGuiBlinking: true
#isVisible: if self.maxspeed() and not self.hasFlag(id=1)
isVisible:false
addResources: setFlag=1, 腐蚀=-500, hp=1000
text: 更快!
description: !
buildSpeed: 0
pos: 2
alwaysSinglePress: true
spawnEffects:CUSTOM:更快
playSoundAtUnit: large_gun_fire2:2.0

[action_Strong2]
displayType: infoOnlyStockpile
isGuiBlinking: true
isVisible: if self.maxspeed() and self.hasFlag(id=1) and not self.hasFlag(id=2)
addResources: setFlag=2, 腐蚀=-1000
text: 更好!!
description: !!
buildSpeed: 0
pos: 2
alwaysSinglePress: true
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: 更好
playSoundAtUnit: large_gun_fire2:3.0

[action_Strong3]
displayType: infoOnlyStockpile
isGuiBlinking: true
isVisible: if self.maxspeed() and self.hasFlag(id=1) and self.hasFlag(id=2)
addResources: setFlag=3, 腐蚀=-1500
text: 更强!!!
description: !!!
buildSpeed: 0
pos: 2
alwaysSinglePress: true
spawnEffects:CUSTOM:更强
playSoundAtUnit: large_gun_fire2:5.0

[action_trigger_Strong4]
convertTo: 君王[死寂]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
autoTrigger: if self.hasFlag(id=3)
isVisible: false

[action_trigger_停止]
convertTo: 君王
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
autoTrigger: if self.lastConverted(laterThanSeconds=10)
clearActiveWaypoint: true
isVisible: false

[action_神速]
isVisible:false
autoTrigger:if self.speed > 0.98
spawnEffects:CUSTOM:projectileTrail

[effect_projectileTrail]
createWhenZoomedOut:false
priority:low
image:SHARED:light_50.png
life:60
fadeOut:true
attachedToUnit:false
fadeInTime:2
scaleFrom:1.3
scaleTo:0.9
alpha:0.5
drawUnderUnits:true
ySpeedRelative:-0.4
atmospheric:true

[graphics]
lock_body_rotation_with_main_turret: false

[attack]
canAttackLandUnits: if self.speed > 0.98

isFixedFiring: false

turretTurnSpeed: 60

maxAttackRange: 100
shootDelay: 0.05s

aimOffsetSpread: 600

[turret_1]
x: 0
y: 0
shoot_sound_vol:0.1
recoilOffset: 0
recoilOutTime: 0
recoilReturnTime: 0

[projectile_1]
tags= T-projectile
areaDamage:360

[projectile_更好]
tags= T-projectile
life: 50
instant:true
areaDamage: 1000
areaRadius: 150

armourIgnoreAmount:100

pushForce: 10
pushVelocity: 10

explodeEffect: CUSTOM:更好

[leg_1]
moveSpeed: 8.2
resetAngle:20
heightSpeed: 1.2
image_leg:  脚.png
image_foot: NONE
drawLegWhenZoomedOut: true
dust_effect: true
holdDisMin: 6
holdDisMax: 15

[effect_更快]
stripIndex: shockwave
life: 30
scaleFrom: 2.5
scaleTo: 0
dirSpeed: -5

[effect_更好]
stripIndex: shockwave
life: 20
scaleFrom: 0
scaleTo: 4.0
dirSpeed: 5

[effect_更强]
image: 君王[完杀].png
life: 20
scaleFrom: 1.5
scaleTo: 2.0

[movement]
movementType: AIR
moveSpeed: 3.0
moveAccelerationSpeed: 0.005
moveDecelerationSpeed: 0.0

maxTurnSpeed: 0.0

moveSlidingMode: false
moveIgnoringBody:false
moveSlidingDir: 0