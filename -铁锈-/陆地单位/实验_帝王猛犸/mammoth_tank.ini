
[core]
name: 帝王猛犸
displayText: 帝王猛犸
displayDescription: -非常全副武装并带有防护盾 \n -攻击地面单位 \n -伤害小范围不衰减 \n -附带电弧 \n-对建筑物伤害较低 \n -可强化自身一段时间 \n -自我修复

class: CustomUnitMetadata
#price: 3900
price: 21000
tags: units, 坦克, 帝王猛犸

#maxHp: 2600
maxHp: 6000

maxShield: 1200
shieldRegen: 0.25

armour: 5
armourMinDamageToKeep: 5

selfRegenRate:0.08

#mass: 14000
mass: 80000

experimental: true

techLevel: 1
buildSpeed: 0.00025
availableInDemo: true

radius: 33
displayRadius: 30

isBio: false
softCollisionOnAll: 0

numBitsOnDeath: 0

transportSlotsNeeded: 5

autoTriggerCooldownTime: 0.01s
autoTriggerCooldownTime_allowDangerousHighCPU:true

builtFrom_1_name: experimentalLandfactory
builtFrom_1_pos:  4.2

effectOnDeath:CUSTOM:sparks2*30,CUSTOM:shockwave*2

[action_Iceage]
displayType: action
addResources: setFlag=1, shield=300
isGuiBlinking: if self.hasFlag(id=1)
resetCustomTimer: true
fireTurretXAtGround: Iceage2
fireTurretXAtGround_withOffset:0,0
text: 冰河咆哮
description: -来自冰河世纪的凛冽狂风 \n -强化自身一段时间 \n -攻击附带击退 \n -穿透护甲 \n -每次攻击回复300护盾
addActionCooldownTime: 60s
isLockedMessage: 冷却中...
buildSpeed: 0
pos: 1

[action_glacier]
isActive: false
isVisible: if self.shield(full=true) and not self.hp(full=true)
isGuiBlinking: if self.shield(full=true) and not self.hp(full=true)
autoTrigger: if self.shield(full=true) and not self.hp(full=true)
text: 冰川
description: -护盾充盈时快速回复血量
pos: 2
displayType: infoOnlyStockpile
buildSpeed: 0s
addResources: hp=1

[hiddenAction_TheEndoftheIceAge]
autoTrigger: if self.customTimer(laterThanSeconds=20) and self.hasFlag(id=1)
addResources: unsetFlag=1

[hiddenAction_ColdWind]
autoTrigger:if self.hasFlag(id=1)
spawnEffects:CUSTOM:ColdWind*1

[effect_ColdWind]
priority:low
attachedToUnit:true
fadeInTime:6
life:120
alpha:0.3
scaleFrom:0.6
scaleTo:1.2
image:SHARED:light_50.png
color: #63e6e8
drawUnderUnits:false
atmospheric:true
xOffsetRelativeRandom:20
yOffsetRelativeRandom:30
xSpeedRelativeRandom:1.2
ySpeedRelativeRandom:1.2

[graphics]
total_frames: 7

image:        mammoth_tank.png
image_wreak:  mammoth_tank_dead.png
image_turret: mammoth_tank_turret.png

teamColorsOnTurret: true

#imageScale: 1.2
#scaleTurretImagesTo: 40

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

animation_moving_start: 0
animation_moving_end: 6
animation_moving_speed: 2.85

disableLowHpFire: true

#dustEffect: true
movementEffect: CUSTOM:scoutTrail, CUSTOM:scoutTrail2
movementEffectReverse: CUSTOM:scoutTrail, CUSTOM:scoutTrail2
movementEffectReverseFlipEffects: true
movementEffectRate: 15

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 4

#maxAttackRange: 190
maxAttackRange: 210

#shootDelay: 50
shootDelay: 70

aimOffsetSpread: 0

[turret_1]
#coil
x: 0
y: 23
attachedTo: 2
slave: true

projectile: 0

turnSpeed: 0
turnSpeedAcceleration: 0

shoot_sound:lighting_burst
shoot_sound_vol:0.7
shoot_flame:CUSTOM:sparks*9,CUSTOM:shockwave*2
shoot_light:#FFcceeee

canShoot: true

warmup: 30

image: mammoth_tank_coil.png

chargeEffectImage: SHARED:lighting_charge.png

recoilOffset: -3
recoilOutTime: 6
recoilReturnTime: 35

[turret_Iceage]
x: 0
y: 0
invisible: true
linkDelayWithTurret: 1
attachedTo: 2
slave: true
shoot_sound:cannon_firing
shoot_sound_vol:1.0
shoot_flame:CUSTOM:shockwave2,CUSTOM:ColdWind*6
projectile: Iceage
resourceUsage:shield=-300
canAttackCondition: if self.hasFlag(id=1)

[turret_Iceage2]
x: 0
y: 0
invisible: true
canShoot: false
shoot_sound:cannon_firing
shoot_sound_vol:1.5
projectile: Iceage2

[turret_2]
#turret
x: 0
y: 0

canShoot: false

turnSpeed: 2.5
turnSpeedAcceleration: 0.18
turnSpeedDeceleration: 0.35

recoilOffset: -1.5
recoilOutTime: 6
recoilReturnTime: 35

[projectile_0]
tags= T-projectile
directDamage: 375
life: 1
speed: 0

lightColor: #FFcceeee
lightSize: 1.0

deflectionPower: -1

spawnProjectilesOnEndOfLife: 1*3

[projectile_1]
tags= T-projectile
#directDamage: 130
areaDamage: 125
areaRadius: 25
areaDamageNoFalloff: true

life: 35
instant: true
lightingEffect: true
largeHitEffect: true


shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0

buildingDamageMultiplier: 0.5

explodeEffect:CUSTOM:lightningShock, CUSTOM:sparks*3
explodeEffectOnShield:CUSTOM:lightningShock, CUSTOM:shockwave

spawnUnit: 猛犸闪电

[projectile_Iceage]
tags= T-projectile
life: 50
instant:true
areaDamage: 375
areaRadius: 100

armourIgnoreAmount:50

shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0

buildingDamageMultiplier: 0.5

pushForce: 3000
pushVelocity: 4.5

spawnUnit: 冷离子

explodeEffect: CUSTOM:shockwave2, CUSTOM:小碎冰*7, CUSTOM:小雪花*8, CUSTOM:小冰雾*2
explodeEffectOnShield: CUSTOM:shockwave2, CUSTOM:小碎冰*7, CUSTOM:小雪花*8, CUSTOM:小冰雾*2

[projectile_Iceage2]
tags= T-projectile
life: 50
instant:true
areaDamage: 375
areaRadius: 210

armourIgnoreAmount:50

shieldDamageMultiplier: 1
shieldDefectionMultiplier: 0

buildingDamageMultiplier: 0.5

pushForce: 6000
pushVelocity: 10

explodeEffect: CUSTOM:shockwave3, CUSTOM:碎冰*12, CUSTOM:雪花*12, CUSTOM:冰雾*2

[effect_lightningShock]
life: 60

hOffset: 0
dirOffset: 0

fadeInTime: 0
fadeOut: false

attachedToUnit: true

image: SHARED:lightning_shock.png
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFramePingPong: false
animateFrameSpeed: 0.5

[effect_sparks]
attachedToUnit: false
life: 150
physics: true
xSpeedRelativeRandom: 1.6
ySpeedRelativeRandom: 1.6
hSpeed: 3
image: SHARED:spark.png
priority: verylow

[effect_sparks2]
attachedToUnit: false
life: 300
physics: true
xSpeedRelativeRandom: 2.0
ySpeedRelativeRandom: 2.0
scaleFrom: 2
scaleTo: 2
hSpeed: 4
image: SHARED:spark.png
priority: high

[effect_shockwave]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 1.5
color: #63e6e8

[effect_shockwave2]
image: shockwave2.png
life: 30
scaleFrom: 0
scaleTo: 3.5
color: #63e6e8

[effect_shockwave3]
image: shockwave2.png
life: 30
scaleFrom: 0
scaleTo: 8.5
color: #63e6e8

[effect_小碎冰]
attachedToUnit: false
life: 120
fadeInTime:2
physics: true
xSpeedRelativeRandom: 1.3
ySpeedRelativeRandom: 1.3
scaleFrom: 0.1
scaleTo: 0.1
hSpeed: 3
alpha: 0.7
dirOffsetRandom:180
image: 冰块.png
priority:low

[effect_小雪花]
attachedToUnit: false
life: 30
fadeInTime:3
xSpeedRelativeRandom: 3.5
ySpeedRelativeRandom: 3.5
scaleFrom: 0.08
scaleTo: 0.08
dirOffsetRandom:180
dirSpeedRandom: 10
image: 雪花.png
priority: low

[effect_碎冰]
attachedToUnit: false
life: 200
fadeInTime:2
physics: true
xSpeedRelativeRandom: 3.0
ySpeedRelativeRandom: 3.0
scaleFrom: 0.1
scaleTo: 0.1
hSpeed: 3
alpha: 0.7
dirOffsetRandom:180
image: 冰块.png
priority:low

[effect_雪花]
attachedToUnit: false
life: 30
fadeInTime:3
xSpeedRelativeRandom: 7.0
ySpeedRelativeRandom: 7.0
scaleFrom: 0.1
scaleTo: 0.1
dirOffsetRandom:180
dirSpeedRandom: 20
image: 雪花.png
priority: low

[effect_小冰雾]
attachedToUnit: false
life: 30
scaleFrom: 0.1
scaleTo: 1.2
dirOffsetRandom:180
dirSpeedRandom: 0.3
image: 白雾.png
color: #63e6e8

[effect_冰雾]
attachedToUnit: false
life: 35
scaleFrom: 0.1
scaleTo: 3.5
dirOffsetRandom:180
dirSpeedRandom: 0.3
image: 白雾.png
color: #63e6e8

[effect_scoutTrail]
createWhenOverLiquid: false
createWhenZoomedOut: false
priority:low
life: 50
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:5
scaleFrom: 1.0
scaleTo: 3.5
alpha: 1.0
drawUnderUnits:true
xOffsetRelative:16
yOffsetRelative:-33
xSpeedRelativeRandom:0.2
atmospheric: true
stripIndex:dust

[effect_scoutTrail2]
createWhenOverLiquid: false
createWhenZoomedOut: false
priority:low
life: 50
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:5
scaleFrom: 1.0
scaleTo: 3.5
alpha: 1.0
drawUnderUnits:true
xOffsetRelative:-16
yOffsetRelative:-33
xSpeedRelativeRandom:0.2
atmospheric: true
stripIndex:dust

[movement]
movementType: LAND
moveSpeed: 0.5
moveAccelerationSpeed: 0.02
moveDecelerationSpeed: 0.06

reverseSpeedPercentage:1.0

maxTurnSpeed: 1
turnAcceleration: 0.1

moveSlidingMode :false
moveIgnoringBody:false



