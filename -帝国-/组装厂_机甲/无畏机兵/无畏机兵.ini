
[core]
name: 无畏机兵
displayText: 无畏机兵
displayDescription: -攻击地面与空中 \n -逐渐加快的激光机枪 \n -仅对地等离子巨炮 \n -可使用一次能源过充 \n -机枪最终间隔: 0.16s
class: CustomUnitMetadata
price: 12000
maxHp: 3200
mass: 20000
tags: units

techLevel: 2
buildSpeed: 0.0004

armour: 10
armourMinDamageToKeep: 10

radius: 30
displayRadius: 30
shieldRenderRadius: 35

fogOfWarSightRange: 18

numBitsOnDeath: 8

transportSlotsNeeded: 3

shieldRegen: -1

energyMax: 12
energyRegen: -0.01
energyStartingPercentage: 0

[action_能源过充]
isVisible: if not self.hasFlag(id=1)
convertTo: 无畏机兵[能源过充]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
id: 能源过充
text: 能源过充
description: -在12s内能量会高速增长并获得能量护盾 \n -当能量达到临界值时会高速损伤机体直到爆炸 \n -机动增强与攻速输出大幅强化且开火消耗能量 \n -在能量溢出损伤时会加速充能护盾 \n -状态结束后有剩余能量时攻速降低 \n -请尽可能处于开火状态 \n -该技能只可使用一次
buildSpeed: 3s
addResources: setFlag=1
iconImage: laser_tank_charge.png
descriptionAddUnitStats: ${section.convertTo}

addActionCooldownTime: 12s

[hiddenAction_能源冷却]
autoTrigger: if self.resource.能源冷却>0 and self.isEnergyEmpty
setResourcesWithLogic: 能源冷却=0
setUnitMemory: 属性[18]=0, 属性[15]=0
alsoTriggerAction: 属性变化

[resource_能源冷却]
hidden: true

[graphics]
total_frames: 1
image:       无畏机兵.png
image_wreak: 无畏机兵残骸.png
image_shield: red_shield.png
image_turret: NONE

teamColorsOnTurret: true

showEnergyBar: false
showShieldBar: false

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2

lock_body_rotation_with_main_turret: true


[decal_能源红条框]
isVisible: if not self.isEnergyEmpty
image: 白色条框.png
color: #FF0000
alpha: 0.8

layer: beforeUI
alwaysStartDirAtZero: true
yOffsetAbsolute: ${core.radius + 12}
xOffsetAbsolute: 0.5

imageScaleX: ${core.radius - 0.5}
lineWidth: ${core.radius}

onlyWhileAlive: true

[decal_能源红条-左边框]
@copyFromSection: decal_能源红条框
image: 白色条左边框.png

xOffsetAbsolute: -${core.radius - 0.5}
imageScaleX: 1

[decal_能源红条-右边框]
@copyFromSection: decal_能源红条-左边框
image: 白色条右边框.png

xOffsetAbsolute: ${core.radius + 0.5}

[decal_能源红条-临界线]
@copyFromSection: decal_能源红条-左边框

xOffsetAbsolute: (-${core.radius/2})+2 + (${core.radius} / (self.maxEnergy/7))

[decal_能源红条]
@copyFromSection: decal_能源红条框
image: 白色条.png
color: #FF0000

xOffsetAbsolute: -${core.radius}
imageScaleX: ${core.radius} * (2/self.maxEnergy) * self.energy


[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 20
turretTurnSpeed: 3

maxAttackRange: 240
shootDelay: 31

turretRotateWithBody: false

[hiddenAction_属性改变设定]
setUnitMemory: 属性[41]=cos(180)*(${turret_3.warmupShootDelayTransfer} / ${attack.shootDelay})

[turret_1]
#主体
invisible: true
canShoot: false
x: 0
y: 0
size: 0
idleDir: 0
turnSpeed: 3.2
turnSpeedAcceleration: 0.3
aimOffsetSpread: 0

[turret_2]
#右臂
image: 机兵炮.png
attachedTo: 1
#slave: true
x: 25
y: 0
idleDir: 0
size: 40
limitingAngle: 60

turnSpeed: 3
turnSpeedAcceleration: 1.0
shoot_sound:plasma_fire
shoot_sound_vol:0.3
shoot_flame:CUSTOM:lightSlowFade, 喷雾*2
shoot_light:#ff0000

canAttackFlyingUnits: false

recoilOffset: -2
recoilOutTime: 4
recoilReturnTime: 20

delay: 85
warmup: 25

chargeEffectImage: laser_tank_charge.png

projectile: 1

aimOffsetSpread: 0

[turret_3]
#左臂
image: 机兵机枪.png
attachedTo: 1
#slave: true
x: -25
y: 0
barrelY: 20
idleDir: 0
limitingAngle: 60

turnSpeed: 3.5
turnSpeedAcceleration: 1.0
shoot_sound:plasma_fire
shoot_sound_vol:0.08
shoot_flame: CUSTOM:激光粒
shoot_light:#FFff0000

warmup: 150

warmupCallDownRate: 1

warmupNoReset: true
warmupShootDelayTransfer: 21

projectile: 2


[turret_4]
#肩甲
x: 0
y: 0
attachedTo: 1
slave: true
idleDir: 0

turnSpeed: 0

canShoot: false
image: 无畏机兵.png


[projectile_1]
tags= T-projectile
#等离子
areaDamage: 380
areaRadius: 40
areaDamageNoFalloff: true
life: 80
speed: 0
targetSpeed: 20
targetSpeedAcceleration: 0.7

drawType: 2
frame: 4
drawSize: 1
trailEffect: CUSTOM:projectileTrail
trailEffectRate: 1

deflectionPower: 3

#trailEffectRate: true

#lightColor:#ffffff

explodeEffect: CUSTOM:eff*8, smallExplosion, CUSTOM:hitLightFlash, hitLightFlash2

explodeEffectOnShield: CUSTOM:hitLightFlash

effectOnCreate: CUSTOM:projectileLight

[projectile_2]
tags= T-projectile
#激光
directDamage: 55
life: 60

deflectionPower: -1

speed: 0
targetSpeed: 20
targetSpeedAcceleration: 1

lightColor: #ff0000

laserEffect: true


[effect_warmup]
priority:high
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #ff0000
scaleFrom: 0.1
scaleTo: 0.1
alpha: 0.8
drawUnderUnits:false
ySpeedRelative:3.9

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: true
color: #ff0000
scaleFrom: 0.7
scaleTo: 0.7
alpha: 0.5
drawUnderUnits:true


[effect_projectileTrail]
image: SHARED:light_50.png
life: 29
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.4
alpha: 0.8
drawUnderUnits:true
#ySpeedRelative:-1


[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #ff0000
fadeInTime:2
scaleFrom: 1.0
scaleTo: 0.8
alpha: 1.0
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_hitLightFlash]
priority:high

image: SHARED:light_50.png
life: 19
fadeOut: true
attachedToUnit: false
color: #ff0000

scaleFrom: 2.5
scaleTo: 2.5
alpha: 0.8
drawUnderUnits:false

[effect_hitLightFlash2]
@copyFromSection: effect_hitLightFlash
life: 25
image: 烁闪光.png
fadeInTime: 2
scaleFrom: 0.3
scaleTo: 0.6
dirOffsetRandom: 180


[effect_eff]
#
stripIndex: effects
frameIndex: 0
priority:low

life: 40
lifeRandom: 10
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime:5
hSpeed: 1.0
scaleFrom: 0.9
scaleTo: 2.1
alpha: 0.5
drawUnderUnits:false
#yOffsetRelative:-7
#xOffsetRelativeRandom:3
xSpeedRelativeRandom:1
ySpeedRelative:0.5
ySpeedRelativeRandom:1

shadow: true
atmospheric: true

[effect_喷雾]
stripIndex: effects
priority: verylow

life: 35
lifeRandom: 8
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime: 8
scaleFrom: 0.7
scaleTo: 1.1
alpha: 0.7
drawUnderUnits:false
yOffsetRelative: -7
xOffsetRelativeRandom: 3
xSpeedRelativeRandom: 0.8
ySpeedRelative: 1
ySpeedRelativeRandom: 0.3

atmospheric: true


[effect_激光粒]
image: SHARED:light_50.png
life: 25
lifeRandom: 5
fadeOut: true
attachedToUnit: false
color: #ff0000
fadeInTime: 2
scaleFrom: 0.15
scaleTo: 0.15
alpha: 1.7
drawUnderUnits: true
pivotOffsetRandom: 15
xOffsetRelativeRandom: 6
ySpeedRelative: 3
ySpeedRelativeRandom: 1
atmospheric: true

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.6
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.17

reverseSpeedPercentage: 1.0

maxTurnSpeed: 5.0
turnAcceleration: 0.5

moveSlidingMode :false
moveIgnoringBody:false


[leg_1]
x: -15
y: 0
attach_x: -8
attach_y: 0
moveSpeed: 2.1

rotateSpeed: 7

heightSpeed: 0.8
resetAngle:25

image_leg:  无畏腿.png
image_foot: 机兵脚.png

#draw_foot_on_top: true
#dust_effect: false

holdDisMin: 21
holdDisMax: 45


[leg_2]
x: 15
y: 0
attach_x: 8
attach_y: 0
copyFrom: 1