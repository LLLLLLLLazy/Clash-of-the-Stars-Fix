
[core]
name: 仙肴圣餐
displayDescription: -范围持续治疗并增加30%攻速与移速
class: CustomUnitMetadata
price: 0
maxHp: 1
mass: 999999

tags=magic, 狂猎技能
techLevel: 2
buildSpeed: 10.0s
isBuilding: true
footprint: 1,1,-1,-1
constructionFootprint: 1,1,-1,-1

fogOfWarSightRange: 15

#隐藏单位本身
showInEditor: false
radius: 0
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true
showOnMinimapToEnemies: false

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 20

[hiddenAction_泡泡]
autoTriggerOnEvent: completeAndActive
spawnEffects: CUSTOM:毒雾1*5, CUSTOM:技能圈, CUSTOM:技能圈2
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 1

[hiddenAction_治疗区]
autoTrigger: if self.hasFlag(id=1)
spawnEffects: CUSTOM:愈雾*2, CUSTOM:愈云*3
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset: 0, 0
fireTurretXAtGround_withProjectile: 3
temporarilyAddTags: 仙肴圣餐

[hiddenAction_kill]
autoTrigger: if self.timeAlive(laterThanSeconds=12)
deleteSelf: true


[effect_技能圈]
stripIndex: shockwave_large
priority: low
life: 90
fadeOut: true
fadeInTime: 15
scaleFrom: 3.8
scaleTo: 4
alpha: 0.3
drawUnderUnits: true
[effect_技能圈2]
@copyFromSection: effect_技能圈
scaleFrom: 3.4

[effect_技能圈愈]
@copyFromSection: effect_技能圈
life: 900
fadeOut: false
scaleFrom: 4
color: #DEBE5BFF

[effect_技能圈3]
@copyFromSection: effect_技能圈愈
alpha: 0.2
scaleFrom: 4.1
scaleTo: 4.1

[template_提取目标]
takeResources_includeUnitsWithinRange: 200
takeResources_includeUnitsWithinRange_team: own
takeResources_excludeUnitsWithoutTags: units
takeResources_maxUnits: 99999

[hiddenAction_状态时间]
@copyFromSection: template_提取目标
autoTrigger: if numberOfUnitsInTeam(withTag="units", greaterThan=0, withinRange=200) and self.tags(includes="仙肴圣餐")
takeResources: 仙肴速度=-1
takeResources_excludeUnitsWithTheseResources: 仙肴速度=2

[resource_仙肴速度]
displayName: 仙肴速度
hidden: true


[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[graphics]
image: SHARED:blank.png
disableLowHpSmoke: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretTurnSpeed: 1000

maxAttackRange: 200
shootDelay: 0

[turret_1]
x: 0
y: -10
barrelHeight: 5

[projectile_1]
life: 200
areaDamage: 300
areaRadius: 200
areaExpandTime: 10
pushVelocity: 6

areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true

speed: 5
targetSpeed: 2.5
targetSpeedAcceleration: 0.02

ballistic: true
ballistic_height: 150
targetGround: true

gravity: 2

deflectionPower: -1
invisible: true

effectOnCreate: CUSTOM:projectileLight, CUSTOM:泡, CUSTOM:泡圈
trailEffect: CUSTOM:projectileTrail
trailEffectRate: 2

explodeEffect: CUSTOM:毒雾2*5, CUSTOM:愈雾*4, CUSTOM:愈云*4, CUSTOM:闪光, CUSTOM:技能圈愈, CUSTOM:技能圈3

spawnProjectilesOnExplode: 2

[projectile_2]
life: 9
instant: true
areaDamage: -300
areaRadius: 200
areaExpandTime: 10
areaDamageNoFalloff: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0
friendlyFire: only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

mutatorX_ifUnitWithTags: 狂猎技能
mutatorX_areaDamageMultiplier: 1
mutatorX_addResourcesAreaHit: setFlag=1

explodeEffect: CUSTOM:治疗冲击波, CUSTOM:冲击波大
spawnProjectilesOnExplode: 分裂泡*6

[projectile_分裂泡]
life: 99
explodeOnEndOfLife: true
targetGround: true
targetGroundSpread: 150

areaDamage: -100
areaRadius: 60
areaRadiusFromEdge: true
areaDamageNoFalloff: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0
friendlyFire: only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

frame: 11
drawSize: 1.6

initialUnguidedSpeedHeight: 1.2
gravity: 0.18

lightSize: 0.6
lightColor: #D18CFF
color: #BE5BFF

trailEffect: CUSTOM:projectileTrail
trailEffectRate: 3
effectOnCreate: CUSTOM:小泡
explodeEffect: CUSTOM:紫爆, CUSTOM:白冲波, CUSTOM:小愈波


[projectile_3]
life: 9
instant: true
areaDamage: -33
areaRadius: 200
areaDamageNoFalloff: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0
friendlyFire: only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0
mutatorX_ifUnitWithTags: 大型虫
mutatorX_areaDamageMultiplier: 2
explodeEffect: CUSTOM:治疗区波
spawnProjectilesOnCreate: 4*3

[projectile_4]
explodeOnEndOfLife: true
life: 100
speed: 5
invisible: true
deflectionPower: -1

areaDamage: -10
areaRadius: 85
areaRadiusFromEdge: true
areaDamageNoFalloff: true
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
shieldDefectionMultiplier: 0
shieldDamageMultiplier: 0
friendlyFire: only-ignoreEnemy
mutator1_ifUnitWithTags: 中立资源
mutator1_areaDamageMultiplier: 0

mutatorX_ifUnitWithTags: 大型虫
mutatorX_areaDamageMultiplier: 2

targetGround: true
targetGroundSpread: 160

explodeEffect: CUSTOM:治疗波, CUSTOM:毒雾3

[effect_治疗冲击波]
stripIndex: shockwave_large
life: 30
scaleFrom: 0
scaleTo: 4
alpha: 0.8
color: #DEBE5BFF

[effect_治疗区波]
@copyFromSection: effect_治疗冲击波
alpha: 0.15

[effect_治疗波]
@copyFromSection: effect_治疗冲击波
stripIndex: shockwave
scaleTo: 2.5
alpha: 0.9

[effect_白冲波]
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 2
alpha: 0.4
dirSpeed: 5
drawUnderUnits: true

[effect_小愈波]
@copyFromSection: effect_白冲波
life: 30
scaleTo: 2
color: #BE5BFF
dirSpeed: -5

[effect_冲击波大]
@copyFromSection: effect_白冲波
stripIndex: shockwave_large
life: 20
scaleTo: 1.8
dirSpeed: 0

[effect_紫爆]
color: #BE5BFF
life: 25
attachedToUnit: true
image: 白爆.png
scaleFrom: 1.2
scaleTo: 1.2
alpha: 0.6
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5
fadeOut: false


[effect_projectileTrail]
image: SHARED:light_50.png
life: 20
fadeOut: true
attachedToUnit: false
color: #BE5BFF
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:true
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1

[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 200
fadeOut: false
attachedToUnit: true
color: #BE5BFF
fadeInTime:2
scaleFrom: 1.5
scaleTo: 1.5
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_闪光]
image: SHARED:light_50.png
life: 45
scaleFrom: 8
scaleTo: 8
alpha: 0.6

[effect_泡]
@copyFromSection: effect_projectileLight
image: bubble.png
alpha: 1

[effect_泡圈]
@copyFromSection: effect_projectileLight
image: purple_shield.png
scaleFrom: 0.5
scaleTo: 0.5
alpha: 1

[effect_小泡]
@copyFromSection: effect_泡
scaleFrom: 0.5
scaleTo: 0.5
alpha: 0.3


[effect_毒雾1]
stripIndex: effects
frameIndex: 0
priority:low

life: 200
fadeOut: true
attachedToUnit: false
color: #BE5BFF
fadeInTime:5
hSpeed: 0.8
scaleFrom: 2
scaleTo: 3
alpha: 0.6
drawUnderUnits:false
xOffsetRelativeRandom: 10
yOffsetRelativeRandom: 10
xSpeedRelativeRandom: 0.6
ySpeedRelativeRandom: 0.6
atmospheric: true

[effect_毒雾2]
@copyFromSection: effect_毒雾1
stripIndex: effects
frameIndex: 0
priority: low
life: 150
fadeOut: true
attachedToUnit: false
color: #DED18CFF
fadeInTime: 15
scaleFrom: 8
scaleTo: 10
alpha: 0.9
xSpeedRelativeRandom: 0.4
ySpeedRelativeRandom: 0.4
xOffsetRelativeRandom: 170
yOffsetRelativeRandom: 170
atmospheric: true

[effect_毒雾3]
@copyFromSection: effect_毒雾1
life: 100
alpha: 0.3
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2

[effect_愈雾]
priority: veryhigh
createWhenOffscreen: true
image: SHARED:light_50.png
life: 200
color: #D18CFF
fadeInTime: 30
scaleFrom: 6
scaleTo: 6
alpha: 0.2
hSpeed: -0.3
dirOffsetRandom: 180
dirSpeedRandom: 0.2
imageShadow: SHADOW:SHARED:light_50.png
xOffsetRelativeRandom: 180
yOffsetRelativeRandom: 180
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2
atmospheric: true

[effect_愈云]
createWhenOffscreen: true
priority: high
stripIndex: effects
life: 200
color: #E46DFF
fadeInTime: 40
scaleFrom: 10
scaleTo: 10
alpha: 0.2
xSpeedAbsolute: -0.1
hSpeed: -0.1
dirOffsetRandom: 180
xOffsetRelativeRandom: 180
yOffsetRelativeRandom: 180
xSpeedAbsoluteRandom: 0.2
ySpeedAbsoluteRandom: 0.2
atmospheric: true

[movement]
movementType: LAND
moveSpeed: 0
moveAccelerationSpeed: 0.0
moveDecelerationSpeed: 0.0
targetHeight:0

maxTurnSpeed: 0.0
turnAcceleration: 0.0

moveSlidingMode :false
moveIgnoringBody:false

[ai]
disableUse:true