[core]



name: 危险流浪者
maxHp: 2400
mass: 21000
price: 3400, 腐蚀=${corrode}
radius: 21
softCollisionOnAll: 5
selfRegenRate: 0.2
fogOfWarSightRange: 16
buildSpeed: 23.8s
techLevel: 2
armour: 8
armourMinDamageToKeep: 8
isBug: true
isBio: true
tags: units, 虫族, 中型虫, 转向攻击
displayDescription: -连续喷吐烈液弹\n-跨越山岭\n-装载3格单位\n-孕育炮弹虫\n-装载有单位时可将数个单位发射出\n-装载有单位时优先攻击周围的指令目标
maxTransportingUnits: 3
transportSlotsNeeded: 3
transportUnitsBlockAirAndWaterUnits: true
transportUnitsCanUnloadUnits: false
transportUnitsKeepBuiltUnits: true

energyMax: 3
energyRegen: 0.02
energyNeedsToRechargeToFull: true

autoTriggerCooldownTime: 10

unitsSpawnedOnDeath: 资源返还(addResources=ammo: 850|energy: 81)

@memory 指定坐标:unit

[action_范围运输]
@copyFromSection: template_范围运输

[hiddenAction_运输路径]
@copyFromSection: template_运输路径

[decal_运输范围]
@copyFromSection: template_运输范围

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits:危险流浪者[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 325
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2


[action_危檐]
isActive: false
isVisible: true
id: ${section.text}
text: 危檐
description: -将装载的单位传送至子弹爆炸处
pos: 0.1
displayType: infoOnly
buildSpeed: 0s

[canBuild_1]
name: 炮弹虫
pos:  1
#price: 300
isVisible: if not self.globalTeamTags(includes='AI系统')

[hiddenAction_消耗资源统计]
autoTriggerOnEvent: queuedUnitFinished
addResources: 已消耗资源=400

[resource_已消耗资源]
displayName: 已消耗资源

[effect_烈光]
attachedToUnit: false
life: 200
xSpeedRelativeRandom: 0.8
ySpeedRelativeRandom: 0.8
ySpeedRelative: -1.0
scaleFrom: 0.6
scaleTo: 0.6
image: SHARED:light_25.png
color: #FF6E00


[hiddenAction_池虫能量]
autoTrigger: if self.hasParent(withTag="池虫")
addResources: energy=0.3

[hiddenAction_池虫强化生产]
autoTrigger: if self.hasParent(withTag="池虫") and not self.hasFlag(id=4)
setUnitMemory: 属性[33]=memory.属性[33]+1.5
alsoTriggerAction: 属性变化
addResources: setFlag=4

[hiddenAction_池虫强化生产结束]
autoTrigger: if not self.hasParent(withTag="池虫") and self.hasFlag(id=4)
setUnitMemory: 属性[33]=memory.属性[33]-1.5
alsoTriggerAction: 属性变化
addResources: unsetFlag=4

[graphics]
image: 危险步行者xjj.png
scaleImagesTo: 34
splastEffect: true
image_turret: NONE
image_shadow: AUTO
shadowOffsetX: 1
shadowOffsetY: 1
teamColorsOnTurret: true
lock_body_rotation_with_main_turret: true

[attack]
canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 220
shootDelay: 10
isMelee: false
#isFixedFiring: true
turretTurnSpeed: 1.5
turretRotateWithBody: false
turretMultiTargeting: false

[turret_1]
x: 0
y: 0
canShoot: false
invisible: true
recoilOffset: -5
recoilOutTime: 1
recoilReturnTime: 20

[turret_2]
x: 0
y: 0
attachedTo: 1
slave: true
energyUsage: 1
invisible: true
projectile: 1
turnSpeedAcceleration: 0.1
shoot_sound: large_gun_fire2
shoot_sound_vol: 0.6
shoot_flame: smoke, CUSTOM:烈光*3
canAttackFlyingUnits: false
canAttackLandUnits: if attacking == activeWaypointTarget or self.transportingCount(empty=true) or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>460
canAttackUnderwaterUnits: false
canAttack: true
barrelX: 0
barrelY: 20

[turret_3]
x: 0
y: 0
copyFrom: 2
energyUsage: 0
delay: 2.5s
invisible: true
recoilOffset: -5
recoilOutTime: 1
recoilReturnTime: 20
projectile: 1

[projectile_1]
tags= T-projectile
areaDamage: 85
areaRadius: 30
areaRadiusFromEdge: true
friendlyFire: true
largeHitEffect: true
unloadUpToXUnitsFromSource: 1
life: 150
speed: 3
targetGround: true

initialUnguidedSpeedHeight: 1.2
gravity: 0.1
frame: 6
drawSize: 1.7
color: #FF6E00
lightColor: #FF6E00
lightSize: 0.6
lightCastOnGround: true
mutatorX_ifUnitWithTags: 自爆虫
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: setFlag=0
spawnProjectilesOnExplode: 2

[projectile_2]
tags= T-projectile
life: 0
speed: 0
explodeOnEndOfLife: true
explodeEffect: CUSTOM:displacement_ripples2
flameWeapon: true
friendlyFire: true
targetGround: true
areaExpandTime: 3
areaDamage: 7
areaRadius: 45
mutatorX_ifUnitWithTags: 自爆虫
mutatorX_areaDamageMultiplier: 0
mutatorX_addResourcesAreaHit: setFlag=0

[effect_displacement_ripples2]
drawType: displacement

image: SHARED:ripple_normal_128.png
life: 40
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 0.9
alpha: 0.5
drawUnderUnits: false

dirOffsetRandom: 180
dirSpeedRandom: 1

[turret_skill]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 9999

[movement]
movementType: OVER_CLIFF
moveSpeed: 0.5
moveAccelerationSpeed: 0.07
moveDecelerationSpeed: 0.03

maxTurnSpeed: 5
turnAcceleration: 0.5

targetHeight: 0
targetHeightDrift: 0

reverseSpeedPercentage: 0.95

[leg_1]
x: 7
y: 12
attach_x: 2
attach_y: 1
moveSpeed: 2.5
moveWarmUp: 1
rotateSpeed: 30
heightSpeed: 0.5
resetAngle: 1
image_leg: 小小小小脚脚.png
image_foot: 啥也不是.png
dust_effect: true
holdDisMin: 0.1
holdDisMax: 0.1
estimatingPositionMultiplier: 0.5
[leg_2]
x: -7
y: 12
attach_x: -2
attach_y: 1
copyFrom: 1
[leg_3]
x: -7
y: -6
attach_x: -2
attach_y: -1
copyFrom: 1
[leg_4]
x: 7
y: -6
attach_x: -2
attach_y: 1
copyFrom: 1

[ai]
upgradedFrom: 炮轰虫

[hiddenAction_AIempty]
autoTrigger: if self.transportingCount(empty=true)
temporarilyAddTags: 空危步
[hiddenAction_AIfull]
autoTrigger: if self.transportingCount(equalTo=1)
temporarilyRemoveTags: 空危步

[action_AI高爆虫生产]
isVisible: if self.globalTeamTags(includes='AI系统')
unitShownInUI: 炮弹虫
textAddUnitName: 炮弹虫
descriptionAddFromUnit: 炮弹虫
descriptionAddUnitStats: 炮弹虫
addUnitsIntoTransport: 炮弹虫
buildSpeed: 3.3s
price: 300
pos: 1

[hiddenAction_AIbuild高爆虫]
autoTrigger: if self.globalTeamTags(includes='AI系统') and self.hasResources(300) and self.transportingCount(lessThan=3) and self.queueSize(empty=true)
alsoQueueAction: AI高爆虫生产
addResources: credits=-300

[hiddenAction_AI集群进攻]
addWaypoint_type: guard
addWaypoint_prepend: true
addWaypoint_maxTime: 20s
addWaypoint_target_nearestUnit_tagged: 电盘虫
addWaypoint_target_nearestUnit_team: own
autoTrigger: if self.globalTeamTags(includes='AI系统') and not self.hasActiveWaypoint(type='guard') and not self.isAttacking and self.globalTeamTags(includes='中刻{I}')