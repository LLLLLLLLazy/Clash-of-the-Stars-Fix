
[core]
name: 等离子体
displayDescription: -等离子护体
price: 0
maxHp: 1
mass: 500
tags=等离子体

techLevel: 1
buildSpeed: 0.001

#隐藏单位本身
showInEditor: false
radius: 0
fogOfWarSightRange: 0
ignoreInUnitCapCalculation: true
disableAllUnitCollisions: true
isUnselectable:	true
canNotBeDirectlyAttacked: true

#禁止死亡痕迹
numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

energyMax: 1
energyRegen: 0
dieOnZeroEnergy: true

autoTriggerCooldownTime: 4
autoTriggerCooldownTime_allowDangerousHighCPU: true

[hiddenAction_创建时]
autoTriggerOnEvent: completeAndActive
addWaypoint_type: move
addWaypoint_maxTime: 0.2s
addWaypoint_position_relativeOffsetFromSelf: 0, 150

[hiddenAction_move]
addWaypoint_type: touchTarget
addWaypoint_prepend: true
addWaypoint_maxTime: 5s
addWaypoint_target_nearestUnit_tagged: 等离子机甲
addWaypoint_target_nearestUnit_team: own
addWaypoint_target_nearestUnit_maxRange: 500
autoTrigger: if not self.hasActiveWaypoint(type='touchTarget') and self.timeAlive(laterThanSeconds=0.2) and not self.hasActiveWaypoint(type='move') and not self.hasActiveWaypoint(type='attackMove')

[hiddenAction_attack]
addWaypoint_type: attackMove
addWaypoint_prepend: true
addWaypoint_maxTime: 1s
addWaypoint_position_relativeOffsetFromSelf: 0, 50
autoTrigger: if (numberOfUnitsInEnemyTeam(withinRange=100, greaterThan=0, withTag='units') or self.hasFlag(id=2)) and not self.hasActiveWaypoint(type='attackMove')

[hiddenAction_寻敌形态]
autoTrigger: if self.timeAlive>5 and not self.hasFlag(id=1) and not self.hasFlag(id=2) or self.hasFlag(id=2) and numberOfUnitsInEnemyTeam(withinRange=500, withTag='units')<1
addResources: setFlag=1, unsetFlag=2
setUnitMemory: 属性[20]=memory.属性[20]+(500-${attack.maxAttackRange}), 属性[24]=0, 属性[21]=0
alsoTriggerAction: 属性变化, move

[hiddenAction_攻击形态]
addResources: unsetFlag=1, setFlag=2
setUnitMemory: 属性[20]=memory.属性[20]-(500-${attack.maxAttackRange}), 属性[24]=5-${movement.moveSpeed}, 属性[21]=6
alsoTriggerAction: 属性变化
addWaypoint_type: attackMove
addWaypoint_prepend: true
addWaypoint_target_fromReference: thisActionTarget
addWaypoint_maxTime: 5s

[hiddenAction_消逝]
autoTrigger: if (numberOfUnitsInTeam(withinRange=310, lessThan=1, withTag='等离子机甲') and not self.hasFlag(id=2)) or (self.timeAlive(laterThanSeconds=9) and not self.hasFlag(id=2) or self.timeAlive(laterThanSeconds=12) and self.hasFlag(id=2))
deleteSelf: true

[graphics]
total_frames: 1

image:        ROOT:/-效果单位-/null.png
image_wreak:  NONE
image_turret: NONE
#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0

movementEffect: CUSTOM:projectileTrail, CUSTOM:warmup, CUSTOM:蓝白焰, CUSTOM:projectile
movementEffectRate: 3


[attack]
isMelee: true

canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

meleeEngangementDistance: 100

turretSize: 0
turretTurnSpeed: 9999

maxAttackRange: 10
shootDelay: 0

[turret_1]
x: 0
y: 0
energyUsage: 1
canAttackCondition: if not self.hasFlag(id=1)

[turret_2]
x: 0
y: 0
canShoot: false
limitingRange: 12
laserDefenceEnergyUse: 1

[turret_3]
x: 0
y: 0
canAttackCondition: if self.hasFlag(id=1)
onShoot_triggerActions: 攻击形态
projectile: null


[projectile_1]
directDamage: 70
life: 50
instant: true

explodeEffect: CUSTOM:hitLightFlash, CUSTOM:explodeSmall, CUSTOM:lightSlowFade, CUSTOM:波

explodeEffectOnShield: CUSTOM:hitLightFlash, CUSTOM:lightSlowFade, CUSTOM:波

effectOnCreate: CUSTOM:projectileLight

[projectile_null]
directDamage: 0
life: 0
speed: 0
invisible: true

[effect_explodeSmall]
image: 白爆.png
life: 25
fadeOut: false
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.8
color: #63e6e8
total_frames: 14
animateFrameStart: 0
animateFrameEnd: 13
animateFrameSpeed: 0.5


[effect_hitLightFlash]
priority:high
image: SHARED:light_50.png
life: 40
fadeOut: true
attachedToUnit: false
color: #63e6e8
scaleFrom: 1.8
scaleTo: 1.8
alpha: 0.6
drawUnderUnits:false

[effect_lightSlowFade]
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.3
scaleTo: 0.2
alpha: 1.7

[effect_波]
#priority: low
stripIndex: shockwave
life: 25
scaleFrom: 0
scaleTo: 1.5
color: #63e6e8
fadeInTime: 3
alpha: 2

[effect_warmup]
priority: verylow
image: SHARED:light_50.png
life: 25
fadeOut: true
attachedToUnit: true
color: #63e6e8
scaleFrom: 0.1
scaleTo: 0.1
alpha: 0.8
drawUnderUnits: false
yOffsetRelativeRandom: 3.9
xOffsetRelativeRandom: 3.9
dirOffsetRandom: 360

[effect_projectileTrail]
priority: verylow
image: SHARED:light_50.png
life: 30
fadeOut: true
attachedToUnit: false
color: #63e6e8
fadeInTime:2
scaleFrom: 0.4
scaleTo: 0.4
alpha: 0.7
#ySpeedRelative:-1

[effect_蓝白焰]
priority: verylow
image: SHARED:light_50.png
life: 45
fadeOut: true
attachedToUnit: false
color: #D9F8FF
scaleFrom: 0.2
scaleTo: 0.2
alpha: 0.7
drawUnderUnits:true

[effect_projectileLight]
priority:veryhigh

image: SHARED:light_50.png
life: 100
fadeOut: true
attachedToUnit: true
color: #63e6e8
fadeInTime:2
scaleFrom: 0.8
scaleTo: 0.8
alpha: 0.6
drawUnderUnits:false
liveAfterAttachedDies: false

[effect_projectilePassThough]

priority:high
frameIndex: 4
stripIndex: projectiles2
life: 20
fadeOut: true
attachedToUnit: false
color: #FFFFFF
scaleFrom: 0.8
scaleTo: 0.4
alpha: 1
drawUnderUnits:false
ySpeedRelative:2
atmospheric: true

[effect_projectile]
priority: low
frameIndex: 4
stripIndex: projectiles2
life: 30
fadeOut: true
attachedToUnit: false
color: #D9F8FF
scaleFrom: 0.8
scaleTo: 0.4
alpha: 1
drawUnderUnits:false
atmospheric: true

[movement]
movementType: AIR
moveSpeed: 2.8
moveAccelerationSpeed: 1
moveDecelerationSpeed: 0.007

maxTurnSpeed: 6
turnAcceleration: 0.1

targetHeight: 3

moveSlidingMode :false
moveIgnoringBody:false

reverseSpeedPercentage:0

