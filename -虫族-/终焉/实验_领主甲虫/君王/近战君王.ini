
[core]
name: 君王
displayText: 君王
displayDescription: -攻击地面单位 \n -能够爆发冲刺 \n -快
price: credits=21000, 腐蚀=${corrode}
maxHp: 4800
mass: 30000
techLevel: 2
buildSpeed: 0.00025
selfBuildRate: 0.00025
transportSlotsNeeded: 5
experimental: true
fogOfWarSightRange: 18
radius: 23
displayRadius: 23
softCollisionOnAll: 5
selfRegenRate: 0.2
isBio: true
isBug: true
tags: units, 虫族, 大型虫, 大型虫-

unitsSpawnedOnDeath: 资源返还(addResources=ammo:5250|energy:${corrode*0.25})

[hiddenAction_亡灵生成]
autoTriggerOnEvent: destroyed
requireConditional: if self.globalTeamTags(includes='狂猎') and self.globalTeamTags(includes='皎红')
spawnUnits: 君王[亡灵]

[hiddenAction_腐蚀价格]
@global corrode: 4500
autoTrigger: if memory.腐蚀价格!=${corrode}
setUnitMemory: 腐蚀价格=${corrode}

[action_killed]
isActive: false
requireConditional: if not eventSource.self.tags(includes="召唤物")
autoTriggerOnEvent: killedAnyUnit
id: ${section.text}
text: 不朽之王
description: -击杀目标恢复被击杀单位的25%血量并增长其价值的2.5%腐蚀
pos: 0
displayType: infoOnlyStockpile
buildSpeed: 0s
addResourcesWithLogic: hp=eventSource.maxHp*0.25, 腐蚀=eventSource.priceCredits*0.025 + eventSource.readUnitMemory('腐蚀价格', type='float')*0.1

[action_狂猎击杀]
@copyFromSection: template_狂猎击杀

[action_狂猎击杀2]
@copyFromSection: template_狂猎击杀2

[action_chong]
convertTo: 君王[冲刺]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentFields: maxHp, maxShield
id: ${section.text}
text: 死亡收割
description: -冲阵！\n-对沿途敌方陆地单位造成高额伤害 \n-遭遇岩浆或水时会受伤并强行停止
buildSpeed: 2s
whenBuilding_cannotMove: true
whenBuilding_rotateTo_aimAtActionTarget: true
whenBuilding_rotateTo_waitTillRotated: true
addActionCooldownTime: 100s
iconImage: 死神.png
pos: 1
fireTurretXAtGround: magic
fireTurretXAtGround_withProjectile: null
isLocked: if self.isOverLiquid
isLockedMessage: 在陆地使用

[graphics]
imageScale: 1
total_frames: 1
image:        君王.png
image_wreak:  NONE
image_turret: NONE

image_shadow: AUTO
shadowOffsetX:2
shadowOffsetY:2
splastEffect: true

animation_idle_start: 0
animation_idle_end: 0
animation_idle_speed: 60
animation_idle_scale_start:1
animation_idle_scale_end:1.02
animation_idle_pingPong: true

lock_body_rotation_with_main_turret: true
lock_leg_rotation_with_main_turret: true

[animation_attack]
onActions:attack
pingPong:false
arm1_0.05s:{x:0, y:0, dir:0}
arm1_0.1s:{x:-1, y:5, dir:-30}
arm1_0.2s:{x:0, y:8, dir:-70}
arm1_0.4s:{x:0, y:6, dir:-50}
arm1_0.5s:{x:0, y:2, dir:-20}
arm1_0.6s:{x:0, y:1, dir:-10}
arm1_0.7s:{x:0, y:0, dir:0}

arm2_0.05s:{x:0, y:0, dir:0}
arm2_0.1s:{x:1, y:5, dir:30}
arm2_0.2s:{x:0, y:8, dir:70}
arm2_0.4s:{x:0, y:6, dir:50}
arm2_0.5s:{x:0, y:2, dir:20}
arm2_0.6s:{x:0, y:1, dir:10}
arm2_0.7s:{x:0, y:0, dir:0}


[attack]
isMelee: true
meleeEngangementDistance: 150

canAttack: true
canAttackFlyingUnits: false
canAttackLandUnits:   if self.queueSize(empty=true)
canAttackUnderwaterUnits: false

#isFixedFiring: true

turretSize: 35
turretTurnSpeed: 4

maxAttackRange: 25
shootDelay: 0.7s
aimOffsetSpread: 0

[turret_1]
x: 0
y: 0
canAttackMaxAngle: 10
shoot_sound:large_gun_fire2
shoot_sound_vol:0.2
recoilOffset: 12
recoilOutTime: 6
recoilReturnTime: 18
shoot_light:#afafaf

[projectile_1]
tags= T-projectile
life: 0
explodeOnEndOfLife: true
areaDamage: 720
areaRadius: 80
explodeEffect: CUSTOM:刀光, smallExplosion
explodeEffectOnShield: CUSTOM:刀光

[turret_magic]
x: 0
y: 0
invisible: true
canShoot: false
limitingRange: 1500

[projectile_null]
tags= T-projectile
life: 0
invisible: true
areaDamage: 0

[effect_刀光]
image:半波.png
life:40
fadeOut: true
attachedToUnit:true
scaleFrom:0.8
scaleTo:0.8
alpha: 0.7
delayedStartTimer:10
yOffsetRelative:-8
#xOffsetRelative:5
drawUnderUnits:true
atmospheric:true
alsoEmitEffects: CUSTOM:刀光波
[effect_刀光波]
image:半波.png
life:20
fadeOut: true
attachedToUnit:true
scaleFrom:0.8
scaleTo:0.8
alpha: 0.5
delayedStartTimer:40
yOffsetRelative:-8
#xOffsetRelative:5
drawUnderUnits:true
atmospheric:true
ySpeedRelative:5

[arm_1]
x:8
y:5
image_end:右镰.png
image_end_teamColors:true
drawOverBody:false
#drawDirOffset:10
moveSpeed:18
[arm_2]
x:-8
y:5
image_end:左镰.png
image_end_teamColors:true
drawOverBody:false
#drawDirOffset:-10
moveSpeed:18

[leg_1]
x: -25
y: 0
attach_x: 0
attach_y: 0
moveSpeed: 4.1
resetAngle:20
heightSpeed: 0.8
image_leg:  脚.png
image_foot: NONE
drawLegWhenZoomedOut: true
dust_effect: true
holdDisMin: 12
holdDisMax: 30

[leg_2]
x: 25
y: 0
attach_x: 0
attach_y: 0
copyFrom: 1

[leg_3]
x: -20
y: 25
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_4]
x: 20
y: 25
attach_x: 0
attach_y: 2
copyFrom: 1

[leg_5]
x: -20
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1

[leg_6]
x: 20
y: -20
attach_x: 0
attach_y: -2
copyFrom: 1



[movement]
movementType: OVER_CLIFF
moveSpeed: 1.4
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.08
joinsGroupFormations: true

maxTurnSpeed: 3.1
turnAcceleration: 0.3
targetHeight: 3
targetHeightDrift: 0
moveSlidingMode :true
moveIgnoringBody:true
moveSlidingDir:  45
slowDeathFall: true


reverseSpeedPercentage:0





