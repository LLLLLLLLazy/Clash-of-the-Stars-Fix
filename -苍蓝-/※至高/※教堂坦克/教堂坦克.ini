
[core]
name: 教堂坦克
displayText: 教堂坦克·刻之齿
displayDescription: -神圣崇高之白暮教堂 \n -神明大人的光,指引着我们前进! \n -奔流不息的时间长河,通晓胜利的答案 \n -凡之齿,撬动世界 \n -光明的未来,触手可及 \n “毫无疑问触发了BAD END，但我们并非无法挽回”

price: 320000
maxHp: 20000
mass: 150000
tags: units, 教堂坦克, 暮光秩序

armour: 5
armourMinDamageToKeep: 5

generation_resources: credits=50, 时光能量=0.001

experimental: true

fogOfWarSightRange: 30

techLevel: 2
buildSpeed: 251.4s

isBuilder: true

transportSlotsNeeded: 25

selfRegenRate:0.2

energyMax: 5.1
energyRegen: 0
energyRegenWhenRecharging: 0.005
energyNeedsToRechargeToFull: true

radius: 88
#displayRadius: 38

isBio: false
softCollisionOnAll: 16

autoTriggerCooldownTime: 0.11s
#autoTriggerCooldownTime_allowDangerousHighCPU: true

effectOnDeath:CUSTOM:世界*1

[hiddenAction_created]
autoTrigger: if not self.hasFlag(id=0)
#showMessageToAllPlayers: 时间开始流动
showMessageToAllPlayers: 光明的未来,触手可及
addResources: setFlag=0
spawnEffects: CUSTOM:世界*1

[hiddenAction_attack]
autoTrigger: if self.hasFlag(id=1)
convertTo: 教堂坦克[止]
sendMessageTo: ${ConvertUpdate1}
sendMessageWithTags: ${ConvertUpdate2}
convertTo_keepCurrentTags: true
alsoTriggerAction: 属性变化
spawnEffects: CUSTOM:Aura

[hiddenAction_energyFull]
autoTrigger: if self.energy(full=true)
addResources: unsetFlag=2


[hiddenAction_攻击锁定]
autoTriggerOnEvent: newMessage(withTag='攻击标记')
addWaypoint_type: attack
addWaypoint_prepend: true
addWaypoint_target_fromReference: eventData(name='攻击', type='unit')


[action_cure]
isVisible: true
displayType: action
iconImage: 圣光.png
text: 秩序之光
description: -神明大人的光,指引着我们前进! \n -大范围持续治疗
addActionCooldownTime: 100s
resetCustomTimer: true
isLockedMessage: 时间流逝...
isGuiBlinking: if self.hasFlag(id=5)
playSoundAtUnit:vision.ogg:1.0
price: 时光能量=1
buildSpeed: 0
pos:1
addResources: setFlag=5
spawnEffects: CUSTOM:光环, CUSTOM:光时
highPriorityQueue: true

[hiddenAction_重秩]
autoTrigger: if self.customTimer(laterThanSeconds=30) and self.hasFlag(id=5)
addResources: unsetFlag=5
spawnEffects: CUSTOM:光回环

[hiddenAction_光耀]
autoTrigger: if self.hasFlag(id=5)
spawnEffects: CUSTOM:光耀
fireTurretXAtGround: magic
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile:pain

[effect_光耀]
createWhenZoomedOut: false
priority:low
image: pain.png
life: 100
fadeOut: true
attachedToUnit: false
fadeInTime: 20
scaleFrom: 0
scaleTo: 10
alpha: 0.9
dirOffsetRandom: 360
drawUnderUnits: true
atmospheric: true

[effect_光环]
createWhenZoomedOut: false
#priority:low
dirSpeed: 1
image: pain.png
life: 1800
fadeOut: false
attachedToUnit: true
scaleFrom: 10.0
scaleTo: 5.0
alpha: 0.9
drawUnderUnits: false

[effect_光时]
createWhenZoomedOut: false
dirSpeed: 0.24
image: 光印十字.png
life: 1800
fadeOut: true
attachedToUnit: true
scaleFrom: 6
scaleTo: 6
alpha: 0.3
drawUnderUnits: true
#color: #FFE000

[effect_光回环]
createWhenZoomedOut: false
#priority:low
dirSpeed: 1
image: pain.png
life: 100
fadeOut: true
attachedToUnit: true
scaleFrom: 5
scaleTo: 2.5
alpha: 0.7
drawUnderUnits: false

[action_timePause]
displayType: action
iconImage: 时之轮刻.png
text: 时间暂停
description: -在停滞的时间里,开辟前进的道路 \n -所有单位停止行动
addActionCooldownTime: 100s
isGuiBlinking: if self.tags(includes="时间暂停")
playSoundGlobally: 世界.wav:2
price: 时光能量=2
buildSpeed: 0
pos: 2
temporarilyAddTags: 时间暂停
spawnEffects: CUSTOM:displacement_ripples, CUSTOM:displacement_shockwave, CUSTOM:displacement, CUSTOM:时间波, CUSTOM:时间波纹
highPriorityQueue: true
spawnUnits: 时停之幕(alwayStartDirAtZero=true), 时停之幕(offsetX=700,alwayStartDirAtZero=true), 时停之幕(offsetX=1400,alwayStartDirAtZero=true), 时停之幕(offsetX=2100,alwayStartDirAtZero=true), 时停之幕(offsetX=2800,alwayStartDirAtZero=true), 时停之幕(offsetX=-700,alwayStartDirAtZero=true), 时停之幕(offsetX=-1400,alwayStartDirAtZero=true), 时停之幕(offsetX=-2100,alwayStartDirAtZero=true), 时停之幕(offsetX=-2800,alwayStartDirAtZero=true)

[resource_暂停时间]
displayName: 暂停时间

[hiddenAction_暂停时间]
autoTrigger: if self.tags(includes="时间暂停")
addResources: 暂停时间=0.11

[hiddenAction_时间恢复流动]
autoTrigger: if self.tags(includes="时间暂停") and self.hasResources(暂停时间=16)
temporarilyRemoveTags: 时间暂停
showMessageToAllPlayers: 时间开始流动
setResourcesWithLogic: 暂停时间=0
spawnEffects: CUSTOM:displacement_ripples_collect, CUSTOM:displacement_shockwave_collect, CUSTOM:displacement_collect, CUSTOM:时间波收, CUSTOM:时间波纹收

[effect_displacement_ripples]
drawType: displacement
priority: critical

image: SHARED:ripple_normal_128.png
life: 150
fadeOut: true

attachedToUnit: false
color: #FFFFFF
scaleFrom: 0
scaleTo: 20
alpha: 0.7
drawUnderUnits:false

dirOffsetRandom: 180
dirSpeedRandom: 1

showInFog: true
createWhenOffscreen: true

[effect_displacement_shockwave]
@copyFromSection: effect_displacement_ripples
image: SHARED:shockwave_normal_128.png

[effect_displacement]
@copyFromSection: effect_displacement_ripples
image: SHARED:cone_inverted_normal_128.png

[effect_时间波]
stripIndex: shockwave_large
priority: critical
life: 150
fadeOut: true
fadeInTime: 2

attachedToUnit: false
color: #808080
scaleFrom: 0
scaleTo: 24.6
alpha: 0.8
drawUnderUnits: false

dirOffsetRandom: 180
dirSpeedRandom: 1

showInFog: true
createWhenOffscreen: true

[effect_时间波纹]
@copyFromSection: effect_时间波
image: 白涟漪.png
scaleTo: 40
alpha: 0.6

[template_collect]
life: 60
scaleFrom: 20
scaleTo: 0

[effect_displacement_ripples_collect]
@copyFromSection: effect_displacement_ripples, template_collect

[effect_displacement_shockwave_collect]
@copyFromSection: effect_displacement_shockwave, template_collect

[effect_displacement_collect]
@copyFromSection: effect_displacement, template_collect

[template_时间波收]
life: 60
scaleFrom: 24.6
scaleTo: 0

[effect_时间波收]
@copyFromSection: effect_时间波, template_时间波收

[effect_时间波纹收]
@copyFromSection: effect_时间波纹, template_时间波收
scaleFrom: 40

#[action_time]
#isVisible: true
#displayType: action
#iconImage: 时之轮刻.png
#text: 时间乱流
#description: -凡之齿,撬动世界 \n -重置自身 \n -传送至随机位置
#playSoundGlobally:世界.wav:1.5
#price: 100000
#buildSpeed: 0
#pos:2
#fireTurretXAtGround: magic
#fireTurretXAtGround_withOffset:0,0
#fireTurretXAtGround_withProjectile:时间乱流
#spawnEffects: CUSTOM:世界
#deleteSelf: true
#highPriorityQueue: true

[effect_世界]
image: 时之轮刻.png
life: 120
fadeOut: true
scaleFrom: 1.0
scaleTo: 1.0
alpha: 0.5
drawUnderUnits: true
alsoPlaySound:世界.wav:1.5

[projectile_时间乱流]
tags= T-projectile
life: 50
speed: 5
targetGround:true
targetGroundSpread:1000
instant:true
areaDamage: 0
spawnUnit:教堂坦克

#[hiddenAction_D100]
#requireConditional: if not self.isOverPassableTile(type="LAND") and not self.isOverPassableTile(type="WATER")
#autoTriggerOnEvent: created
#addResources: 100000
#deleteSelf: true
#showMessageToPlayer: D100/100

[global_resource_时光能量]
hidden: false
displayName: 时光能量
displayColor: #FFF7B2
priority: 0.8

[graphics]
total_frames: 1
imageScale:	0.35
scaleTurretImagesTo: 97.8

image:        教堂坦克.png
image_wreak: NONE
image_turret: 秩序之光.png

image_shadow: AUTO
shadowOffsetX:3
shadowOffsetY:3

#animation_moving_start: 0
#animation_moving_end: 2
#animation_moving_speed: 3.5

movementEffect: CUSTOM:projectileTrail1,CUSTOM:projectileTrail2
movementEffectRate: 20

[effect_projectileTrail1]
createWhenZoomedOut: false
priority:low
image:divineEssence.png
life: 1200
attachedToUnit: false
fadeInTime:20
scaleFrom: 4.5
scaleTo: 4.5
alpha: 0.1
drawUnderUnits: true
xOffsetRelative:-25
yOffsetRelative:-88

[effect_projectileTrail2]
createWhenZoomedOut: false
priority:low
image:divineEssence.png
life: 1200
attachedToUnit: false
fadeInTime:20
scaleFrom: 4.5
scaleTo: 4.5
alpha: 0.1
drawUnderUnits: true
xOffsetRelative:25
yOffsetRelative:-88

[attack]
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits:   true
canAttackUnderwaterUnits: false

turretSize: 0
turretTurnSpeed: 1

maxAttackRange: 500
shootDelay: 0

#turretMultiTargeting: true

[decal_不可攻击范围]
layer: beforeUI
image: 圆.png
color: #FF5533
alpha: 0.6
onlyTeam: ally
onlyWhenSelectedByAnyPlayer: true
alwaysStartDirAtZero: true


[turret_剩余能量塔]
x: 0
y: 0
invisible: true
attachedTo: 1
slave: true
delay: 0
projectile: null
energyUsage: 0.01
canAttackCondition:	if self.energy(lessThan=0.9)

[turret_1]
#AA式主炮
x: 0
y: 0
idleDir:0

projectile: 攻
size: 32

delay: 20
limitingMinRange: 200
canAttackCondition: if attacking == activeWaypointTarget or not self.hasActiveWaypoint(type='attack') or distanceBetween(attacking, activeWaypointTarget)>1000

energyUsage: 0.05
resourceUsage: setFlag=1

shouldResetTurret: true

turnSpeed: 2.0
turnSpeedAcceleration: 0.1

aimOffsetSpread: 0

warmup:220
chargeEffectImage: 圣光.png
#一个突兀的圣光蓄力效果
warmupCallDownRate: 0.3

[projectile_beam]
tags= T-projectile
#AA式光束
life: 0

instant:true
instantReuseLast: true
instantReuseLast_alsoChangeTurretAim: true
moveWithParent: true
instantReuseLast_keepAreaDamageList: false

beamImage:      beam1.png
beamImageEnd:   beam1_end.png
beamImageStart: beam1_start.png
beamImageOffsetRate: 2

sweepOffset: 100
sweepSpeed: 5

directDamage: 22
#targetGround: true
#targetGroundSpread: 100

areaDamage: 5400

areaHitAirAndLandAtSameTime: true
alwaysVisibleInFog: true

areaRadius: 250

areaExpandTime:25

#buildingDamageMultiplier: 0.1

shouldRevealFog:true
#nukeWeapon:true
spawnUnit: 蘑菇云

color: #FFF9C2

#laserEffect: true

[projectile_null]
tags= T-projectile
directDamage:0
invisible: true
life: 0
speed: 0
explodeEffect: NONE
mutatorX_ifUnitWithTags: 教堂攻击点
mutatorX_directDamageMultiplier: 0
mutatorX_addResourcesDirectHit: setFlag=0

[projectile_攻]
tags= T-projectile
directDamage:0
invisible: true
life: 100
speed: 100
instant: true
explodeEffect: NONE
spawnUnit: 教堂攻击点

[turret_magic]
x: 0
y: 15
canShoot: false
invisible:true

[projectile_pain]
tags= T-projectile
#pain
life: 1
explodeOnEndOfLife:true
speed: 4
drawSize: 0
targetGround:true
explodeEffect:NONE
deflectionPower: -1
areaDamage: -50
areaRadius: 500
areaHitAirAndLandAtSameTime: true
areaHitUnderwaterAlways: true
shieldDefectionMultiplier: 0
armourIgnoreAmount: 999
friendlyFire: only-ignoreEnemy

[effect_Aura]
priority: veryhigh
stripIndex: shockwave
life: 125
dirSpeed: 0.75
scaleFrom: 7
scaleTo: 7
alpha: 0.9
attachedToUnit: true
drawUnderUnits: true
liveAfterAttachedDies: false
color: #FFE100

[movement]
movementType: OVER_CLIFF_WATER
moveSpeed: 0.3
moveAccelerationSpeed: 0.03
moveDecelerationSpeed: 0.03

reverseSpeedPercentage:0.9

maxTurnSpeed: 0.4
turnAcceleration: 0.02

moveSlidingMode :false
moveIgnoringBody:false


