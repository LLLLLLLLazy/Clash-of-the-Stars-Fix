
[core]
name: 充能防御墙
displayText: 风墙
displayDescription: -一道风卷在荒原之上 \n -无视野 \n -护盾值归零后推开周围的敌军 \n -随后快速恢复状态，但会损失少量资金
class: CustomUnitMetadata
price: 550
maxHp: 1000
maxShield: 2000
shieldRegen: 0.1
mass: 10000

fogOfWarSightRange: 1

tags: units, 墙

techLevel: 1
buildSpeed: 10s
#availableInDemo: true

radius: 14

isBio: false
isBuilding: true

footprint: 0,0,0,0
constructionFootprint:0,0,0,0

buildingToFootprintOffsetX:10
buildingToFootprintOffsetY:10

softCollisionOnAll: 0

numBitsOnDeath:	0
explodeOnDeath:	false
hideScorchMark: true

autoTriggerCooldownTime: 6

@memory alpha:float

[action_switch]
convertTo: 充能防御墙[回隐]
displayType: action
id: ${section.text}
text: 回隐
description: -隐匿 \n -不会被敌方所观察到
buildSpeed: 3s
alwaysSinglePress: true
whenBuilding_cannotMove: false
isLocked: if numberOfUnitsInEnemyTeam(withTag='真视之眼', greaterThan=0)
isLockedMessage: 你正被注视着... \n -真视之眼-

[action_reclaim]
id: 自我回收
text: 自毁
description: -自我回收 \n -只退还20%资金(${core.price * 0.20})
displayType: action
ai_isDisabled: true
allowMultipleInQueue: false
buildSpeed: 10s
addResources: credits=${core.price * 0.20}
setResourcesWithLogic: hp=-99999, setFlag=0

[hiddenAction_charging]
autoTrigger: if self.Shield(lessThan=10)
convertTo: 充能状态
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: shockwave
playSoundAtUnit:Wind1.ogg:0.15

[hiddenAction_shockwave]
autoTriggerOnEvent: destroyed
requireConditional: if not self.hasFlag(id=0)
fireTurretXAtGround: 1
fireTurretXAtGround_withOffset:0,0
fireTurretXAtGround_withProjectile: shockwave
playSoundAtUnit:Wind1.ogg:0.15

[graphics]
total_frames: 1
imageScale: 0.8

image: glow_sharp.png
image_shield: null.png
image_wreak: NONE

#scaleImagesTo: 20
#scaleTurretImagesTo: 9

#AUTO
image_shadow: AUTO
shadowOffsetX:0
shadowOffsetY:0


[attack]
canAttack: false
canAttackFlyingUnits: false
canAttackLandUnits:   false
canAttackUnderwaterUnits: false

turretSize: 10
turretTurnSpeed: 0


maxAttackRange: 0
shootDelay: 0

[turret_1]
x:0
y:0
canShoot:false
invisible:true

[projectile_shockwave]
areaDamage: 0
areaRadius: 200
areaExpandTime: 50
life: 50
instant: true
invisible: true
areaHitAirAndLandAtSameTime: true
drawUnderUnits: true
pushForce: 1
pushVelocity: 8

explodeEffect: 快扩散*2, 慢扩散*3, 回升*4

[effect_快扩散]
priority:high

image: 大风.png
life: 25
fadeOut: true
attachedToUnit: false
scaleFrom: 0.1
scaleTo: 3.4
alpha: 0.3
hSpeed: 1
dirSpeed: 10
dirSpeedRandom: 2
dirOffsetRandom: 180
drawUnderUnits:false

[effect_慢扩散]
priority:high

image: 大风.png
life: 50
fadeOut: true
fadeInTime: 15
attachedToUnit: false
scaleFrom: 1.0
scaleTo: 3.8
alpha: 0.3
physics: true
hSpeed: 1.5
dirSpeed: 6
dirSpeedRandom: 1
dirOffsetRandom: 180
drawUnderUnits:false

[effect_回升]
priority:high

image: 大风.png
life: 60
fadeOut: true
fadeInTime: 35
attachedToUnit: false
scaleFrom: 2.6
scaleTo: 1.0
alpha: 0.2
hSpeed: 2
hSpeedRandom: 0.5
dirSpeed: -4
dirSpeedRandom: 1
dirOffsetRandom: 180
drawUnderUnits:false


[arm_1]
x: 0
y: -1
image_end: null.png
spinRate: -8

[decal_arm1]
order: 0.1
layer: onTop
image: 风.png
basePositionFromLegEnd: arm1
imageScale: 0.6
alpha: select(self.id==0, 1, self.readUnitMemory('alpha',type='float'))

[arm_2]
x: 0
y: 2
image_end: null.png
spinRate: 8

[decal_arm2]
@copyFromSection: decal_arm1
order: 0.2
basePositionFromLegEnd: arm2
imageScale: 0.7

[arm_3]
@copyFromSection: arm_2
y: 5
spinRate: -8

[decal_arm3]
@copyFromSection: decal_arm1
order: 0.3
basePositionFromLegEnd: arm3
imageScale: 0.8

[arm_4]
@copyFromSection: arm_2
y: 8
spinRate: 8

[decal_arm4]
@copyFromSection: decal_arm1
order: 0.4
basePositionFromLegEnd: arm4
imageScale: 0.9

[arm_5]
@copyFromSection: arm_2
y: 11
spinRate: -8

[decal_arm5]
@copyFromSection: decal_arm1
order: 0.5
basePositionFromLegEnd: arm5
imageScale: 1.0

[arm_6]
@copyFromSection: arm_2
y: 14
spinRate: 8

[decal_arm6]
@copyFromSection: decal_arm1
order: 0.6
basePositionFromLegEnd: arm6
imageScale: 1.1

[arm_7]
@copyFromSection: arm_2
y: 17
spinRate: -8

[decal_arm7]
@copyFromSection: decal_arm1
order: 0.7
basePositionFromLegEnd: arm7
imageScale: 1.2

[arm_8]
@copyFromSection: arm_2
y: 20
spinRate: 8

[decal_arm8]
@copyFromSection: decal_arm1
order: 0.8
basePositionFromLegEnd: arm8
imageScale: 1.3

[hiddenAction_wind]
autoTrigger: if self.readUnitMemory('alpha',type='float')<1.0
setUnitMemory:alpha=memory.alpha+0.1

[movement]
movementType: NONE
moveSpeed: 0
moveAccelerationSpeed: 0
moveDecelerationSpeed: 0

maxTurnSpeed: 0
turnAcceleration: 0

[ai]

buildPriority: 0.19
noneInBaseExtraPriority: 0.2

maxEachBase: 3

lowPriorityTargetForOtherUnits: true

